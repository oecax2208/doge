"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[68679],{32307:function(e,t,o){o.d(t,{s:function(){return y}});var n=o(92809),s=o(65988),i=o(89361),r=o(16588),a=o(65989),l=o(67294),c=o(84073),d=o(85893);function p(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function u(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?p(Object(o),!0).forEach((function(t){(0,n.Z)(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):p(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}const h={classes:["Create new class","Keep original class","Replace original class","Skip duplicate properties","Overwrite duplicate properties"],tokens:["Create new token","Keep original token","Replace original token"],textStyles:["Create new text style","Keep original text style","Replace original text style","Skip duplicate properties","Overwrite duplicate properties"]},y=e=>{const{onSubmit:t,onDismiss:o,conflicts:n}=e,[p,y]=l.useState(n.classes.reduce(((e,t)=>(e[t]=0,e)),{})),[m,f]=l.useState(n.tokens.reduce(((e,t)=>(e[t]=0,e)),{})),[b,g]=l.useState(n.textStyles.reduce(((e,t)=>(e[t]=0,e)),{}));return(0,d.jsxs)("div",{className:s.default.dynamic([["1448322506",[a.N_.ONE_AND_HALF,a.N_.UNIT,a.N_.UNIT,a.N_.HALF_UNIT,a.N_.HALF_UNIT,a.bo.INACTIVE]]])+" wrapper",children:[(0,d.jsx)("p",{className:s.default.dynamic([["1448322506",[a.N_.ONE_AND_HALF,a.N_.UNIT,a.N_.UNIT,a.N_.HALF_UNIT,a.N_.HALF_UNIT,a.bo.INACTIVE]]])+" modal-title",children:"We have detected some design language conflicts"}),(0,d.jsxs)("div",{className:s.default.dynamic([["1448322506",[a.N_.ONE_AND_HALF,a.N_.UNIT,a.N_.UNIT,a.N_.HALF_UNIT,a.N_.HALF_UNIT,a.bo.INACTIVE]]])+" entities-wrapper",children:[Object.keys(p).length?(0,d.jsx)("p",{className:s.default.dynamic([["1448322506",[a.N_.ONE_AND_HALF,a.N_.UNIT,a.N_.UNIT,a.N_.HALF_UNIT,a.N_.HALF_UNIT,a.bo.INACTIVE]]]),children:"Classes"}):null,Object.entries(p).map((([e,t])=>(0,d.jsxs)("div",{className:s.default.dynamic([["1448322506",[a.N_.ONE_AND_HALF,a.N_.UNIT,a.N_.UNIT,a.N_.HALF_UNIT,a.N_.HALF_UNIT,a.bo.INACTIVE]]])+" entity",children:[(0,d.jsx)("span",{className:s.default.dynamic([["1448322506",[a.N_.ONE_AND_HALF,a.N_.UNIT,a.N_.UNIT,a.N_.HALF_UNIT,a.N_.HALF_UNIT,a.bo.INACTIVE]]]),children:e}),(0,d.jsx)(r.P,{dropdownAnchor:"right",options:h.classes,value:h.classes[t],onChange:t=>((e,t)=>{const o=u({},p);o[t]=h.classes.indexOf(e),y(o)})(t,e)})]},e))),Object.keys(m).length?(0,d.jsx)("p",{className:s.default.dynamic([["1448322506",[a.N_.ONE_AND_HALF,a.N_.UNIT,a.N_.UNIT,a.N_.HALF_UNIT,a.N_.HALF_UNIT,a.bo.INACTIVE]]]),children:"Tokens"}):null,Object.entries(m).map((([e,t])=>(0,d.jsxs)("div",{className:s.default.dynamic([["1448322506",[a.N_.ONE_AND_HALF,a.N_.UNIT,a.N_.UNIT,a.N_.HALF_UNIT,a.N_.HALF_UNIT,a.bo.INACTIVE]]])+" entity",children:[(0,d.jsx)("span",{className:s.default.dynamic([["1448322506",[a.N_.ONE_AND_HALF,a.N_.UNIT,a.N_.UNIT,a.N_.HALF_UNIT,a.N_.HALF_UNIT,a.bo.INACTIVE]]]),children:e}),(0,d.jsx)(r.P,{dropdownAnchor:"right",options:h.tokens,value:h.tokens[t],onChange:t=>((e,t)=>{const o=u({},m);o[t]=h.tokens.indexOf(e),f(o)})(t,e)})]},e))),Object.keys(b).length?(0,d.jsx)("p",{className:s.default.dynamic([["1448322506",[a.N_.ONE_AND_HALF,a.N_.UNIT,a.N_.UNIT,a.N_.HALF_UNIT,a.N_.HALF_UNIT,a.bo.INACTIVE]]]),children:"Text styles"}):null,Object.entries(b).map((([e,t])=>(0,d.jsxs)("div",{className:s.default.dynamic([["1448322506",[a.N_.ONE_AND_HALF,a.N_.UNIT,a.N_.UNIT,a.N_.HALF_UNIT,a.N_.HALF_UNIT,a.bo.INACTIVE]]])+" entity",children:[(0,d.jsx)("span",{className:s.default.dynamic([["1448322506",[a.N_.ONE_AND_HALF,a.N_.UNIT,a.N_.UNIT,a.N_.HALF_UNIT,a.N_.HALF_UNIT,a.bo.INACTIVE]]]),children:e}),(0,d.jsx)(r.P,{dropdownAnchor:"right",options:h.textStyles,value:h.textStyles[t],onChange:t=>((e,t)=>{const o=u({},b);o[t]=h.textStyles.indexOf(e),g(o)})(t,e)})]},e)))]}),(0,d.jsxs)("div",{className:s.default.dynamic([["1448322506",[a.N_.ONE_AND_HALF,a.N_.UNIT,a.N_.UNIT,a.N_.HALF_UNIT,a.N_.HALF_UNIT,a.bo.INACTIVE]]])+" modal-btns",children:[(0,d.jsx)(i.z,{onClick:o,style:"solid",colorScheme:"neutral",children:"Cancel"}),(0,d.jsx)(i.z,{onClick:()=>{t({classes:p,tokens:m,textStyles:b}),o()},style:"solid",colorScheme:"danger",refAttrs:{autoFocus:!0},children:"Submit"})]}),(0,d.jsx)(s.default,{id:"1448322506",dynamic:[a.N_.ONE_AND_HALF,a.N_.UNIT,a.N_.UNIT,a.N_.HALF_UNIT,a.N_.HALF_UNIT,a.bo.INACTIVE],children:[`.modal-title.__jsx-style-dynamic-selector{margin-bottom:${a.N_.ONE_AND_HALF};}`,".modal-btns.__jsx-style-dynamic-selector{-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;}",`.entities-wrapper.__jsx-style-dynamic-selector{padding:${a.N_.UNIT} 0;}`,`.entities-wrapper.__jsx-style-dynamic-selector>p.__jsx-style-dynamic-selector{margin-bottom:${a.N_.UNIT};}`,`.entity.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin-bottom:${a.N_.HALF_UNIT};-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;}`,".entity.__jsx-style-dynamic-selector:last-child,.entity.__jsx-style-dynamic-selector:only-child{margin-bottom:0;}",`.entity.__jsx-style-dynamic-selector>span.__jsx-style-dynamic-selector{margin-left:${a.N_.HALF_UNIT};color:${a.bo.INACTIVE};}`]}),(0,d.jsx)("style",{children:c.W2})]})}},20165:function(e,t,o){o.d(t,{n:function(){return r}});var n=o(89361),s=(o(67294),o(84073)),i=o(85893);const r=e=>{const{title:t,description:o,onSubmit:r,buttonTitle:a}=e;return(0,i.jsxs)("div",{className:"wrapper",children:[(0,i.jsx)("p",{className:"modal-title",children:t}),(0,i.jsx)("p",{className:"modal-description",children:o}),(0,i.jsx)("div",{className:"modal-btns",children:(0,i.jsx)(n.z,{refAttrs:{autoFocus:!0},onClick:r,style:"solid",colorScheme:"neutral",children:a})}),(0,i.jsx)("style",{children:s.df}),(0,i.jsx)("style",{children:s.W2})]})}},83114:function(e,t,o){o.d(t,{H:function(){return T}});var n,s,i,r,a,l,c,d,p,u,h,y,m,f,b,g,I,v=o(73202),j=o(92809),N=o(30773),x=o(76883),S=o(11163),w=o(84003),O=o(20510);const T=new(n=(0,x.f3)("globalAppState"),s=(0,x.f3)("authUserFlow"),i=(0,x.f3)("sentryService"),r=(0,x.f3)("requestMaker"),a=(0,x.f3)("projectRepository"),l=(0,x.f3)("workspacesRepository"),c=(0,x.f3)("appInitFlow"),d=(0,x.f3)("anonymousLoginFlow"),p=class{constructor(){(0,v.Z)(this,"globalAppState",u,this),(0,v.Z)(this,"authUserFlow",h,this),(0,v.Z)(this,"sentryService",y,this),(0,v.Z)(this,"requestMaker",m,this),(0,v.Z)(this,"projectRepository",f,this),(0,v.Z)(this,"workspacesRepository",b,this),(0,v.Z)(this,"appInitFlow",g,this),(0,v.Z)(this,"anonymousLoginFlow",I,this),(0,j.Z)(this,"exec",(async e=>{const{data:t,allowAnonymous:o}=e||{};if(!t)return!1;const n=await this.appInitFlow.init();try{const e=await this.projectRepository.loadBySlug(t);if(!n&&e.accessType===w.W.PRIVATE)return S.default.replace(O.Pr),!1;if(e.accessType===w.W.CLONEABLE||e.accessType===w.W.PUBLIC){if(n||!o)return!0;await this.anonymousLoginFlow.login();if(!(await this.appInitFlow.init()))return!1}const{userData:s}=this.globalAppState.user;if(e.collaborators&&e.collaborators.find((e=>{var t;return(null===(t=e.account)||void 0===t?void 0:t.id)===(null===s||void 0===s?void 0:s.id)})))return!0}catch(s){return S.default.replace(O.Pr),!1}return!0}))}},u=(0,N.Z)(p.prototype,"globalAppState",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),h=(0,N.Z)(p.prototype,"authUserFlow",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),y=(0,N.Z)(p.prototype,"sentryService",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),m=(0,N.Z)(p.prototype,"requestMaker",[r],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),f=(0,N.Z)(p.prototype,"projectRepository",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),b=(0,N.Z)(p.prototype,"workspacesRepository",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),g=(0,N.Z)(p.prototype,"appInitFlow",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),I=(0,N.Z)(p.prototype,"anonymousLoginFlow",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),p)},70257:function(e,t,o){var n,s=o(92809);(0,o(76883).JJ)("thirdPartyAssetsService")(n=class{constructor(){(0,s.Z)(this,"unsplashURL","https://api.unsplash.com"),(0,s.Z)(this,"unsplashToken","4f172bfc2f56c64a432d464953df8d1a010144bba788f10505845607fdba5cea"),(0,s.Z)(this,"pexelURL","https://api.pexels.com/v1"),(0,s.Z)(this,"pexelToken","")}async getCuratedUnsplash(e=1,t=24){return(await fetch(`${this.unsplashURL}/photos?page=${e}&per_page=${t}&client_id=${this.unsplashToken}`)).json()}async searchUnsplash(e,t=1,o=24){return(await fetch(`${this.unsplashURL}/search/photos?query=${e}&page=${t}&per_page=${o}&client_id=${this.unsplashToken}`)).json()}async getUnsplashAPIDownloadUrl(e){return(await fetch(`${e}&client_id=${this.unsplashToken}`)).json()}async getCuratedPexel(e=1,t=10){return(await fetch(`${this.unsplashURL}/curated/?page=${e}&per_page=${t}`,{headers:{Authorization:this.pexelToken}})).json()}async searchPexel(e,t=1,o=10){return(await fetch(`${this.pexelURL}/search?query=${e}&page=${t}&per_page=${o}`,{headers:{Authorization:this.pexelToken}})).json()}})},63410:function(e,t,o){o.d(t,{FG:function(){return n},HC:function(){return i},e5:function(){return r}});const n=e=>{let t;if("undefined"!==typeof window.TouchEvent&&e instanceof TouchEvent)t=e.touches[0]||e.changedTouches[0];else{const o=e;if(0===o.clientX&&0===o.clientY){const o=e.target,{x:n,y:s}=o.getBoundingClientRect();t={clientX:n,clientY:s}}else t={clientX:o.clientX,clientY:o.clientY}}return{x:t.clientX,y:t.clientY}},s=(e,t=0)=>{const{x:o,y:n}=e;let s,i=document.elementFromPoint(o,n);if(null===i)return null;let r=t;for(;r&&i.shadowRoot&&(r-=1,s=i.shadowRoot.elementFromPoint(o,n),s);)i=s;return i},i=(e,t=0)=>{const o=n(e);if(!o.x||!o.y)return;const i=s(o,t);return i&&i.closest?i:void 0},r=(e,t=0)=>{const o=s(e,t);if(o&&o.closest)return o}},34437:function(e,t,o){o.d(t,{P:function(){return g},b:function(){return v}});var n,s,i,r,a,l,c,d,p,u=o(73202),h=o(30773),y=o(89880),m=o(76883),f=o(49899);const b=(async()=>null).constructor;function g(e,t,o){const n=o.value;o.value=n instanceof b?async function(...e){if(!(!e[0]||!e[0].doc))return n.apply(this,e);return I(n,e,this)}:function(...e){if(!(!e[0]||!e[0].doc))return n.apply(this,e);return I(n,e,this,!0)}}function I(e,t,o,n){const s=new v;return n?s.getDocForSyncCallback(e,t,o):s.getDocForAsyncCallback(e,t,o)}let v=(n=(0,m.f3)("projectDoc"),s=(0,m.f3)("projectUIState"),i=(0,m.f3)("sharedbProjectSyncService"),r=(0,m.f3)("guardsService"),a=class{constructor(){(0,u.Z)(this,"projectDoc",l,this),(0,u.Z)(this,"projectUIState",c,this),(0,u.Z)(this,"dbSync",d,this),(0,u.Z)(this,"guardsService",p,this)}async getDocForAsyncCallback(e,t,o){return new Promise((n=>{(this.projectUIState.localWork.nodesUnderLocalWork||this.guardsService.getGuard(y._.VIRTUAL_WORK)?f.JG:this.dbSync.mutate)(this.projectDoc,(async s=>{"object"===typeof t[0]?t[0].doc=s:t.push(s);const i=await e.apply(o,t);n(i)}))}))}getDocForSyncCallback(e,t,o){let n;return(this.projectUIState.localWork.nodesUnderLocalWork||this.guardsService.getGuard(y._.VIRTUAL_WORK)?f.JG:this.dbSync.mutate)(this.projectDoc,(s=>{"object"===typeof t[0]?t[0].doc=s:t.push(s),n=e.apply(o,t)})),n}},l=(0,h.Z)(a.prototype,"projectDoc",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),c=(0,h.Z)(a.prototype,"projectUIState",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),d=(0,h.Z)(a.prototype,"dbSync",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),p=(0,h.Z)(a.prototype,"guardsService",[r],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),a)},42297:function(e,t,o){o.d(t,{j:function(){return y},u:function(){return b}});var n,s,i,r,a,l=o(73202),c=o(92809),d=o(30773),p=o(76883),u=o(34437);function h(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}let y;!function(e){e.UPDATE_STYLE_KEY="setStyleKey",e.UPDATE_ATTR_KEY="setAttrKey",e.UPDATE_CLASS_STYLE="updateClassStyle",e.OVERRIDE_STYLE="overrideStyle",e.ADD_ASSET_PRIMITIVE="addAssetPrimitive",e.DELETE_NODES="deleteNodes",e.ADD_NODES="addNodes",e.COPY_NODES="copyNodes",e.COPY_STYLES="copyStyles"}(y||(y={}));const m=["width","height","backgroundImage","minWidth","minHeight","maxWidth","maxHeight","listStyleImage"],f=(async()=>null).constructor;function b(e){return function(t,o,n){const s=n.value;let i=[];n.value=s instanceof f?async function(...t){i=g.runPreOptimisations(e,t);const o=await s.apply(this,t);return g.runOptimisations(e,t,o,i),o}:function(...t){i=g.runPreOptimisations(e,t);const o=s.apply(this,t);return g.runOptimisations(e,t,o,i),o}}}const g=new(n=(0,p.f3)("imageOptimisationFlow"),s=(0,p.f3)("projectUIState"),i=class{constructor(){(0,l.Z)(this,"imageOptimisationFlow",r,this),(0,l.Z)(this,"projectUIState",a,this)}runPreOptimisations(e,t){if(Object.keys(this.projectUIState.localWork.nodesUnderLocalWork||{}).length)return[];switch(e){case y.COPY_NODES:return this.imageOptimisationFlow.getAssetsLinkedToNodes({nodeIds:t[0].nodes.reduce(((e,o)=>{var n;return null===(n=t[0].doc)||void 0===n||n.nodes.bfs(o.id,(t=>{e.push(t.id)}),!0),e}),[]),doc:t[0].doc});case y.COPY_STYLES:const{targets:e,doc:n}=t[0];return this.imageOptimisationFlow.getAssetsLinkedToNodes({nodeIds:e,doc:n});case y.UPDATE_STYLE_KEY:const s=t[0],{nodeIds:i,doc:r,key:a}=s;return m.includes(a)?this.imageOptimisationFlow.getAssetsLinkedToNodes({nodeIds:i,doc:r}):[];case y.OVERRIDE_STYLE:return this.imageOptimisationFlow.getAssetsLinkedToNodes(function(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?h(Object(o),!0).forEach((function(t){(0,c.Z)(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):h(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}({},t[0]));case y.UPDATE_ATTR_KEY:const l=t[0];if(!l.doc)return[];const d=l.doc.nodes.byId[l.nodeId];if(this.isUpdateAttrByKeyParams(l)&&l.propId&&d&&l.doc.nodes.nodeIsCompInstance(d)){var o;const e=null===(o=l.doc)||void 0===o?void 0:o.components.byId[d.compIdOfCompInstance],t=null===e||void 0===e?void 0:e.propDefinitions[l.propId];return this.imageOptimisationFlow.getAssetsLinkedToNodes({nodeIds:Object.keys((null===t||void 0===t?void 0:t.locations)||{}),doc:l.doc})}return this.imageOptimisationFlow.getAssetsLinkedToNodes({nodeIds:[l.nodeId],doc:l.doc});default:return[]}}runOptimisations(e,t,o,n){var s,i;if(Object.keys(this.projectUIState.localWork.nodesUnderLocalWork||{}).length)return;const r=null===(s=t[0])||void 0===s?void 0:s.doc;switch(e){case y.ADD_NODES:const e=t[0].nodes.map((e=>e.id));return this.runOptimisationForNodes({nodeIds:e,doc:r,unsplashOnly:!0});case y.ADD_ASSET_PRIMITIVE:return this.runOptimisationsForAssets({assetIds:o,doc:t[0].doc});case y.COPY_NODES:return this.runOptimisationsForAssets({assetIds:n,doc:r});case y.COPY_STYLES:const{targets:s,doc:a}=t[0],l=this.imageOptimisationFlow.getAssetsLinkedToNodes({nodeIds:s,doc:a}),c=Array.from(new Set([...l,...n]));return this.runOptimisationsForAssets({assetIds:c,doc:r});case y.UPDATE_STYLE_KEY:const d=t[0],{nodeIds:p,doc:u,key:h}=d;if(!m.includes(h))return[];const f=["width","height"].includes(h),b=this.imageOptimisationFlow.getAssetsLinkedToNodes({nodeIds:p,doc:u,withDescendants:f}),g=Array.from(new Set([...b,...n]));return this.runOptimisationForNodes({nodeIds:p,unsplashOnly:!0,recomputeChildren:f,doc:r}),this.runOptimisationsForAssets({assetIds:g,doc:r});case y.OVERRIDE_STYLE:const I=t[0].nodeIds,v=this.imageOptimisationFlow.getAssetsLinkedToNodes({nodeIds:I,withDescendants:!0});this.runOptimisationForNodes({nodeIds:I,unsplashOnly:!0,recomputeChildren:!0});const j=Array.from(new Set([...v,...n]));return this.runOptimisationsForAssets({assetIds:j,doc:r});case y.DELETE_NODES:return this.runOptimisationsForAssets({doc:null===(i=t[0])||void 0===i?void 0:i.doc,assetIds:n});case y.UPDATE_ATTR_KEY:const N=t[0];if(!r)return[];const x=r.nodes.byId[N.nodeId];if(this.isUpdateAttrByKeyParams(N)&&N.propId&&x&&r.nodes.nodeIsCompInstance(x)){const e=null===r||void 0===r?void 0:r.components.byId[x.compIdOfCompInstance],t=null===e||void 0===e?void 0:e.propDefinitions[N.propId],o=this.imageOptimisationFlow.getAssetsLinkedToNodes({nodeIds:Object.keys((null===t||void 0===t?void 0:t.locations)||{}),doc:r}),s=Array.from(new Set([...o,...n]));return this.runOptimisationForNodes({nodeIds:Object.keys((null===t||void 0===t?void 0:t.locations)||{}),unsplashOnly:!0,doc:r}),this.runOptimisationsForAssets({assetIds:s,doc:r})}this.runOptimisationForNodes({nodeIds:[N.nodeId],unsplashOnly:!0,doc:r});const S=this.imageOptimisationFlow.getAssetsLinkedToNodes({nodeIds:[N.nodeId],doc:r}),w=Array.from(new Set([...S,...n]));return this.runOptimisationsForAssets({assetIds:w,doc:r});case y.UPDATE_CLASS_STYLE:const O={classId:t[0].classId,recomputeChildren:!0};return void this.runOptimisationForClass(O);default:return}}runOptimisationsForAssets(e){const{assetIds:t,doc:o}=e;o&&t&&t.length&&t.forEach((e=>{this.imageOptimisationFlow.computeAssetSizeForComponent({assetId:e,doc:o})}))}runOptimisationForNodes(e){const{nodeIds:t,doc:o,recomputeChildren:n,unsplashOnly:s}=e;!this.projectUIState.localWork.nodesUnderLocalWork&&o&&(null===t||void 0===t||t.forEach((e=>{n?o.nodes.bfs(e,(e=>{this.imageOptimisationFlow.optimiseNodeImages({nodeId:e.id,doc:o,unsplashOnly:s})})):this.imageOptimisationFlow.optimiseNodeImages({nodeId:e,doc:o,unsplashOnly:s})})))}runOptimisationForClass(e){const{classId:t,doc:o}=e;if(!o)return;const n=o.classes.byId[t];this.runOptimisationForNodes({nodeIds:Object.keys((null===n||void 0===n?void 0:n.usedInNodes)||{}),doc:o,recomputeChildren:!0})}isUpdateAttrByKeyParams(e){return void 0!==e.value}},r=(0,d.Z)(i.prototype,"imageOptimisationFlow",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),a=(0,d.Z)(i.prototype,"projectUIState",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),(0,d.Z)(i.prototype,"runOptimisationsForAssets",[u.P],Object.getOwnPropertyDescriptor(i.prototype,"runOptimisationsForAssets"),i.prototype),(0,d.Z)(i.prototype,"runOptimisationForNodes",[u.P],Object.getOwnPropertyDescriptor(i.prototype,"runOptimisationForNodes"),i.prototype),(0,d.Z)(i.prototype,"runOptimisationForClass",[u.P],Object.getOwnPropertyDescriptor(i.prototype,"runOptimisationForClass"),i.prototype),i);Object.freeze(g)},29869:function(e,t,o){o.d(t,{k:function(){return p}});var n=o(92809),s=o(65988),i=o(67294),r=o(30214),a=o(65989),l=o(92763),c=o(11987),d=o(85893);class p extends i.Component{constructor(...e){super(...e),(0,n.Z)(this,"input",null),(0,n.Z)(this,"selectOption",(e=>{const{currentTarget:t}=e,{disabled:o,onChange:n,selectedOption:s}=this.props,{index:i}=t.dataset;if(!t||!i||o)return;const r=this.props.options[i];s===r.value?n("",{property:this.props.name}):n(r.value,{property:this.props.name})}))}shouldComponentUpdate(e){return e.options!==this.props.options||e.selectedOption!==this.props.selectedOption}render(){const{selectOption:e}=this,{options:t,hasIcon:o,iconSize:n,disabled:i,selectedOption:p,style:u,inheritedOption:h,onContextMenu:y,onDeleteOption:m,readonly:f}=this.props;return(0,d.jsxs)("ul",{style:u,className:s.default.dynamic([["1822180587",[a.N_.UNIT,a.bo.DEFAULT,a.OK.FADE,a.n_.DEFAULT,a.Pt.LIGHT_01,a.bo.HIGHLIGHT,a.bo.HIGHLIGHT,a.bo.HIGHLIGHT,a.X4.DEFAULT,a.Pt.DARK_01,a.X4.DEFAULT,a.Pt.DARK_02]]]),children:[t.map(((t,u)=>{const b=t.label||t.value,g=b.length>20||o?t.value:"";return(0,d.jsxs)("li",{onContextMenu:e=>y(e,t),"data-tooltip-name":g,"data-tooltip-direction":"vertical","data-index":u,onClick:e,className:s.default.dynamic([["1822180587",[a.N_.UNIT,a.bo.DEFAULT,a.OK.FADE,a.n_.DEFAULT,a.Pt.LIGHT_01,a.bo.HIGHLIGHT,a.bo.HIGHLIGHT,a.bo.HIGHLIGHT,a.X4.DEFAULT,a.Pt.DARK_01,a.X4.DEFAULT,a.Pt.DARK_02]]])+" "+`option\n              ${p===t.value?"option-active":""}\n              ${p||h!==t.value?"":"option-inherited"}\n              ${i?"disabled":""}\n              ${o?"image-option":""}\n            `,children:[o&&t.display?(0,d.jsx)(l.J,{type:t.display,size:n,color:p===t.value?a.X4.DEFAULT:void 0}):(0,d.jsx)("span",{className:s.default.dynamic([["1822180587",[a.N_.UNIT,a.bo.DEFAULT,a.OK.FADE,a.n_.DEFAULT,a.Pt.LIGHT_01,a.bo.HIGHLIGHT,a.bo.HIGHLIGHT,a.bo.HIGHLIGHT,a.X4.DEFAULT,a.Pt.DARK_01,a.X4.DEFAULT,a.Pt.DARK_02]]]),children:b}),!m||f||t.irremovable?null:(0,d.jsx)(c.m,{onDelete:()=>m(t)}),(0,d.jsx)(r._,{name:g,children:(0,d.jsx)(d.Fragment,{children:g})})]},u)})),(0,d.jsx)(s.default,{id:"1822180587",dynamic:[a.N_.UNIT,a.bo.DEFAULT,a.OK.FADE,a.n_.DEFAULT,a.Pt.LIGHT_01,a.bo.HIGHLIGHT,a.bo.HIGHLIGHT,a.bo.HIGHLIGHT,a.X4.DEFAULT,a.Pt.DARK_01,a.X4.DEFAULT,a.Pt.DARK_02],children:[".wrapper.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}","ul.__jsx-style-dynamic-selector{-webkit-flex:1;-ms-flex:1;flex:1;list-style-type:none;padding:0;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;}",`.option.__jsx-style-dynamic-selector{position:relative;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;height:32px;min-width:24px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;text-transform:capitalize;padding:0 ${a.N_.UNIT};color:${a.bo.DEFAULT};-webkit-transition:${a.OK.FADE};transition:${a.OK.FADE};border-radius:${a.n_.DEFAULT};}`,".option.__jsx-style-dynamic-selector span.__jsx-style-dynamic-selector{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;text-align:left;max-width:20ch;}",`.option.__jsx-style-dynamic-selector:not(.option-active):hover{background:${a.Pt.LIGHT_01};color:${a.bo.HIGHLIGHT};}`,`.option.__jsx-style-dynamic-selector:not(.option-active):hover svg [class*='stroke']{stroke:${a.bo.HIGHLIGHT};}`,`.option.__jsx-style-dynamic-selector:not(.option-active):hover svg [class*='fill']{fill:${a.bo.HIGHLIGHT};fill-opacity:1;}`,`.option-active.__jsx-style-dynamic-selector{color:${a.X4.DEFAULT};background-color:${a.Pt.DARK_01};}`,`.option-inherited.__jsx-style-dynamic-selector{background-color:${a.Pt.DARK_02};}`,".option.disabled.__jsx-style-dynamic-selector{opacity:0.4;cursor:auto;}",".option.image-option.__jsx-style-dynamic-selector{height:32px;width:32px;padding:0;}",".option.image-option-row.__jsx-style-dynamic-selector{-webkit-transform:rotate(90deg);-ms-transform:rotate(90deg);transform:rotate(90deg);}"]})]})}}(0,n.Z)(p,"defaultProps",{hasIcon:!1,disabled:!1,iconSize:16,selectedOption:"",style:{},inheritedStyle:{},readonly:!1})},86451:function(e,t,o){o.d(t,{R:function(){return p}});var n=o(92809),s=o(67294),i=o(31768),r=o(31241),a=o(72790),l=o(85893);function c(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function d(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?c(Object(o),!0).forEach((function(t){(0,n.Z)(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):c(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}const p=e=>{const{0:t,1:o}=(0,s.useState)(),{0:n,1:c}=(0,s.useState)(""),{0:p,1:u}=(0,s.useState)(!1),h=(0,s.useRef)(),y=(0,s.useRef)();(0,s.useEffect)((()=>{o(e.value)}),[e.value]),(0,s.useEffect)((()=>{h.current=t}),[t]),(0,s.useEffect)((()=>()=>{y.current&&m({key:e.property,value:h.current,nodeIds:e.selectedNodes})}),[]),(0,s.useEffect)((()=>{p&&(e.value!==t&&(y.current=!1,m({key:e.property,value:t,tokenId:n})),c(""),u(!1))}),[p]);const m=t=>{const{value:n}=t;if(!e.appendUnitToValue&&!e.appendHashtagToHexColor||!n)return e.onSave(t);if(e.appendHashtagToHexColor){let s=n;const i=`#${n.toString().trim()}`;return(0,r.validateHTMLColorHex)(i)&&(s=i),void(s===e.value?o(s):e.onSave(d(d({},t),{},{value:s})))}if(!isNaN(n)){const s=a.UNITS.find((t=>t&&String(e.value).includes(t)))||"px",i=n.toString()+s;i===e.value?o(i):e.onSave(d(d({},t),{},{value:i}))}else e.onSave(t)};return(0,l.jsx)(i.P,d(d({size:"flexible",style:"label"},e.inputProps),{},{value:t,disableDrag:e.disableDrag,placeholder:e.placeholder,options:e.options,onSelectValue:(e,t,n)=>{o(e),n&&c(n),u(!0)},onChange:e=>{y.current=!0,o(e.currentTarget.value)},onBlur:t=>{var o;u(!0),(null===(o=e.inputProps)||void 0===o?void 0:o.onBlur)&&e.inputProps.onBlur(t)}}))}},5595:function(e,t,o){o.d(t,{Id:function(){return x}});var n,s,i,r=o(73202),a=o(30773),l=o(92809),c=o(65988),d=o(67294),p=o(713),u=o(63410),h=o(65989),y=o(75222),m=o(76883),f=o(18177),b=o(31241),g=o.n(b),I=o(85893);function v(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function j(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?v(Object(o),!0).forEach((function(t){(0,l.Z)(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):v(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}class N extends d.Component{constructor(...e){super(...e),(0,l.Z)(this,"state",{color:this.props.color}),(0,l.Z)(this,"handleChangeColor",(e=>{this.setState({color:this.props.disableAlpha?e.hex:e.rgb})}))}render(){var e;return(0,I.jsx)("div",{onClick:e=>{e.stopPropagation()},children:(0,I.jsx)(p.AI,j(j({onChange:this.handleChangeColor},this.props),{},{color:this.state.color,disableAlpha:null!==(e=this.props.disableAlpha)&&void 0!==e&&e}))})}}let x=(n=(0,m.f3)("absolutePositionedLayerFlow"),s=class extends d.Component{constructor(...e){super(...e),(0,r.Z)(this,"absolutePositionedLayerFlow",i,this),(0,l.Z)(this,"handleShowPicker",((e,t)=>{this.absolutePositionedLayerFlow.showElement((0,I.jsx)(N,{color:e.color,disableAlpha:e.disableAlpha,onChangeComplete:e.onChangeComplete}),(0,u.FG)(t))}))}render(){return(0,I.jsx)(S,j(j({},this.props),{},{showColorPicker:this.handleShowPicker}))}},i=(0,a.Z)(s.prototype,"absolutePositionedLayerFlow",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),s);const S=e=>{const{hasTextInput:t,disabled:o,value:n,hasOpacity:s,placeholder:i,size:r="medium",readonly:a,showValidationError:l,showColorPicker:d}=e,p=t=>{const{onColorChange:o,onChange:s,callbackArgs:i}=e;let r=t.hex;!n&&t.rgb&&0===t.rgb.a&&(t.rgb.a=1,r=u(t)),t.rgb&&1!==t.rgb.a&&"rgba(120, 120, 120, 0.4)"!==n&&(r=u(t)),null===s||void 0===s||s(r,i||{}),null===o||void 0===o||o(r,i||{})},u=e=>{const{rgb:t}=e;return`rgba(${t.r}, ${t.g}, ${t.b}, ${t.a})`},m=n===y.sO.MIXED||"transparent"===n?"transparent":(g()(null===n||void 0===n?void 0:n.toString().trim())?null===n||void 0===n?void 0:n.toString().trim():"transparent")||i;return(0,I.jsxs)("div",{className:c.default.dynamic([["1996444616",[h.GC.NEUTRAL,o?"auto":"pointer"]]])+" "+`color-container ${r}`,children:[(0,I.jsx)("div",{style:{backgroundColor:m},onClick:e=>{a||d({color:"transparent"===n?"":n||i||"",disableAlpha:!s,onChangeComplete:p},e)},className:c.default.dynamic([["1996444616",[h.GC.NEUTRAL,o?"auto":"pointer"]]])+" colorBox"}),t?(0,I.jsx)("div",{className:c.default.dynamic([["1996444616",[h.GC.NEUTRAL,o?"auto":"pointer"]]])+" input-wrapper",children:(0,I.jsx)(f.S,{type:"text",value:n||"",onSave:t=>{const{onInputChange:o,onChange:n,callbackArgs:s}=e;/^(?!#)[0-9A-Fa-f]{3,6}/g.test(t)&&(t=`#${t}`),null===n||void 0===n||n(t,s||{}),null===o||void 0===o||o(t,s||{})},onBlur:()=>{const{onInputBlur:t}=e;null===t||void 0===t||t()},disabled:o,placeholder:i,styleType:"transparent",sizeType:"sm",readOnly:a,showValidationError:l})}):null,(0,I.jsx)(c.default,{id:"1996444616",dynamic:[h.GC.NEUTRAL,o?"auto":"pointer"],children:[".color-container.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;}",`.colorBox.__jsx-style-dynamic-selector{padding:0;margin:0;border:1px solid ${h.GC.NEUTRAL};cursor:${o?"auto":"pointer"};}`,".color-container.small.__jsx-style-dynamic-selector .colorBox.__jsx-style-dynamic-selector{width:12px;height:12px;border-radius:2px;border:none;}",".color-container.medium.__jsx-style-dynamic-selector .colorBox.__jsx-style-dynamic-selector{width:32px;height:32px;border-radius:4px;}",".popover.__jsx-style-dynamic-selector{position:absolute;}",".cover.__jsx-style-dynamic-selector{position:fixed;top:0;left:0;right:0;bottom:0;}",".wrapper.__jsx-style-dynamic-selector{position:relative;margin-left:5px;}",".input-wrapper.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex:1;-ms-flex:1;flex:1;margin-left:5px;}",".input-wrapper.__jsx-style-dynamic-selector .thq-text-input{width:100%;}"]})]})}},50847:function(e,t,o){o.d(t,{E:function(){return a}});var n=o(67294),s=o(77739),i=o(26545),r=o(85893);const a=(0,n.forwardRef)(((e,t)=>{const{id:o,onConfirmChange:a,inputSize:l="wide",indent:c=0,className:d,selectOnMount:p}=e,{0:u,1:h}=(0,n.useState)(e.initialValue),y=(0,n.useRef)(null);(0,n.useEffect)((()=>{setTimeout((()=>{y.current&&(y.current.focus(),y.current.scrollIntoView({behavior:"smooth",block:"nearest"}))}),100)}),[]);const m=(0,n.useCallback)((e=>{h(e.target.value)}),[u]),f=(0,n.useCallback)((()=>{a(o,u.trim())}),[u]);(0,i.O)(y,f);const b=(0,n.useCallback)((t=>{t.stopPropagation(),"Enter"===t.key&&f(),"Escape"===t.key&&a(o,e.initialValue)}),[f,a]);return(0,n.useEffect)((()=>{if(!y||!y.current)return;const e=y.current;return e.addEventListener("keydown",b),()=>{e.removeEventListener("keydown",b)}}),[y,b]),(0,r.jsx)("div",{ref:t,onBlur:()=>{var e;return null===(e=y.current)||void 0===e?void 0:e.blur()},children:(0,r.jsx)(s.II,{"data-type":"edit-input",sizeType:l,className:d,ref:y,type:"text",value:u,onChange:m,selectOnMount:p,onBlur:f,style:{paddingLeft:`${c}px`}})})}))},45461:function(e,t,o){o.d(t,{n1:function(){return n},LN:function(){return s},bo:function(){return i},y$:function(){return r},Wn:function(){return a},BT:function(){return l},qG:function(){return c},e3:function(){return d},BQ:function(){return p},O2:function(){return u},Xh:function(){return h},_C:function(){return y},cY:function(){return m},Vf:function(){return f},Wj:function(){return b}});const n=".js",s="new-file",i="new-folder",r="teleport-project-react",a=`${r}/public`,l=`${r}/src`,c=`${l}/index.js`,d=`${r}/index.html`,p=`${r}/teleport.config.json`,u=" ",h="src/teleporthq",y="public/playground_assets",m="main",f="-commited",b="-staged"},78064:function(e,t,o){o.d(t,{sO:function(){return l},Vy:function(){return c},Bw:function(){return d},hK:function(){return p},YN:function(){return u},cf:function(){return h},Qh:function(){return y},qh:function(){return m},ob:function(){return f},CR:function(){return b},Ln:function(){return g},AB:function(){return I},b:function(){return v},Tz:function(){return j}});var n=o(55572),s=o(62057),i=o(30499),r=o(75222);let a,l,c,d;!function(e){e.IMAGE_ASSET="image-asset",e.ICON_ASSET="icon-asset"}(a||(a={})),function(e){e.ROW="row",e.COLUMN="column",e.TEXT="text",e.HEADING="heading",e.LINK="link",e.IMAGE="image",e.ICON="icon",e.VIDEO="video",e.FORM="form",e.BUTTON="button",e.LABEL="label",e.TEXTINPUT="textinput",e.TEXTAREA="textarea",e.CHECKBOX="checkbox",e.RADIOBUTTON="radiobutton",e.IFRAME="iframe",e.SLOT="slot",e.LIST="list",e.LISTITEM="list-item",e.SELECT="select",e.OPTION="option",e.HTML="code embed",e.LOTTIE="lottie"}(l||(l={})),function(e){e.DROPDOWN="dropdown",e.NAVBAR="navbar"}(c||(c={})),function(e){e.ROW="row",e.COLUMN="column",e.GRID="grid"}(d||(d={}));const p={[l.BUTTON]:i.lT["stencil/button"],[l.CHECKBOX]:i.lT["stencil/checkbox"],[l.COLUMN]:i.lT["stencil/column"],[l.FORM]:i.lT["stencil/form"],[l.HEADING]:i.lT["stencil/heading"],[l.ICON]:i.lT["stencil/icon"],[l.IFRAME]:i.lT["stencil/iframe"],[l.IMAGE]:i.lT["stencil/image"],[l.LABEL]:i.lT["stencil/label"],[l.LINK]:i.lT["stencil/link"],[l.RADIOBUTTON]:i.lT["stencil/radiobutton"],[l.ROW]:i.lT["stencil/row"],[l.TEXT]:i.lT["stencil/text"],[l.TEXTAREA]:i.lT["stencil/textarea"],[l.TEXTINPUT]:i.lT["stencil/textinput"],[l.VIDEO]:i.lT["stencil/video"],[l.SLOT]:i.lT["stencil/slot"],[l.LIST]:i.lT["stencil/list"],[l.LISTITEM]:i.lT["stencil/list-item"],[l.SELECT]:i.lT["stencil/select"],[l.HTML]:i.lT["stencil/embed"],[l.LOTTIE]:i.lT["stencil/lottie"]},u={[r.sO.MIXED]:i.u7["tree-stencil/mixed"],[r.sO.CONTAINER]:i.u7["tree-stencil/container"],[r.sO.BUTTON]:i.u7["tree-stencil/button"],[r.sO.CHECKBOX]:i.u7["tree-stencil/checkbox"],[r.sO.FORM]:i.u7["tree-stencil/form"],[r.sO.ICON]:i.u7["tree-stencil/icon"],[r.sO.IFRAME]:i.u7["tree-stencil/iframe"],[r.sO.IMAGE]:i.u7["tree-stencil/image"],[r.sO.RADIOBUTTON]:i.u7["tree-stencil/radiobutton"],[r.sO.TEXTAREA]:i.u7["tree-stencil/textarea"],[r.sO.TEXTINPUT]:i.u7["tree-stencil/textinput"],[r.sO.VIDEO]:i.u7["tree-stencil/video"],[r.sO.COMPONENT]:i.u7["tree-stencil/component"],[r.sO.DEV_COMPONENT]:i.TV.codeview,[r.sO.MIXED]:i.lT["stencil/mixed"],[r.sO.TEXT]:i.u7["tree-stencil/text"],[r.sO.SLOT]:i.u7["tree-stencil/slot"],[r.sO.LISTITEM]:i.u7["tree-stencil/list-item"],[r.sO.LIST]:i.u7["tree-stencil/list"],[r.sO.SELECT]:i.u7["tree-stencil/select"],[r.sO.HTML_NODE]:i.u7["tree-stencil/code embed"],[r.sO.LOTTIE]:i.u7["tree-stencil/lottie"],[r.IV.DROPDOWN]:i.u7["tree-stencil/dropdown"],[r.IV.DROPDOWN_TOGGLE]:i.u7["tree-stencil/container"],[r.IV.DROPDOWN_LIST]:i.u7["tree-stencil/list"],[r.IV.DROPDOWN_ARROW]:i.u7["tree-stencil/container"],[r.IV.NAVBAR]:i.u7["tree-stencil/navbar"],[r.IV.BURGER_MENU]:i.u7["tree-stencil/container"],[r.IV.MOBILE_MENU]:i.u7["tree-stencil/container"],[r.IV.CLOSE_MENU]:i.u7["tree-stencil/container"],[r.IV.NAVBAR_BTN_GROUP]:i.u7["tree-stencil/container"],[r.IV.NAVBAR_NAV]:i.u7["tree-stencil/container"],[r.IV.NAVBAR_NAV_LINKS]:i.u7["tree-stencil/container"],[r.IV.MOBILE_MENU_NAV]:i.u7["tree-stencil/container"],[r.IV.MOBILE_MENU_NAV_LINKS]:i.u7["tree-stencil/container"],[r.RY.HEADING1]:i.u7["tree-stencil/h1"],[r.RY.HEADING2]:i.u7["tree-stencil/h2"],[r.RY.HEADING3]:i.u7["tree-stencil/h3"],[r.RY.HEADING4]:i.u7["tree-stencil/h4"],[r.RY.HEADING5]:i.u7["tree-stencil/h5"],[r.RY.HEADING6]:i.u7["tree-stencil/h6"],[r.RY.LABEL]:i.u7["tree-stencil/label"],[r.RY.PARAGRAPH]:i.u7["tree-stencil/paragraph"],[d.ROW]:i.u7["tree-stencil/flex-row"],[d.COLUMN]:i.u7["tree-stencil/flex-column"],[d.GRID]:i.u7["tree-stencil/grid"]},h=[r.RY.HEADING1,r.RY.HEADING2,r.RY.HEADING3,r.RY.HEADING4,r.RY.HEADING5,r.RY.HEADING6,r.RY.PARAGRAPH,r.RY.LABEL];let y;!function(e){e.LAYOUT="Layout",e.TYPOGRAPHY="Typography",e.MEDIA="Media",e.LIST="List",e.FORMS="Forms",e.INTERACTIVE="Interactive"}(y||(y={}));const m="#D9D9D9",f="linear-gradient(to right, #bdc3c7 0%, #2c3e50 100%)",b={[l.ROW]:{name:l.ROW,type:r.sO.CONTAINER,semantic:r.iX.DIV,group:y.LAYOUT,hotkey:"R"},[l.COLUMN]:{name:l.COLUMN,type:r.sO.CONTAINER,semantic:r.iX.DIV,group:y.LAYOUT,hotkey:"C"},[l.SLOT]:{name:l.SLOT,type:r.sO.SLOT,group:y.LAYOUT,hotkey:"S"},[l.TEXT]:{name:l.TEXT,type:r.sO.TEXT,semantic:r.RY.SPAN,defaultValue:"Text",group:y.TYPOGRAPHY,hotkey:"T"},[l.HEADING]:{name:l.HEADING,type:r.sO.TEXT,semantic:r.RY.HEADING1,defaultValue:"Heading",group:y.TYPOGRAPHY,hotkey:"H"},[l.LINK]:{name:l.LINK,type:r.sO.TEXT,semantic:r.RY.SPAN,defaultValue:"Link",group:y.TYPOGRAPHY,hotkey:"L"},[l.IMAGE]:{name:l.IMAGE,type:r.sO.IMAGE,group:y.MEDIA,hotkey:"I"},[l.ICON]:{name:l.ICON,type:r.sO.ICON},[l.VIDEO]:{name:l.VIDEO,type:r.sO.VIDEO,group:y.MEDIA,hotkey:"V"},[l.FORM]:{name:l.FORM,type:r.sO.FORM,group:y.FORMS},[l.BUTTON]:{name:l.BUTTON,type:r.sO.BUTTON,group:y.FORMS,defaultValue:"Button",hotkey:"B"},[l.LABEL]:{name:l.LABEL,type:r.sO.TEXT,semantic:r.RY.LABEL,group:y.FORMS,defaultValue:"Label"},[l.TEXTINPUT]:{displayName:"Input",name:l.TEXTINPUT,type:r.sO.TEXTINPUT,group:y.FORMS},[l.TEXTAREA]:{name:l.TEXTAREA,type:r.sO.TEXTAREA,group:y.FORMS},[l.CHECKBOX]:{name:l.CHECKBOX,type:r.sO.CHECKBOX,group:y.FORMS},[l.RADIOBUTTON]:{displayName:"Radio Button",name:l.RADIOBUTTON,type:r.sO.RADIOBUTTON,group:y.FORMS},[l.SELECT]:{name:l.SELECT,type:r.sO.SELECT,group:y.FORMS},[l.OPTION]:{name:l.OPTION,type:r.sO.OPTION,defaultValue:"Option 1"},[l.IFRAME]:{name:l.IFRAME,type:r.sO.IFRAME,group:y.MEDIA},[a.IMAGE_ASSET]:{name:a.IMAGE_ASSET,type:r.sO.IMAGE},[a.ICON_ASSET]:{name:a.ICON_ASSET,type:r.sO.ICON},[l.LIST]:{name:l.LIST,type:r.sO.LIST,semantic:r.gt.UL,group:y.LIST},[l.LISTITEM]:{name:l.LISTITEM,type:r.sO.LISTITEM,semantic:r.mw.LI,group:y.LIST},[c.DROPDOWN]:{name:c.DROPDOWN,type:r.IV.DROPDOWN,semantic:r.iX.DIV,group:y.INTERACTIVE,customCodeSnippet:{head:s.Id.dropdown}},[l.HTML]:{name:l.HTML,type:r.sO.HTML_NODE,semantic:r.iX.DIV,group:y.MEDIA},[l.LOTTIE]:{name:l.LOTTIE,type:r.sO.LOTTIE,semantic:r.iX.DIV,group:y.MEDIA},[c.NAVBAR]:{name:c.NAVBAR,type:r.IV.NAVBAR,semantic:r.iX.HEADER,group:y.INTERACTIVE,customCodeSnippet:{body:"https://unpkg.com/@teleporthq/teleport-custom-scripts"}}},g="2px dashed rgba(120, 120, 120, 0.4)",I={[l.ROW]:{display:"flex",width:"100%",height:"100px",border:g,alignItems:"flex-start",flex:"0 0 auto"},[l.COLUMN]:{display:"flex",flexDirection:"column",width:"200px",height:"100px",border:g,alignItems:"flex-start",flex:"0 0 auto"},[l.TEXT]:{},[l.HEADING]:{},[l.LINK]:{},[l.IMAGE]:{width:"100px",objectFit:"cover"},[l.ICON]:{width:"24px",height:"24px"},[l.VIDEO]:{width:"320px",height:"180px"},[l.FORM]:{width:"200px",height:"100px",display:"flex"},[l.BUTTON]:{},[l.LABEL]:{},[l.TEXTINPUT]:{},[l.CHECKBOX]:{},[l.RADIOBUTTON]:{},[l.TEXTAREA]:{},[l.IFRAME]:{width:"320px",height:"200px"},[l.SLOT]:{},[a.IMAGE_ASSET]:{},[a.ICON_ASSET]:{},[l.LIST]:{},[l.LISTITEM]:{},[l.SELECT]:{},[l.OPTION]:{},[c.DROPDOWN]:{},[l.HTML]:{},[l.LOTTIE]:{width:"300px",height:"300px"},[c.NAVBAR]:{}},v={[l.ROW]:{},[l.COLUMN]:{},[l.TEXT]:{},[l.HEADING]:{},[l.LINK]:{},[l.IMAGE]:{src:"https://play.teleporthq.io/static/svg/default-img.svg",alt:"image"},[l.ICON]:{},[l.VIDEO]:{src:"",poster:"https://play.teleporthq.io/static/svg/videoposter.svg"},[l.FORM]:{},[l.BUTTON]:{},[l.LABEL]:{},[l.TEXTINPUT]:{type:"text",placeholder:"placeholder"},[l.CHECKBOX]:{checked:"true"},[l.RADIOBUTTON]:{name:"radio"},[l.TEXTAREA]:{placeholder:"placeholder"},[l.IFRAME]:{src:"https://www.youtube.com/embed/DeQkMK5LME4"},[l.SLOT]:{},[a.IMAGE_ASSET]:{},[a.ICON_ASSET]:{},[l.LIST]:{},[l.LISTITEM]:{},[l.SELECT]:{},[l.OPTION]:{},[c.DROPDOWN]:{},[l.HTML]:{},[c.NAVBAR]:{},[l.LOTTIE]:{src:"https://presentation-website-assets.teleporthq.io/features/lottie.json",autoplay:n.j,speed:"1",background:"transparent"}},j={[l.ROW]:{},[l.COLUMN]:{},[l.TEXT]:{},[l.HEADING]:{},[l.LINK]:{link:{type:"url",content:{url:"https://example.com",newTab:!0}}},[l.IMAGE]:{},[l.ICON]:{},[l.VIDEO]:{},[l.FORM]:{},[l.BUTTON]:{},[l.LABEL]:{},[l.TEXTINPUT]:{},[l.CHECKBOX]:{},[l.RADIOBUTTON]:{},[l.TEXTAREA]:{},[l.IFRAME]:{},[l.SLOT]:{},[a.IMAGE_ASSET]:{},[a.ICON_ASSET]:{},[l.LIST]:{},[l.LISTITEM]:{},[l.SELECT]:{},[l.OPTION]:{},[c.DROPDOWN]:{},[l.HTML]:{},[c.NAVBAR]:{},[l.LOTTIE]:{}}},39923:function(e,t,o){let n;o.d(t,{kn:function(){return s},mY:function(){return i},LN:function(){return r},u7:function(){return a}}),function(e){e.Navigation="Navigation",e.Sections="Sections",e.StyledComponents="Styled Components"}(n||(n={}));const s=e=>`/static/img/styled-sections/${e}.jpg`;let i;!function(e){e.Headers="Headers",e.Footers="Footers",e.Sidebars="Sidebars",e.Hero="Hero Sections",e.Banners="Banners",e.Features="Features",e.Pricing="Pricing Sections",e.Galleries="Galleries",e.Testimonials="Testimonials",e.Blogs="Blog Posts",e.Stats="Stats",e.Steps="Steps",e.Social="Social Bar",e.Feature="Feature Card",e.Testimonial="Testimonial Card",e.Blog="Blog Card",e.Gallery="Gallery Card"}(i||(i={}));const r={[n.Navigation]:[i.Headers,i.Footers,i.Sidebars],[n.Sections]:[i.Hero,i.Banners,i.Features,i.Pricing,i.Galleries,i.Testimonials,i.Blogs,i.Stats,i.Steps,i.Social],[n.StyledComponents]:[i.Feature,i.Testimonial,i.Blog,i.Gallery]},a={[i.Headers]:[{name:"header1",customCodeSnippet:{id:"header",body:"https://unpkg.com/@teleporthq/teleport-custom-scripts"}},{name:"header2",customCodeSnippet:{id:"header",body:"https://unpkg.com/@teleporthq/teleport-custom-scripts"}},{name:"header3",customCodeSnippet:{id:"header",body:"https://unpkg.com/@teleporthq/teleport-custom-scripts"}},{name:"header4",customCodeSnippet:{id:"header",body:"https://unpkg.com/@teleporthq/teleport-custom-scripts"}},{name:"header5",customCodeSnippet:{id:"header",body:"https://unpkg.com/@teleporthq/teleport-custom-scripts"}},{name:"header6",customCodeSnippet:{id:"header",body:"https://unpkg.com/@teleporthq/teleport-custom-scripts"}}],[i.Footers]:[{name:"footer1"},{name:"footer2"},{name:"footer3"},{name:"footer4"}],[i.Sidebars]:[{name:"sidebar1"},{name:"sidebar2"},{name:"sidebar3"}],[i.Hero]:[{name:"hero1"},{name:"hero2"},{name:"hero3"},{name:"hero4"},{name:"hero5"},{name:"hero6"}],[i.Banners]:[{name:"banner1"},{name:"banner2"},{name:"banner3"},{name:"banner4"},{name:"banner5"}],[i.Features]:[{name:"features1"},{name:"features2"},{name:"features3"},{name:"features4"}],[i.Pricing]:[{name:"pricing1"},{name:"pricing2"},{name:"pricing3"}],[i.Galleries]:[{name:"gallery1"},{name:"gallery2"},{name:"gallery3"},{name:"gallery4"}],[i.Testimonials]:[{name:"testimonial1"},{name:"testimonial2"},{name:"testimonial3"},{name:"testimonial4"}],[i.Blogs]:[{name:"blog1"},{name:"blog2"},{name:"blog3"},{name:"blog4"}],[i.Social]:[{name:"socialbar"}],[i.Stats]:[{name:"stats1"},{name:"stats2"}],[i.Steps]:[{name:"steps1"},{name:"steps2"}],[i.Feature]:[{name:"featurecard1"},{name:"featurecard2"},{name:"featurecard3"},{name:"featurecard4"}],[i.Testimonial]:[{name:"testimonialcard1"},{name:"testimonialcard2"},{name:"testimonialcard3"},{name:"testimonialcard4"}],[i.Blog]:[{name:"blogpostcard1"},{name:"blogpostcard2"},{name:"blogpostcard3"},{name:"blogpostcard4"}],[i.Gallery]:[{name:"gallerycard1"},{name:"gallerycard2"},{name:"gallerycard3"}]}},74031:function(e,t,o){o.d(t,{T:function(){return n},q:function(){return s}});const n={"#B23BDD":!1,"#60BA57":!1,"#A65088":!1,"#8085e9":!1,"#695033":!1,"#c58b23":!1,"#f15c80":!1,"#2b908f":!1,"#663E63":!1,"#DA3BDD":!1,"#4A0AF5":!1,"#782612":!1,"#669463":!1,"#5300ad":!1,"#19694A":!1,"#E32200":!1,"#919e04":!1,"#C40080":!1,"#4E6933":!1,"#2c3e8f":!1},s=Object.keys(n)},71662:function(e,t,o){o.d(t,{f:function(){return x}});var n,s,i,r,a,l,c,d,p,u=o(73202),h=o(92809),y=o(30773),m=o(65988),f=o(67294),b=o(76883),g=o(53482),I=o(92763),v=o(65989),j=o(11987),N=o(85893);let x=(n=(0,b.f3)("projectDoc"),s=(0,b.f3)("projectUIState"),i=(0,b.f3)("nodeEditingFlow"),r=(0,b.f3)("propDefinitionManagementFlow"),a=class extends f.Component{constructor(...e){super(...e),(0,u.Z)(this,"projectDoc",l,this),(0,u.Z)(this,"projectUIState",c,this),(0,u.Z)(this,"nodeEditingFlow",d,this),(0,u.Z)(this,"propDefinitionManagementFlow",p,this),(0,h.Z)(this,"openMenu",(e=>{if(e.target.classList.contains("image-preview"))return;if(this.props.disabled)return;const t=new CustomEvent("component-props:contextualmenu",{detail:{currentProp:this.props.currentProp,location:this.props.location,inputType:this.props.inputType,property:this.props.property,disabled:this.props.disabled,originalEvent:e},bubbles:!0,composed:!0});document.dispatchEvent(t)})),(0,h.Z)(this,"handleUnlink",(()=>{const e=this.props.currentProp.defaultValue,t=this.props.currentProp.name;this.propDefinitionManagementFlow.handleUnlinkProp({locations:[{base:this.props.location,sufix:this.props.property}],unlink:!0,defaultPropValue:e,propName:t,propId:this.props.currentProp.id})}))}render(){const e=this.projectUIState.selection.componentId;if(e&&!this.projectDoc.components.byId[e])return this.props.children;const t=this.props.location===g.hD.CONTENT,o="string"!==typeof this.props.currentProp,n="src"===this.props.property;return(0,N.jsxs)("div",{className:m.default.dynamic([["2161812098",[o?v.z8.PURPLE:v.bo.INACTIVE,o&&n?"32px":"26px",o?"100%":"auto",v.Pt.LIGHT_01,v.z8.PURPLE_LIGHT]]])+" component-props-wrapper",children:[(0,N.jsxs)("div",{onClick:this.openMenu,"data-tooltip-name":this.props.disabled?this.props.disabledMessage||"Cannot link prop to this field":void 0,className:m.default.dynamic([["2161812098",[o?v.z8.PURPLE:v.bo.INACTIVE,o&&n?"32px":"26px",o?"100%":"auto",v.Pt.LIGHT_01,v.z8.PURPLE_LIGHT]]])+" prop-area "+(this.props.disabled?"":"enabled"),children:[!this.props.disabled&&(0,N.jsx)("span",{className:m.default.dynamic([["2161812098",[o?v.z8.PURPLE:v.bo.INACTIVE,o&&n?"32px":"26px",o?"100%":"auto",v.Pt.LIGHT_01,v.z8.PURPLE_LIGHT]]])+" icon-wrapper",children:(0,N.jsx)(I.J,{type:"component",size:14})}),o?(0,N.jsxs)("div",{className:m.default.dynamic([["2161812098",[o?v.z8.PURPLE:v.bo.INACTIVE,o&&n?"32px":"26px",o?"100%":"auto",v.Pt.LIGHT_01,v.z8.PURPLE_LIGHT]]])+" input-container",children:[this.props.children,(0,N.jsx)(j.m,{onDelete:this.handleUnlink,dataAttrs:{"data-tooltip-name":"Unlink","area-label":"Unlink"},styleType:"solid"})]}):t?this.props.children:null]}),o||t?null:this.props.children,(0,N.jsx)(m.default,{id:"2161812098",dynamic:[o?v.z8.PURPLE:v.bo.INACTIVE,o&&n?"32px":"26px",o?"100%":"auto",v.Pt.LIGHT_01,v.z8.PURPLE_LIGHT],children:[".icon-wrapper.__jsx-style-dynamic-selector{padding:4px 4px 0 4px;}",`.prop-area.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;border-radius:4px;color:${o?v.z8.PURPLE:v.bo.INACTIVE};position:relative;height:${o&&n?"32px":"26px"};width:${o?"100%":"auto"};}`,`.prop-area.enabled.__jsx-style-dynamic-selector:hover{background-color:${v.Pt.LIGHT_01};color:${v.z8.PURPLE_LIGHT};}`,".input-container.__jsx-style-dynamic-selector{text-align:left;width:100%;}",".component-props-wrapper.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;height:32px;width:100%;}",".component-props-wrapper.__jsx-style-dynamic-selector:hover .delete-btn{opacity:1;}"]})]})}},l=(0,y.Z)(a.prototype,"projectDoc",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),c=(0,y.Z)(a.prototype,"projectUIState",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),d=(0,y.Z)(a.prototype,"nodeEditingFlow",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),p=(0,y.Z)(a.prototype,"propDefinitionManagementFlow",[r],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),a)},11987:function(e,t,o){o.d(t,{m:function(){return d}});var n=o(92809),s=o(65988),i=(o(67294),o(92763)),r=o(65989),a=o(85893);function l(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function c(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?l(Object(o),!0).forEach((function(t){(0,n.Z)(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):l(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}const d=e=>{const{onDelete:t,dataAttrs:o,styleType:n}=e;return(0,a.jsxs)("button",c(c({onClick:e=>{e.stopPropagation(),t()}},o),{},{className:s.default.dynamic([["2566228550",[r.n_.DEFAULT,r.Pt.DEFAULT,r.Pt.DEFAULT,r.Pt.LIGHT_01]]])+" "+(o&&null!=o.className&&o.className||`delete-btn ${n}`),children:[(0,a.jsx)(i.J,{type:"actions/close",size:8,color:r.bo.HIGHLIGHT}),(0,a.jsx)(s.default,{id:"2566228550",dynamic:[r.n_.DEFAULT,r.Pt.DEFAULT,r.Pt.DEFAULT,r.Pt.LIGHT_01],children:[`.delete-btn.__jsx-style-dynamic-selector{opacity:0;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;width:18px;height:18px;border-radius:${r.n_.DEFAULT};position:absolute;top:-8px;right:-8px;background-color:transparent;}`,`.delete-btn.solid.__jsx-style-dynamic-selector{background-color:${r.Pt.DEFAULT};boxshadow:4px 4px 8px 1px rgba(18,18,18,0.5);}`,`.delete-btn.__jsx-style-dynamic-selector:hover,.delete-btn.__jsx-style-dynamic-selector:focus{opacity:1;background-color:${r.Pt.DEFAULT};box-shadow:4px 4px 8px 1px rgba(18,18,18,0.5);}`,`.delete-btn.solid.__jsx-style-dynamic-selector:hover,.delete-btn.solid.__jsx-style-dynamic-selector:focus{background-color:${r.Pt.LIGHT_01};}`]})]}))};d.defaultProps={styleType:"transparent"}},82863:function(e,t,o){o.d(t,{lH:function(){return n},rN:function(){return s},wC:function(){return i},g4:function(){return r},TM:function(){return a},RY:function(){return l}});const n=/^([a-zA-Z0-9\u0600-\u06FF\u0660-\u0669\u06F0-\u06F9 _.-]+)$/,s=/-?[_a-zA-Z]+[_a-zA-Z0-9-]*/,i=/[0-9]/,r={INVALID_TOKEN_NAME_LENGTH:"Token names can't be more than 30 characters long.",INVALID_TOKEN_NAME_FORMAT:"Token names can't contain any special characters.",NO_TOKEN_NAME:"Tokens must have a name."},a={INVALID_TEXT_STYLE_NAME_LENGTH:"Text Style names can't be more than 30 characters long.",INVALID_TEXT_STYLE_NAME_FORMAT:"Text Style names can't contain any special characters.",INVALID_TEXT_STYLE_NAME_START:"Text Style names must begin with a letter, hyphen( - ) or underscore( _ ), followed by up to 29 letters.",NO_DIGITS_AT_START:"Text Style names can't start with a digit.",NO_TEXT_STYLE_NAME:"Text Styles must have a name."},l={INVALID_CATEGORY_NAME_LENGTH:"Token category names can't be more than 30 characters long.",INVALID_CATEGORY_NAME_FORMAT:"Token category names can't contain any special characters."}},14787:function(e,t,o){o.d(t,{_:function(){return n},F:function(){return s}});const n=25,s=5},80343:function(e,t,o){o.d(t,{S:function(){return s}});var n=o(65989);const s=[`.tokens-panel-container.jsx-3935676953{position:fixed;right:270px;width:256px;background-color:${n.Pt.DARK_01};z-index:${n.kg.FIFTY};display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;padding-bottom:${n.N_.HALF_UNIT};box-shadow:0 2px 16px 8px rgb(18 18 18 / 30%);border-radius:${n.n_.DEFAULT};}`,`.tokens-panel-container.jsx-3935676953:after{content:'';position:absolute;right:-${n.N_.UNIT};width:0;height:0;margin-top:-${n.N_.UNIT};margin-right:-${n.N_.UNIT};border:${n.N_.UNIT} solid transparent;border-left-color:${n.Pt.DARK_01};}`,`.tokens-panel-title.jsx-3935676953{padding:0 ${n.N_.UNIT} 0 ${n.N_.ONE_AND_HALF};height:${n.N_.SIX_UNITS};display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;font-size:${n.um.HEADING};text-transform:capitalize;color:${n.bo.HIGHLIGHT};font-weight:${n.Xw.MEDIUM_500};}`];s.__hash="3935676953"},47971:function(e,t,o){o.d(t,{N:function(){return p},p:function(){return u}});var n=o(92809),s=o(65988),i=(o(67294),o(65989)),r=o(92763),a=o(30214),l=o(85893);function c(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function d(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?c(Object(o),!0).forEach((function(t){(0,n.Z)(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):c(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}const p=e=>Object.keys(e||{}).reduce(((t,o)=>(t[o]=e[o].content,t)),{}),u=({tokenInfo:e,tokenCategory:t,onDelete:o,onClick:n,onContextMenu:c})=>{var u,h,y,m,f,b,g,I;const{id:v,content:j,name:N,role:x}=e,S=`${null!==(u=null===(h=j.fontSize)||void 0===h?void 0:h.content)&&void 0!==u?u:""}\n${null!==(y=null===(m=j.fontFamily)||void 0===m?void 0:m.content)&&void 0!==y?y:""} ${null!==(f=null===(b=j.fontWeight)||void 0===b?void 0:b.content)&&void 0!==f?f:""} ${null!==(g=null===(I=j.fontStyle)||void 0===I?void 0:I.content)&&void 0!==g?g:""}`;return(0,l.jsxs)("div",{"data-token-id":v,onClick:()=>n(t.id,v),onContextMenu:c,"data-tooltip-name":x?N:null,className:s.default.dynamic([["713964002",[i.um.DEFAULT,i.N_.UNIT,i.Pt.LIGHT_01,i.n_.DEFAULT,i.N_.UNIT,i.um.INFO,i.um.INFO,i.bo.INFO,i.N_.UNIT,i.n_.DEFAULT,i.Pt.DEFAULT,i.Pt.LIGHT_02,i.n_.DEFAULT,i.N_.UNIT,i.N_.TWO_UNITS,i.Xw.MEDIUM_500]]])+" token-preview-wrapper",children:[(0,l.jsxs)("div",{style:{display:"flex"},className:s.default.dynamic([["713964002",[i.um.DEFAULT,i.N_.UNIT,i.Pt.LIGHT_01,i.n_.DEFAULT,i.N_.UNIT,i.um.INFO,i.um.INFO,i.bo.INFO,i.N_.UNIT,i.n_.DEFAULT,i.Pt.DEFAULT,i.Pt.LIGHT_02,i.n_.DEFAULT,i.N_.UNIT,i.N_.TWO_UNITS,i.Xw.MEDIUM_500]]]),children:[(0,l.jsx)("div",{style:d(d({},p(j)),{},{fontSize:"14px",letterSpacing:"normal",color:`${i.bo.INACTIVE}`}),className:s.default.dynamic([["713964002",[i.um.DEFAULT,i.N_.UNIT,i.Pt.LIGHT_01,i.n_.DEFAULT,i.N_.UNIT,i.um.INFO,i.um.INFO,i.bo.INFO,i.N_.UNIT,i.n_.DEFAULT,i.Pt.DEFAULT,i.Pt.LIGHT_02,i.n_.DEFAULT,i.N_.UNIT,i.N_.TWO_UNITS,i.Xw.MEDIUM_500]]])+" preview",children:"Aa"}),(0,l.jsxs)("div",{className:s.default.dynamic([["713964002",[i.um.DEFAULT,i.N_.UNIT,i.Pt.LIGHT_01,i.n_.DEFAULT,i.N_.UNIT,i.um.INFO,i.um.INFO,i.bo.INFO,i.N_.UNIT,i.n_.DEFAULT,i.Pt.DEFAULT,i.Pt.LIGHT_02,i.n_.DEFAULT,i.N_.UNIT,i.N_.TWO_UNITS,i.Xw.MEDIUM_500]]])+" token-info-container",children:[(0,l.jsxs)("div",{className:s.default.dynamic([["713964002",[i.um.DEFAULT,i.N_.UNIT,i.Pt.LIGHT_01,i.n_.DEFAULT,i.N_.UNIT,i.um.INFO,i.um.INFO,i.bo.INFO,i.N_.UNIT,i.n_.DEFAULT,i.Pt.DEFAULT,i.Pt.LIGHT_02,i.n_.DEFAULT,i.N_.UNIT,i.N_.TWO_UNITS,i.Xw.MEDIUM_500]]])+" token-name",children:[(0,l.jsx)("span",{className:s.default.dynamic([["713964002",[i.um.DEFAULT,i.N_.UNIT,i.Pt.LIGHT_01,i.n_.DEFAULT,i.N_.UNIT,i.um.INFO,i.um.INFO,i.bo.INFO,i.N_.UNIT,i.n_.DEFAULT,i.Pt.DEFAULT,i.Pt.LIGHT_02,i.n_.DEFAULT,i.N_.UNIT,i.N_.TWO_UNITS,i.Xw.MEDIUM_500]]]),children:N})," ",x&&(0,l.jsx)("span",{className:s.default.dynamic([["713964002",[i.um.DEFAULT,i.N_.UNIT,i.Pt.LIGHT_01,i.n_.DEFAULT,i.N_.UNIT,i.um.INFO,i.um.INFO,i.bo.INFO,i.N_.UNIT,i.n_.DEFAULT,i.Pt.DEFAULT,i.Pt.LIGHT_02,i.n_.DEFAULT,i.N_.UNIT,i.N_.TWO_UNITS,i.Xw.MEDIUM_500]]])+" token-role",children:x})]}),(0,l.jsx)("span",{className:s.default.dynamic([["713964002",[i.um.DEFAULT,i.N_.UNIT,i.Pt.LIGHT_01,i.n_.DEFAULT,i.N_.UNIT,i.um.INFO,i.um.INFO,i.bo.INFO,i.N_.UNIT,i.n_.DEFAULT,i.Pt.DEFAULT,i.Pt.LIGHT_02,i.n_.DEFAULT,i.N_.UNIT,i.N_.TWO_UNITS,i.Xw.MEDIUM_500]]])+" token-meta",children:S})]})]}),(0,l.jsx)(a._,{name:N,children:(0,l.jsx)("div",{className:s.default.dynamic([["713964002",[i.um.DEFAULT,i.N_.UNIT,i.Pt.LIGHT_01,i.n_.DEFAULT,i.N_.UNIT,i.um.INFO,i.um.INFO,i.bo.INFO,i.N_.UNIT,i.n_.DEFAULT,i.Pt.DEFAULT,i.Pt.LIGHT_02,i.n_.DEFAULT,i.N_.UNIT,i.N_.TWO_UNITS,i.Xw.MEDIUM_500]]])+" default-text-style-tooltip",children:"The default text style will be applied to all the text elements in your project."})}),!x&&(0,l.jsx)("button",{onClick:e=>((e,t)=>{e.stopPropagation(),o(t)})(e,v),className:s.default.dynamic([["713964002",[i.um.DEFAULT,i.N_.UNIT,i.Pt.LIGHT_01,i.n_.DEFAULT,i.N_.UNIT,i.um.INFO,i.um.INFO,i.bo.INFO,i.N_.UNIT,i.n_.DEFAULT,i.Pt.DEFAULT,i.Pt.LIGHT_02,i.n_.DEFAULT,i.N_.UNIT,i.N_.TWO_UNITS,i.Xw.MEDIUM_500]]])+" delete-btn",children:(0,l.jsx)(r.J,{type:"actions/close",size:12,color:i.bo.HIGHLIGHT})}),(0,l.jsx)(s.default,{id:"713964002",dynamic:[i.um.DEFAULT,i.N_.UNIT,i.Pt.LIGHT_01,i.n_.DEFAULT,i.N_.UNIT,i.um.INFO,i.um.INFO,i.bo.INFO,i.N_.UNIT,i.n_.DEFAULT,i.Pt.DEFAULT,i.Pt.LIGHT_02,i.n_.DEFAULT,i.N_.UNIT,i.N_.TWO_UNITS,i.Xw.MEDIUM_500],children:[".token-preview-wrapper.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;width:100%;position:relative;}",".token-preview-wrapper.__jsx-style-dynamic-selector:hover .delete-btn.__jsx-style-dynamic-selector{opacity:1;}",".token-preview-wrapper.__jsx-style-dynamic-selector:hover .token-meta.__jsx-style-dynamic-selector{display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;}",".token-info-container.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;position:relative;}",`.token-name.__jsx-style-dynamic-selector{display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;font-size:${i.um.DEFAULT};}`,`.token-role.__jsx-style-dynamic-selector{padding:0 ${i.N_.UNIT};background-color:${i.Pt.LIGHT_01};border-radius:${i.n_.DEFAULT};margin-left:${i.N_.UNIT};font-size:${i.um.INFO};height:-webkit-fit-content;height:-moz-fit-content;height:fit-content;text-transform:capitalize;}`,`.token-meta.__jsx-style-dynamic-selector{display:none;font-size:${i.um.INFO};font-style:italic;color:${i.bo.INFO};position:absolute;bottom:-${i.N_.UNIT};white-space:nowrap;}`,`.delete-btn.__jsx-style-dynamic-selector{background:transparent;width:24px;height:24px;border-radius:${i.n_.DEFAULT};opacity:0;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;}`,`.delete-btn.__jsx-style-dynamic-selector:hover,.delete-btn.__jsx-style-dynamic-selector:focus{background-color:${i.Pt.DEFAULT};box-shadow:4px 4px 8px 1px rgba(18,18,18,0.5);}`,`.preview.__jsx-style-dynamic-selector{border:1px solid ${i.Pt.LIGHT_02};border-radius:${i.n_.DEFAULT};padding:${i.N_.UNIT};margin-right:${i.N_.TWO_UNITS};width:32px;height:32px;text-align:center;text-transform:none;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;}`,`.default-text-style-tooltip.__jsx-style-dynamic-selector{font-weight:${i.Xw.MEDIUM_500};}`]})]},v)}},99560:function(e,t,o){o.d(t,{B:function(){return H}});var n=o(73202),s=o(92809),i=o(9626),r=o(33800),a=o(30773),l=o(67294),c=o(76883),d=o(49899),p=o(65988),u=o(41146),h=o(89361),y=o(81665),m=o(94433),f=o(26545),b=o(99210),g=o(65989),I=o(78772);const v=e=>Object.keys(e||{}).reduce(((t,o)=>{const n=e[o];return n&&(t[o]=n),t}),{});var j=o(72307),N=o.n(j),x=o(108),S=o(82863),w=o(14787),O=o(80343),T=o(85893);function _(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function E(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?_(Object(o),!0).forEach((function(t){(0,s.Z)(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):_(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}const D=({onDismiss:e,onSave:t,getFontweightsForSelectedFont:o,tokenInfo:n,onEdit:s,topPosition:i,rightPosition:r})=>{const a=Object.keys((null===n||void 0===n?void 0:n.content)||{}).reduce(((e,t)=>{var o;return e[t]=null===n||void 0===n||null===(o=n.content[t])||void 0===o?void 0:o.content,e}),{}),{0:c,1:d}=(0,l.useState)({name:n?n.name:"",content:{fontFamily:n?a.fontFamily:"Arial",fontSize:n?a.fontSize:"14px",textDecoration:n?a.textDecoration:"none",textTransform:n?a.textTransform:"none",fontWeight:n?a.fontWeight:"500",fontStyle:n?a.fontStyle:"",lineHeight:n?a.lineHeight:"",letterSpacing:n?a.letterSpacing:""}}),{content:j}=c,{0:_,1:D}=(0,l.useState)(""),{0:F,1:C}=(0,l.useState)([]),{0:A,1:k}=(0,l.useState)(!0),P=(0,l.useRef)(null);(0,f.O)(P,(t=>{const o=t.composedPath().map((e=>String(e.className))).find((e=>e.includes("modal"))),n=t.composedPath().map((e=>String(e.className))).find((e=>e.includes("autocomplete-list")));o||n||e()})),(0,b.b)(P,{[u.KEY_NAVIGATION.CLOSE]:e}),(0,l.useEffect)((()=>{n&&(n.name===c.name&&N()(a,v(c.content))?k(!0):k(!1))}),[j,c.name]);const U=(e,t)=>{d((o=>E(E({},o),{},{content:E(E({},o.content),{},{[e]:t})})))},L=e=>{e?e.length>30?D(S.TM.INVALID_TEXT_STYLE_NAME_LENGTH):S.wC.test(e[0])?D(S.TM.NO_DIGITS_AT_START):S.rN.test(e)?S.lH.test(e)?D(""):D(S.TM.INVALID_TEXT_STYLE_NAME_FORMAT):D(S.TM.INVALID_TEXT_STYLE_NAME_START):D(S.TM.NO_TEXT_STYLE_NAME)};return(0,l.useEffect)((()=>{const e=o(c.content.fontFamily);C(e)}),[]),(0,l.useEffect)((()=>{n&&d({name:n.name,content:{fontFamily:a.fontFamily,fontSize:a.fontSize,textDecoration:a.textDecoration,textTransform:a.textTransform,fontWeight:a.fontWeight,fontStyle:a.fontStyle,lineHeight:a.lineHeight,letterSpacing:a.letterSpacing}})}),[n]),(0,T.jsxs)("div",{ref:P,className:`jsx-${O.S.__hash} `+p.default.dynamic([["4286756923",[i||"100px",r||"270px",w._,g.N_.ONE_AND_HALF,g.bo.INFO,g.n_.DEFAULT,g.N_.TWO_UNITS,c.content.fontFamily,c.content.fontSize,c.content.fontWeight,c.content.fontStyle,c.content.lineHeight,c.content.letterSpacing,c.content.textDecoration,c.content.textTransform]]])+" tokens-panel-container position",children:[(0,T.jsx)("span",{className:`jsx-${O.S.__hash} `+p.default.dynamic([["4286756923",[i||"100px",r||"270px",w._,g.N_.ONE_AND_HALF,g.bo.INFO,g.n_.DEFAULT,g.N_.TWO_UNITS,c.content.fontFamily,c.content.fontSize,c.content.fontWeight,c.content.fontStyle,c.content.lineHeight,c.content.letterSpacing,c.content.textDecoration,c.content.textTransform]]])+" tokens-panel-title",children:n?`${n.name}`:"Add Text Style"}),(0,T.jsxs)(m.c,{children:[(0,T.jsx)(x.W,{value:c.name,type:"textinput",style:"boxed",placeholder:"Name",refAttrs:{autoFocus:!0},onChange:e=>{const t=e.target.value.trim();d((e=>E(E({},e),{},{name:t}))),L(t)},onBlur:e=>{const t=e.target.value.replace(/ /g,"");d((e=>E(E({},e),{},{name:t}))),L(t)},validationMessage:_}),(0,T.jsx)("div",{className:`jsx-${O.S.__hash} `+p.default.dynamic([["4286756923",[i||"100px",r||"270px",w._,g.N_.ONE_AND_HALF,g.bo.INFO,g.n_.DEFAULT,g.N_.TWO_UNITS,c.content.fontFamily,c.content.fontSize,c.content.fontWeight,c.content.fontStyle,c.content.lineHeight,c.content.letterSpacing,c.content.textDecoration,c.content.textTransform]]])+" text-token-preview",children:(0,T.jsx)("span",{className:`jsx-${O.S.__hash} `+p.default.dynamic([["4286756923",[i||"100px",r||"270px",w._,g.N_.ONE_AND_HALF,g.bo.INFO,g.n_.DEFAULT,g.N_.TWO_UNITS,c.content.fontFamily,c.content.fontSize,c.content.fontWeight,c.content.fontStyle,c.content.lineHeight,c.content.letterSpacing,c.content.textDecoration,c.content.textTransform]]])+" text-sample",children:"The quick brown fox jumped over the lazy dog..."})}),(0,T.jsx)(I.s,{styles:j,onTextDecorationChange:e=>{c.content.textDecoration!==e?U("textDecoration",e):U("textDecoration","")},onTextTransformChange:e=>{c.content.textTransform!==e?U("textTransform",e):U("textTransform","")},onFontFamilyDropdownChange:(e,t)=>{U("fontFamily",e),C(o(e))},onFontWeightChange:(e,t)=>{e&&(U("fontWeight",e),U("fontStyle",t?"italic":""))},onFontSizeChange:(e,t)=>{U("fontSize",e+t)},onLetterSpacingChange:(e,t)=>{U("letterSpacing",e+t)},onLineHeightChange:(e,t)=>{U("lineHeight",e+t)},availableWeights:F}),(0,T.jsx)(y.h,{alignment:"stretch",cornerStyle:"round",children:n?(0,T.jsx)(h.z,{size:"medium",onClick:()=>{if(n)return s({id:n.id,name:c.name,content:v(c.content)}),e()},isDisabled:!(!A&&!_),children:"Update"}):(0,T.jsx)(h.z,{size:"medium",onClick:()=>{const{name:o,content:n}=c,s=v(n);return""!==c.name&&Object.keys(s).length>0?(t({name:o,content:s}),e()):e()},isDisabled:!(c.name&&!_),children:"Add"})})]}),(0,T.jsx)(p.default,{id:"4286756923",dynamic:[i||"100px",r||"270px",w._,g.N_.ONE_AND_HALF,g.bo.INFO,g.n_.DEFAULT,g.N_.TWO_UNITS,c.content.fontFamily,c.content.fontSize,c.content.fontWeight,c.content.fontStyle,c.content.lineHeight,c.content.letterSpacing,c.content.textDecoration,c.content.textTransform],children:[`.position.__jsx-style-dynamic-selector{top:${i||"100px"} !important;right:${r||"270px"} !important;}`,`.position.__jsx-style-dynamic-selector:after{top:${w._}px;}`,`.text-token-preview.__jsx-style-dynamic-selector{padding:${g.N_.ONE_AND_HALF};border:1px solid ${g.bo.INFO};height:128px;width:100%;overflow:auto;border-radius:${g.n_.DEFAULT};margin:${g.N_.TWO_UNITS} 0px;font-family:${c.content.fontFamily};font-size:${c.content.fontSize};font-weight:${c.content.fontWeight};font-style:${c.content.fontStyle};line-height:${c.content.lineHeight};-webkit-letter-spacing:${c.content.letterSpacing};-moz-letter-spacing:${c.content.letterSpacing};-ms-letter-spacing:${c.content.letterSpacing};letter-spacing:${c.content.letterSpacing};-webkit-text-decoration:${c.content.textDecoration};text-decoration:${c.content.textDecoration};text-transform:${c.content.textTransform};display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}`,".text-sample.__jsx-style-dynamic-selector{margin:auto;}"]}),(0,T.jsx)(p.default,{id:O.S.__hash,children:O.S})]})};var F,C,A,k,P,U,L,Z;function R(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function M(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?R(Object(o),!0).forEach((function(t){(0,s.Z)(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):R(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}let H=(F=(0,c.f3)("projectDoc"),C=(0,c.f3)("fontsInProjectFlow"),A=(0,c.f3)("designLanguageManagementFlow"),Z=new WeakMap,k=class extends l.Component{constructor(...e){super(...e),(0,n.Z)(this,"projectDoc",P,this),(0,n.Z)(this,"fontsInProjectFlow",U,this),(0,n.Z)(this,"designLanguageManagementFlow",L,this),Z.set(this,{writable:!0,value:[]}),(0,s.Z)(this,"handleSaveTypographyStyleSet",(e=>{this.designLanguageManagementFlow.createTextStyle(M({},e))})),(0,s.Z)(this,"handleEdit",(e=>{this.designLanguageManagementFlow.editTextStyle(e)})),(0,s.Z)(this,"handleFontWeights",(e=>this.fontsInProjectFlow.getFontAvailableWeights(e)||[])),(0,s.Z)(this,"handleTextTokenDelete",(e=>{this.designLanguageManagementFlow.deleteTextStyle(e)}))}componentDidMount(){this.subscribeForTextStyles()}subscribeForTextStyles(){const e=(0,d.Ys)(this.projectDoc,["designLanguage/textStyleSetsById/*","designLanguage/categoriesById/*"],(()=>{this.forceUpdate()}),"TextStyleManagmentPanelWrapperSelector");(0,r.Z)(this,Z).push((()=>e.dispose()))}componentWillUnmount(){(0,r.Z)(this,Z).forEach((e=>e())),(0,i.Z)(this,Z,[])}render(){return(0,T.jsx)(D,M(M({},this.props),{},{getFontweightsForSelectedFont:this.handleFontWeights,onSave:this.handleSaveTypographyStyleSet,onEdit:this.handleEdit}))}},P=(0,a.Z)(k.prototype,"projectDoc",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),U=(0,a.Z)(k.prototype,"fontsInProjectFlow",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),L=(0,a.Z)(k.prototype,"designLanguageManagementFlow",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),k)},2318:function(e,t,o){o.d(t,{J:function(){return Wt},S:function(){return zt}});var n,s,i,r,a,l,c=o(92809),d=o(65988),p=o(24642),u=o(73202),h=o(33800),y=o(9626),m=o(30773),f=o(67294),b=o(76883),g=o(49899),I=o(65989),v=o(85893);function j(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function N(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?j(Object(o),!0).forEach((function(t){(0,c.Z)(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):j(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}const x=e=>{const{x:t,y:o,width:n,height:s,dropAnchor:i="before",depth:r}=e;let a={width:n?n-2:0,height:s||0,top:o,left:t,borderWidth:2,borderRadius:"4px"};const l=r?20*r+t:t;return"before"===i&&(a={width:n?n+t-l-2:0,height:s?s-2:0,top:o,left:l,borderTopWidth:2}),"after"===i&&(a={width:n?n+t-l-2:0,height:s?s+2:0,top:o,left:l,borderBottomWidth:2}),a};let S=(n=(0,b.f3)("projectDoc"),s=(0,b.f3)("projectUIState"),l=new WeakMap,i=class extends f.Component{constructor(e){super(e),(0,u.Z)(this,"projectDoc",r,this),(0,u.Z)(this,"projectUIState",a,this),l.set(this,{writable:!0,value:[]}),this.state={dropAnchor:null,acceptedDropTarget:null,dropAllowed:!0,hoveredNodes:this.projectUIState.hoveredNodes.nodes}}componentDidMount(){const e=(0,g.Ys)(this.projectUIState,["/dropFlowStates/treeView/dropAnchor","/dropFlowStates/treeView/dropAllowed","/dropFlowStates/treeView/acceptedDropTarget"],(e=>{this.setState({dropAnchor:e.dropFlowStates.treeView.dropAnchor,acceptedDropTarget:e.dropFlowStates.treeView.acceptedDropTarget,dropAllowed:e.dropFlowStates.treeView.dropAllowed})}),"TreeOverlayWrapper");(0,y.Z)(this,l,[()=>e.dispose()])}componentWillUnmount(){(0,h.Z)(this,l).forEach((e=>e())),(0,y.Z)(this,l,[])}render(){var e,t;const{dropAnchor:o,acceptedDropTarget:n,dropAllowed:s}=this.state;if(null===n||void 0===n||!n.domNode)return null;const i=null===(e=n.domNode)||void 0===e?void 0:e.getBoundingClientRect(),r=Number((null===n||void 0===n||null===(t=n.domNode.dataset)||void 0===t?void 0:t.nodeDepth)||0);if(!i)return null;const a={x:i.left,y:i.top+n.domNode.scrollTop,width:i.width,height:i.height,dropAnchor:o||null,depth:r};return(0,v.jsx)("div",{style:N({borderColor:s?I.X4.LIGHT_01:I.z8.DANGER,borderStyle:"solid",position:"fixed",pointerEvents:"none",zIndex:I.kg.TEN},x(a))})}},r=(0,m.Z)(i.prototype,"projectDoc",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),a=(0,m.Z)(i.prototype,"projectUIState",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),i);var w=o(92763),O=o(95690),T=o(40652),_=o(37659);const E=[".folders-wrapper .thq-select-list-item:hover .more-button.jsx-2819578789{opacity:1;}",`.folders-wrapper .thq-select-list-item button{padding-left:${I.N_.FIVE} !important;}`,`.folders-wrapper .thq-select-list-item{padding-left:${I.N_.UNIT} !important;height:28px;}`,`.more-button.jsx-2819578789{position:absolute;right:5px;top:-2px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;background:transparent;color:${I.bo.DEFAULT};width:${I.N_.THREE_UNITS};height:${I.N_.FOUR_UNITS};opacity:0;}`];E.__hash="2819578789";const D=({compName:e,compId:t,isSelected:o,isHomePage:n,isFallbackPage:s,itemType:i})=>(0,v.jsxs)(_.p,{dataAttrs:{[`data-drag-${i}-id`]:t},selected:o,itemId:t,label:e,displayChecked:!1,children:[n&&(0,v.jsx)(w.J,{type:"home",size:12}),s&&(0,v.jsx)(w.J,{type:"fallback",size:12}),(0,v.jsx)(d.default,{id:E.__hash,children:E})]});var F=o(49616);const C=[`.widgets-msg.jsx-1077598056{margin-top:${I.N_.HALF_UNIT};display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;padding-left:48px;color:${I.bo.INFO};font-size:${I.um.INFO};}`,`.widgets-msg.jsx-1077598056>p.jsx-1077598056{margin-bottom:${I.N_.HALF_UNIT};}`,`.widget-item.jsx-1077598056{width:100%;position:relative;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;padding-right:${I.N_.UNIT};}`,`.widget-preview.jsx-1077598056{margin:${I.N_.HALF_UNIT};padding:${I.N_.TWO_UNITS};background-color:${I.bo.HIGHLIGHT};max-width:400px;max-height:400px;}`];C.__hash="1077598056";var A,k,P,U,L,Z,R,M,H=o(30214),$=o(90511),B=o(75222),G=o(70705),z=o(26470);let W=(A=(0,b.f3)("projectUIState"),k=(0,b.f3)("projectDoc"),P=(0,b.f3)("nodeManagementFlow"),M=new WeakMap,U=class extends f.Component{constructor(...e){super(...e),(0,u.Z)(this,"projectUIState",L,this),(0,u.Z)(this,"projectDoc",Z,this),(0,u.Z)(this,"nodeManagementFlow",R,this),(0,c.Z)(this,"state",{components:this.projectUIState.devMode.devComponents||{},bundleRunning:!this.projectUIState.devMode.bundlerStatus||"running"===this.projectUIState.devMode.bundlerStatus||"building"===this.projectUIState.devMode.bundlerStatus,bundleError:"failed"===this.projectUIState.devMode.bundlerStatus||"transform-failed"===this.projectUIState.devMode.bundlerStatus,bundleSuccess:"success"===this.projectUIState.devMode.bundlerStatus,layersSearchText:this.projectUIState.layersSearchText,sidebarWidth:this.projectUIState.sidebarSettings.width,selectedCompName:""}),M.set(this,{writable:!0,value:[]}),(0,c.Z)(this,"addComponent",(e=>{const t=new T.H({semanticType:B.sO.DEV_COMPONENT,primitiveType:B.sO.DEV_COMPONENT,devComponentPath:e,name:(0,G.rk)(e),fakeSize:!1,abilities:{}});this.nodeManagementFlow.addPrimitivesToSelNodeSelectAndScroll({primitives:[t]})})),(0,c.Z)(this,"filterBySearchText",(e=>{if(!this.state.layersSearchText)return!0;const t=this.state.layersSearchText.toLowerCase();return this.state.components[e].component.name.toLowerCase().indexOf(t)>-1}))}componentDidMount(){const e=(0,g.Ys)(this.projectUIState,["devMode/devComponents","devMode/devComponents/*","layersSearchText","sidebarSettings/width"],(e=>{this.setState({components:e.devMode.devComponents,layersSearchText:e.layersSearchText,sidebarWidth:e.sidebarSettings.width})}),"ComponentsSub"),t=(0,g.Ys)(this.projectUIState,["devMode/bundlerStatus"],(e=>{this.setState({editorLoaded:"success"===e.devMode.bundlerStatus,bundleRunning:"running"===e.devMode.bundlerStatus||"building"===e.devMode.bundlerStatus,bundleError:"failed"===e.devMode.bundlerStatus||"transform-failed"===e.devMode.bundlerStatus})}),"BundlerStatusSub");(0,h.Z)(this,M).push((()=>{e.dispose(),t.dispose()}))}componentWillUnmount(){(0,h.Z)(this,M).forEach((e=>e())),(0,y.Z)(this,M,[])}render(){var e;const{components:t,bundleRunning:o,bundleError:n,bundleSuccess:s,selectedCompName:i,sidebarWidth:r}=this.state;if(n)return(0,v.jsxs)("div",{className:`jsx-${C.__hash} widgets-msg`,children:[(0,v.jsx)("p",{className:`jsx-${C.__hash}`,children:"The dev mode is in error state. "})," ",(0,v.jsx)("p",{className:`jsx-${C.__hash}`,children:"Fix the errors in order to see the widgets."}),(0,v.jsx)(d.default,{id:C.__hash,children:C})]});if(o)return(0,v.jsxs)("div",{className:`jsx-${C.__hash} widgets-msg`,children:[(0,v.jsx)("p",{className:`jsx-${C.__hash}`,children:"Initializing widgets..."}),(0,v.jsx)(d.default,{id:C.__hash,children:C})]});if(!Object.keys(t).length&&s)return(0,v.jsxs)("div",{className:`jsx-${C.__hash} widgets-msg`,children:[(0,v.jsx)("div",{className:`jsx-${C.__hash}`,children:(0,v.jsxs)("span",{className:`jsx-${C.__hash}`,children:["You need to add components inside the",(0,v.jsx)("b",{className:`jsx-${C.__hash}`,children:" widgets "}),"folder in dev mode"]})}),(0,v.jsx)(d.default,{id:C.__hash,children:C})]});const a=null===(e=t[i])||void 0===e?void 0:e.component;return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(F.E,{dataAttrs:{"item-type":"widget"},noPadding:!0,onSelect:this.addComponent,children:Object.keys(t).filter(this.filterBySearchText).map(((e,o)=>{const n=(0,z.parse)(e).name||t[e].component.name;return(0,v.jsxs)("div",{onMouseEnter:()=>{this.setState({selectedCompName:e})},"data-tooltip-name":"widget-preview","data-tooltip-color":I.Pt.DEFAULT,className:`jsx-${C.__hash} `+d.default.dynamic([["2302015531",[r]]])+" widget-item",children:[(0,v.jsx)(D,{compId:e,compName:n,isSelected:!1,itemType:"widget"}),(0,v.jsx)(d.default,{id:C.__hash,children:C}),(0,v.jsx)(d.default,{id:"2302015531",dynamic:[r],children:[`.widget-item.__jsx-style-dynamic-selector{width:${r}px;}`]})]},o)}))}),(0,v.jsx)(H._,{name:"widget-preview",children:(0,v.jsxs)("div",{className:`jsx-${C.__hash} widget-preview`,children:[a&&(0,v.jsx)($.k,{component:a}),(0,v.jsx)(d.default,{id:C.__hash,children:C})]})})]})}},L=(0,m.Z)(U.prototype,"projectUIState",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Z=(0,m.Z)(U.prototype,"projectDoc",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),R=(0,m.Z)(U.prototype,"nodeManagementFlow",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),U);var V,K,J;let X=(V=(0,b.f3)("projectDoc"),K=class extends f.PureComponent{constructor(...e){var t;super(...e),(0,u.Z)(this,"projectDoc",J,this),(0,c.Z)(this,"unsubs",[]),(0,c.Z)(this,"state",{title:null===(t=this.projectDoc.components.byId[this.props.compId])||void 0===t?void 0:t.title})}componentDidMount(){const e=(0,g.Ys)(this.projectDoc,[`components/byId/${this.props.compId}/title`],(e=>{var t;return null===(t=e.components.byId[this.props.compId])||void 0===t?void 0:t.title}),"ComponentListItemWrapperSelector"),t=e.observe((e=>{this.setState({title:e})}));this.unsubs=[t,()=>e.dispose()]}componentWillUnmount(){this.unsubs.forEach((e=>e())),this.unsubs=[]}render(){const{title:e}=this.state;return(0,v.jsx)(D,{compId:this.props.compId,compName:e||"",isSelected:this.props.selected,itemType:"component"})}},J=(0,m.Z)(K.prototype,"projectDoc",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),K);var Y,q,Q,ee,te,oe,ne,se,ie,re=o(77729),ae=o(56516),le=o(63410),ce=o(18637),de=o(41146);let pe=(Y=(0,b.f3)("pageManagementFlow"),q=(0,b.f3)("componentManagementFlow"),Q=(0,b.f3)("projectUIState"),ee=(0,b.f3)("projectDoc"),te=class{constructor(){(0,u.Z)(this,"pageManagementFlow",oe,this),(0,u.Z)(this,"componentManagementFlow",ne,this),(0,u.Z)(this,"projectUIState",se,this),(0,u.Z)(this,"projectDoc",ie,this),(0,c.Z)(this,"unsubs",[]),(0,c.Z)(this,"handleDeleteSelectedComponent",(()=>{const e=this.projectUIState.selection.componentId;if(!e)return;e!==this.projectDoc.pages.getHomePageId()&&(this.projectDoc.pages.getIds().includes(e)?this.pageManagementFlow.deletePage({id:e}):this.componentManagementFlow.deleteComponent({id:e}))})),(0,c.Z)(this,"handleRenameSelectedComponent",(()=>{const e=this.projectUIState.selection.componentId;e&&(this.projectDoc.pages.getIds().includes(e)?this.pageManagementFlow.beginEditing(e):this.componentManagementFlow.beginEditing(e))})),(0,c.Z)(this,"handleDuplicateSelectedComponent",(()=>{const e=this.projectUIState.selection.componentId;e&&(this.projectDoc.pages.getIds().includes(e)?this.pageManagementFlow.duplicatePage({id:e}):this.componentManagementFlow.duplicateComponent({compId:e}))}))}attach(e){const t={[de.KEY_COMPONENTS_COMMANDS.DELETE]:this.handleDeleteSelectedComponent,[de.KEY_COMPONENTS_COMMANDS.BACKSPACE]:this.handleDeleteSelectedComponent,[de.KEY_COMPONENTS_COMMANDS.RENAME]:this.handleRenameSelectedComponent,[de.KEY_COMPONENTS_COMMANDS.DUPLICATE]:this.handleDuplicateSelectedComponent};this.unsubs=[(0,ce.N)(e.current,t,{stopPropagation:!0,preventDefault:!0,throttle:!0})]}detach(){this.unsubs.forEach((e=>e()))}},oe=(0,m.Z)(te.prototype,"pageManagementFlow",[Y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ne=(0,m.Z)(te.prototype,"componentManagementFlow",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),se=(0,m.Z)(te.prototype,"projectUIState",[Q],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ie=(0,m.Z)(te.prototype,"projectDoc",[ee],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),te);var ue=o(56e3),he=o(50847),ye=o(62256),me=o(71919),fe=o(28325),be=o.n(fe),ge=(o(35433),o(24335),o(39980),o(15251),o(96836),o(62356),o(21029),o(98759),o(89361)),Ie=o(30499),ve=(o(31558),o(44222)),je=o(99489),Ne=o(66485),xe=o.n(Ne),Se=o(88439);const we=[".cloud-component-modal.jsx-1307166273{width:400px;height:500px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;}",".content-wrapper.jsx-1307166273{width:100%;}",".comp-created-at.jsx-1307166273{-webkit-flex:1;-ms-flex:1;flex:1;}",".arrow-rotate.jsx-1307166273{-webkit-transform:rotate(270deg);-ms-transform:rotate(270deg);transform:rotate(270deg);}",`.comp-version.jsx-1307166273{-webkit-flex:2;-ms-flex:2;flex:2;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;position:relative;padding-right:${I.N_.SIX_UNITS};}`,`.comp-version-options.jsx-1307166273{display:none;position:absolute;right:${I.N_.UNIT};}`,`.heading-link.jsx-1307166273{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin-top:${I.N_.FOUR_UNITS};font-weight:${I.Xw.MEDIUM_600};}`,`.version-history-log.jsx-1307166273{height:150px;overflow:scroll;margin-top:${I.N_.TWO_UNITS};}`,".version-log-spinner.jsx-1307166273{height:150px;}",".modal-header.jsx-1307166273{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;}",`.modal-code-wrapper.jsx-1307166273{margin-top:${I.N_.FOUR_UNITS};height:200px;position:relative;}`,`.modal-code-wrapper.jsx-1307166273>pre.jsx-1307166273{overflow:scroll;border-radius:${I.n_.DEFAULT};height:100%;background-color:${I.Pt.DARK_01};}`,`.modal-footer.jsx-1307166273{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;margin:${I.N_.TWO_UNITS} 0px;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}`,`.cloud-comp-list-item.jsx-1307166273{height:32px;display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;padding:${I.N_.UNIT};-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;border-radius:${I.n_.DEFAULT};width:100%;border-width:1px;border-color:transparent;color:${I.bo.INACTIVE};}`,`.list-item-hover.jsx-1307166273:hover{border-style:solid;border-color:${I.Pt.LIGHT_02};}`,".comp-external-link.jsx-1307166273{cursor:pointer;position:absolute;right:25px;}",`.comp-external-link.jsx-1307166273:hover{color:${I.bo.HIGHLIGHT};}`,`.comp-link.jsx-1307166273:hover{color:${I.bo.HIGHLIGHT};}`,".comp-remove.jsx-1307166273{cursor:pointer;position:absolute;right:0px;}",`.comp-remove.jsx-1307166273:hover{color:${I.bo.HIGHLIGHT};}`,".framework-icon.jsx-1307166273{width:35px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;justify-items:center;}",`.learn-more.jsx-1307166273{margin-right:${I.N_.UNIT};}`];we.__hash="1307166273";var Oe=o(12349);const Te=e=>{const{compUnderRemoveId:t,cloudComp:o,slug:n,deleteInProgress:s,handleDelete:i,cancelDelete:r}=e,a=t.split("@")[1];return(0,v.jsxs)("div",{className:`jsx-${we.__hash} `+d.default.dynamic([["265448073",[I.N_.TWO_UNITS]],["2035247772",[I.N_.FOUR_UNITS,I.N_.FOUR_UNITS,I.Pt.LIGHT_02]]])+" content-wrapper",children:[(0,v.jsx)("h2",{className:`jsx-${we.__hash} `+d.default.dynamic([["265448073",[I.N_.TWO_UNITS]],["2035247772",[I.N_.FOUR_UNITS,I.N_.FOUR_UNITS,I.Pt.LIGHT_02]]])+" warning-message ",children:"Are you sure you want to permanently delete this component ?"}),(0,v.jsx)("p",{className:`jsx-${we.__hash} `+d.default.dynamic([["265448073",[I.N_.TWO_UNITS]],["2035247772",[I.N_.FOUR_UNITS,I.N_.FOUR_UNITS,I.Pt.LIGHT_02]]])+" align-text",children:"If you proceed, the projects that are using this will not be able to import this component anymore."}),(0,v.jsxs)("div",{className:`jsx-${we.__hash} `+d.default.dynamic([["265448073",[I.N_.TWO_UNITS]],["2035247772",[I.N_.FOUR_UNITS,I.N_.FOUR_UNITS,I.Pt.LIGHT_02]]])+" cloud-comp-list-item delete-cloud-comp-list-item",children:[(0,v.jsx)("span",{className:`jsx-${we.__hash} `+d.default.dynamic([["265448073",[I.N_.TWO_UNITS]],["2035247772",[I.N_.FOUR_UNITS,I.N_.FOUR_UNITS,I.Pt.LIGHT_02]]])+" framework-icon",children:(null===o||void 0===o?void 0:o.framework)===ye.cd.REACT?(0,v.jsx)(w.J,{type:Ie._["code-export/project-react"],size:16}):(0,v.jsx)(w.J,{type:Ie._["code-export/project-next"],size:20})}),(0,v.jsx)("span",{className:`jsx-${we.__hash} `+d.default.dynamic([["265448073",[I.N_.TWO_UNITS]],["2035247772",[I.N_.FOUR_UNITS,I.N_.FOUR_UNITS,I.Pt.LIGHT_02]]])+" comp-created-at",children:o.created.substring(0,10)}),(0,v.jsx)("span",{className:`jsx-${we.__hash} `+d.default.dynamic([["265448073",[I.N_.TWO_UNITS]],["2035247772",[I.N_.FOUR_UNITS,I.N_.FOUR_UNITS,I.Pt.LIGHT_02]]])+" comp-version",children:(0,v.jsxs)("a",{href:(0,je.AA)(n,t),target:"_blank",rel:"noreferrer",className:`jsx-${we.__hash} `+d.default.dynamic([["265448073",[I.N_.TWO_UNITS]],["2035247772",[I.N_.FOUR_UNITS,I.N_.FOUR_UNITS,I.Pt.LIGHT_02]]])+" comp-link",children:[a,(0,v.jsx)("span",{className:`jsx-${we.__hash} `+d.default.dynamic([["265448073",[I.N_.TWO_UNITS]],["2035247772",[I.N_.FOUR_UNITS,I.N_.FOUR_UNITS,I.Pt.LIGHT_02]]])+" comp-external-link",children:(0,v.jsx)(w.J,{type:Ie.u2["actions/follow-link"],size:12})})]})})]}),(0,v.jsxs)("div",{style:{justifyContent:"space-around"},className:`jsx-${we.__hash} `+d.default.dynamic([["265448073",[I.N_.TWO_UNITS]],["2035247772",[I.N_.FOUR_UNITS,I.N_.FOUR_UNITS,I.Pt.LIGHT_02]]])+" modal-footer",children:[(0,v.jsx)(ge.z,{size:"medium",style:"outline",onClick:r,children:"Cancel"}),(0,v.jsx)(ge.z,{size:"medium",colorScheme:"danger",onClick:i,children:s?(0,v.jsx)("span",{style:{width:"60px"},className:`jsx-${we.__hash} `+d.default.dynamic([["265448073",[I.N_.TWO_UNITS]],["2035247772",[I.N_.FOUR_UNITS,I.N_.FOUR_UNITS,I.Pt.LIGHT_02]]]),children:(0,v.jsx)(ve.$,{})}):(0,v.jsx)(v.Fragment,{children:"Yes, delete"})})]}),(0,v.jsx)(d.default,{id:"265448073",dynamic:[I.N_.TWO_UNITS],children:[`.spinner-delete>.spinner{top:0px;left:${I.N_.TWO_UNITS};}`]}),(0,v.jsx)(d.default,{id:we.__hash,children:we}),(0,v.jsx)(d.default,{id:"2035247772",dynamic:[I.N_.FOUR_UNITS,I.N_.FOUR_UNITS,I.Pt.LIGHT_02],children:[`.warning-message.__jsx-style-dynamic-selector{text-align:'center';margin-bottom:${I.N_.FOUR_UNITS};}`,".align-text.__jsx-style-dynamic-selector{text-align:center;}",`.delete-cloud-comp-list-item.__jsx-style-dynamic-selector{margin-top:${I.N_.FOUR_UNITS};border-color:${I.Pt.LIGHT_02};}`]})]})};var _e,Ee,De,Fe,Ce,Ae,ke,Pe,Ue,Le;let Ze=(_e=(0,b.f3)("cloudComponentsFlow"),Ee=(0,b.f3)("projectDoc"),De=(0,b.f3)("projectUIState"),Fe=(0,b.f3)("notificationsManagementFlow"),Le=new WeakMap,Ce=class extends f.Component{constructor(...e){super(...e),(0,u.Z)(this,"cloudComponentsFlow",Ae,this),(0,u.Z)(this,"projectDoc",ke,this),(0,u.Z)(this,"projectUIState",Pe,this),(0,u.Z)(this,"notificationsManagementFlow",Ue,this),(0,c.Z)(this,"state",{codeGenerationInProgress:!0,code:null,url:null,urlList:this.projectDoc.cloudComponents.getUrlList(this.props.compId),compUnderRemoveId:null,deleteInProgress:!1}),Le.set(this,{writable:!0,value:[]}),(0,c.Z)(this,"generateModule",(async()=>{const{code:e,url:t}=await this.cloudComponentsFlow.generateCloudComponentLink(this.props.compId,this.props.framework)||{};e&&t&&(this.setState({codeGenerationInProgress:!1,code:e,url:t}),be().highlightAll())})),(0,c.Z)(this,"copyImport",(()=>{const{url:e}=this.state,t=this.projectDoc.components.byId[this.props.compId];if(!e||null===t||void 0===t||!t.title)return;const o=`import ${(0,Se.Gz)(t.title)} from "${e}"`;xe()(o),this.notificationsManagementFlow.createNotification(me.k.INFO,"Import Copied")})),(0,c.Z)(this,"handleOptions",(async e=>{var t,o;const n=null===e||void 0===e||null===(t=e.target)||void 0===t||null===(o=t.closest("[data-list-action]"))||void 0===o?void 0:o.dataset,s=null===n||void 0===n?void 0:n.listAction,i=null===n||void 0===n?void 0:n.itemId;s&&"remove"===s&&i&&this.setState({compUnderRemoveId:i})})),(0,c.Z)(this,"handleDelete",(async()=>{const{compUnderRemoveId:e}=this.state;e&&this.setState({deleteInProgress:!0},(async()=>{await this.cloudComponentsFlow.deleteComponent({compId:this.props.compId,url:e}),this.setState({deleteInProgress:!1,compUnderRemoveId:null})}))})),(0,c.Z)(this,"cancelDelete",(()=>{this.setState({compUnderRemoveId:null})}))}componentDidMount(){this.generateModule();const e=(0,g.Ys)(this.projectDoc,[`cloudComponents/byId/${this.props.compId}/*`],(e=>{this.setState({urlList:e.cloudComponents.getUrlList(this.props.compId)})}),"CloudComponentsUrlsSub"),t=(0,g.Ys)(this.projectDoc,["cloudComponents/byId/*","cloudComponents/byId/*/*"],((e,t)=>{t.forEach((t=>{const{pathArray:o,op:n}=t;if(3===o.length&&o[2]===this.props.compId&&this.setState({urlList:e.cloudComponents.getUrlList(this.props.compId)}),4===o.length&&o[2]===this.props.compId&&"remove"===n){const t=e.cloudComponents.getUrlList(this.props.compId);if(0===Object.keys(t).length)return void this.props.onDismiss();this.setState({urlList:t})}}))}),"SubForInitialUrl");(0,h.Z)(this,Le).push((()=>e.dispose()),(()=>t.dispose()))}componentWillUnmount(){(0,h.Z)(this,Le).forEach((e=>e()))}componentDidUpdate(e,t){t.compUnderRemoveId!==this.state.compUnderRemoveId&&be().highlightAll()}render(){const{deleteInProgress:e,codeGenerationInProgress:t,code:o,url:n,urlList:s,compUnderRemoveId:i}=this.state,{onDismiss:r}=this.props;return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)("div",{className:`jsx-${we.__hash} jsx-3702231112 `+d.default.dynamic([["2281813784",[t?"block":"none"]]])+" cloud-component-modal",children:i&&s[i]?(0,v.jsx)(Te,{slug:this.projectUIState.slug,compUnderRemoveId:i,cloudComp:s[i],deleteInProgress:e,cancelDelete:this.cancelDelete,handleDelete:this.handleDelete}):(0,v.jsxs)("div",{className:`jsx-${we.__hash} jsx-3702231112 `+d.default.dynamic([["2281813784",[t?"block":"none"]]])+" content-wrapper",children:[(0,v.jsxs)("div",{className:`jsx-${we.__hash} jsx-3702231112 `+d.default.dynamic([["2281813784",[t?"block":"none"]]])+" modal-header",children:[(0,v.jsx)("h3",{className:`jsx-${we.__hash} jsx-3702231112 `+d.default.dynamic([["2281813784",[t?"block":"none"]]]),children:"Cloud Component"}),(0,v.jsx)(ge.z,{style:"transparent",size:"small",onClick:r,children:(0,v.jsx)(w.J,{type:"actions/close",size:16,color:I.bo.INACTIVE})})]}),(0,v.jsxs)("div",{className:`jsx-${we.__hash} jsx-3702231112 `+d.default.dynamic([["2281813784",[t?"block":"none"]]])+" modal-code-wrapper",children:[(0,v.jsx)("div",{className:`jsx-${we.__hash} jsx-3702231112 `+d.default.dynamic([["2281813784",[t?"block":"none"]]])+" spinner-wrapper",children:(0,v.jsx)(ve.$,{})}),(0,v.jsx)("pre",{className:`jsx-${we.__hash} jsx-3702231112 `+d.default.dynamic([["2281813784",[t?"block":"none"]]]),children:(0,v.jsx)("code",{className:`jsx-${we.__hash} jsx-3702231112 `+d.default.dynamic([["2281813784",[t?"block":"none"]]])+" language-jsx",children:o})})]}),(0,v.jsx)("div",{className:`jsx-${we.__hash} jsx-3702231112 `+d.default.dynamic([["2281813784",[t?"block":"none"]]])+" modal-footer space-between",children:(0,v.jsx)("div",{className:`jsx-${we.__hash} jsx-3702231112 `+d.default.dynamic([["2281813784",[t?"block":"none"]]]),children:(0,v.jsxs)(Oe.g,{gap:"two",children:[(0,v.jsx)(ge.z,{style:"outline",onClick:()=>{xe()(n),this.notificationsManagementFlow.createNotification(me.k.INFO,"Link Copied")},isDisabled:!n,children:"Copy URL"}),(0,v.jsx)(ge.z,{onClick:this.copyImport,isDisabled:!n,children:"Copy Import"})]})})}),(0,v.jsxs)("div",{className:`jsx-${we.__hash} jsx-3702231112 `+d.default.dynamic([["2281813784",[t?"block":"none"]]])+" heading-link",children:["Version history"," ",Object.keys(s||{}).length>0?(0,v.jsxs)(v.Fragment,{children:["(",Object.keys(s||{}).length,")"]}):null]}),t&&0===Object.keys(s).length?(0,v.jsx)("div",{className:`jsx-${we.__hash} jsx-3702231112 `+d.default.dynamic([["2281813784",[t?"block":"none"]]])+" version-log-spinner",children:(0,v.jsx)(ve.$,{})}):(0,v.jsx)("div",{className:`jsx-${we.__hash} jsx-3702231112 `+d.default.dynamic([["2281813784",[t?"block":"none"]]])+" version-history-log",children:(0,v.jsx)("ul",{onClick:this.handleOptions,className:`jsx-${we.__hash} jsx-3702231112 `+d.default.dynamic([["2281813784",[t?"block":"none"]]]),children:Object.keys(s).map((e=>{const o=s[e],n=e.split("@")[1];return null!==o&&void 0!==o&&o.framework?(0,v.jsxs)("li",{className:`jsx-${we.__hash} jsx-3702231112 `+d.default.dynamic([["2281813784",[t?"block":"none"]]])+" cloud-comp-list-item list-item-hover",children:[(0,v.jsx)("span",{className:`jsx-${we.__hash} jsx-3702231112 `+d.default.dynamic([["2281813784",[t?"block":"none"]]])+" framework-icon",children:(null===o||void 0===o?void 0:o.framework)===ye.cd.REACT?(0,v.jsx)(w.J,{type:Ie._["code-export/project-react"],size:20}):(0,v.jsx)(w.J,{type:Ie._["code-export/project-next"],size:24})}),(0,v.jsx)("span",{className:`jsx-${we.__hash} jsx-3702231112 `+d.default.dynamic([["2281813784",[t?"block":"none"]]])+" comp-created-at",children:o.created.substring(0,10)}),(0,v.jsxs)("span",{className:`jsx-${we.__hash} jsx-3702231112 `+d.default.dynamic([["2281813784",[t?"block":"none"]]])+" comp-version",children:[(0,v.jsxs)("a",{href:(0,je.AA)(this.projectUIState.slug,e),target:"_blank",rel:"noreferrer",className:`jsx-${we.__hash} jsx-3702231112 `+d.default.dynamic([["2281813784",[t?"block":"none"]]])+" comp-link",children:[n,(0,v.jsx)("span",{className:`jsx-${we.__hash} jsx-3702231112 `+d.default.dynamic([["2281813784",[t?"block":"none"]]])+" comp-external-link",children:(0,v.jsx)(w.J,{type:Ie.u2["actions/follow-link"],size:12})})]}),(0,v.jsx)("span",{"data-list-action":"remove","data-item-id":e,className:`jsx-${we.__hash} jsx-3702231112 `+d.default.dynamic([["2281813784",[t?"block":"none"]]])+" comp-remove",children:(0,v.jsx)(w.J,{type:"trash",size:12})})]})]},e):null}))})})]})}),(0,v.jsx)(d.default,{id:"2281813784",dynamic:[t?"block":"none"],children:[`.spinner-wrapper{position:absolute;height:200px;width:100%;top:0px;display:${t?"block":"none"};}`,".spinner-wrapper>.spinner{top:50% !important;}",".version-log-spinner>.spinner{top:50% !important;}"]}),(0,v.jsx)(d.default,{id:"3702231112",children:[".space-between.jsx-3702231112{-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;}"]}),(0,v.jsx)(d.default,{id:we.__hash,children:we})]})}},Ae=(0,m.Z)(Ce.prototype,"cloudComponentsFlow",[_e],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ke=(0,m.Z)(Ce.prototype,"projectDoc",[Ee],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Pe=(0,m.Z)(Ce.prototype,"projectUIState",[De],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ue=(0,m.Z)(Ce.prototype,"notificationsManagementFlow",[Fe],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ce);var Re,Me,He,$e,Be,Ge,ze,We,Ve,Ke,Je,Xe,Ye,qe,Qe,et,tt,ot,nt,st,it,rt=o(61030);function at(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function lt(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?at(Object(o),!0).forEach((function(t){(0,c.Z)(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):at(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}let ct=(Re=(0,b.f3)("projectDoc"),Me=(0,b.f3)("projectUIState"),He=(0,b.f3)("componentManagementFlow"),$e=(0,b.f3)("routerService"),Be=(0,b.f3)("nodeSelectionFlow"),Ge=(0,b.f3)("navbarFlow"),ze=(0,b.f3)("absolutePositionedLayerFlow"),We=(0,b.f3)("notificationsManagementFlow"),Ve=(0,b.f3)("modalManagementFlow"),Ke=(0,b.f3)("clipboardFlow"),Je=class extends f.PureComponent{constructor(...e){super(...e),(0,u.Z)(this,"projectDoc",Xe,this),(0,u.Z)(this,"projectUIState",Ye,this),(0,u.Z)(this,"componentManagementFlow",qe,this),(0,u.Z)(this,"routerService",Qe,this),(0,u.Z)(this,"nodeSelectionFlow",et,this),(0,u.Z)(this,"navbarFlow",tt,this),(0,u.Z)(this,"absolutePositionedLayerFlow",ot,this),(0,u.Z)(this,"notificationsManagementFlow",nt,this),(0,u.Z)(this,"modalManagementFlow",st,this),(0,u.Z)(this,"clipboardFlow",it,this),(0,c.Z)(this,"keyboardShortcutsSensor",new pe),(0,c.Z)(this,"unsubs",[]),(0,c.Z)(this,"state",{compIds:this.projectDoc.components.getIdsOrderedByCompName(),componentList:this.projectUIState.componentList,layersSearchText:this.projectUIState.layersSearchText,selectedComponentId:this.projectUIState.selection.componentId}),(0,c.Z)(this,"listRef",f.createRef()),(0,c.Z)(this,"editingInputRef",f.createRef()),(0,c.Z)(this,"handleAdd",(()=>{this.componentManagementFlow.createEmptyComponent()})),(0,c.Z)(this,"handleImportUIDL",(async e=>{if(!e)return;const t=Array.from(e).map((e=>e.text())),o=await Promise.all(t);try{const e=o.map((e=>JSON.parse(e)));await this.componentManagementFlow.createFromUIDL({uidls:e})}catch(n){this.notificationsManagementFlow.createNotification(me.k.ERROR,"Could not parse file(s) as UIDLs")}})),(0,c.Z)(this,"handleComponentSelection",(e=>{var t;this.projectUIState.componentList.componentUnderLocalWork&&(null===(t=this.editingInputRef.current)||void 0===t||t.blur());this.componentManagementFlow.select(e),setTimeout((()=>{var t,o;null===(t=document.querySelector(`[data-item-id="${e}"]`))||void 0===t||null===(o=t.firstElementChild)||void 0===o||o.focus()}))})),(0,c.Z)(this,"handleComponentRename",(e=>{this.componentManagementFlow.beginEditing(e)})),(0,c.Z)(this,"handleSearchChange",(e=>{(0,g.JG)(this.projectUIState,(({componentList:t})=>{t.currentComponentSearch=e.target.value}))})),(0,c.Z)(this,"getCloudComponentModal",((e,t)=>rt.d.createCustomModal({Component:Ze,data:{compId:e,framework:t},onDismiss:()=>this.modalManagementFlow.hideModal()}))),(0,c.Z)(this,"handleContextMenu",((e,t)=>{var o;const n=this.projectUIState.selection.componentId,s=this.projectUIState.lastVisitedPage,i=[{label:re.dU.RENAME,action:()=>this.componentManagementFlow.beginEditing(e)},{label:re.dU.DUPLICATE,action:()=>this.componentManagementFlow.duplicateComponent({compId:e})},{label:re.dU.DELETE,action:()=>this.componentManagementFlow.deleteComponent({id:e})},{label:re.dU.COPY_COMPONENT_TO_CLIPBOARD,action:()=>this.clipboardFlow.copyComponentToClipboard(e)},{label:"React Cloud Component",separatorBefore:!0,action:()=>this.modalManagementFlow.showModal(this.getCloudComponentModal(e,ye.cd.REACT),{background:I.Pt.DEFAULT,padding:I.N_.FOUR_UNITS})},{label:"Next.js Cloud Component",action:()=>this.modalManagementFlow.showModal(this.getCloudComponentModal(e,ye.cd.NEXT),{background:I.Pt.DEFAULT,padding:I.N_.FOUR_UNITS})},{label:re.dU.ADD_TO_STAGE,action:()=>this.componentManagementFlow.addComponentToSelectedElementPageOrComp({compId:e}),separatorBefore:!0,disabled:this.projectUIState.selection.componentId===e,disabledTooltip:ue.w.ADD_TO_STAGE},{label:s&&n&&this.projectDoc.components.byId[n]?`Add to ${null===(o=this.projectDoc.pages.byId[s])||void 0===o?void 0:o.title}`:re.dU.ADD_TO_PREVIOUS_PAGE,action:()=>this.componentManagementFlow.addComponentToLastVisitedPage({compId:e}),disabled:!(n&&s&&!this.projectDoc.pages.byId[n])}];this.absolutePositionedLayerFlow.showContextMenu((0,v.jsx)(ae.x,{menuItems:i}),(0,le.FG)(t))})),(0,c.Z)(this,"renderCompListItem",(e=>{const{componentUnderLocalWork:t}=this.state.componentList;return(null===t||void 0===t?void 0:t.id)===e?(0,v.jsx)("div",{style:{marginLeft:`${I.N_.UNIT}`},children:(0,v.jsx)(he.E,{id:null===t||void 0===t?void 0:t.id,onConfirmChange:this.handleSave,ref:this.editingInputRef,initialValue:t.title,selectOnMount:!0,inputSize:"sm-wide",indent:I.iY.FIVE+1})},null===t||void 0===t?void 0:t.id):(0,v.jsx)(X,{selected:this.state.selectedComponentId===e,compId:e},e)})),(0,c.Z)(this,"handleSave",((e,t)=>{this.componentManagementFlow.commitComponent(t)})),(0,c.Z)(this,"filterBySearchText",(e=>{var t;if(!this.state.componentList.currentComponentSearch)return!0;const o=(null===(t=this.projectDoc.components.byId[e])||void 0===t?void 0:t.title.toLowerCase())||"",n=this.state.componentList.currentComponentSearch.toLowerCase();return o.indexOf(n)>-1}))}componentDidMount(){const e=(0,g.Ys)(this.projectDoc,["components/byId/*","components/byId/*/title"],(e=>{this.setState({compIds:e.components.getIdsOrderedByCompName()})}),"compListWrapperCompSelector"),t=(0,g.Ys)(this.projectUIState,["componentList/*","selection/componentId","layersSearchText"],(e=>{this.setState({componentList:lt({},e.componentList),selectedComponentId:e.selection.componentId,layersSearchText:e.layersSearchText})}),"compListWrapperUIStateSelector");var o,n;(this.keyboardShortcutsSensor.attach(this.listRef),this.unsubs=[()=>{e.dispose(),t.dispose()}],"undefined"===typeof this.projectUIState.filesTabScroll)&&(null===(o=document.querySelector(`[data-item-id="${this.state.selectedComponentId}"]`))||void 0===o||null===(n=o.firstElementChild)||void 0===n||n.scrollIntoView())}componentWillUnmount(){this.keyboardShortcutsSensor.detach(),this.unsubs.forEach((e=>e())),this.unsubs=[]}render(){const{compIds:e}=this.state;return(0,v.jsx)(F.E,{onSelect:this.handleComponentSelection,onContextMenu:this.handleContextMenu,onDoubleClick:this.handleComponentRename,ref:this.listRef,dataAttrs:{"item-type":"component"},noPadding:!0,children:e.filter(this.filterBySearchText).map(this.renderCompListItem)})}},Xe=(0,m.Z)(Je.prototype,"projectDoc",[Re],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ye=(0,m.Z)(Je.prototype,"projectUIState",[Me],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),qe=(0,m.Z)(Je.prototype,"componentManagementFlow",[He],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Qe=(0,m.Z)(Je.prototype,"routerService",[$e],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),et=(0,m.Z)(Je.prototype,"nodeSelectionFlow",[Be],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),tt=(0,m.Z)(Je.prototype,"navbarFlow",[Ge],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ot=(0,m.Z)(Je.prototype,"absolutePositionedLayerFlow",[ze],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),nt=(0,m.Z)(Je.prototype,"notificationsManagementFlow",[We],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),st=(0,m.Z)(Je.prototype,"modalManagementFlow",[Ve],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),it=(0,m.Z)(Je.prototype,"clipboardFlow",[Ke],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Je);var dt,pt,ut,ht,yt;let mt=(dt=(0,b.f3)("projectDoc"),pt=(0,b.f3)("pageManagementFlow"),ut=class extends f.PureComponent{constructor(...e){var t,o,n;super(...e),(0,u.Z)(this,"projectDoc",ht,this),(0,u.Z)(this,"pageManagementFlow",yt,this),(0,c.Z)(this,"unsubs",[]),(0,c.Z)(this,"state",{title:null===(t=this.projectDoc.pages.byId[this.props.pageId])||void 0===t?void 0:t.title,isHomePage:null===(o=this.projectDoc.pages.byId[this.props.pageId])||void 0===o?void 0:o.isHomePage,isFallbackPage:null===(n=this.projectDoc.pages.byId[this.props.pageId])||void 0===n?void 0:n.isFallbackPage})}componentDidMount(){const e=(0,g.Ys)(this.projectDoc,[`pages/byId/${this.props.pageId}/*`],(e=>{var t,o,n;return{title:null===(t=e.pages.byId[this.props.pageId])||void 0===t?void 0:t.title,isHomePage:null===(o=e.pages.byId[this.props.pageId])||void 0===o?void 0:o.isHomePage,isFallbackPage:null===(n=e.pages.byId[this.props.pageId])||void 0===n?void 0:n.isFallbackPage}}),"PageListItemWrapper1"),t=e.observe((({title:e,isHomePage:t,isFallbackPage:o})=>{this.setState({title:e,isHomePage:t,isFallbackPage:o})}));this.unsubs=[t,()=>e.dispose()]}componentWillUnmount(){this.unsubs.forEach((e=>e())),this.unsubs=[]}render(){const{title:e,isHomePage:t,isFallbackPage:o}=this.state,{pageId:n,selected:s}=this.props;return(0,v.jsx)(D,{compId:n,compName:e||"",isHomePage:t,isFallbackPage:o,isSelected:s,itemType:"page"})}},ht=(0,m.Z)(ut.prototype,"projectDoc",[dt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),yt=(0,m.Z)(ut.prototype,"pageManagementFlow",[pt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ut);var ft,bt,gt,It,vt,jt,Nt,xt,St;let wt=(ft=(0,b.f3)("projectUIState"),bt=(0,b.f3)("pageManagementFlow"),gt=(0,b.f3)("routerService"),It=(0,b.f3)("projectDoc"),vt=class extends f.PureComponent{constructor(...e){super(...e),(0,u.Z)(this,"projectUIState",jt,this),(0,u.Z)(this,"pageManagementFlow",Nt,this),(0,u.Z)(this,"routerService",xt,this),(0,u.Z)(this,"projectDoc",St,this),(0,c.Z)(this,"unsubs",[]),(0,c.Z)(this,"state",{page:this.projectUIState.pageList.pageUnderLocalWork}),(0,c.Z)(this,"handleSave",((e,t)=>{this.pageManagementFlow.commitPage(t)}))}componentDidMount(){const e=(0,g.Ys)(this.projectUIState,["pageUnderLocalWork"],(e=>e.pageList.pageUnderLocalWork),"EditingPageListItemWrapper"),t=e.observe((e=>{this.setState({page:e})}));this.unsubs=[t,()=>e.dispose()]}componentWillUnmount(){this.unsubs.forEach((e=>e())),this.unsubs=[]}render(){const{page:e}=this.state;return e?(0,v.jsx)("div",{style:{marginLeft:`${I.N_.UNIT}`},children:(0,v.jsx)(he.E,{id:e.id,onConfirmChange:this.handleSave,initialValue:e.title,selectOnMount:!0,inputSize:"sm-wide",indent:I.iY.FIVE+1})}):null}},jt=(0,m.Z)(vt.prototype,"projectUIState",[ft],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Nt=(0,m.Z)(vt.prototype,"pageManagementFlow",[bt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),xt=(0,m.Z)(vt.prototype,"routerService",[gt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),St=(0,m.Z)(vt.prototype,"projectDoc",[It],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),vt);var Ot,Tt,_t,Et,Dt,Ft,Ct,At,kt,Pt,Ut,Lt,Zt;function Rt(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function Mt(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?Rt(Object(o),!0).forEach((function(t){(0,c.Z)(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):Rt(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}let Ht=(Ot=(0,b.f3)("projectDoc"),Tt=(0,b.f3)("projectUIState"),_t=(0,b.f3)("pageManagementFlow"),Et=(0,b.f3)("nodeSelectionFlow"),Dt=(0,b.f3)("navbarFlow"),Ft=(0,b.f3)("absolutePositionedLayerFlow"),Ct=class extends f.PureComponent{constructor(...e){super(...e),(0,u.Z)(this,"projectDoc",At,this),(0,u.Z)(this,"projectUIState",kt,this),(0,u.Z)(this,"pageManagementFlow",Pt,this),(0,u.Z)(this,"nodeSelectionFlow",Ut,this),(0,u.Z)(this,"navbarFlow",Lt,this),(0,u.Z)(this,"absolutePositionedLayerFlow",Zt,this),(0,c.Z)(this,"keyboardShortcutsSensor",new pe),(0,c.Z)(this,"unsubs",[]),(0,c.Z)(this,"state",{pageIds:this.projectDoc.pages.getIdsOrderedByPageName(),pageList:this.projectUIState.pageList,selectedPageId:this.projectUIState.selection.componentId,layersSearchText:this.projectUIState.layersSearchText}),(0,c.Z)(this,"listRef",f.createRef()),(0,c.Z)(this,"handleAdd",(()=>{this.pageManagementFlow.createEmptyPage()})),(0,c.Z)(this,"hideSettings",(()=>{this.pageManagementFlow.closeSettings()})),(0,c.Z)(this,"handlePageSelection",(e=>{this.pageManagementFlow.select(e),setTimeout((()=>{var t,o;null===(t=document.querySelector(`[data-item-id="${e}"]`))||void 0===t||null===(o=t.firstElementChild)||void 0===o||o.focus()}))})),(0,c.Z)(this,"handlePageRename",(e=>{this.pageManagementFlow.beginEditing(e)})),(0,c.Z)(this,"handleContextMenu",((e,t)=>{const o=[{label:re.dU.RENAME,action:()=>this.pageManagementFlow.beginEditing(e)},{label:re.dU.DUPLICATE,action:()=>this.pageManagementFlow.duplicatePage({id:e})},{label:re.dU.DELETE,action:()=>this.pageManagementFlow.deletePage({id:e}),disabled:e===this.projectDoc.pages.getHomePageId()},{label:re.dU.SET_HOMEPAGE,action:()=>this.pageManagementFlow.setAsHomePage(e),disabled:e===this.projectDoc.pages.getHomePageId()||e===this.projectDoc.pages.getFallbackPageId(),separatorBefore:!0},{label:re.dU.SET_FALLBACK,action:()=>this.pageManagementFlow.setAsFallbackPage(e),disabled:e===this.projectDoc.pages.getHomePageId()||e===this.projectDoc.pages.getFallbackPageId()},{label:re.dU.SETTINGS,action:()=>this.pageManagementFlow.openSettings(e)}];this.absolutePositionedLayerFlow.showContextMenu((0,v.jsx)(ae.x,{menuItems:o}),(0,le.FG)(t))})),(0,c.Z)(this,"filterBySearchText",(e=>{var t;if(!this.state.layersSearchText)return!0;const o=(null===(t=this.projectDoc.pages.byId[e])||void 0===t?void 0:t.title.toLowerCase())||"",n=this.state.layersSearchText.toLowerCase();return o.indexOf(n)>-1})),(0,c.Z)(this,"renderPageListItem",(e=>{var t;return(null===(t=this.state.pageList.pageUnderLocalWork)||void 0===t?void 0:t.id)===e?(0,v.jsx)(wt,{},e):(0,v.jsx)(mt,{selected:this.state.selectedPageId===e,pageId:e},e)}))}componentDidMount(){const e=(0,g.Ys)(this.projectDoc,["pages/byId/*","pages/byId/*/title"],(e=>{this.setState({pageIds:e.pages.getIdsOrderedByPageName()})}),"PageListWrapper1"),t=(0,g.Ys)(this.projectUIState,["pageList/*","selection/componentId","layersSearchText"],(e=>{this.setState({pageList:Mt({},e.pageList),selectedPageId:e.selection.componentId,layersSearchText:e.layersSearchText})}),"PageListWrapper2");var o,n;(this.keyboardShortcutsSensor.attach(this.listRef),this.unsubs=[()=>{e.dispose(),t.dispose()}],"undefined"===typeof this.projectUIState.filesTabScroll)&&(null===(o=document.querySelector(`[data-item-id="${this.state.selectedPageId}"]`))||void 0===o||null===(n=o.firstElementChild)||void 0===n||n.scrollIntoView())}componentWillUnmount(){this.unsubs.forEach((e=>e())),this.unsubs=[],this.keyboardShortcutsSensor.detach()}render(){const{pageIds:e}=this.state;return(0,v.jsx)(F.E,{onSelect:this.handlePageSelection,onContextMenu:this.handleContextMenu,onDoubleClick:this.handlePageRename,ref:this.listRef,dataAttrs:{"item-type":"page"},noPadding:!0,children:e.filter(this.filterBySearchText).map(this.renderPageListItem)})}},At=(0,m.Z)(Ct.prototype,"projectDoc",[Ot],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),kt=(0,m.Z)(Ct.prototype,"projectUIState",[Tt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Pt=(0,m.Z)(Ct.prototype,"pageManagementFlow",[_t],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ut=(0,m.Z)(Ct.prototype,"nodeSelectionFlow",[Et],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Lt=(0,m.Z)(Ct.prototype,"navbarFlow",[Dt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Zt=(0,m.Z)(Ct.prototype,"absolutePositionedLayerFlow",[Ft],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ct);var $t=o(74736);function Bt(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function Gt(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?Bt(Object(o),!0).forEach((function(t){(0,c.Z)(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):Bt(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}let zt;!function(e){e.PAGES="pages",e.COMPONENTS="components",e.WIDGETS="widgets"}(zt||(zt={}));const Wt=e=>{const{toggleFolder:t,onFolderContextMenu:o,expandedPages:n,expandedComponents:s,expandedWidgets:i,filesGridTemplateRows:r,height:a="default",changeFilesGridTemplateRows:l,onScroll:c,scroll:u,displayWidgets:h}=e,y=(0,f.useRef)(null);(0,f.useEffect)((()=>{var e;u&&(null===(e=y.current)||void 0===e||e.scrollTo({top:u}))}),[]);const{0:m,1:b}=(0,f.useState)(r),g=e=>{o(zt.COMPONENTS,e)},j=e=>{o(zt.WIDGETS,e)},N=e=>{o(zt.PAGES,e)};return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(p.Z,{minSize:50,snapOffset:10,onDrag:(e,t,o)=>{b(o),l(o)},gridTemplateRows:m,render:({getGridProps:e,getGutterProps:o})=>(0,v.jsxs)("div",Gt(Gt({},e()),{},{className:`jsx-${O.W.__hash} jsx-${O.H.__hash} `+d.default.dynamic([["1992866052",["default"===a?100:135,I.N_.UNIT]]])+" grid",children:[(0,v.jsxs)("div",{ref:y,onScroll:e=>c(e.nativeEvent),className:`jsx-${O.W.__hash} jsx-${O.H.__hash} `+d.default.dynamic([["1992866052",["default"===a?100:135,I.N_.UNIT]]])+" folders-wrapper",children:[(0,v.jsxs)("div",{onClick:()=>t(zt.PAGES),onContextMenu:N,className:`jsx-${O.W.__hash} jsx-${O.H.__hash} `+d.default.dynamic([["1992866052",["default"===a?100:135,I.N_.UNIT]]])+" folder-header",children:[(0,v.jsx)("div",{className:`jsx-${O.W.__hash} jsx-${O.H.__hash} `+d.default.dynamic([["1992866052",["default"===a?100:135,I.N_.UNIT]]])+" expand-icon "+(n?"expanded":""),children:(0,v.jsx)(w.J,{type:"expand",size:8})}),(0,v.jsx)("div",{className:`jsx-${O.W.__hash} jsx-${O.H.__hash} `+d.default.dynamic([["1992866052",["default"===a?100:135,I.N_.UNIT]]])+" folder-icon",children:(0,v.jsx)(w.J,{type:n?"folder-open":"folder",size:16,color:I.bo.INACTIVE})}),(0,v.jsx)("span",{className:`jsx-${O.W.__hash} jsx-${O.H.__hash} `+d.default.dynamic([["1992866052",["default"===a?100:135,I.N_.UNIT]]]),children:"Pages"})]}),n&&(0,v.jsx)(Ht,{}),(0,v.jsxs)("div",{onClick:()=>t(zt.COMPONENTS),onContextMenu:g,className:`jsx-${O.W.__hash} jsx-${O.H.__hash} `+d.default.dynamic([["1992866052",["default"===a?100:135,I.N_.UNIT]]])+" folder-header",children:[(0,v.jsx)("div",{className:`jsx-${O.W.__hash} jsx-${O.H.__hash} `+d.default.dynamic([["1992866052",["default"===a?100:135,I.N_.UNIT]]])+" expand-icon "+(s?"expanded":""),children:(0,v.jsx)(w.J,{type:"expand",size:8})}),(0,v.jsx)("div",{className:`jsx-${O.W.__hash} jsx-${O.H.__hash} `+d.default.dynamic([["1992866052",["default"===a?100:135,I.N_.UNIT]]])+" folder-icon",children:(0,v.jsx)(w.J,{type:s?"folder-open":"folder",size:16,color:I.bo.INACTIVE})}),(0,v.jsx)("span",{className:`jsx-${O.W.__hash} jsx-${O.H.__hash} `+d.default.dynamic([["1992866052",["default"===a?100:135,I.N_.UNIT]]]),children:"Components"})]}),s&&(0,v.jsx)(ct,{}),h?(0,v.jsxs)("div",{onClick:()=>t(zt.WIDGETS),onContextMenu:j,className:`jsx-${O.W.__hash} jsx-${O.H.__hash} `+d.default.dynamic([["1992866052",["default"===a?100:135,I.N_.UNIT]]])+" folder-header",children:[(0,v.jsx)("div",{className:`jsx-${O.W.__hash} jsx-${O.H.__hash} `+d.default.dynamic([["1992866052",["default"===a?100:135,I.N_.UNIT]]])+" expand-icon "+(i?"expanded":""),children:(0,v.jsx)(w.J,{type:"expand",size:8})}),(0,v.jsx)("div",{className:`jsx-${O.W.__hash} jsx-${O.H.__hash} `+d.default.dynamic([["1992866052",["default"===a?100:135,I.N_.UNIT]]])+" folder-icon",children:(0,v.jsx)(w.J,{type:i?"folder-open":"folder",size:16,color:I.bo.INACTIVE})}),(0,v.jsx)("span",{className:`jsx-${O.W.__hash} jsx-${O.H.__hash} `+d.default.dynamic([["1992866052",["default"===a?100:135,I.N_.UNIT]]]),children:"Widgets"})]}):null,i&&h?(0,v.jsx)(W,{}):null]}),(0,v.jsx)("div",Gt(Gt({},o("row",1)),{},{className:`jsx-${O.W.__hash} jsx-${O.H.__hash} `+d.default.dynamic([["1992866052",["default"===a?100:135,I.N_.UNIT]]])+" gutter-row"})),(0,v.jsx)("div",{className:`jsx-${O.W.__hash} jsx-${O.H.__hash} `+d.default.dynamic([["1992866052",["default"===a?100:135,I.N_.UNIT]]])+" tree-view-section",children:(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)($t.J,{}),(0,v.jsx)(S,{})]})})]}))}),(0,v.jsx)(d.default,{id:O.W.__hash,children:O.W}),(0,v.jsx)(d.default,{id:O.H.__hash,children:O.H}),(0,v.jsx)(d.default,{id:"1992866052",dynamic:["default"===a?100:135,I.N_.UNIT],children:[`.grid.__jsx-style-dynamic-selector{display:grid;grid-template-rows:1fr 10px 1fr;height:calc(100vh - ${"default"===a?100:135}px);}`,".folders-wrapper.__jsx-style-dynamic-selector,.tree-view-section.__jsx-style-dynamic-selector{overflow:hidden scroll;}",`.tree-view-section.__jsx-style-dynamic-selector{padding-left:${I.N_.UNIT};}`]})]})}},95690:function(e,t,o){o.d(t,{W:function(){return s},H:function(){return i}});var n=o(65989);const s=[`.folder-header.jsx-3391072071{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;font-weight:${n.Xw.MEDIUM_500};padding:0 ${n.N_.TWO_UNITS};height:25px;color:${n.bo.INFO};font-size:${n.um.DEFAULT};}`,`.folder-header.jsx-3391072071 *.jsx-3391072071{margin-right:${n.N_.HALF_UNIT};}`,`.folder-header.jsx-3391072071 .folder-icon.jsx-3391072071{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin-right:${n.N_.HALF_UNIT};}`,`.folder-header.jsx-3391072071>span.jsx-3391072071{font-weight:${n.Xw.REGULAR_400};color:${n.bo.DEFAULT};}`,".expand-icon.jsx-3391072071{-webkit-transform:rotate(270deg);-ms-transform:rotate(270deg);transform:rotate(270deg);}",`.expanded.jsx-3391072071{-webkit-transition:${n.OK.MOVE};transition:${n.OK.MOVE};-webkit-transform-origin:50% 50%;-ms-transform-origin:50% 50%;transform-origin:50% 50%;-webkit-transform:rotate(360deg);-ms-transform:rotate(360deg);transform:rotate(360deg);}`];s.__hash="3391072071";const i=[`.gutter-row.jsx-972220973{grid-column:1/-1;cursor:row-resize;grid-row:2;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;height:5px;-webkit-transition:0.4s all;transition:0.4s all;z-index:10;border-top:1px solid ${n.Pt.LIGHT_01};}`,`.gutter-row.jsx-972220973:hover,.gutter-row.jsx-972220973:active{background-color:${n.X4.DEFAULT};}`];i.__hash="972220973"},23650:function(e,t,o){o.d(t,{W:function(){return s}});var n=o(65989);const s=[".collaborator-section.jsx-1415711500{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;width:100%;margin-top:12px;}",".collaborator-line.jsx-1415711500{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;height:32px;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;width:100%;}",".collaborator-permissions.jsx-1415711500{position:relative;}",".collab-info.jsx-1415711500{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;max-width:200px;}",".collab-info.jsx-1415711500 span.jsx-1415711500{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;}",`.collab-img.jsx-1415711500{height:32px;width:32px;border-radius:50%;margin-right:${n.N_.TWO_UNITS};display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;text-align:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;}`,".collab-img-wrapper.jsx-1415711500{width:48px;}",".collab-email.jsx-1415711500{line-height:16px;text-align:left;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;padding:0 8px;}",`.owner-label.jsx-1415711500{cursor:default;color:${n.bo.INACTIVE};}`];s.__hash="1415711500"},53937:function(e,t,o){o.d(t,{F:function(){return L}});var n=o(73202),s=o(92809),i=o(30773),r=o(65988),a=o(67294),l=o(91510),c=o(92763),d=o(30499),p=o(65989),u=o(7725);const h=[`.collaborators-modal-wrapper.jsx-911395657{position:relative;min-width:512px;box-shadow:${p.E6.DARK_DROP_DOWN};}`,`.collaborators-modal-section.jsx-911395657{padding:${p.N_.THREE_UNITS} ${p.N_.FOUR_UNITS};}`,".collaborators-header.jsx-911395657{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}",`.collaborators-modal-title.jsx-911395657,.public-access-title.jsx-911395657{cursor:default;color:${p.bo.WHITE_FADED};}`,".collaborators-modal-title.jsx-911395657{font-size:14px;}",`.public-access-title.jsx-911395657{margin-bottom:${p.N_.TWO_UNITS};}`,`.collaborators-modal-divider.jsx-911395657{height:1px;background:${p.Pt.LIGHT_01};}`,".public-access-container.jsx-911395657{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}",`.public-access-icon.jsx-911395657{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;margin-right:${p.N_.UNIT};}`,".public-access-options-container.jsx-911395657{position:relative;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex:1;-ms-flex:1;flex:1;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;}",`.public-option-description.jsx-911395657{padding-bottom:6px;padding-top:${p.N_.HALF_UNIT};padding-left:${p.N_.UNIT};color:${p.bo.INACTIVE};cursor:default;}`,".public-access-copy-link.jsx-911395657{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}"];h.__hash="911395657";var y=o(89361),m=o(84003);let f;!function(e){e.CAN_VIEW="Can view",e.RESTRICTED="Restricted",e.CLONEABLE="Can clone"}(f||(f={}));const b={[m.W.PRIVATE]:f.RESTRICTED,[m.W.PUBLIC]:f.CAN_VIEW,[m.W.CLONEABLE]:f.CLONEABLE},g={[f.CAN_VIEW]:m.W.PUBLIC,[f.RESTRICTED]:m.W.PRIVATE,[f.CLONEABLE]:m.W.CLONEABLE},I={[f.CAN_VIEW]:"Anyone with the link can view, no sign-in required",[f.RESTRICTED]:"Only collaborators can access",[f.CLONEABLE]:"Anyone with the link can use as a template"};var v,j,N,x,S,w,O,T,_,E,D,F=o(76883),C=o(71919),A=o(28132),k=o(36565),P=o(85893);const U={[f.CAN_VIEW]:(0,P.jsx)(c.J,{type:d.TV.globe,size:32,color:p.X4.DEFAULT}),[f.RESTRICTED]:(0,P.jsx)(c.J,{type:d.TV.restricted,size:32,color:"transparent"}),[f.CLONEABLE]:(0,P.jsx)(c.J,{type:d.TV.globe,size:32,color:p.X4.DEFAULT})};let L=(v=(0,F.f3)("notificationsManagementFlow"),j=(0,F.f3)("projectDoc"),N=(0,F.f3)("projectUIState"),x=(0,F.f3)("collaboratorManagementFlow"),S=(0,F.f3)("workspacesRepository"),w=class extends a.PureComponent{constructor(...e){super(...e),(0,n.Z)(this,"notificationsManagementFlow",O,this),(0,n.Z)(this,"projectDoc",T,this),(0,n.Z)(this,"projectUIState",_,this),(0,n.Z)(this,"collaboratorManagementFlow",E,this),(0,n.Z)(this,"workspacesRepository",D,this),(0,s.Z)(this,"state",{loggedUserAccessType:null,accessType:b[this.projectDoc.accessType]}),(0,s.Z)(this,"handleAccessTypeChange",(e=>{e!==this.state.accessType&&(k.Z.mixpanelEvent(k.Z.AnalyticsEvents.PROJECT_SIDEBARS_TOP_SHARE_MENU_PUBLIC_ACCESS_SELECT,{accessType:e}),this.setState({accessType:e}),this.collaboratorManagementFlow.changeProjectAccessType(g[e]))})),(0,s.Z)(this,"copyCurrentLink",(()=>{navigator.clipboard.writeText(window.location.href),this.notificationsManagementFlow.createNotification(C.k.INFO,"Link was copied in clipboard.")}))}componentDidMount(){this.setState({loggedUserAccessType:this.collaboratorManagementFlow.getLoggedInUserAccessType()})}render(){const{accessType:e,loggedUserAccessType:t}=this.state,{onDismiss:o}=this.props,n=[{value:b.public},{value:b.cloneable}];return this.projectUIState.workspace.professionalSubscription&&n.unshift({value:b.private,bottomDivider:!0}),(0,P.jsxs)("div",{className:`jsx-${h.__hash} collaborators-modal-wrapper`,children:[(0,P.jsxs)("div",{className:`jsx-${h.__hash} collaborators-modal-section`,children:[(0,P.jsxs)("div",{className:`jsx-${h.__hash} collaborators-header`,children:[(0,P.jsx)("p",{className:`jsx-${h.__hash} collaborators-modal-title`,children:"Collaborators"}),(0,P.jsx)(y.z,{onClick:o,size:"small",style:"transparent",children:(0,P.jsx)(c.J,{type:"actions/close",size:12})})]}),t?(0,P.jsx)(l.e,{userAccessType:t}):null]}),(0,P.jsx)("div",{className:`jsx-${h.__hash} collaborators-modal-divider`}),t!==A.Z.READ?(0,P.jsxs)("div",{className:`jsx-${h.__hash} collaborators-modal-section`,children:[(0,P.jsx)("p",{className:`jsx-${h.__hash} public-access-title`,children:"Public access"}),(0,P.jsxs)("div",{className:`jsx-${h.__hash} public-access-container`,children:[(0,P.jsx)("div",{className:`jsx-${h.__hash} public-access-icon`,children:U[e]}),(0,P.jsxs)("div",{className:`jsx-${h.__hash} public-access-options-container`,children:[(0,P.jsx)(u.O,{options:n,value:e,onChange:this.handleAccessTypeChange}),(0,P.jsx)("span",{className:`jsx-${h.__hash} public-option-description`,children:I[e]})]}),e!==f.RESTRICTED&&(0,P.jsx)("div",{className:`jsx-${h.__hash} public-access-copy-link`,children:(0,P.jsx)(y.z,{style:"outline",colorScheme:"neutral",onClick:this.copyCurrentLink,children:"Copy link"})})]})]}):null,(0,P.jsx)(r.default,{id:h.__hash,children:h})]})}},O=(0,i.Z)(w.prototype,"notificationsManagementFlow",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),T=(0,i.Z)(w.prototype,"projectDoc",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_=(0,i.Z)(w.prototype,"projectUIState",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),E=(0,i.Z)(w.prototype,"collaboratorManagementFlow",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),D=(0,i.Z)(w.prototype,"workspacesRepository",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),w)},71178:function(e,t,o){o.d(t,{D:function(){return ce},u:function(){return ae}});var n=o(92809),s=o(65988),i=o(41146),r=o(89361),a=o(65989);const l=[`.collaboration-invite.jsx-2004714342{position:relative;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding-top:${a.N_.TWO_UNITS};}`,".collaborator-list.jsx-2004714342{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}",".max_collabs_msg.jsx-2004714342{text-align:center;}",`.send-invite-btn.jsx-2004714342{margin-left:${a.N_.THREE_UNITS};}`];l.__hash="2004714342";var c=o(67294),d=o(92763),p=o(27709),u=o(44787),h=o(28132),y=o(36565),m=o(81665),f=o(7725),b=o(73202),g=o(9626),I=o(33800),v=o(30773),j=o(76883),N=o(74031),x=o(49899),S=o(23650),w=o(85893);const O="Remove",T=e=>e===h.Z.WRITE?ae.EDITOR:ae.VIEWER,_=e=>{const{id:t,email:o,name:n,picture:i,badgeColor:r,userAccessType:a}=e,{onDelete:l,onUpdateAccessType:d}=e,{0:p,1:u}=(0,c.useState)(T(e.accessType));(0,c.useEffect)((()=>{e.accessType&&u(T(e.accessType))}),[e.accessType]);const y=d?Object.values(ae).map((e=>({value:e}))):[];return l&&(y.length&&(y[y.length-1].bottomDivider=!0),y.push({value:O})),(0,w.jsxs)("div",{className:`jsx-${S.W.__hash} collaborator-section`,children:[(0,w.jsxs)("div",{className:`jsx-${S.W.__hash} collaborator-line`,children:[(0,w.jsxs)("span",{"data-tooltip-name":o,className:`jsx-${S.W.__hash} collab-info`,children:[(0,w.jsxs)("div",{className:`jsx-${S.W.__hash} collab-img-wrapper`,children:[i&&(0,w.jsx)("img",{width:"32",height:"32",src:i,alt:"",className:`jsx-${S.W.__hash} collab-img`}),!i&&(0,w.jsx)("span",{style:{backgroundColor:r},className:`jsx-${S.W.__hash} collab-img`,children:(n?n[0]:o[0]).toUpperCase()})]}),(0,w.jsx)("span",{className:`jsx-${S.W.__hash} collaborator`,children:n||o})]}),(0,w.jsx)("div",{className:`jsx-${S.W.__hash} collaborator-permissions`,children:y.length&&a!==h.Z.READ&&e.permissionLevel===h.z.PROJECT?(0,w.jsx)(f.O,{centerContent:!0,options:y,value:p,onChange:e=>{if(e===O)return void(l&&l(t));if(!d)return;const n=e===ae.VIEWER?h.Z.READ:h.Z.WRITE;d({id:t,accessType:n,email:o}),u(e)}}):(0,w.jsxs)("span",{className:`jsx-${S.W.__hash}`,children:[" ",e.accessType===h.Z.OWNER?"Owner":p]})})]}),(0,w.jsx)(s.default,{id:S.W.__hash,children:S.W})]})};var E,D,F,C,A,k,P,U,L,Z,R,M,H,$;function B(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function G(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?B(Object(o),!0).forEach((function(t){(0,n.Z)(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):B(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}let z=(E=(0,j.f3)("projectDoc"),D=(0,j.f3)("projectUIState"),F=(0,j.f3)("globalAppState"),C=(0,j.f3)("collaboratorManagementFlow"),A=(0,j.f3)("modalManagementFlow"),k=(0,j.f3)("notificationsManagementFlow"),$=new WeakMap,P=class extends c.PureComponent{constructor(...e){super(...e),(0,b.Z)(this,"projectDoc",U,this),(0,b.Z)(this,"projectUIState",L,this),(0,b.Z)(this,"globalAppState",Z,this),(0,b.Z)(this,"collaboratorManagementFlow",R,this),(0,b.Z)(this,"modalManagementFlow",M,this),(0,b.Z)(this,"notificationsManagementFlow",H,this),$.set(this,{writable:!0,value:[]}),(0,n.Z)(this,"state",{accessType:this.props.accessType}),(0,n.Z)(this,"removeCollaborator",(e=>{this.collaboratorManagementFlow.delete(e)})),(0,n.Z)(this,"updateCollaboratorAccessType",(async e=>{const{accessType:t,email:o}=e;t&&this.collaboratorManagementFlow.addOrUpdateProjectCollaborator({accessType:t,action:"update",actionFnc:()=>this.collaboratorManagementFlow.changeAccess(e),collabEmail:o})}))}componentDidMount(){const e=(0,x.Ys)(this.projectDoc,[`collaborators/byId/${this.props.id}/accessType`],(e=>{this.setState({accessType:e.collaborators.byId[this.props.id].accessType})}),"CollaboratorWrapperSelector");(0,I.Z)(this,$).push((()=>e.dispose()))}componentWillUnmount(){(0,I.Z)(this,$).forEach((e=>e())),(0,g.Z)(this,$,[])}render(){const{userAccessType:e,accessType:t}=this.props,o=e===h.Z.OWNER||e===h.Z.WRITE&&t===h.Z.READ;return(0,w.jsx)(_,G(G({},this.props),{},{onDelete:o?this.removeCollaborator:void 0,onUpdateAccessType:e===h.Z.OWNER?this.updateCollaboratorAccessType:void 0,accessType:this.state.accessType}))}},U=(0,v.Z)(P.prototype,"projectDoc",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),L=(0,v.Z)(P.prototype,"projectUIState",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Z=(0,v.Z)(P.prototype,"globalAppState",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),R=(0,v.Z)(P.prototype,"collaboratorManagementFlow",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),M=(0,v.Z)(P.prototype,"modalManagementFlow",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),H=(0,v.Z)(P.prototype,"notificationsManagementFlow",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),P);var W=o(30214);function V(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function K(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?V(Object(o),!0).forEach((function(t){(0,n.Z)(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):V(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}const J=e=>{const{collaborators:t,userAccessType:o}=e,n=[],i=[];t.forEach((e=>{e.permissionLevel===h.z.PROJECT?n.push(e):i.push(e)}));const r=e=>e.map(((e,t)=>{var n;const s=K(K({},e.account),{},{id:e.id,accessType:e.accessType,permissionLevel:e.permissionLevel,email:(null===(n=e.account)||void 0===n?void 0:n.email)||e.invitedEmail}),i=t++%N.q.length;return(0,w.jsx)(z,K({badgeColor:N.q[i],userAccessType:o},s),e.id)}));return(0,w.jsxs)(w.Fragment,{children:[n.length?(0,w.jsxs)(w.Fragment,{children:[(0,w.jsxs)("div",{className:s.default.dynamic([["3533075307",[a.bo.INACTIVE,a.N_.THREE_UNITS,a.Xw.MEDIUM_600,a.N_.HALF_UNIT]]])+" section-title",children:[(0,w.jsx)("span",{className:s.default.dynamic([["3533075307",[a.bo.INACTIVE,a.N_.THREE_UNITS,a.Xw.MEDIUM_600,a.N_.HALF_UNIT]]]),children:"Project collaborators"}),(0,w.jsx)("div",{"data-tooltip-name":"project-collaborators",className:s.default.dynamic([["3533075307",[a.bo.INACTIVE,a.N_.THREE_UNITS,a.Xw.MEDIUM_600,a.N_.HALF_UNIT]]])+" info",children:(0,w.jsx)(d.J,{size:12,type:"info"})})]}),r(n),(0,w.jsx)(W._,{name:"project-collaborators",children:(0,w.jsx)(w.Fragment,{children:"Can access only projects they\u2019re invited to. Can\u2019t create new projects in the workspace and other projects from the workspace aren\u2019t visibile for them."})})]}):null,i.length?(0,w.jsxs)(w.Fragment,{children:[(0,w.jsxs)("div",{className:s.default.dynamic([["3533075307",[a.bo.INACTIVE,a.N_.THREE_UNITS,a.Xw.MEDIUM_600,a.N_.HALF_UNIT]]])+" section-title",children:[(0,w.jsx)("span",{className:s.default.dynamic([["3533075307",[a.bo.INACTIVE,a.N_.THREE_UNITS,a.Xw.MEDIUM_600,a.N_.HALF_UNIT]]]),children:"Workspace collaborators"}),(0,w.jsx)("div",{"data-tooltip-name":"workspace-collaborators",className:s.default.dynamic([["3533075307",[a.bo.INACTIVE,a.N_.THREE_UNITS,a.Xw.MEDIUM_600,a.N_.HALF_UNIT]]])+" info",children:(0,w.jsx)(d.J,{size:12,type:"info"})})]}),r(i),(0,w.jsx)(W._,{name:"workspace-collaborators",children:(0,w.jsx)(w.Fragment,{children:"Can access everything that\u2019s created in the workspace. Editor roles can create new projects. Manage your workspace collaborators from workspace settings."})})]}):null,(0,w.jsx)(s.default,{id:"3533075307",dynamic:[a.bo.INACTIVE,a.N_.THREE_UNITS,a.Xw.MEDIUM_600,a.N_.HALF_UNIT],children:[`.section-title.__jsx-style-dynamic-selector{color:${a.bo.INACTIVE};margin-top:${a.N_.THREE_UNITS};font-weight:${a.Xw.MEDIUM_600};display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}`,`.info.__jsx-style-dynamic-selector{padding-left:${a.N_.HALF_UNIT};display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}`]})]})};var X,Y,q,Q,ee,te,oe,ne;let se=(X=(0,j.f3)("collaboratorManagementFlow"),Y=(0,j.f3)("projectDoc"),q=(0,j.f3)("projectUIState"),ne=new WeakMap,Q=class extends c.PureComponent{constructor(...e){super(...e),(0,b.Z)(this,"collaboratorManagementFlow",ee,this),(0,b.Z)(this,"projectDoc",te,this),(0,b.Z)(this,"projectUIState",oe,this),ne.set(this,{writable:!0,value:[]}),(0,n.Z)(this,"state",{collaborators:this.projectDoc.collaborators.getAll()})}componentDidMount(){const e=(0,x.Ys)(this.projectDoc,["collaborators/byId/*"],(e=>{this.setState({collaborators:e.collaborators.getAll()})}),"CollaboratorListWrapperSelector");(0,I.Z)(this,ne).push((()=>e.dispose()))}componentWillUnmount(){(0,I.Z)(this,ne).forEach((e=>e())),(0,g.Z)(this,ne,[])}render(){const{collaborators:e}=this.state;return(0,w.jsx)(J,{collaborators:e,userAccessType:this.props.userAccessType})}},ee=(0,v.Z)(Q.prototype,"collaboratorManagementFlow",[X],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),te=(0,v.Z)(Q.prototype,"projectDoc",[Y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),oe=(0,v.Z)(Q.prototype,"projectUIState",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Q);function ie(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function re(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?ie(Object(o),!0).forEach((function(t){(0,n.Z)(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):ie(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}const ae={EDITOR:"Editor",VIEWER:"Viewer"},le=e=>e===h.Z.WRITE?[{value:ae.VIEWER}]:Object.values(ae).map((e=>({value:e}))),ce=e=>{const{onSubmit:t,limitations:o,collaborators:n,userAccessType:d}=e,{0:b,1:g}=(0,c.useState)(""),{0:I,1:v}=(0,c.useState)(""),{0:j,1:N}=(0,c.useState)(le(d)[0].value),x=(0,c.useCallback)((e=>{e.key===i.KEY.ENTER&&(S(),e.preventDefault())}),[I,j]),S=(0,c.useCallback)((async()=>{const e=await t({email:I,accessType:"Editor"===j?h.Z.WRITE:h.Z.READ});e||v(""),g(e||"")}),[I,j]),O=(0,c.useCallback)((()=>n.length>=e.limitations.MAX_COLLABORATORS),[o]);return(0,w.jsxs)("div",{className:`jsx-${l.__hash}`,children:[d!==h.Z.READ?(0,w.jsx)("div",{className:`jsx-${l.__hash} collaboration-invite`,children:O()?(0,w.jsx)("span",{className:`jsx-${l.__hash} max_collabs_msg`,children:u.xE}):(0,w.jsxs)(w.Fragment,{children:[(0,w.jsxs)(m.h,{arrangement:"row",behavior:"none",children:[(0,w.jsx)(p.S,{onChange:e=>{v(e.target.value.toLowerCase().trim())},refAttrs:{style:{padding:`0 ${a.N_.UNIT}`}},"data-property":"email-input",value:I,onKeyDown:x,validationMessage:b,addonAfter:b?(0,w.jsx)(de,{}):"",size:"flexible",style:"boxed",placeholder:"Add email"}),(0,w.jsx)("div",{className:`jsx-${l.__hash}`,children:(0,w.jsx)(f.O,{centerContent:!0,options:le(d),value:j,width:80,optionsWidth:100,style:"outline",refAttrs:{style:{borderRadius:"0 4px 4px 0"}},onChange:N})})]}),(0,w.jsx)("div",{className:`jsx-${l.__hash} send-invite-btn`,children:(0,w.jsx)(r.z,{onClick:()=>{S(),y.Z.customEvents.project.sidebars.top.inviteMenu.invite()},dataAttrs:{"data-tooltip-name":"Invite Collaborator","data-tooltip-direction":"vertical"},children:"Send invite"})})]})}):null,(0,w.jsx)("div",{className:`jsx-${l.__hash} collaborator-list`,children:(0,w.jsx)(se,re({},e))}),(0,w.jsx)(s.default,{id:l.__hash,children:l})]})},de=()=>(0,w.jsxs)("span",{className:s.default.dynamic([["2414484329",[a.N_.UNIT]]])+" addon-icon-container",children:[(0,w.jsx)(d.J,{type:"error"}),(0,w.jsx)(s.default,{id:"2414484329",dynamic:[a.N_.UNIT],children:[`.addon-icon-container.__jsx-style-dynamic-selector{margin-right:${a.N_.UNIT};display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}`]})]})},91510:function(e,t,o){o.d(t,{e:function(){return F}});var n,s,i,r,a,l,c,d,p,u,h,y,m,f,b,g,I,v=o(73202),j=o(92809),N=o(30773),x=o(71919),S=o(76883),w=o(49899),O=o(4509),T=o(71178),_=o(36565),E=o(67294),D=o(85893);let F=(n=(0,S.f3)("collaboratorManagementFlow"),s=(0,S.f3)("projectUIState"),i=(0,S.f3)("validationService"),r=(0,S.f3)("globalAppState"),a=(0,S.f3)("projectDoc"),l=(0,S.f3)("projectInitFlow"),c=(0,S.f3)("modalManagementFlow"),d=(0,S.f3)("notificationsManagementFlow"),p=class extends E.PureComponent{constructor(...e){super(...e),(0,v.Z)(this,"collaboratorManagementFlow",u,this),(0,v.Z)(this,"projectUIState",h,this),(0,v.Z)(this,"validationService",y,this),(0,v.Z)(this,"globalAppState",m,this),(0,v.Z)(this,"projectDoc",f,this),(0,v.Z)(this,"projectInitFlow",b,this),(0,v.Z)(this,"modalManagementFlow",g,this),(0,v.Z)(this,"notificationsManagementFlow",I,this),(0,j.Z)(this,"unsubs",[]),(0,j.Z)(this,"state",{collaborators:this.projectDoc.collaborators.getAll()}),(0,j.Z)(this,"addCollaborator",(async e=>{const{email:t,accessType:o}=e,{message:n,valid:s}=this.validationService.validateEmailStructure(t);if(!s)return n;this.collaboratorManagementFlow.emailIsAlreadyInvited(t)?this.notificationsManagementFlow.createNotification(x.k.INFO,O.FC.EMAIL_LISTED_AS_COLLABORATOR):(_.Z.mixpanelEvent(_.Z.AnalyticsEvents.PROJECT_SIDEBARS_TOP_SHARE_MENU_INVITE,{accessType:o}),this.collaboratorManagementFlow.addOrUpdateProjectCollaborator({accessType:o,action:"add",actionFnc:()=>this.collaboratorManagementFlow.add(e),collabEmail:t}))}))}componentDidMount(){const e=(0,w.Ys)(this.projectDoc,["collaborators/byId/*"],(e=>{this.setState({collaborators:e.collaborators.getAll()})}),"CollaboratorsPanelWrapper");this.unsubs=[()=>e.dispose()]}componentWillUnmount(){this.unsubs.forEach((e=>e())),this.unsubs=[]}render(){const e=this.globalAppState.user.userData;if(!e)throw new Error("Attempted to render collaborators list without a logged in user!");return(0,D.jsx)(T.D,{loggedInUser:e,limitations:this.projectInitFlow.getProjectLimitations(),collaborators:this.state.collaborators,onSubmit:this.addCollaborator,userAccessType:this.props.userAccessType})}},u=(0,N.Z)(p.prototype,"collaboratorManagementFlow",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),h=(0,N.Z)(p.prototype,"projectUIState",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),y=(0,N.Z)(p.prototype,"validationService",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),m=(0,N.Z)(p.prototype,"globalAppState",[r],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),f=(0,N.Z)(p.prototype,"projectDoc",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),b=(0,N.Z)(p.prototype,"projectInitFlow",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),g=(0,N.Z)(p.prototype,"modalManagementFlow",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),I=(0,N.Z)(p.prototype,"notificationsManagementFlow",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),p)},7725:function(e,t,o){o.d(t,{O:function(){return y}});var n=o(92809),s=o(65988),i=o(67294),r=o(92763),a=o(49616),l=o(65989);const c=[`.permission-value.jsx-3460546599{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:${l.N_.UNIT} ${l.N_.UNIT};margin-right:-${l.N_.UNIT};border-radius:${l.n_.DEFAULT};}`,`.permission-value.jsx-3460546599:hover{background-color:${l.Pt.LIGHT_01};cursor:default;}`,`.permission-value.jsx-3460546599 .value.jsx-3460546599{margin-right:${l.N_.UNIT};}`,`.expanded-permission.jsx-3460546599{background-color:${l.Pt.LIGHT_01};}`,`.expanded-permission.jsx-3460546599:hover{background-color:${l.Pt.LIGHT_02};}`,`.permission-options.jsx-3460546599{position:absolute;top:40px;overflow:hidden;background-color:${l.Pt.LIGHT_01};padding:${l.N_.HALF_UNIT} 0;border-radius:${l.n_.DEFAULT};box-shadow:${l.E6.DARK_DROP_DOWN};z-index:${l.kg.MAX};}`,`.permission.jsx-3460546599{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;width:100%;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;padding:${l.N_.UNIT} ${l.N_.FOUR_UNITS};border-radius:0;}`,`.permission.jsx-3460546599:hover{background-color:${l.Pt.LIGHT_02};cursor:default;}`,`.permission-divider.jsx-3460546599{height:1px;width:100%;margin:${l.N_.HALF_UNIT} 0;background:${l.Pt.LIGHT_02};}`,`.selected-permission-check.jsx-3460546599{position:absolute;left:${l.N_.ONE_AND_HALF};}`];c.__hash="3460546599";var d=o(26545),p=o(85893);function u(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function h(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?u(Object(o),!0).forEach((function(t){(0,n.Z)(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):u(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}const y=e=>{const{options:t,value:o,width:n,centerContent:u=!1,style:y="transparent"}=e,{refAttrs:m,optionsRefAttrs:f,onChange:b,optionsWidth:g=n}=e,I=(0,i.useRef)(null),{0:v,1:j}=(0,i.useState)(!1);return(0,d.O)(v?I:null,(()=>j(!1))),(0,p.jsxs)("div",{ref:I,className:`jsx-${c.__hash} `+s.default.dynamic([["226890568",[u?"center":"space-between",n?`${n}px`:"auto","outline"===y?l.GC.LIGHT:"transparent",u?l.N_.UNIT:0,g?`${g}px`:"140px"]]]),children:[(0,p.jsxs)("span",h(h({},m),{},{onClick:()=>j(!v),className:`jsx-${c.__hash} `+s.default.dynamic([["226890568",[u?"center":"space-between",n?`${n}px`:"auto","outline"===y?l.GC.LIGHT:"transparent",u?l.N_.UNIT:0,g?`${g}px`:"140px"]]])+" permission-value "+(v?"expanded-permission":""),children:[(0,p.jsx)("span",{className:`jsx-${c.__hash} `+s.default.dynamic([["226890568",[u?"center":"space-between",n?`${n}px`:"auto","outline"===y?l.GC.LIGHT:"transparent",u?l.N_.UNIT:0,g?`${g}px`:"140px"]]])+" value",children:o}),(0,p.jsx)(r.J,{size:12,type:"expand"})]})),v&&(0,p.jsx)("div",h(h({},f),{},{className:`jsx-${c.__hash} `+s.default.dynamic([["226890568",[u?"center":"space-between",n?`${n}px`:"auto","outline"===y?l.GC.LIGHT:"transparent",u?l.N_.UNIT:0,g?`${g}px`:"140px"]]])+" "+(f&&null!=f.className&&f.className||"permission-options"),children:(0,p.jsx)(a.E,{noPadding:!0,onSelect:e=>{b&&b(t[+e].value),j(!1)},children:t.map(((e,t)=>(0,p.jsxs)(i.Fragment,{children:[(0,p.jsxs)("li",{"data-item-id":t,className:`jsx-${c.__hash} `+s.default.dynamic([["226890568",[u?"center":"space-between",n?`${n}px`:"auto","outline"===y?l.GC.LIGHT:"transparent",u?l.N_.UNIT:0,g?`${g}px`:"140px"]]])+" permission",children:[e.value===o&&(0,p.jsxs)("span",{className:`jsx-${c.__hash} `+s.default.dynamic([["226890568",[u?"center":"space-between",n?`${n}px`:"auto","outline"===y?l.GC.LIGHT:"transparent",u?l.N_.UNIT:0,g?`${g}px`:"140px"]]])+" selected-permission-check",children:[(0,p.jsx)(r.J,{type:"checkmark",size:8})," "]}),(0,p.jsxs)("span",{className:`jsx-${c.__hash} `+s.default.dynamic([["226890568",[u?"center":"space-between",n?`${n}px`:"auto","outline"===y?l.GC.LIGHT:"transparent",u?l.N_.UNIT:0,g?`${g}px`:"140px"]]]),children:[" ",e.value]})]}),e.bottomDivider&&(0,p.jsx)("span",{className:`jsx-${c.__hash} `+s.default.dynamic([["226890568",[u?"center":"space-between",n?`${n}px`:"auto","outline"===y?l.GC.LIGHT:"transparent",u?l.N_.UNIT:0,g?`${g}px`:"140px"]]])+" permission-divider"})]},t)))})})),(0,p.jsx)(s.default,{id:c.__hash,children:c}),(0,p.jsx)(s.default,{id:"226890568",dynamic:[u?"center":"space-between",n?`${n}px`:"auto","outline"===y?l.GC.LIGHT:"transparent",u?l.N_.UNIT:0,g?`${g}px`:"140px"],children:[`.permission-value.__jsx-style-dynamic-selector{-webkit-box-pack:${u?"center":"space-between"};-webkit-justify-content:${u?"center":"space-between"};-ms-flex-pack:${u?"center":"space-between"};justify-content:${u?"center":"space-between"};width:${n?`${n}px`:"auto"};border:1px solid ${"outline"===y?l.GC.LIGHT:"transparent"};}`,`.value.__jsx-style-dynamic-selector{margin-right:${u?l.N_.UNIT:0};}`,`.permission-options.__jsx-style-dynamic-selector{width:${g?`${g}px`:"140px"};}`]})]})}},55572:function(e,t,o){o.d(t,{G:function(){return _},j:function(){return T}});var n=o(65988),s=o(67294),i=o(75222),r=o(77739),a=o(30214),l=o(16588),c=o(93510),d=o(53482),p=o(12349),u=o(33235),h=o(18177),y=o(10440),m=o(92763),f=o(69812),b=o(65989);const g=[`.thq-textarea.jsx-2417426790{background:${b.Pt.DEFAULT};color:${b.bo.DEFAULT};border:none;outline:none;resize:vertical;border-radius:${b.n_.DISCRETE};padding:${b.Xc.HALF_UNIT};width:100%;max-height:120px;min-height:25px;cursor:auto;}`,`.thq-textarea.jsx-2417426790::-webkit-input-placeholder{font-style:italic;color:${b.bo.FADED};opacity:1;}`,`.thq-textarea.jsx-2417426790::-moz-placeholder{font-style:italic;color:${b.bo.FADED};opacity:1;}`,`.thq-textarea.jsx-2417426790:-ms-input-placeholder{font-style:italic;color:${b.bo.FADED};opacity:1;}`,`.thq-textarea.jsx-2417426790::placeholder{font-style:italic;color:${b.bo.FADED};opacity:1;}`,"@media (max-width:500px){.thq-textarea.settings-textarea.jsx-2417426790{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}}"];g.__hash="2417426790";var I=o(85893);const v=e=>{const{onKeyDown:t,onChange:o,onSave:i,disabled:r,placeholder:a}=e,{0:l,1:c}=(0,s.useState)(e.value),{0:d,1:p}=(0,s.useState)(),u=(0,s.useRef)(),h=(0,s.useRef)(),y=(0,s.useRef)(null);(0,s.useEffect)((()=>{c(e.value),m()}),[e.value]),(0,s.useEffect)((()=>{u.current=d}),[d]),(0,s.useEffect)((()=>{h.current=l}),[l]),(0,s.useEffect)((()=>()=>{!0===u.current&&i(h.current,!0)}),[]);const m=()=>{const e=y.current;e&&(e.style.height=e.scrollHeight+"px")};return(0,I.jsxs)(s.Fragment,{children:[(0,I.jsx)("textarea",{disabled:r,rows:1,value:l,placeholder:a,ref:y,onKeyDown:t,onChange:e=>{p(!0),c(e.target.value),m(),o&&o(e)},onBlur:e=>{const t=e.target.value;i(t),p(!1)},className:`jsx-${g.__hash} thq-textarea`}),(0,I.jsx)(n.default,{id:g.__hash,children:g})]})};var j=o(6945),N=o(41666),x=o(86451),S=o(71662),w=o(5595),O=o(62057);const T="",_=s.memo((e=>{const{attrName:t,attrValue:o,inputType:g,placeholder:_,elementType:E,options:D,lengthLimit:F,sectionIdsList:C,colorTokenOptions:A,changeValue:k,removeValue:P,changeActiveSidebar:U,replaceLocalSrcWithAbsolute:L,selectedNode:Z,selectedComp:R,isInSlot:M,readonly:H=!1,isCustom:$}=e,{0:B,1:G}=(0,s.useState)((0,y.TO)(o)?o.name:o),{0:z,1:W}=(0,s.useState)(!1),{0:V,1:K}=(0,s.useState)(!1);(0,s.useEffect)((()=>{t===u.Ze.ID.name&&C.find((e=>e.id===o&&e.duplicate))&&W(!0)}),[]),(0,s.useEffect)((()=>{t!==u.Ze.SRC.name||o!==u.M3.IMAGE_SRC?(0,y.TO)(o)?G(o.name):G(o):G("")}),[o]);const J=()=>{P(),W(!1),K(!1)},X=(e,o,n)=>{if(n){const t=A.find((e=>e.id===n));if(!t)return;e=t.value}if(B!==e)if(e||$){if(t===u.Ze.ID.name){if(" "===e[e.length-1])return;C.find((t=>t.id===e))?W(!0):W(!1)}B!==e&&(o?k(e,R,Z):(k(e),G(e)))}else J()},Y=e=>{const t=e.currentTarget.checked;if(E===i.sO.COMPONENT){const e=t?"true":"false";return k(e,R,Z),void G(e)}t?k(T):J()},q=e=>{k(e)},Q=(t,o)=>{if(t&&"false"!==t)if(F&&t.length>F)K(!0);else if(V&&K(!1),t.indexOf(f.Bq)>-1){const o=e.replaceLocalSrcWithAbsolute(t);k(o||t)}else o?k(t,R,Z):k(t);else J()},ee=()=>{e.setFocusedImgAttr(t),U(c.tI.ASSETS_MANAGER)},te=(e,t=!0)=>{if("Enter"===e.key&&t)return void e.currentTarget.blur();(z||V)&&oe()},oe=()=>{W(!1),K(!1)},ne=()=>{e.setFocusedImgAttr(t)},se=(e,t)=>{e?t?k(e,R,Z):k(e):J()},ie=()=>{const e=(0,y.TO)(o);switch(g){case d.SO.IMAGE:const s=E!==i.sO.LOTTIE,c=o===_&&E===i.sO.IMAGE||!o,p=(0,y.TO)(o)?o.defaultValue:o;return(0,I.jsx)(r.aG,{value:c?"":B||"",imageSource:L(c?_||"":p||""),onChange:Q,onFocus:ne,placeholder:_,onImgClick:ee,disabled:e||H,showReplaceIcon:s});case d.SO.BOOLEAN:return(0,I.jsx)(N.r,{onChange:Y,value:E===i.sO.COMPONENT?"true"===B:void 0!==B});case d.SO.NUMBER:return(0,I.jsx)(h.S,{value:B,onSave:X,type:"number",placeholder:_,styleType:"transparent",sizeType:"wide",disabled:e||H});case d.SO.LIST:return(0,I.jsx)(l.P,{value:B,onChange:e=>{X(e)},options:D||[],dropdownAnchor:"left"});case d.SO.SELECT:return(0,I.jsx)(l.P,{options:D||[],value:B||"",onChange:q,disabled:e||H,noOptionsMsg:t===u.Ze.FOR.name?"There are no available IDs":""});case d.SO.TEXT_AREA:return(0,I.jsx)(v,{disabled:e||H,value:B,placeholder:_,onSave:se,onKeyDown:e=>te(e,!1)});case d.SO.COLOR:return(0,I.jsxs)("div",{className:"color-prop-wrapper left",children:[(0,I.jsx)("div",{className:"color-prop-picker",children:(0,I.jsx)(w.Id,{value:B,placeholder:"#FFFFFF",onChange:e=>X(e),hasOpacity:!0})}),(0,I.jsx)(x.R,{selectedNodes:[Z],value:B,placeholder:"#FFFFFF",property:"color",options:A,onSave:({value:e,tokenId:t})=>{X(e,void 0,t)},appendHashtagToHexColor:!0},"attribute-property"),(0,I.jsx)("style",{children:`\n              .color-prop-wrapper {\n                height: ${b.N_.FOUR_UNITS};\n                display: flex;\n                align-items: center;\n              }\n\n              .color-prop-picker {\n                margin-right: ${b.N_.UNIT};\n              }\n            `})]});case d.SO.TEXT_AUTOCOMPLETE:return(0,I.jsx)(x.R,{inputProps:{size:"long",style:"transparent",onKeyDown:te},property:t,value:B,options:D||[],placeholder:$?"value":_,onSave:({value:e})=>X(e)});default:{const o=z||V;return(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(h.S,{value:B,onSave:X,onKeyDown:te,placeholder:$?"value":_,styleType:"transparent",disabled:e||H||t===O.AS,showValidationError:o,sizeType:"wide",addonAfter:o?(0,I.jsxs)("span",{"data-tooltip-name":V?"length-warning":z?"duplicates-warning":"",className:"jsx-4145977599 validation-error-icon-wrap",children:[(0,I.jsx)(m.J,{type:"error",size:16}),(0,I.jsx)(n.default,{id:"4145977599",children:[".validation-error-icon-wrap.jsx-4145977599{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}"]})]}):null}),(0,I.jsx)(a._,{name:"duplicates-warning",children:(0,I.jsx)("p",{children:"You already have an element on this page or in a component with the same ID. Please choose another value to avoid any conflicts."})}),(0,I.jsx)(a._,{name:"length-warning",children:(0,I.jsx)("p",{children:`Input value should not exceed ${F} characters.`})}),(0,I.jsx)(a._,{name:"url-warning",children:(0,I.jsx)("p",{children:j.NG.INVALID_URL})})]})}}};return d.lm.includes(t)?(0,I.jsx)(p.g,{gap:"none",children:(0,I.jsx)(S.f,{currentProp:o||"",location:d.hD.ATTR,inputType:"src"===t?d.SO.IMAGE:void 0,property:t,disabled:M,disabledMessage:"Slotted elements cannot receive props.",children:ie()})}):ie()}))},33235:function(e,t,o){o.d(t,{Ze:function(){return i},mu:function(){return r},M3:function(){return a},$F:function(){return l}});var n=o(75222),s=o(53482);const i={ID:{name:"id",inputType:s.SO.TEXT},TARGET:{name:"target",inputType:s.SO.TEXT},VIDEO_SRC:{name:"src",inputType:s.SO.TEXT},SRC:{name:"src",inputType:s.SO.IMAGE},POSTER:{name:"poster",inputType:s.SO.IMAGE},ALT:{name:"alt",inputType:s.SO.TEXT},CONTROLS:{name:"controls",inputType:s.SO.BOOLEAN},AUTOPLAY:{name:"autoPlay",inputType:s.SO.BOOLEAN},LOOP:{name:"loop",inputType:s.SO.BOOLEAN},MUTED:{name:"muted",inputType:s.SO.BOOLEAN},PLAYSINLINE:{name:"playsInline",inputType:s.SO.BOOLEAN},PRELOAD:{name:"preload",inputType:s.SO.SELECT,options:["auto","metadata","none"]},ALLOW:{name:"allow",inputType:s.SO.TEXT},ALLOW_FULLSCREEN:{displayName:"full screen",name:"allowFullScreen",inputType:s.SO.BOOLEAN},NAME:{name:"name",inputType:s.SO.TEXT},BUTTON_TYPE:{name:"type",inputType:s.SO.SELECT,options:["submit","reset","button"]},VALUE:{name:"value",inputType:s.SO.TEXT},PLACEHOLDER:{name:"placeholder",inputType:s.SO.TEXT},AUTO_COMPLETE:{name:"autoComplete",inputType:s.SO.TEXT_AUTOCOMPLETE,options:["on","off","name","given-name","family-name","nickname","email","username","new-password","current-password","organization","street-address","address-line1","address-line2","country","postal-code","language","bday","sex","tel","url"]},AUTO_FOCUS:{name:"autoFocus",inputType:s.SO.BOOLEAN},DISABLED:{name:"disabled",inputType:s.SO.BOOLEAN},REQUIRED:{name:"required",inputType:s.SO.BOOLEAN},CHECKED:{name:"checked",inputType:s.SO.BOOLEAN},MULTIPLE:{name:"multiple",inputType:s.SO.BOOLEAN},MINLENGTH:{name:"minlength",inputType:s.SO.NUMBER},MAXLENGTH:{name:"maxlength",inputType:s.SO.NUMBER},MIN:{name:"min",inputType:s.SO.NUMBER},MAX:{name:"max",inputType:s.SO.NUMBER},DATE_MIN:{name:"min",inputType:s.SO.NUMBER},DATE_MAX:{name:"max",inputType:s.SO.NUMBER},STEP:{name:"step",inputType:s.SO.NUMBER},PATTERN:{name:"pattern",inputType:s.SO.TEXT},SIZE:{name:"size",inputType:s.SO.NUMBER},ACCEPT:{name:"accept",inputType:s.SO.TEXT},ROWS:{name:"rows",inputType:s.SO.NUMBER},COLS:{name:"cols",inputType:s.SO.NUMBER},WIDTH:{name:"width",inputType:s.SO.NUMBER},HEIGHT:{name:"height",inputType:s.SO.NUMBER},VIEWBOX:{name:"viewBox",inputType:s.SO.TEXT},PATH_DEFINITION:{name:"d",inputType:s.SO.TEXT},ACTION:{name:"action",inputType:s.SO.TEXT},METHOD:{name:"method",inputType:s.SO.TEXT},FOR:{name:"for",inputType:s.SO.SELECT},INPUT_TYPE:{name:"type",inputType:s.SO.TEXT_AUTOCOMPLETE,options:["text","number","email","password","tel","date","datetime-local","file"]},ENCTYPE:{name:"enctype",inputType:s.SO.SELECT,options:["application/x-www-form-urlencoded","multipart/form-data","text/plain"]},LOADING:{name:"loading",inputType:s.SO.SELECT,options:["eager","lazy"]},AUTOPLAY_LOTTIE:{name:"autoplay",inputType:s.SO.BOOLEAN},SRC_LOTTIE:{name:"src",inputType:s.SO.TEXT},SPEED:{name:"speed",inputType:s.SO.NUMBER},BACKGROUND:{name:"background",inputType:s.SO.TEXT},HOVER:{name:"hover",inputType:s.SO.BOOLEAN}},r={name:"id",displayName:"ID",inputType:s.SO.TEXT,placeholder:"e.g. testimonials",lengthLimit:100},a={ID:"e.g. testimonials",ALT:"Short description",IMAGE_SRC:"https://play.teleporthq.io/static/svg/default-img.svg",SRC:"https://...",ROWS:"2",COLS:"20",ALLOW:"e.g. accelerometer",POSTER:"https://...",TYPE:"e.g. submit",BUTTON_NAME:"e.g. subject",FORM_NAME:"e.g. contact-form",TARGET:"e.g. blank, self",AUTO_COMPLETE:"e.g. on",TEXTAREA_NAME:"e.g. review",TEXTAREA_PLACEHOLDER:"e.g. Review text.",TEXTINPUT_NAME:"e.g. name",TEXTINPUT_VALUE:"e.g. John",TEXTINPUT_PLACEHOLDER:"e.g. Full Name",TEXTINPUT_AUTO_COMPLETE:"e.g. name",NUMBER_VALUE:"e.g. 32",NUMBER_NAME:"e.g. age",FILE_NAME:"e.g. avatar",FILE_VALUE:"-",EMAIL_NAME:"e.g. email",EMAIL_VALUE:"e.g. johndoe@gmail.com",EMAIL_PATTERN:"e.g. .+@gmail.com",EMAIL_AUTO_COMPLETE:"e.g. email",PASSWORD_NAME:"e.g. password",PASSWORD_AUTO_COMPLETE:"e.g. current-password",TEL_NAME:"e.g. phone",TEL_VALUE:"e.g. 123-456-7890",TEL_PATTERN:"e.g. [0-9]{3}-[0-9]{3}",TEL_AUTO_COMPLETE:"e.g. tel",DATE_NAME:"e.g. trip-start",DATE_VALUE:"e.g. 2000-01-01",DATE_MIN:"e.g. 2000-01-01",DATE_MAX:"e.g. 2022-01-01",DATETIME_LOCAL_NAME:"e.g. meeting-time",DATETIME_LOCAL_VALUE:"e.g. 2000-01-01T00:00",DATETIME_LOCAL_MIN:"e.g. 2000-01-01T00:00",DATETIME_LOCAL_MAX:"e.g. 2022-01-01T00:00",NUMBER_MIN:"e.g. 0",NUMBER_MAX:"e.g. 100",MINLENGTH:"e.g. 3",MAXLENGTH:"e.g. 20",SIZE:"e.g. 30",STEP:"e.g. 0.5",ACCEPT:"e.g. image/png"},l={[n.sO.IMAGE]:[i.SRC,i.ALT,i.LOADING],[n.sO.VIDEO]:[i.VIDEO_SRC,i.POSTER,i.CONTROLS,i.LOOP,i.MUTED,i.AUTOPLAY,i.PLAYSINLINE,i.PRELOAD],[n.sO.IFRAME]:[i.SRC,i.ALLOW,i.ALLOW_FULLSCREEN],[n.sO.BUTTON]:[i.NAME,i.DISABLED,i.AUTO_FOCUS,i.BUTTON_TYPE],[n.sO.FORM]:[i.NAME,i.TARGET,i.AUTO_COMPLETE,i.ENCTYPE,i.METHOD,i.ACTION],[n.sO.TEXTINPUT]:[i.INPUT_TYPE,i.NAME,i.VALUE,i.PLACEHOLDER,i.DISABLED,i.REQUIRED,i.AUTO_FOCUS,i.AUTO_COMPLETE],[n.sO.TEXTAREA]:[i.NAME,i.PLACEHOLDER,i.COLS,i.ROWS,i.DISABLED,i.AUTO_FOCUS,i.AUTO_COMPLETE],[n.sO.CHECKBOX]:[i.NAME,i.CHECKED,i.DISABLED,i.REQUIRED,i.AUTO_FOCUS,i.AUTO_COMPLETE,i.VALUE],[n.sO.RADIOBUTTON]:[i.NAME,i.CHECKED,i.DISABLED,i.REQUIRED,i.AUTO_FOCUS,i.AUTO_COMPLETE,i.VALUE],[n.sO.SELECT]:[i.NAME,i.MULTIPLE,i.SIZE,i.DISABLED,i.REQUIRED,i.AUTO_FOCUS,i.AUTO_COMPLETE],[n.RY.LABEL]:[i.FOR],[n.sO.LOTTIE]:[i.SRC_LOTTIE,i.AUTOPLAY_LOTTIE,i.LOOP,i.SPEED,i.BACKGROUND,i.HOVER],number:[i.MIN,i.MAX,i.STEP],date:[i.DATE_MIN,i.DATE_MAX],"datetime-local":[i.DATE_MIN,i.DATE_MAX],email:[i.PATTERN,i.SIZE,i.MINLENGTH,i.MAXLENGTH],password:[i.MINLENGTH,i.MAXLENGTH],tel:[i.PATTERN,i.MINLENGTH,i.MAXLENGTH],file:[i.ACCEPT]}},91396:function(e,t,o){o.d(t,{i:function(){return d}});var n=o(67294),s=o(89361),i=o(94433),r=o(92763),a=o(65989),l=o(58239),c=o(85893);const d=e=>{const{getStateAvailableOptions:t,addNewState:o,readonly:d}=e,p=(0,n.useRef)(null),u=e=>{o(e)},h=()=>{var t;const o=null===(t=p.current)||void 0===t?void 0:t.getBoundingClientRect();if(o){const t=y.map((e=>({value:e})));e.showOptionsList((0,c.jsx)(l.S,{options:t,onHideOptions:e.hideOptionsList,onChange:u}),{x:o.x-120,y:o.y+20})}},y=t();return(0,c.jsx)(c.Fragment,{children:(0,c.jsx)(i.c,{title:"States",contentGap:"one",onHeaderClick:h,isHeaderClickable:!d&&0===e.existingInteractionStates.length,titleOverrideColor:e.existingInteractionStates.length>0?a.bo.HIGHLIGHT:"",addon:d?null:(0,c.jsx)(c.Fragment,{children:(0,c.jsx)(s.z,{ref:p,shape:"square",size:"medium",onClick:h,isDisabled:!y.length||d,style:"transparent",colorScheme:"neutral",children:(0,c.jsx)(r.J,{size:8,type:"add"})})}),children:e.children})})}},12293:function(e,t,o){o.d(t,{U2:function(){return s},Mv:function(){return i},kY:function(){return r},xf:function(){return a}});var n=o(62057);const s=(e,t,o)=>e.nodes.getAncestors(t,!0,!0).map((t=>e.nodes.byId[t])).find((e=>{var t;return o?(null===e||void 0===e||null===(t=e.attrs[n.AS])||void 0===t?void 0:t.content)===o:null===e||void 0===e?void 0:e.attrs[n.AS]})),i=e=>"0"===(null===e||void 0===e?void 0:e.top)&&"100%"===(null===e||void 0===e?void 0:e.left)?"right":"0%"===(null===e||void 0===e?void 0:e.left)?"below":"0"===(null===e||void 0===e?void 0:e.top)&&"100%"===(null===e||void 0===e?void 0:e.right)?"left":"100%"===(null===e||void 0===e?void 0:e.bottom)?"above":"below",r=(e,t,o=!1)=>{var n;if(!e)return!1;const s=document.getElementById("stage-frame");if(!s)return!1;const i=null===(n=s.contentDocument)||void 0===n?void 0:n.body.querySelector(`[data-node-id="${e.id}"]`);if(!i)return!1;const r=!!i.classList.contains(t);return r&&o&&i.classList.remove(t),r},a=(e,t,o)=>{if(!t)return;const s=t.childrenIds;for(const r of Object.keys(s)){var i;const t=e.nodes.byId[r];if((null===(i=t.attrs[n.AS])||void 0===i?void 0:i.content)===o)return t;const s=a(e,t,o);if(s)return s}}},58239:function(e,t,o){o.d(t,{S:function(){return r}});var n=o(65988),s=(o(67294),o(52390)),i=o(85893);const r=e=>{const{onHideOptions:t,options:o,onChange:r,callbackArgs:a}=e;return(0,i.jsxs)("div",{className:`jsx-${s.W.__hash} options-list`,children:[o.map((e=>(0,i.jsx)("div",{onClick:()=>{var o;(o=e).disabled||(r(o.value,null!==a&&void 0!==a?a:{}),t&&t())},className:`jsx-${s.W.__hash} option ${e.disabled&&"disabled"}`,children:e.value},e.value))),(0,i.jsx)(n.default,{id:s.W.__hash,children:s.W})]})}},52390:function(e,t,o){o.d(t,{W:function(){return s}});var n=o(65989);const s=[`.options-list.jsx-3594943405{position:absolute;background-color:${n.Pt.DEFAULT};padding:${n.N_.HALF_UNIT} 0;border-radius:${n.n_.DEFAULT};box-shadow:${n.E6.DARK_DROP_DOWN};z-index:${n.kg.THIRTY};min-width:130px;max-height:224px;overflow:auto;}`,`.option.jsx-3594943405{padding:7px ${n.N_.TWO_UNITS};-webkit-transition:${n.OK.FADE};transition:${n.OK.FADE};white-space:nowrap;text-overflow:ellipsis;overflow:hidden;max-width:256px;height:32px;border-top:1px solid transparent;border-bottom:1px solid transparent;cursor:default;}`,`.option.disabled.jsx-3594943405{pointer-events:none;color:${n.bo.INACTIVE};}`,`.option.jsx-3594943405:hover{background:${n.Pt.LIGHT_01};color:${n.bo.HIGHLIGHT};}`,`.option.jsx-3594943405:active{background-color:${n.Pt.LIGHT_01};color:${n.bo.HIGHLIGHT};}`];s.__hash="3594943405"},95633:function(e,t,o){o.d(t,{B:function(){return z},G:function(){return G}});var n=o(73202),s=o(92809),i=o(9626),r=o(33800),a=o(30773),l=o(67294),c=o(89361),d=o(92763),p=o(49899),u=o(94433),h=o(76883),y=o(61030),m=o(34987),f=o(65988),b=o(52390),g=o(65989),I=o(26545),v=o(73171),j=o(49616),N=o(63145),x=o(21908),S=o(85893);const w=e=>{var t,o;const n=(0,l.useRef)(null),s=(0,l.useRef)(null),{0:i,1:r}=(0,l.useState)(""),{0:a,1:c}=(0,l.useState)(!1),{0:d,1:p}=(0,l.useState)("");(0,I.O)(s,(()=>{c(!1)}));const u=(0,l.useCallback)((()=>{p("");let e=!0;return i||(p("Please enter a valid value"),e=!1),!N.yw.test(i)&&e&&(p("Class name is invalid"),e=!1),e}),[i]),h=e.availableClasses.filter((e=>e.name.includes(i))),y=!!i&&!e.allClasses.find((e=>e.name===i))&&1===(null===(t=e.selectedNodes)||void 0===t?void 0:t.length);return(0,S.jsxs)(S.Fragment,{children:[(0,S.jsxs)("div",{ref:s,className:`jsx-${b.W.__hash} `+f.default.dynamic([["1490199627",[g.N_.HALF_UNIT,g.Pt.LIGHT_02,g.N_.HALF_UNIT,g.bo.HIGHLIGHT,g.X4.DEFAULT,g.n_.DEFAULT,g.N_.HALF_UNIT,g.N_.UNIT]]])+" class-input-wrapper",children:[(0,S.jsx)(v.I,{onFocus:()=>{c(!0)},sizeType:"lg",styleType:"outline",block:!0,ref:n,placeholder:1===(null===(o=e.selectedNodes)||void 0===o?void 0:o.length)?"Type to search or create new class":"Search for a class",value:i,onChange:e=>{const t=e.target.value.trim();r(t)},onKeyDown:t=>{if("Enter"===t.key){var o;c(!1),r(""),null===(o=n.current)||void 0===o||o.blur();if(e.availableClasses.find((e=>e.name===i))){const t=e.allClasses.find((e=>e.name.toLowerCase()===i.toLowerCase()));return void(t&&e.bindClassToNodes(t.id))}if(!u())return;e.createNewClass(i)}var s;"Escape"===t.key&&(c(!1),null===(s=n.current)||void 0===s||s.blur())},autoFocus:(null===e||void 0===e?void 0:e.autoFocus)||!1}),a&&(y||h.length>0)?(0,S.jsx)("div",{className:`jsx-${b.W.__hash} `+f.default.dynamic([["1490199627",[g.N_.HALF_UNIT,g.Pt.LIGHT_02,g.N_.HALF_UNIT,g.bo.HIGHLIGHT,g.X4.DEFAULT,g.n_.DEFAULT,g.N_.HALF_UNIT,g.N_.UNIT]]])+" options-list-wrapper",children:(0,S.jsxs)("div",{className:`jsx-${b.W.__hash} `+f.default.dynamic([["1490199627",[g.N_.HALF_UNIT,g.Pt.LIGHT_02,g.N_.HALF_UNIT,g.bo.HIGHLIGHT,g.X4.DEFAULT,g.n_.DEFAULT,g.N_.HALF_UNIT,g.N_.UNIT]]])+" options-list list-wrapper",children:[y?(0,S.jsx)("div",{onClick:()=>{u()&&e.createNewClass(i),c(!1),r("")},className:`jsx-${b.W.__hash} `+f.default.dynamic([["1490199627",[g.N_.HALF_UNIT,g.Pt.LIGHT_02,g.N_.HALF_UNIT,g.bo.HIGHLIGHT,g.X4.DEFAULT,g.n_.DEFAULT,g.N_.HALF_UNIT,g.N_.UNIT]]])+" option center-align",children:(0,S.jsxs)("span",{className:`jsx-${b.W.__hash} `+f.default.dynamic([["1490199627",[g.N_.HALF_UNIT,g.Pt.LIGHT_02,g.N_.HALF_UNIT,g.bo.HIGHLIGHT,g.X4.DEFAULT,g.n_.DEFAULT,g.N_.HALF_UNIT,g.N_.UNIT]]])+" center-align",children:["Create class ",(0,S.jsx)("span",{className:`jsx-${b.W.__hash} `+f.default.dynamic([["1490199627",[g.N_.HALF_UNIT,g.Pt.LIGHT_02,g.N_.HALF_UNIT,g.bo.HIGHLIGHT,g.X4.DEFAULT,g.n_.DEFAULT,g.N_.HALF_UNIT,g.N_.UNIT]]])+" class-tag",children:i})]})}):null,y&&h.length>0?(0,S.jsx)("div",{className:`jsx-${b.W.__hash} `+f.default.dynamic([["1490199627",[g.N_.HALF_UNIT,g.Pt.LIGHT_02,g.N_.HALF_UNIT,g.bo.HIGHLIGHT,g.X4.DEFAULT,g.n_.DEFAULT,g.N_.HALF_UNIT,g.N_.UNIT]]])+" divider"}):null,h.length>0?(0,S.jsx)(j.E,{noPadding:!0,onSelect:t=>{p(""),e.bindClassToNodes(t),c(!1),r("")},children:h.map((e=>(0,S.jsx)("li",{"data-item-id":e.id,className:`jsx-${b.W.__hash} `+f.default.dynamic([["1490199627",[g.N_.HALF_UNIT,g.Pt.LIGHT_02,g.N_.HALF_UNIT,g.bo.HIGHLIGHT,g.X4.DEFAULT,g.n_.DEFAULT,g.N_.HALF_UNIT,g.N_.UNIT]]])+" option",children:(0,S.jsx)("span",{className:`jsx-${b.W.__hash} `+f.default.dynamic([["1490199627",[g.N_.HALF_UNIT,g.Pt.LIGHT_02,g.N_.HALF_UNIT,g.bo.HIGHLIGHT,g.X4.DEFAULT,g.n_.DEFAULT,g.N_.HALF_UNIT,g.N_.UNIT]]]),children:e.name})},e.id)))}):null]})}):null,d?(0,S.jsx)(x.B,{message:d}):null]}),(0,S.jsx)(f.default,{id:"1490199627",dynamic:[g.N_.HALF_UNIT,g.Pt.LIGHT_02,g.N_.HALF_UNIT,g.bo.HIGHLIGHT,g.X4.DEFAULT,g.n_.DEFAULT,g.N_.HALF_UNIT,g.N_.UNIT],children:[".class-input-wrapper.__jsx-style-dynamic-selector{width:100%;}",".list-wrapper.__jsx-style-dynamic-selector{width:225px;}",".options-list-wrapper.__jsx-style-dynamic-selector{position:relative;}",`.divider.__jsx-style-dynamic-selector{width:100%;margin-top:${g.N_.HALF_UNIT};height:1px;background-color:${g.Pt.LIGHT_02};}`,".center-align.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;width:100%;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;}",`.class-tag.__jsx-style-dynamic-selector{width:120px;height:24px;display:block;word-wrap:break-word;margin-left:${g.N_.HALF_UNIT};color:${g.bo.HIGHLIGHT};background-color:${g.X4.DEFAULT};border-radius:${g.n_.DEFAULT};padding:${g.N_.HALF_UNIT} ${g.N_.UNIT};overflow:hidden;text-overflow:ellipsis;}`]}),(0,S.jsx)(f.default,{id:b.W.__hash,children:b.W})]})};var O=o(78460),T=o(68831);const _=e=>{const{items:t,onAction:o,handleDelete:n,contextMenuEvent:s,readonly:i,containerId:r,selectedItem:a,onCheckboxChange:l}=e;return(0,S.jsxs)("div",{id:r,className:f.default.dynamic([["2779325515",[g.N_.HALF_UNIT,g.bo.HIGHLIGHT,g.bo.FADED]]])+" item-list",children:[t.length>0?t.map(((e,t)=>(0,S.jsxs)("div",{onContextMenu:t=>((e,t)=>{if(!s)return;const o=new CustomEvent(s,{detail:{state:t.value,originalEvent:e},bubbles:!0,composed:!0});document.dispatchEvent(o)})(t,e),className:f.default.dynamic([["2779325515",[g.N_.HALF_UNIT,g.bo.HIGHLIGHT,g.bo.FADED]]])+" item-list-entry",children:[(0,S.jsxs)("div",{className:f.default.dynamic([["2779325515",[g.N_.HALF_UNIT,g.bo.HIGHLIGHT,g.bo.FADED]]]),children:[(0,S.jsx)(T.X,{disabled:e.irremovable,value:e.checked,onChange:()=>(e=>{l(e)})(e)}),(0,S.jsx)("span",{className:f.default.dynamic([["2779325515",[g.N_.HALF_UNIT,g.bo.HIGHLIGHT,g.bo.FADED]]])+" "+((e.checked?"":"deactivated")||""),children:e.label||e.value})]}),i?null:(0,S.jsxs)("div",{onMouseDown:e=>{e.preventDefault(),e.stopPropagation()},className:f.default.dynamic([["2779325515",[g.N_.HALF_UNIT,g.bo.HIGHLIGHT,g.bo.FADED]]])+" action-buttons",children:[o?(0,S.jsx)(c.z,{style:"transparent",tabIndex:-1,shape:"square",colorScheme:"neutral",size:"small",onClick:()=>(e=>{a!==e.value&&o&&o(e.value)})(e),children:(0,S.jsx)(d.J,{type:"fullscreen",size:16})}):null,e.irremovable?null:(0,S.jsx)(c.z,{style:"transparent",tabIndex:-1,shape:"square",colorScheme:"neutral",size:"small",onClick:()=>(e=>{n(e)})(e),children:(0,S.jsx)(d.J,{type:"remove",size:8})})]})]},t))):null,(0,S.jsx)(f.default,{id:"2779325515",dynamic:[g.N_.HALF_UNIT,g.bo.HIGHLIGHT,g.bo.FADED],children:[".item-list.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;width:100%;}",`.item-list-entry.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;width:100%;padding:${g.N_.HALF_UNIT} 0;}`,".action-buttons.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;opacity:0;}",".item-list-entry.__jsx-style-dynamic-selector:hover .action-buttons.__jsx-style-dynamic-selector{opacity:1;}",`.item-list-entry.__jsx-style-dynamic-selector:hover{color:${g.bo.HIGHLIGHT};}`,".deactivated.__jsx-style-dynamic-selector{-webkit-text-decoration:line-through;text-decoration:line-through;}"]})]})};var E,D,F,C,A,k,P,U,L,Z,R,M,H=o(36565);function $(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function B(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?$(Object(o),!0).forEach((function(t){(0,s.Z)(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):$(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}const G=(e,t)=>e.isDefault&&t.primitiveType&&O.VM[t.primitiveType]===e.name;let z=(E=(0,h.f3)("projectDoc"),D=(0,h.f3)("projectClassManagementFlow"),F=(0,h.f3)("modalManagementFlow"),C=(0,h.f3)("absolutePositionedLayerFlow"),A=(0,h.f3)("projectUIState"),M=new WeakMap,k=class extends l.Component{constructor(...e){super(...e),(0,n.Z)(this,"projectDoc",P,this),(0,n.Z)(this,"projectClassManagementFlow",U,this),(0,n.Z)(this,"modalManagementFlow",L,this),(0,n.Z)(this,"absolutePositionedLayerFlow",Z,this),(0,n.Z)(this,"projectUIState",R,this),M.set(this,{writable:!0,value:[]}),(0,s.Z)(this,"state",{showInput:!1,allClasses:[],classId:null,usedClassesByPos:[],isCreatingNewClass:!1}),(0,s.Z)(this,"setStateValuesAndSubscribe",(()=>{const e=this.projectDoc.getUsedProjectClassesForNodesByPos(this.props.selectedNodes);this.setState({allClasses:this.projectDoc.classes.getAll(),usedClassesByPos:e,showInput:Boolean(null===e||void 0===e?void 0:e.length),classId:null,isCreatingNewClass:!1},(()=>{this.subscribeForUpdates()}))})),(0,s.Z)(this,"handleHelperButton",(()=>{const{showInput:e,usedClassesByPos:t}=this.state;if(e)if(0===t.length)this.setState({showInput:!1});else{const e=y.d.createDeleteModal({deletedEntity:"node-classes",onSubmit:()=>{this.projectClassManagementFlow.removeAllClassesFromNode({nodeId:this.props.selectedNodes[0]}),this.setState({showInput:!1})}});this.modalManagementFlow.showModal(e)}else this.setState({showInput:!0})})),(0,s.Z)(this,"handleBindClassToNodes",(e=>{this.projectClassManagementFlow.bindClassToNodes({classId:e,nodeIds:this.props.selectedNodes})})),(0,s.Z)(this,"handleClassClick",(e=>{const{key:t}=e.target.dataset;t&&this.setState({classId:t})})),(0,s.Z)(this,"handleCreateClass",(e=>{if(!this.props.selectedNodes[0]||this.props.selectedNodes.length>1)return;H.Z.mixpanelEvent(H.Z.AnalyticsEvents.PROJECT_SIDEBARS_RIGHT_CLASSES_ADD_CLASS);const t=this.projectClassManagementFlow.createAndBindClassToNode({name:e,nodeId:this.props.selectedNodes[0]});t&&this.setState({classId:t,showInput:!1,isCreatingNewClass:!0})})),(0,s.Z)(this,"handleDeleteClass",(e=>{const{id:t}=e;this.projectClassManagementFlow.removeFromNodes({nodeIds:this.props.selectedNodes,classId:t}),this.setState({classId:null})})),(0,s.Z)(this,"handleToggleClass",(e=>{const{id:t}=e;H.Z.mixpanelEvent(H.Z.AnalyticsEvents.PROJECT_SIDEBARS_RIGHT_CLASSES_CLASS_CHECK),this.projectClassManagementFlow.toggleClassOnNodes({classId:t,nodeIds:this.props.selectedNodes})})),(0,s.Z)(this,"handleOptionSelection",(e=>{if(!e)return void this.unselectClass();const{usedClassesByPos:t}=this.state,o=t.find((t=>t.name===e));this.setState(B(B({},this.state),{},{classId:o.id,showInput:!0,isCreatingNewClass:!1}))})),(0,s.Z)(this,"unselectClass",(()=>{this.setState({classId:null,isCreatingNewClass:!1})}))}componentDidMount(){this.setStateValuesAndSubscribe()}componentDidUpdate(e){JSON.stringify(e.selectedNodes)!==JSON.stringify(this.props.selectedNodes)&&(this.unsubFromUpdates(),this.setStateValuesAndSubscribe())}componentWillUnmount(){this.unsubFromUpdates()}subscribeForUpdates(){const e=(0,p.Ys)(this.projectDoc,["classes/byId/*"],(e=>{this.setState({allClasses:e.classes.getAll()})}),"ProjectClassesWrapperSub"),t=(0,p.Ys)(this.projectDoc,["nodes/byId/*/referencedStyles/*","nodes/byId/*/referencedStyles","classes/byId/*/name"],(e=>{this.setState({usedClassesByPos:e.getUsedProjectClassesForNodesByPos(this.props.selectedNodes)})}),"ProjectClassesWrapperReferencedStylesSub"),o=(0,p.Ys)(this.projectDoc,["classes/byId/*/disabledInNodes/*"],(e=>{this.setState({usedClassesByPos:e.getUsedProjectClassesForNodesByPos(this.props.selectedNodes)})}),"ProjectClassesWrapperReferencedStylesSub");(0,r.Z)(this,M).push((()=>t.dispose()),(()=>e.dispose()),(()=>o.dispose()))}unsubFromUpdates(){(0,r.Z)(this,M).forEach((e=>e())),(0,i.Z)(this,M,[])}render(){var e;const{selectedNodes:t,selectedComponentInstances:o,devComponentSelected:n,selectionTextComponent:s}=this.props,i=this.projectDoc.nodes.byId[t[0]];if(!i||this.projectDoc.isNodePageRoot(i.id)||o||n||s)return null;const{allClasses:r,classId:a,usedClassesByPos:l,showInput:p,isCreatingNewClass:h}=this.state,y=r.filter((e=>!l.find((t=>t.id===e.id)))).sort(((e,t)=>e.name.toLowerCase()>t.name.toLowerCase()?1:-1)),f=p||l.length>0,b=!!this.projectUIState.readonly;return(0,S.jsx)(S.Fragment,{children:(0,S.jsxs)(u.c,{title:"Classes",contentGap:"one",onHeaderClick:this.handleHelperButton,isHeaderClickable:!f&&!b,addon:b?null:(0,S.jsx)(c.z,{onClick:this.handleHelperButton,shape:"square",size:"medium",style:"transparent",colorScheme:"neutral",children:(0,S.jsx)(d.J,{size:8,type:f?"remove":"add"})}),children:[f&&!b?(0,S.jsx)(w,{bindClassToNodes:this.handleBindClassToNodes,availableClasses:y,allClasses:r,createNewClass:this.handleCreateClass,autoFocus:0===l.length,selectedNodes:this.props.selectedNodes}):null,l.length>0?(0,S.jsx)(_,{items:l.map((e=>({value:e.name,label:`.${e.name}`,id:e.id,irremovable:!!G(e,i),checked:!e.isDisabled}))),readonly:b,onAction:this.handleOptionSelection,handleDelete:this.handleDeleteClass,onCheckboxChange:this.handleToggleClass,containerId:"classes-label-list-wrapper",selectedItem:null===(e=l.find((e=>e.id===a)))||void 0===e?void 0:e.name}):null,a?(0,S.jsx)(m.a,{viewPort:this.props.matchedBreakpoint?Number(this.props.matchedBreakpoint):void 0,selectedNodes:this.props.selectedNodes,classId:a,isNewClass:h,allClasses:r,closePanel:this.unselectClass,renderedFromInspector:!0}):null]})})}},P=(0,a.Z)(k.prototype,"projectDoc",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),U=(0,a.Z)(k.prototype,"projectClassManagementFlow",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),L=(0,a.Z)(k.prototype,"modalManagementFlow",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Z=(0,a.Z)(k.prototype,"absolutePositionedLayerFlow",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),R=(0,a.Z)(k.prototype,"projectUIState",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),k)},32455:function(e,t,o){o.d(t,{t:function(){return A}});var n=o(73202),s=o(92809),i=o(9626),r=o(33800),a=o(30773),l=o(67294),c=o(76883),d=o(49899),p=o(65988),u=o(65989),h=o(88439),y=o(94433),m=o(89361),f=o(92763),b=o(93510),g=o(30214),I=o(16230),v=o(34131),j=o(27789),N=o(92734),x=o(85893);const S=e=>{const{boundTextStyle:t,unbindTextStyleFromSelectedNode:o,selectedNode:n,allStyleKeys:s,noActionAvailable:i,readonly:r}=e,{0:a,1:c}=(0,l.useState)(!1);(0,l.useEffect)((()=>{c(!1)}),[n,t]);return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)(y.c,{title:t?`${t.name} - ${N.PN.TEXT_STYLES}`:N.PN.TEXT_STYLES,onTitleClick:()=>{t&&!r&&c(!a)},actionActive:a,contentGap:"none",contentPadding:"none",addon:i?null:(0,x.jsx)(m.z,{isDisabled:r,shape:"square",style:"transparent",onClick:()=>t?(c(!1),void o()):c(!a),children:(0,x.jsx)(f.J,{type:t?"unlocked":"link",size:12,color:t?`${u.X4.DEFAULT}`:"currentColor"})}),children:[t&&Object.entries(t.content).map((([e,o])=>(0,x.jsxs)("div",{className:`jsx-${I.m.__hash} text-style-property`,children:[(0,x.jsxs)("div",{className:`jsx-${I.m.__hash} key-value-container`,children:[(0,x.jsxs)("span",{className:`jsx-${I.m.__hash} property`,children:[(0,h.gS)(e),":"]}),(0,x.jsxs)("span",{className:`jsx-${I.m.__hash} value`,children:[null===o||void 0===o?void 0:o.content,";"]})]}),s.includes(e)&&(0,x.jsxs)("div",{"data-tooltip-name":"warning",className:`jsx-${I.m.__hash}`,children:[(0,x.jsx)(f.J,{type:"info",color:`${u.z8.WARNING_LIGHT}`,size:12}),(0,x.jsx)(g._,{name:"warning",children:(0,x.jsxs)("div",{className:`jsx-${I.m.__hash} tooltip`,children:[(0,x.jsxs)("strong",{className:`jsx-${I.m.__hash}`,children:[t.name," - ",e]})," ","is being overwritten by the same property you have set, individually on the node."]})})]})]},e))),(0,x.jsx)(p.default,{id:I.m.__hash,children:I.m})]}),!i&&a&&(0,x.jsx)(v.v,{typographySectionPosition:(0,j.sb)(t),renderedFrom:b.dG.DEV})]})};var w,O,T,_,E,D,F,C;let A=(w=(0,c.f3)("projectDoc"),O=(0,c.f3)("projectUIState"),T=(0,c.f3)("designLanguageManagementFlow"),C=new WeakMap,_=class extends l.Component{constructor(...e){super(...e),(0,n.Z)(this,"projectDoc",E,this),(0,n.Z)(this,"projectUIState",D,this),(0,n.Z)(this,"designLanguageManagementFlow",F,this),C.set(this,{writable:!0,value:[]}),(0,s.Z)(this,"state",{selectedNodes:Object.keys(this.projectUIState.selection.nodes)}),(0,s.Z)(this,"unbindTextStyleFromSelectedNode",(()=>{const e=this.state.selectedNodes[0];if(!e)return;const t=this.projectDoc.nodes.byId[e];if(!t)return;const o=(0,j.hm)(t);o&&this.designLanguageManagementFlow.unBindTextStyleFromNodes({textStyleId:o,nodeIds:[e]})}))}componentDidMount(){const e=(0,d.Ys)(this.projectUIState,["selection/nodes/*"],(({selection:e})=>{this.setState({selectedNodes:Object.keys(e.nodes)})}),"TextStyleSectionWrapper1"),t=(0,d.Ys)(this.projectDoc,["nodes/byId/*/styles","nodes/byId/*/styles/*","nodes/byId/*/referencedStyles","nodes/byId/*/referencedStyles/*","nodes/byId/*/referencedStyles/*/content/styles/*"],(()=>{this.forceUpdate()}),"TextStyleSectionWrapper2");(0,r.Z)(this,C).push((()=>t.dispose()),(()=>e.dispose()))}componentWillUnmount(){(0,r.Z)(this,C).forEach((e=>e())),(0,i.Z)(this,C,[])}render(){const e=this.state.selectedNodes;if(!e.length)return null;const t=this.projectDoc.nodes.byId[e[0]];if(!t)return null;const o=Object.keys(null===t||void 0===t?void 0:t.styles);Object.values(t.referencedStyles).forEach((e=>{"inlined"===e.content.mapType&&o.push(...Object.keys(e.content.styles))}));const n=this.props.boundTextStyleId?this.projectDoc.designLanguage.textStyleSetsById[this.props.boundTextStyleId]:null;return(0,x.jsx)(S,{readonly:!!this.projectUIState.readonly,selectedNode:this.state.selectedNodes[0],boundTextStyle:n,unbindTextStyleFromSelectedNode:this.unbindTextStyleFromSelectedNode,allStyleKeys:[...new Set(o)],noActionAvailable:this.props.noActionAvailable})}},E=(0,a.Z)(_.prototype,"projectDoc",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),D=(0,a.Z)(_.prototype,"projectUIState",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),F=(0,a.Z)(_.prototype,"designLanguageManagementFlow",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_)},40934:function(e,t,o){o.d(t,{w:function(){return S}});var n=o(92809),s=o(65988),i=o(67294),r=o(72307),a=o.n(r),l=o(31241),c=o.n(l),d=o(89361),p=o(92763),u=o(10440),h=o(65714),y=o(5595),m=o(16230),f=o(86451),b=o(30214),g=o(65989),I=o(68831),v=o(60408),j=o(85893);function N(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function x(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?N(Object(o),!0).forEach((function(t){(0,n.Z)(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):N(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}const S=({readonly:e,disabled:t,isNodeInteractive:o,property:n,savedValue:r,savedToken:l,onUpdateValueForProperty:N,onToggleProperty:S,onUpdatePropertyKey:w,onRemoveKeyValue:O,designTokens:T,cssValues:_,selectedNodes:E})=>{const{0:{key:D,value:F,tokenId:C},1:A}=(0,i.useState)({key:(0,u.O8)(n),value:r,tokenId:null===l||void 0===l?void 0:l.id}),{0:k,1:P}=(0,i.useState)([]),{0:U,1:L}=(0,i.useState)(!1),Z=(0,i.createRef)();(0,i.useEffect)((()=>{A((e=>x(x({},e),{},{value:r})))}),[r]),(0,i.useEffect)((()=>{A((e=>x(x({},e),{},{token:l})))}),[l]),(0,i.useEffect)((()=>{A((e=>x(x({},e),{},{key:(0,u.O8)(n)})))}),[n]),(0,i.useEffect)((()=>{U&&(a()(F,r)||N({key:n,value:F,tokenId:C}),L(!1))}),[U]);const R=(0,i.useCallback)((()=>{(e=>{const t=_?(0,h.zl)(e,_):[],o=(0,h.Jw)(e,T);P([...o,...t])})(D)}),[D,_]),M=C&&l?l.value:F;return(0,j.jsxs)("div",{className:`jsx-${m.m.__hash} dev-property`,children:[(0,j.jsxs)("div",{className:`jsx-${m.m.__hash} left-property`,children:[e?null:(0,j.jsx)(I.X,{value:!t,onChange:S,absolutelyPositioned:!1,paddingLeft:"sm"}),(0,j.jsx)(f.R,{inputProps:{isDisabled:e||t||o,size:"adaptive",style:"label",onBlur:()=>{var e;null===(e=Z.current)||void 0===e||e.focus()},refAttrs:{style:t?{textDecoration:"line-through"}:void 0}},disableDrag:!0,selectedNodes:E,value:D,property:D,options:(null===_||void 0===_?void 0:_.keys)||[],onSave:e=>{var t,o;null===(t=Z.current)||void 0===t||t.focus(),w(null===(o=e.value)||void 0===o?void 0:o.toString(),(null===l||void 0===l?void 0:l.id)||"")}},`${D}-property`)]}),(0,j.jsxs)("div",{className:`jsx-${m.m.__hash} right-property`,children:["inherit"!==M&&1===M.split(" ").length&&c()(M)&&(0,j.jsx)("div",{className:`jsx-${m.m.__hash} color-preview`,children:(0,j.jsx)(y.Id,{disabled:e,value:M,onChange:e=>N({key:D,value:e}),onInputBlur:()=>L(!0),hasOpacity:!0,size:"small"})}),(0,j.jsx)(f.R,{inputProps:{ref:Z,isDisabled:e||o,size:"adaptive",style:"label",color:C?"#FCE5AC":parseInt(F)?"#F1A074":"#B3DBB3",onFocus:R,selectOnFocus:!0,refAttrs:{style:t?{textDecoration:"line-through"}:void 0}},disableDrag:!0,selectedNodes:E,value:F,property:D,options:k,onSave:e=>N(e)},`${E}-value`)]}),e||o?null:(0,j.jsx)("div",{className:`jsx-${m.m.__hash} close-button`,children:(0,j.jsx)(d.z,{style:"transparent",tabIndex:-1,shape:"square",colorScheme:"neutral",size:"small",onClick:O,children:(0,j.jsx)(p.J,{type:"actions/close",size:8})})}),o?(0,j.jsx)(v.s,{tooltipTriggerArea:"sm",tooltipName:"Interactive Node Properties",tooltipContent:"Editing or removing some properties of interactive nodes is not allowed."}):null,h.zC.includes(D)&&(0,j.jsxs)("div",{"data-tooltip-name":"warning",className:`jsx-${m.m.__hash} non-standard-prop`,children:[(0,j.jsx)(p.J,{type:"info",color:`${g.z8.WARNING_LIGHT}`,size:12}),(0,j.jsx)(b._,{name:"warning",children:(0,j.jsxs)("div",{className:`jsx-${m.m.__hash} tooltip`,children:["This is a ",(0,j.jsx)("strong",{className:`jsx-${m.m.__hash}`,children:"non-standard"})," property. It is not recommended to use it on production sites, as it will not work for every user."]})})]}),(0,j.jsx)(s.default,{id:m.m.__hash,children:m.m})]})}},28835:function(e,t,o){o.d(t,{d:function(){return m}});var n=o(92809),s=o(65988),i=o(67294),r=o(89361),a=o(92763),l=o(77729),c=o(65714),d=o(31768),p=o(16230),u=o(85893);function h(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function y(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?h(Object(o),!0).forEach((function(t){(0,n.Z)(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):h(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}const m=({selectedNode:e,cssValues:t,onSaveNewKeyValue:o,designTokens:n})=>{const{0:{key:h,value:m,tokenId:f},1:b}=(0,i.useState)({key:"",value:"",tokenId:""}),g=(0,i.useRef)({key:h,value:m,tokenId:f}),{0:I,1:v}=(0,i.useState)(!1),{0:j,1:N}=(0,i.useState)([]),x=(0,i.createRef)(),S=(0,i.createRef)();(0,i.useEffect)((()=>{I&&(O(),v(!1))}),[I]),(0,i.useEffect)((()=>{g.current={key:h,value:m,tokenId:f}}),[h,m,f]),(0,i.useEffect)((()=>()=>{const{key:e,value:t,tokenId:n}=g.current;e&&(t||n)&&o({key:e,value:t,tokenId:n})}),[]),(0,i.useEffect)((()=>{var e,t;b({key:"",value:"",tokenId:""}),N([]),null===(e=S.current)||void 0===e||e.blur(),null===(t=x.current)||void 0===t||t.blur()}),[e]);const w=()=>{var e;v(!0),null===(e=S.current)||void 0===e||e.focus()},O=()=>{h&&m&&(o({key:h,value:m,tokenId:f}),b({key:"",value:"",tokenId:""}),N([]))},T=(0,i.useCallback)((e=>{const t=e.currentTarget.value;b((e=>y(y({},e),{},{key:t})))}),[]),_=(0,i.useCallback)((e=>{const t=e.currentTarget.value;b((e=>y(y({},e),{},{value:t})))}),[]),E=(0,i.useCallback)(((e,o)=>{b((t=>y(y({},t),{},{key:e}))),o&&(e=>{if(null!==x&&void 0!==x&&x.current){var o;null===(o=x.current)||void 0===o||o.focus();const s=t?(0,c.zl)(e,t):[],i=(0,c.Jw)(e,n);N(s?[...i,...s]:[])}})(e)}),[x]),D=(0,i.useCallback)(((e,t,o)=>{var n;(b((t=>y(y({},t),{},{value:e,tokenId:o||""}))),null!==S&&void 0!==S&&S.current&&t)&&(null===(n=S.current)||void 0===n||n.focus(),N([]))}),[S]);return(0,u.jsxs)("div",{className:`jsx-${p.m.__hash} new-dev-property`,children:[(0,u.jsxs)("div",{className:`jsx-${p.m.__hash} input-wrapper`,children:[(0,u.jsx)("div",{className:`jsx-${p.m.__hash} left-input`,children:(0,u.jsx)(d.P,{value:h,placeholder:"property",ref:S,options:(null===t||void 0===t?void 0:t.keys)||[],onSelectValue:E,onChange:T,onKeyDown:e=>{var t;e.keyCode===l.sd.KEY_CODE.ESC&&(b((e=>y(y({},e),{},{key:""}))),null!==S&&void 0!==S&&S.current&&(null===(t=S.current)||void 0===t||t.blur()))},size:"flexible"})}),(0,u.jsx)("div",{className:`jsx-${p.m.__hash} right-input`,children:(0,u.jsx)(d.P,{ref:x,placeholder:"value",value:m,options:j,onSelectValue:D,onChange:_,onBlur:w,onKeyDown:e=>{var t,o;e.keyCode===l.sd.KEY_CODE.BACKSPACE&&(""===m&&(null===S||void 0===S||null===(t=S.current)||void 0===t||t.focus()));e.keyCode!==l.sd.KEY_CODE.ESC||(b({key:"",value:"",tokenId:""}),null!==x&&void 0!==x&&x.current&&(null===(o=x.current)||void 0===o||o.blur()))},size:"flexible"})})]}),(0,u.jsx)("div",{className:`jsx-${p.m.__hash} add-btn`,children:(0,u.jsx)(r.z,{style:"transparent",tabIndex:-1,shape:"square",colorScheme:"neutral",size:"small",onClick:w,children:(0,u.jsx)(a.J,{type:"add",size:8})})}),(0,u.jsx)(s.default,{id:p.m.__hash,children:p.m})]})}},16230:function(e,t,o){o.d(t,{m:function(){return s}});var n=o(65989);const s=[`.dev-property.jsx-1075156263{position:relative;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;padding:0 ${n.N_.UNIT} 0px ${n.N_.ONE_AND_HALF};-webkit-align-content:flex-start;-ms-flex-line-pack:start;align-content:flex-start;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding-right:${n.N_.THREE_UNITS};-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;color:${n.bo.WHITE_FADED};}`,`.dev-property.jsx-1075156263 .close-button.jsx-1075156263{position:absolute;opacity:0;right:${n.N_.UNIT};bottom:2px;}`,`.dev-property.jsx-1075156263 .color-preview.jsx-1075156263{margin:0 ${n.N_.HALF_UNIT} ${n.N_.HALF_UNIT};}`,".dev-property.jsx-1075156263:hover .close-button.jsx-1075156263{opacity:1;}",".dev-property.jsx-1075156263 .left-property.jsx-1075156263{position:relative;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}",`.dev-property.jsx-1075156263 .right-property.jsx-1075156263{position:relative;margin-left:${n.N_.HALF_UNIT};display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;max-width:90%;}`,".dev-property.jsx-1075156263 .left-property.jsx-1075156263::after{content:':';margin-left:-6px;}",".dev-property.jsx-1075156263 .right-property.jsx-1075156263::after{content:';';margin-left:-1ch;}",".dev-property.jsx-1075156263 .left-property.jsx-1075156263::after,.dev-property.jsx-1075156263 .right-property.jsx-1075156263::after{display:inline;margin-bottom:2px;}",".new-dev-property.jsx-1075156263{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;width:100%;}",`.new-dev-property.jsx-1075156263 .input-wrapper.jsx-1075156263{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;height:${n.N_.FOUR_UNITS};padding:0 ${n.N_.UNIT} 0px ${n.N_.UNIT};width:90%;}`,".new-dev-property.jsx-1075156263 .left-input.jsx-1075156263{position:relative;}",`.new-dev-property.jsx-1075156263 .right-input.jsx-1075156263{position:relative;margin:0 ${n.N_.UNIT} 0px ${n.N_.UNIT};}`,`.new-dev-property.jsx-1075156263 .add-btn.jsx-1075156263{width:10%;margin-right:${n.N_.UNIT};}`,`.text-style-property.jsx-1075156263{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;width:100%;padding:0 ${n.N_.HALF_UNIT} ${n.N_.UNIT} ${n.N_.ONE_AND_HALF};color:${n.bo.INACTIVE};}`,".text-style-property.jsx-1075156263 .key-value-container.jsx-1075156263{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;width:100%;}",`.text-style-property.jsx-1075156263 .value.jsx-1075156263{width:45%;margin:0 ${n.N_.UNIT} 0 ${n.N_.HALF_UNIT};white-space:nowrap;overflow:hidden;text-overflow:ellipsis;}`,".text-style-property.jsx-1075156263 .tooltip.jsx-1075156263{text-align:center;}",`.event-property.jsx-1075156263{position:relative;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;padding:0 ${n.N_.UNIT} 0px ${n.N_.ONE_AND_HALF};-webkit-align-content:flex-start;-ms-flex-line-pack:start;align-content:flex-start;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding-right:${n.N_.THREE_UNITS};-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;color:${n.bo.WHITE_FADED};}`,`.event-property.jsx-1075156263 .close-button.jsx-1075156263{position:absolute;opacity:0;right:${n.N_.UNIT};bottom:2px;}`,`.event-property.jsx-1075156263 .color-preview.jsx-1075156263{margin:0 ${n.N_.HALF_UNIT} ${n.N_.HALF_UNIT};}`,".event-property.jsx-1075156263:hover .close-button.jsx-1075156263{opacity:1;}",".event-property.jsx-1075156263 .left-property.jsx-1075156263{position:relative;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}",`.event-property.jsx-1075156263 .right-property.jsx-1075156263{position:relative;margin-left:${n.N_.UNIT};display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;max-width:90%;}`,".event-property.jsx-1075156263 .left-property.jsx-1075156263::after{content:'=>';margin-left:4px;}",".event-property.jsx-1075156263 .right-property.jsx-1075156263::after{margin-left:-1ch;}",".event-property.jsx-1075156263 .left-property.jsx-1075156263::after,.event-property.jsx-1075156263 .right-property.jsx-1075156263::after{display:inline;margin-bottom:2px;}",`.non-standard-prop.jsx-1075156263{margin:2px 0 0 ${n.N_.UNIT};}`,".dev-property.jsx-1075156263 input,.dev-property.jsx-1075156263 .left-property.jsx-1075156263,.dev-property.jsx-1075156263 .right-property.jsx-1075156263,.event-property.jsx-1075156263 input,.event-property.jsx-1075156263 .left-property.jsx-1075156263,.event-property.jsx-1075156263 .right-property.jsx-1075156263,.text-style-property.jsx-1075156263,.new-dev-property.jsx-1075156263 .autocomplete-list,.new-dev-property.jsx-1075156263 input{font-family:Consolas,Monaco,'Andale Mono','Ubuntu Mono',monospace !important;}"];s.__hash="1075156263"},92734:function(e,t,o){o.d(t,{PN:function(){return s},bQ:function(){return i},vj:function(){return r},mX:function(){return l},i2:function(){return c}});var n=o(75222);const s={FILL:"Bg Color",FILL_ICON:"Color",BACKGROUND:"Background",BG_IMAGE:"Bg Image",BORDER:"Border",SHADOWS:"Shadows",SIZE:"Size",PREVIEW_SIZE:"Preview Size",CONTENT:"Inner Layout",POSITION:"Position",ZINDEX:"Z-index",VISIBILITY:"Visibility",TYPOGRAPHY:"Typography",TEXT_STYLES:"Text Style",TEXT_CONTENT:"Text Content",BORDER_RADIUS:"Radius",MARGIN:"Margin",PADDING:"Padding",TEXT_COLOR:"Text Color",LIST:"List Style",SELECT:"Select Settings",VIDEO:"Video",IMAGE:"Image",EMBED:"Code Embed Settings"},i={SIZE:"SIZE_SECTION",BACKGROUND:"BACKGROUND",BG_COLOR:"BG_COLOR",BG_IMAGE:"BG_IMAGE_SECTION",BORDER:"BORDER_SECTION",BORDER_WIDTH:"BORDER_WIDTH",BOX_SHADOW:"SHADOW_SECTION",LAYOUT:"LAYOUT",POSITION:"POSITION",ZINDEX:"ZINDEX",TYPOGRAPHY:"TYPOGRAPHY",TEXT_COLOR:"TEXT_COLOR",VISIBILITY:"VISIBILITY",RADIUS:"RADIUS",PADDING:"PADDING",MARGIN:"MARGIN",IMAGE_VIDEO_ATTR:"IMAGE_VIDEO_ATTR_SECTION",LIST:"LIST",SELECT:"SELECT",EMBED:"EMBED"},r={[i.SIZE]:["width","height","minWidth","minHeight","maxWidth","maxHeight","flex"],[i.BACKGROUND]:["backgroundColor","fill","backgroundImage","backgroundSize","backgroundRepeat","backgroundPosition"],[i.BG_COLOR]:["backgroundColor","fill"],[i.BG_IMAGE]:["backgroundImage","backgroundSize","backgroundRepeat","backgroundPosition"],[i.BOX_SHADOW]:["boxShadow"],[i.PADDING]:["padding","paddingTop","paddingRight","paddingBottom","paddingLeft"],[i.LAYOUT]:["display","alignItems","justifyContent","flexDirection","flexWrap","gap"],[i.BORDER]:["color","border","borderWidth","borderTopWidth","borderBottomWidth","borderLeftWidth","borderRightWidth","borderColor","borderStyle"],[i.BORDER_WIDTH]:["border","borderWidth","borderTopWidth","borderBottomWidth","borderLeftWidth","borderRightWidth"],[i.MARGIN]:["marginTop","marginBottom","marginLeft","marginRight","margin"],[i.POSITION]:["position","alignSelf","top","bottom","left","right"],[i.TYPOGRAPHY]:["fontFamily","fontSize","fontStyle","fontWeight","wordSpacing","wordBreak","letterSpacing","lineHeight","textAlign","textDecoration","textShadow","textTransform","textOverflow","textIndent","whiteSpace","verticalAlign"],[i.TEXT_COLOR]:["color"],[i.ZINDEX]:["zIndex"],[i.VISIBILITY]:["display","opacity"],[i.RADIUS]:["borderRadius","borderTopLeftRadius","borderBottomRightRadius","borderBottomLeftRadius","borderTopRightRadius"],[i.LIST]:["listStyleImage","listStylePosition","listStyleType"],[i.SELECT]:[]},a=[i.SIZE,i.POSITION,i.LAYOUT,i.MARGIN,i.PADDING,i.VISIBILITY,i.BORDER,i.RADIUS,i.BOX_SHADOW,i.ZINDEX],l=[i.BACKGROUND,i.BG_IMAGE,i.TEXT_COLOR,i.TYPOGRAPHY,i.BOX_SHADOW],c={[n.sO.CONTAINER]:[...a,i.BACKGROUND],[n.sO.TEXT]:[...a,i.TYPOGRAPHY,i.BACKGROUND,i.TEXT_COLOR],[n.sO.IMAGE]:[...a,i.IMAGE_VIDEO_ATTR],[n.sO.ICON]:[...a,i.BACKGROUND],[n.sO.VIDEO]:[...a,i.IMAGE_VIDEO_ATTR],[n.sO.FORM]:[...a,i.BACKGROUND],[n.sO.BUTTON]:[...a,i.TYPOGRAPHY,i.BACKGROUND,i.TEXT_COLOR],[n.sO.TEXTINPUT]:[...a,i.TYPOGRAPHY,i.BACKGROUND,i.TEXT_COLOR],[n.sO.CHECKBOX]:a,[n.sO.RADIOBUTTON]:a,[n.sO.DEV_COMPONENT]:[],[n.sO.TEXTAREA]:[...a,i.TYPOGRAPHY,i.BACKGROUND,i.TEXT_COLOR],[n.sO.IFRAME]:[...a],[n.sO.COMPONENT]:[i.BACKGROUND,i.SIZE,i.POSITION,i.MARGIN,i.VISIBILITY],[n.sO.LIST]:[...a,i.LIST,i.BACKGROUND],[n.sO.LISTITEM]:[...a,i.LIST,i.BACKGROUND,i.TEXT_COLOR,i.TYPOGRAPHY],[n.sO.SELECT]:[...a,i.SELECT],[n.IV.DROPDOWN]:[...a,i.BACKGROUND],[n.IV.DROPDOWN_TOGGLE]:[...a,i.BACKGROUND,i.TEXT_COLOR],[n.IV.DROPDOWN_LIST]:[...a,i.BACKGROUND].filter((e=>e!==i.VISIBILITY)),[n.IV.DROPDOWN_ARROW]:[...a],[n.IV.NAVBAR]:[...a,i.BACKGROUND,i.TEXT_COLOR],[n.IV.BURGER_MENU]:[...a].filter((e=>e!==i.VISIBILITY)),[n.IV.MOBILE_MENU]:[...a,i.BACKGROUND,i.TEXT_COLOR].filter((e=>e!==i.VISIBILITY)),[n.IV.CLOSE_MENU]:[...a],[n.sO.HTML_NODE]:[...a,i.EMBED],[n.sO.LOTTIE]:[...a],[n.IV.NAVBAR_BTN_GROUP]:[...a,i.BACKGROUND,i.TEXT_COLOR],[n.IV.NAVBAR_NAV]:[...a,i.BACKGROUND,i.TEXT_COLOR],[n.IV.NAVBAR_NAV_LINKS]:[...a,i.BACKGROUND,i.TEXT_COLOR],[n.IV.MOBILE_MENU_NAV]:[...a,i.BACKGROUND,i.TEXT_COLOR],[n.IV.MOBILE_MENU_NAV_LINKS]:[...a,i.BACKGROUND,i.TEXT_COLOR]}},68803:function(e,t,o){function n(e){const t=[],o=/[,\(\)]/;let n=0,s="";if(null==e)return t;for(;e.length;){const i=o.exec(e);if(!i)break;let r=!1,a=!1;switch(i[0]){case",":n||(s?(t.push(s.trim()),s=""):a=!0,r=!0);break;case"(":n++;break;case")":n--}const l=i.index+1;s+=e.slice(0,r?l-1:l),e=e.slice(l),a&&(t.push(s.trim()),s="",r=!0)}return(s.length||e.length)&&t.push((s+e).trim()),t}o.d(t,{B:function(){return n}})},41717:function(e,t,o){o.d(t,{L:function(){return a}});var n=o(65988),s=(o(67294),o(29869)),i=o(65989),r=o(85893);const a=e=>{const{selectedOption:t,options:o,name:a,onChange:l,handleDelete:c,contextMenuEvent:d,readonly:p}=e;return(0,r.jsxs)(r.Fragment,{children:[o.length>0?(0,r.jsx)("div",{className:n.default.dynamic([["1555273034",[e.defaultColor||i.Pt.LIGHT_01,i.bo.DEFAULT,i.N_.HALF_UNIT,i.N_.UNIT,e.hoverColor||i.z8.PURPLE,i.bo.HIGHLIGHT,e.selectedColor||i.z8.PURPLE_DARK,i.bo.HIGHLIGHT]]])+" labels-list",children:(0,r.jsx)(s.k,{selectedOption:t?String(t):void 0,name:a,options:o,style:{flexWrap:"wrap",justifyContent:"flex-start",gap:i.N_.ONE_AND_HALF},onChange:l,onDeleteOption:e=>{c(e)},onContextMenu:(e,t)=>{if(!d)return;const o=new CustomEvent(d,{detail:{state:t.value,originalEvent:e},bubbles:!0,composed:!0});document.dispatchEvent(o)},readonly:p})}):null,(0,r.jsx)(n.default,{id:"1555273034",dynamic:[e.defaultColor||i.Pt.LIGHT_01,i.bo.DEFAULT,i.N_.HALF_UNIT,i.N_.UNIT,e.hoverColor||i.z8.PURPLE,i.bo.HIGHLIGHT,e.selectedColor||i.z8.PURPLE_DARK,i.bo.HIGHLIGHT],children:[`.labels-list.__jsx-style-dynamic-selector .option{background:${e.defaultColor||i.Pt.LIGHT_01};color:${i.bo.DEFAULT};text-transform:none !important;height:auto !important;padding:${i.N_.HALF_UNIT} ${i.N_.UNIT};}`,`.labels-list.__jsx-style-dynamic-selector .option:not(.option-active):hover{background:${e.hoverColor||i.z8.PURPLE};color:${i.bo.HIGHLIGHT};}`,`.labels-list.__jsx-style-dynamic-selector .option-active{background-color:${e.selectedColor||i.z8.PURPLE_DARK};color:${i.bo.HIGHLIGHT};}`,".labels-list.__jsx-style-dynamic-selector .option:hover .delete-btn{opacity:1;}"]})]})}},34987:function(e,t,o){o.d(t,{a:function(){return ue}});var n,s,i,r,a,l,c,d,p,u,h,y=o(73202),m=o(92809),f=o(9626),b=o(33800),g=o(30773),I=o(67294),v=o(76883),j=o(49899),N=o(65988),x=o(35155),S=o(94433),w=o(65989),O=o(92763),T=o(89361),_=o(26545),E=o(28835),D=o(40934),F=o(10440),C=o(71023),A=o(12394),k=o(85893);let P=(n=(0,v.f3)("projectClassManagementFlow"),s=(0,v.f3)("projectUIState"),i=(0,v.f3)("nodeStyleManagmentFlow"),r=(0,v.f3)("projectDoc"),a=(0,v.f3)("assetsEditFlow"),l=class extends I.Component{constructor(...e){super(...e),(0,y.Z)(this,"projectClassManagementFlow",c,this),(0,y.Z)(this,"projectUIState",d,this),(0,y.Z)(this,"nodeStyleManagmentFlow",p,this),(0,y.Z)(this,"projectDoc",u,this),(0,y.Z)(this,"assetsEditFlow",h,this),(0,m.Z)(this,"state",{tokens:this.projectDoc.designLanguage.resolveTokensWithCategoryName()}),(0,m.Z)(this,"handlePropertyValueChange",(e=>{const{identifier:t,classId:o}=this.props,{tokenId:n,value:s}=e;let{key:i}=e;if(!i)return;if(i=(0,F._A)(i),!s&&!n)return void this.handleRemoveProperty(i);let r="string"===typeof s?s.replace(/;+$/,""):s;const a=`${r}`.split('"')[1]||`${r}`.split("'")[1];if(A.H.includes(i)&&a){const e=this.assetsEditFlow.getAssetBySrc(a);r=e?e.id:r}this.projectClassManagementFlow.addOrUpdate({classId:o,key:i,value:r,identifier:t,tokenId:n})})),(0,m.Z)(this,"handleRemoveProperty",(e=>{const{classId:t,identifier:o}=this.props;this.projectClassManagementFlow.deleteStyle({classId:t,key:e,identifier:o})})),(0,m.Z)(this,"handlePropKeyChange",((e,t,o,n)=>{const{identifier:s,classId:i}=this.props;if(e===t)return;if(!t)return void this.handleRemoveProperty(e);t=(0,F._A)(t);const r=`${o}`.split('"')[1]||`${o}`.split("'")[1];if(A.H.includes(t)&&r){const e=this.assetsEditFlow.getAssetBySrc(r);o=e?e.id:o}this.projectClassManagementFlow.addOrUpdate({oldKey:e,key:t,value:o,identifier:s,classId:i})})),(0,m.Z)(this,"handleToggleProperty",(e=>{const{identifier:t,classId:o}=this.props;this.projectClassManagementFlow.toggleClassPropertyByKey({classId:o,key:e,identifier:t})}))}render(){const{tokens:e}=this.state,{styles:t,classId:o,cssValues:n}=this.props,s=this.nodeStyleManagmentFlow.resolveStaticAndDynamicNodes({styles:t});Object.keys(s).forEach((e=>{A.H.includes(e)&&(s[e]=this.nodeStyleManagmentFlow.getRelativeBackgroundImage(s[e]))}));const i=!!this.projectUIState.readonly;return(0,k.jsxs)("div",{style:{width:"100%"},children:[Object.keys(t).map((o=>{const r="dynamic"===t[o].type?e.find((e=>(0,C.MU)(e)===s[o])):void 0;return(0,k.jsx)(D.w,{property:o,selectedNodes:[],savedValue:s[o],disabled:t[o].disabled,savedToken:r,onUpdatePropertyKey:(e,t)=>this.handlePropKeyChange(o,e,s[o],t),onUpdateValueForProperty:this.handlePropertyValueChange,onRemoveKeyValue:()=>this.handleRemoveProperty(o),onToggleProperty:()=>this.handleToggleProperty(o),designTokens:e,cssValues:n,readonly:i},o)})),i?null:(0,k.jsx)(E.d,{selectedNode:o,cssValues:n,designTokens:e,onSaveNewKeyValue:this.handlePropertyValueChange})]})}},c=(0,g.Z)(l.prototype,"projectClassManagementFlow",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),d=(0,g.Z)(l.prototype,"projectUIState",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),p=(0,g.Z)(l.prototype,"nodeStyleManagmentFlow",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),u=(0,g.Z)(l.prototype,"projectDoc",[r],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),h=(0,g.Z)(l.prototype,"assetsEditFlow",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),l);var U=o(41666),L=o(60408),Z=o(32455),R=o(30499),M=o(63145),H=o(41717),$=o(91396),B=o(18177),G=o(99210),z=o(41146);const W=350,V=e=>{var t,o,n,s;const{toggles:i,linkedTextStyles:r,classId:a,classRef:l,isStyleExtractDisabled:c,isNewClass:d,renderedFromInspector:p,interactionStatesStyles:u,selectedNodes:h,isDefaultClass:y,readonly:m,breakpoints:f}=e,{0:b,1:g}=(0,I.useState)(""),v=I.createRef(),j=I.createRef();(0,I.useEffect)((()=>{g(""),v.current&&v.current.focus()}),[e.classId]),(0,_.O)(j,(t=>{(null===t||void 0===t?void 0:t.target).closest(".option")||(null===t||void 0===t?void 0:t.target).closest(".autocomplete-option")||(null===t||void 0===t?void 0:t.target).closest(".thq-select-list-item")||(null===t||void 0===t?void 0:t.target).closest(".chrome-picker")||(null===t||void 0===t?void 0:t.target).closest(".thq-absolute-wrapper")||e.closePanel()})),(0,G.b)(j,{[z.KEY_COMPONENTS_COMMANDS.DUPLICATE]:e.handleDuplicateSelectedClass});const E=(0,I.useCallback)((t=>{g("");let o=!0;return t||(g("Please enter a valid value"),o=!1),e.classNameExists(t)&&(g("Class name already defined"),o=!1),!M.yw.test(t)&&o&&(g("Class name is invalid"),o=!1),o}),[]),D=!d&&p&&1===(null===h||void 0===h?void 0:h.length),F=[];Object.values(l.conditions||{}).forEach((e=>{"screen-size"===e.type&&F.push(e)}));const C=e.selectedStateMeta.state?Object.values(u).find((t=>t.meta.state===e.selectedStateMeta.state)):null;return(0,k.jsxs)("div",{style:p?(()=>{const e=document.getElementById("classes-label-list-wrapper");if(!e||!p)return{};const{x:t}=e.getBoundingClientRect();return{left:t-W-10+"px",top:"120px"}})():(()=>{const e=document.getElementsByClassName("sidebar-content")[0];return e?{left:e.getBoundingClientRect().width+47+"px",top:"98px"}:{}})(),ref:j,tabIndex:0,className:N.default.dynamic([["1481750319",[W,w.n_.DEFAULT,w.Pt.DARK_02,w.n_.DEFAULT,w.N_.UNIT,w.N_.UNIT,w.N_.UNIT,w.N_.HALF_UNIT,w.N_.TWO_UNITS,w.N_.UNIT,w.N_.UNIT,w.N_.UNIT,w.N_.FOUR_UNITS,w.N_.HALF_UNIT,w.bo.HIGHLIGHT,w.um.DEFAULT]]])+" edit-class-panel "+(p?"":"sidebar-position"),children:[(0,k.jsxs)(x.s,{title:d?"Create class":"Edit class",addon:(0,k.jsxs)("div",{className:N.default.dynamic([["1481750319",[W,w.n_.DEFAULT,w.Pt.DARK_02,w.n_.DEFAULT,w.N_.UNIT,w.N_.UNIT,w.N_.UNIT,w.N_.HALF_UNIT,w.N_.TWO_UNITS,w.N_.UNIT,w.N_.UNIT,w.N_.UNIT,w.N_.FOUR_UNITS,w.N_.HALF_UNIT,w.bo.HIGHLIGHT,w.um.DEFAULT]]])+" update-container",children:[D&&!m?(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)("div",{className:N.default.dynamic([["1481750319",[W,w.n_.DEFAULT,w.Pt.DARK_02,w.n_.DEFAULT,w.N_.UNIT,w.N_.UNIT,w.N_.UNIT,w.N_.HALF_UNIT,w.N_.TWO_UNITS,w.N_.UNIT,w.N_.UNIT,w.N_.UNIT,w.N_.FOUR_UNITS,w.N_.HALF_UNIT,w.bo.HIGHLIGHT,w.um.DEFAULT]]])+" info-icon",children:(0,k.jsx)(L.s,{size:12,tooltipName:"Extract overrides",tooltipContent:(0,k.jsx)("p",{className:N.default.dynamic([["1481750319",[W,w.n_.DEFAULT,w.Pt.DARK_02,w.n_.DEFAULT,w.N_.UNIT,w.N_.UNIT,w.N_.UNIT,w.N_.HALF_UNIT,w.N_.TWO_UNITS,w.N_.UNIT,w.N_.UNIT,w.N_.UNIT,w.N_.FOUR_UNITS,w.N_.HALF_UNIT,w.bo.HIGHLIGHT,w.um.DEFAULT]]]),children:"Extract the new style added on the selected element"}),tooltipTriggerArea:"sm"})}),(0,k.jsx)(T.z,{style:"outline",colorScheme:"neutral",onClick:e.handleUpdateClassStyles,isDisabled:c,children:"Extract new styles"})]}):null,D?null:(0,k.jsx)("div",{className:N.default.dynamic([["1481750319",[W,w.n_.DEFAULT,w.Pt.DARK_02,w.n_.DEFAULT,w.N_.UNIT,w.N_.UNIT,w.N_.UNIT,w.N_.HALF_UNIT,w.N_.TWO_UNITS,w.N_.UNIT,w.N_.UNIT,w.N_.UNIT,w.N_.FOUR_UNITS,w.N_.HALF_UNIT,w.bo.HIGHLIGHT,w.um.DEFAULT]]]),children:(0,k.jsx)(T.z,{style:"transparent",size:"small",onClick:e.closePanel,children:(0,k.jsx)(O.J,{type:R.u2["actions/close"],size:12})})})]}),underTitle:(0,k.jsxs)("div",{className:N.default.dynamic([["1481750319",[W,w.n_.DEFAULT,w.Pt.DARK_02,w.n_.DEFAULT,w.N_.UNIT,w.N_.UNIT,w.N_.UNIT,w.N_.HALF_UNIT,w.N_.TWO_UNITS,w.N_.UNIT,w.N_.UNIT,w.N_.UNIT,w.N_.FOUR_UNITS,w.N_.HALF_UNIT,w.bo.HIGHLIGHT,w.um.DEFAULT]]])+" input-wrapper",children:[(0,k.jsx)(B.S,{ref:v,sizeType:"lg",styleType:"outline",trimSpaces:!0,block:!0,disabled:y||m,value:e.initialClassName,onSave:t=>{t!==e.initialClassName&&E(t)&&e.handleSaveName(t)},validationMessage:b}),d?(0,k.jsxs)("div",{className:N.default.dynamic([["1481750319",[W,w.n_.DEFAULT,w.Pt.DARK_02,w.n_.DEFAULT,w.N_.UNIT,w.N_.UNIT,w.N_.UNIT,w.N_.HALF_UNIT,w.N_.TWO_UNITS,w.N_.UNIT,w.N_.UNIT,w.N_.UNIT,w.N_.FOUR_UNITS,w.N_.HALF_UNIT,w.bo.HIGHLIGHT,w.um.DEFAULT]]])+" extract-container",children:[(0,k.jsx)(U.r,{onChange:e.handleExtractStyles,value:e.extractStylesState,label:"Extract element styles"}),(0,k.jsx)("div",{className:N.default.dynamic([["1481750319",[W,w.n_.DEFAULT,w.Pt.DARK_02,w.n_.DEFAULT,w.N_.UNIT,w.N_.UNIT,w.N_.UNIT,w.N_.HALF_UNIT,w.N_.TWO_UNITS,w.N_.UNIT,w.N_.UNIT,w.N_.UNIT,w.N_.FOUR_UNITS,w.N_.HALF_UNIT,w.bo.HIGHLIGHT,w.um.DEFAULT]]])+" info-icon",children:(0,k.jsx)(L.s,{size:12,tooltipName:"Extract",tooltipContent:(0,k.jsx)("p",{className:N.default.dynamic([["1481750319",[W,w.n_.DEFAULT,w.Pt.DARK_02,w.n_.DEFAULT,w.N_.UNIT,w.N_.UNIT,w.N_.UNIT,w.N_.HALF_UNIT,w.N_.TWO_UNITS,w.N_.UNIT,w.N_.UNIT,w.N_.UNIT,w.N_.FOUR_UNITS,w.N_.HALF_UNIT,w.bo.HIGHLIGHT,w.um.DEFAULT]]]),children:"Extract the styles of the selected element, or start from scratch"})})})]}):null]}),children:[(0,k.jsx)($.i,{readonly:m,getStateAvailableOptions:e.getStateAvailableOptions,addNewState:e.addNewState,showOptionsList:e.showOptionsList,hideOptionsList:e.hideOptionsList,existingInteractionStates:[],children:Object.values(u||{}).length?(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)("div",{className:N.default.dynamic([["1481750319",[W,w.n_.DEFAULT,w.Pt.DARK_02,w.n_.DEFAULT,w.N_.UNIT,w.N_.UNIT,w.N_.UNIT,w.N_.HALF_UNIT,w.N_.TWO_UNITS,w.N_.UNIT,w.N_.UNIT,w.N_.UNIT,w.N_.FOUR_UNITS,w.N_.HALF_UNIT,w.bo.HIGHLIGHT,w.um.DEFAULT]]])+" sub-panel-section",children:(0,k.jsx)(H.L,{options:Object.values(u||{}).map((e=>({value:e.meta.state,label:e.meta.state}))),onChange:t=>e.handleSelectedState(t,a),selectedOption:e.selectedStateMeta.classId?e.selectedStateMeta.classId===a?null===(t=e.selectedStateMeta.state)||void 0===t?void 0:t.toString():void 0:null===(o=e.selectedStateMeta.state)||void 0===o?void 0:o.toString(),name:"States",handleDelete:e.handleDeleteState,selectedColor:e.selectedStateMeta.classId===a?w.X4.DEFAULT:void 0,hoverColor:w.X4.LIGHT_01,contextMenuEvent:"ui-state:contextualmenu",readonly:m})}),e.selectedStateMeta.state&&C?(0,k.jsx)(S.c,{contentGap:"none",contentPadding:"none",children:(0,k.jsx)("div",{className:N.default.dynamic([["1481750319",[W,w.n_.DEFAULT,w.Pt.DARK_02,w.n_.DEFAULT,w.N_.UNIT,w.N_.UNIT,w.N_.UNIT,w.N_.HALF_UNIT,w.N_.TWO_UNITS,w.N_.UNIT,w.N_.UNIT,w.N_.UNIT,w.N_.FOUR_UNITS,w.N_.HALF_UNIT,w.bo.HIGHLIGHT,w.um.DEFAULT]]])+" sub-panel-section",children:(0,k.jsx)(P,{identifier:C.meta.state,classId:a,styles:C.content,cssValues:e.cssValues})})}):null]}):null}),(0,k.jsx)(S.c,{contentGap:"none",contentPadding:"none",title:"Properties",children:(0,k.jsx)(P,{identifier:"desktop",classId:e.classId,styles:l.content,cssValues:e.cssValues})},"desktop"),(0,k.jsx)(S.c,{title:"Text Style",children:null!==(n=r[0])&&void 0!==n&&n.id?(0,k.jsx)(Z.t,{boundTextStyleId:null===(s=r[0])||void 0===s?void 0:s.id,noActionAvailable:!0}):null}),(0,k.jsx)(S.c,{title:"Media Query Properties",children:f.sort(((e,t)=>t.maxWidth-e.maxWidth)).map((t=>{var o;return(0,k.jsxs)("div",{className:N.default.dynamic([["1481750319",[W,w.n_.DEFAULT,w.Pt.DARK_02,w.n_.DEFAULT,w.N_.UNIT,w.N_.UNIT,w.N_.UNIT,w.N_.HALF_UNIT,w.N_.TWO_UNITS,w.N_.UNIT,w.N_.UNIT,w.N_.UNIT,w.N_.FOUR_UNITS,w.N_.HALF_UNIT,w.bo.HIGHLIGHT,w.um.DEFAULT]]])+" sub-panel-section",children:[(0,k.jsxs)("div",{onClick:()=>e.handleToggle(String(t.maxWidth)),className:N.default.dynamic([["1481750319",[W,w.n_.DEFAULT,w.Pt.DARK_02,w.n_.DEFAULT,w.N_.UNIT,w.N_.UNIT,w.N_.UNIT,w.N_.HALF_UNIT,w.N_.TWO_UNITS,w.N_.UNIT,w.N_.UNIT,w.N_.UNIT,w.N_.FOUR_UNITS,w.N_.HALF_UNIT,w.bo.HIGHLIGHT,w.um.DEFAULT]]])+" collapsable-header",children:[(0,k.jsxs)("div",{className:N.default.dynamic([["1481750319",[W,w.n_.DEFAULT,w.Pt.DARK_02,w.n_.DEFAULT,w.N_.UNIT,w.N_.UNIT,w.N_.UNIT,w.N_.HALF_UNIT,w.N_.TWO_UNITS,w.N_.UNIT,w.N_.UNIT,w.N_.UNIT,w.N_.FOUR_UNITS,w.N_.HALF_UNIT,w.bo.HIGHLIGHT,w.um.DEFAULT]]]),children:["<="," ",t.maxWidth," px"]}),(0,k.jsx)("div",{className:N.default.dynamic([["1481750319",[W,w.n_.DEFAULT,w.Pt.DARK_02,w.n_.DEFAULT,w.N_.UNIT,w.N_.UNIT,w.N_.UNIT,w.N_.HALF_UNIT,w.N_.TWO_UNITS,w.N_.UNIT,w.N_.UNIT,w.N_.UNIT,w.N_.FOUR_UNITS,w.N_.HALF_UNIT,w.bo.HIGHLIGHT,w.um.DEFAULT]]])+" "+((i[t.maxWidth]?"collapse-icon":"expand-icon rotate")||""),children:(0,k.jsx)(O.J,{type:"expand",size:12})})]}),i[t.maxWidth]?(0,k.jsx)(P,{identifier:t.maxWidth,classId:a,styles:(null===(o=F.find((e=>e.meta.maxWidth===t.maxWidth)))||void 0===o?void 0:o.content)||{},cssValues:e.cssValues}):null]},t.id)}))},"media")]}),(0,k.jsx)(N.default,{id:"1481750319",dynamic:[W,w.n_.DEFAULT,w.Pt.DARK_02,w.n_.DEFAULT,w.N_.UNIT,w.N_.UNIT,w.N_.UNIT,w.N_.HALF_UNIT,w.N_.TWO_UNITS,w.N_.UNIT,w.N_.UNIT,w.N_.UNIT,w.N_.FOUR_UNITS,w.N_.HALF_UNIT,w.bo.HIGHLIGHT,w.um.DEFAULT],children:[".edit-class-panel.__jsx-style-dynamic-selector{position:fixed;height:75vh;width:350px;box-shadow:rgb(18 18 18 / 30%) 0px 2px 16px 8px;}",`.edit-class-panel.__jsx-style-dynamic-selector .thq-panel{border-radius:${w.n_.DEFAULT};}`,`.sidebar-position.__jsx-style-dynamic-selector{border-left:1px solid ${w.Pt.DARK_02};height:calc(100% - 90px);border-radius:${w.n_.DEFAULT};}`,`.input-wrapper.__jsx-style-dynamic-selector{margin:0px ${w.N_.UNIT} ${w.N_.UNIT} ${w.N_.UNIT};}`,`.info-icon.__jsx-style-dynamic-selector{margin:0px ${w.N_.HALF_UNIT};-webkit-align-self:center;-ms-flex-item-align:center;align-self:center;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}`,".update-container.__jsx-style-dynamic-selector{-webkit-box-pack:end;-webkit-justify-content:flex-end;-ms-flex-pack:end;justify-content:flex-end;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-align-self:center;-ms-flex-item-align:center;align-self:center;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;}",`.extract-container.__jsx-style-dynamic-selector{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;width:100%;margin-top:${w.N_.TWO_UNITS};-webkit-align-self:center;-ms-flex-item-align:center;align-self:center;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;}`,".extract-container.__jsx-style-dynamic-selector .pt-switch{width:100%;}",`.sub-panel-section.__jsx-style-dynamic-selector{margin-top:${w.N_.UNIT};width:100%;}`,`.collapse-icon.__jsx-style-dynamic-selector{margin-right:${w.N_.UNIT};-webkit-transform:rotate(0deg);-ms-transform:rotate(0deg);transform:rotate(0deg);}`,`.expand-icon.__jsx-style-dynamic-selector{margin-right:${w.N_.UNIT};-webkit-transform:rotate(90deg);-ms-transform:rotate(90deg);transform:rotate(90deg);}`,`.collapsable-header.__jsx-style-dynamic-selector{width:100%;height:${w.N_.FOUR_UNITS};padding-left:${w.N_.HALF_UNIT};color:${w.bo.HIGHLIGHT};font-size:${w.um.DEFAULT};display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}`,".sub-panel-section.__jsx-style-dynamic-selector{width:100%;}",".rotate.__jsx-style-dynamic-selector{-webkit-transform:rotate(90deg);-ms-transform:rotate(90deg);transform:rotate(90deg);}",".switch-label-text.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}"]})]})};var K,J,X,Y,q,Q,ee,te,oe,ne,se,ie,re,ae,le,ce;function de(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function pe(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?de(Object(o),!0).forEach((function(t){(0,m.Z)(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):de(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}let ue=(K=(0,v.f3)("projectDoc"),J=(0,v.f3)("projectUIState"),X=(0,v.f3)("absolutePositionedLayerFlow"),Y=(0,v.f3)("projectClassManagementFlow"),q=(0,v.f3)("nodeStyleManagmentFlow"),Q=(0,v.f3)("mainInspectorFlow"),ee=(0,v.f3)("mediaQueryBreakpointManagementFlow"),ce=new WeakMap,te=class extends I.Component{constructor(...e){super(...e),(0,y.Z)(this,"projectDoc",oe,this),(0,y.Z)(this,"projectUIState",ne,this),(0,y.Z)(this,"absolutePositionedLayerFlow",se,this),(0,y.Z)(this,"projectClassManagementFlow",ie,this),(0,y.Z)(this,"nodeStyleManagmentFlow",re,this),(0,y.Z)(this,"mainInspectorFlow",ae,this),(0,y.Z)(this,"mediaQueryBreakpointManagementFlow",le,this),ce.set(this,{writable:!0,value:[]}),(0,m.Z)(this,"state",{initialClassName:"",extractStylesState:!0,selectedStateMeta:this.projectUIState.stage.interactionState,classRef:null,linkedTextStyles:[],toggles:{},cssValues:{cssColors:{},cssKeyValue:{},keys:[]},isStyleExtractDisabled:this.projectClassManagementFlow.checkIfNodeStylesIsEmpty(Object.keys(this.projectUIState.selection.nodes)[0]),breakpoints:this.mediaQueryBreakpointManagementFlow.getNonDefaultActiveMQBreakpointsInOrder()}),(0,m.Z)(this,"loadFile",(async()=>{const e=await o.e(33239).then(o.t.bind(o,33239,19));this.setState({cssValues:pe(pe({},e),{},{keys:[...Object.keys(null===e||void 0===e?void 0:e.cssKeyValue)]})})})),(0,m.Z)(this,"handleToggle",(e=>{var t;this.setState(pe(pe({},this.state),{},{toggles:pe(pe({},this.state.toggles),{},{[e]:null===(t=!this.state.toggles[e])||void 0===t||t})}))})),(0,m.Z)(this,"handleSelectedState",((e,t)=>{this.mainInspectorFlow.handleChangeInteractionState(e,t)})),(0,m.Z)(this,"handleDeleteState",(e=>{e.value===this.state.selectedStateMeta.state&&this.mainInspectorFlow.handleChangeInteractionState(null),this.projectClassManagementFlow.removeStyleState({classId:this.props.classId,state:e.value})})),(0,m.Z)(this,"showOptionsList",((e,t)=>{this.absolutePositionedLayerFlow.showElement(e,t)})),(0,m.Z)(this,"hideOptionsList",(()=>{this.absolutePositionedLayerFlow.hideElement()})),(0,m.Z)(this,"handleAddState",(e=>{this.projectClassManagementFlow.addStyleState({classId:this.props.classId,state:e})})),(0,m.Z)(this,"classNameExists",(e=>!!this.props.allClasses.find((t=>t.name===e)))),(0,m.Z)(this,"handleSaveName",(e=>{this.projectClassManagementFlow.updateName({name:e,classId:this.props.classId})})),(0,m.Z)(this,"handleExtractStyles",(()=>{const e=Object.keys(this.projectUIState.selection.nodes)[0];e&&(this.state.extractStylesState?this.projectClassManagementFlow.extractStylesFromClassToNode({targetNodeId:e,classId:this.props.classId}):this.projectClassManagementFlow.extractCurrentNodeStylesToClass({nodeId:e,classId:this.props.classId}),this.setState({extractStylesState:!this.state.extractStylesState}))})),(0,m.Z)(this,"handleUpdateClassStyles",(()=>{const e=Object.keys(this.projectUIState.selection.nodes)[0];e&&this.projectClassManagementFlow.updateClassWithCurrentNodeStyles({nodeId:e,classId:this.props.classId})})),(0,m.Z)(this,"handleKybDuplicateSelectedClass",(()=>{this.props.renderedFromInspector||this.projectClassManagementFlow.duplicateClass({classId:this.props.classId})})),(0,m.Z)(this,"getStateOptionsForClass",(()=>this.projectClassManagementFlow.getMissingStatesForClass(this.props.classId)))}componentDidMount(){this.loadClass(this.props.classId),this.subForClass(),this.subForInteractionState(),this.loadFile(),this.subForSelectedNode(),this.subForStyles(),this.subForBreakpoints()}componentDidUpdate(e){e.classId!==this.props.classId&&(this.unsubForClass(),this.loadClass(this.props.classId),this.subForClass(),this.projectUIState.stage.interactionState.classId&&this.mainInspectorFlow.handleChangeInteractionState(null)),e.selectedNodes!==this.props.selectedNodes&&this.subForStyles()}componentWillUnmount(){this.unsubForClass(),this.projectUIState.stage.interactionState.classId&&this.mainInspectorFlow.handleChangeInteractionState(null)}loadClass(e){const t=this.projectDoc.classes.byId[e];if(!t)return;const o=JSON.parse(JSON.stringify(t||{})),n=Object.keys((null===o||void 0===o?void 0:o.linkedTextStyles)||{}).reduce(((e,t)=>{const o=this.projectDoc.designLanguage.textStyleSetsById[t];return o&&e.push({name:o.name,id:o.id}),e}),[]);this.setState({initialClassName:o.name,classRef:o,linkedTextStyles:n});const s={};Object.values(t.conditions).forEach((e=>{"screen-size"===e.type&&Object.keys(e.content).length&&(s[String(e.meta.maxWidth)]=!0)})),this.setState({toggles:pe(pe({},this.state.toggles),s)})}unsubForClass(){(0,b.Z)(this,ce).forEach((e=>e())),(0,f.Z)(this,ce,[])}subForInteractionState(){const e=(0,j.Ys)(this.projectUIState,["stage/interactionState"],(e=>{this.setState({selectedStateMeta:e.stage.interactionState})}),"EditClassInteractionSub");(0,b.Z)(this,ce).push((()=>e.dispose()))}subForClass(){const e=(0,j.Ys)(this.projectDoc,[`classes/byId/${this.props.classId}/name`,`classes/byId/${this.props.classId}/name/*`,`classes/byId/${this.props.classId}/content`,`classes/byId/${this.props.classId}/content/*`,`classes/byId/${this.props.classId}/content/*/disabled`,`classes/byId/${this.props.classId}/conditions`,`classes/byId/${this.props.classId}/conditions/*`,`classes/byId/${this.props.classId}/conditions/*/content/*`,`classes/byId/${this.props.classId}/conditions/*/content/*/disabled`,`classes/byId/${this.props.classId}/linkedTextStyles`,`classes/byId/${this.props.classId}/linkedTextStyles/*`],(()=>{this.loadClass(this.props.classId)}),"EditClassSub");(0,b.Z)(this,ce).push((()=>e.dispose()))}subForBreakpoints(){const e=(0,j.Ys)(this.projectDoc,["mediaQueryBreakpoints/**"],(()=>{this.setState({breakpoints:this.mediaQueryBreakpointManagementFlow.getNonDefaultActiveMQBreakpointsInOrder()})}),"MQBreakpointsWrapper1");(0,b.Z)(this,ce).push((()=>e.dispose()))}subForSelectedNode(){const e=(0,j.Ys)(this.projectUIState,["selection/nodes/*"],(({selection:e})=>{this.setState({isStyleExtractDisabled:this.projectClassManagementFlow.checkIfNodeStylesIsEmpty(Object.keys(e.nodes)[0])})}),"PrimitiveAttributesWrapper");(0,b.Z)(this,ce).push((()=>e.dispose()))}subForStyles(){if(!this.props.selectedNodes||!this.props.selectedNodes.length)return;const e=this.props.selectedNodes[0],t=(0,j.Ys)(this.projectDoc,[`nodes/byId/${e}/styles`,`nodes/byId/${e}/referencedStyles`,`nodes/byId/${e}/referencedStyles/**`,`nodes/byId/${e}/styles/**`],(()=>{this.setState({isStyleExtractDisabled:this.projectClassManagementFlow.checkIfNodeStylesIsEmpty(this.props.selectedNodes?this.props.selectedNodes[0]:"")})}),"EditClassSub");(0,b.Z)(this,ce).push((()=>t.dispose()))}render(){const{classRef:e,breakpoints:t}=this.state,o=this.projectDoc.classes.byId[this.props.classId];return e&&o?(0,k.jsx)(V,pe(pe(pe({},this.props),this.state),{},{readonly:!!this.projectUIState.readonly,interactionStatesStyles:o.getStateConditions()||{},isDefaultClass:o.isDefault,classRef:e,handleSaveName:this.handleSaveName,classNameExists:this.classNameExists,handleToggle:this.handleToggle,handleExtractStyles:this.handleExtractStyles,handleUpdateClassStyles:this.handleUpdateClassStyles,handleSelectedState:this.handleSelectedState,handleDeleteState:this.handleDeleteState,showOptionsList:this.showOptionsList,hideOptionsList:this.hideOptionsList,getStateAvailableOptions:this.getStateOptionsForClass,addNewState:this.handleAddState,handleDuplicateSelectedClass:this.handleKybDuplicateSelectedClass,breakpoints:t})):null}},oe=(0,g.Z)(te.prototype,"projectDoc",[K],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ne=(0,g.Z)(te.prototype,"projectUIState",[J],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),se=(0,g.Z)(te.prototype,"absolutePositionedLayerFlow",[X],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ie=(0,g.Z)(te.prototype,"projectClassManagementFlow",[Y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),re=(0,g.Z)(te.prototype,"nodeStyleManagmentFlow",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ae=(0,g.Z)(te.prototype,"mainInspectorFlow",[Q],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),le=(0,g.Z)(te.prototype,"mediaQueryBreakpointManagementFlow",[ee],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),te)},34131:function(e,t,o){o.d(t,{v:function(){return G}});var n=o(73202),s=o(92809),i=o(9626),r=o(33800),a=o(30773),l=o(67294),c=o(49899),d=o(76883),p=o(65988),u=o(41146),h=o(82863),y=o(47971),m=o(99560),f=o(27709),b=o(65989),g=o(85893);const I=({value:e,onChange:t,autofocusOnMount:o})=>(0,g.jsxs)("div",{className:p.default.dynamic([["238527212",[b.N_.ONE_AND_HALF]]])+" search-box",children:[(0,g.jsx)(f.S,{style:"boxed",size:"flexible",label:"Search",value:e,onChange:t,autofocusOnMount:o}),(0,g.jsx)(p.default,{id:"238527212",dynamic:[b.N_.ONE_AND_HALF],children:[`.search-box.__jsx-style-dynamic-selector{padding:${b.N_.ONE_AND_HALF};}`]})]});var v=o(93510),j=o(89361),N=o(81665),x=o(108),S=o(92763),w=o(94433),O=o(49616);const T=[`.text-styles-panel.jsx-3336025761{background-color:${b.Pt.DARK_01};box-shadow:0 2px 16px 8px rgb(18 18 18 / 30%);width:216px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;padding-bottom:${b.N_.UNIT};position:fixed;right:265px;}`,`.panel-header.jsx-3336025761{padding:${b.N_.UNIT} ${b.N_.UNIT} 0 ${b.N_.ONE_AND_HALF};height:40px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;font-size:${b.um.HEADING};text-transform:capitalize;font-weight:${b.Xw.MEDIUM_500};}`,`.text-style-list-item.jsx-3336025761{list-style-type:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;width:100%;padding:${b.N_.HALF_UNIT};display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;}`,`.text-style-list-item.jsx-3336025761:hover{color:${b.bo.HIGHLIGHT};}`,`.text-style-list-item.jsx-3336025761:hover .preview.jsx-3336025761{color:${b.bo.HIGHLIGHT} !important;}`,".list-container.jsx-3336025761{max-height:200px;overflow:auto;}",".options-container.jsx-3336025761{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;opacity:0;}",".list-item-left-side.jsx-3336025761{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;width:50%;}",`.preview.jsx-3336025761{border:1px solid ${b.Pt.LIGHT_02};border-radius:${b.n_.DEFAULT};padding:${b.N_.UNIT};margin-right:${b.N_.TWO_UNITS};width:32px;height:32px;text-align:center;text-transform:none;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;}`,`.font-size.jsx-3336025761{margin-right:${b.N_.UNIT};font-size:${b.um.INFO};font-style:italic;color:${b.bo.INFO};}`,".text-style-list-item.jsx-3336025761:hover .options-container.jsx-3336025761{opacity:1;}",`.add-panel.jsx-3336025761{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;border-top:1px solid ${b.GC.LIGHT};padding-top:${b.N_.TWO_UNITS};margin-top:${b.N_.TWO_UNITS};}`,`.add-panel-title.jsx-3336025761{padding:0 ${b.N_.UNIT} 0 ${b.N_.ONE_AND_HALF};font-size:${b.um.HEADING};text-transform:capitalize;font-weight:${b.Xw.MEDIUM_500};}`,`.btn-group.jsx-3336025761{padding:0 ${b.N_.ONE_AND_HALF};margin-bottom:${b.N_.UNIT};}`,`.text-styles-panel-arrow.jsx-3336025761{position:fixed;right:265px;width:0;height:0;margin-top:-8px;margin-right:-16px;border:8px solid transparent;border-left-color:${b.Pt.DARK_01};}`,`.input-container.jsx-3336025761{width:100%;padding:${b.N_.ONE_AND_HALF} 0;}`,`.selected.jsx-3336025761{color:${b.X4.DEFAULT};}`];function _(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function E(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?_(Object(o),!0).forEach((function(t){(0,s.Z)(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):_(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}T.__hash="3336025761";const D=e=>{var t;const{0:o,1:n}=(0,l.useState)(!1),{0:s,1:i}=(0,l.useState)(null===(t=e.typographySectionPosition)||void 0===t?void 0:t.top),{0:r,1:a}=(0,l.useState)(!1),{0:c,1:d}=(0,l.useState)(""),{0:f,1:_}=(0,l.useState)(e.textStyles),{0:D,1:F}=(0,l.useState)(null),{0:C,1:A}=(0,l.useState)(""),{0:k,1:P}=(0,l.useState)("");(0,l.useEffect)((()=>{const{typographySectionPosition:t}=e;if(!t)return;const o=window.innerHeight;471>o-t.top&&i(o-471)}),[e]);const U=()=>{C&&e.createTextSyleAndBindToNode({name:C,content:e.selectedNodeStyles})},L=e=>{e?e.length>30?P(h.TM.INVALID_TEXT_STYLE_NAME_LENGTH):h.lH.test(e)?P(""):P(h.TM.INVALID_TEXT_STYLE_NAME_FORMAT):P(h.TM.NO_TEXT_STYLE_NAME)};return(0,g.jsx)(g.Fragment,{children:(0,g.jsxs)("div",{style:{top:s},className:`jsx-${T.__hash} text-styles-panel`,children:[(0,g.jsxs)("div",{className:`jsx-${T.__hash} panel-header`,children:[(0,g.jsx)("span",{className:`jsx-${T.__hash} panel-title`,children:"Text Styles"}),!e.boundTextStyle&&e.renderedFrom===v.dG.MAIN&&(0,g.jsx)(j.z,{title:"Create Text-Style from selected Node",onClick:()=>{n(!o),A(""),P("")},style:"transparent",shape:"square",colorScheme:"neutral",dataAttrs:{"data-tooltip-direction":"vertical"},children:(0,g.jsx)(S.J,{type:"add",size:8})})]}),(0,g.jsx)(I,{value:c,onChange:t=>{const o=t.target.value;d(o),_(e.textStyles.filter((e=>e.name.toLocaleLowerCase().includes(t.target.value))))},autofocusOnMount:!0}),(0,g.jsx)("div",{className:`jsx-${T.__hash} list-container`,children:(0,g.jsx)(O.E,{onSelect:e.bindTextStyleToNode,children:f&&f.sort(((e,t)=>e.name.toLocaleLowerCase()<t.name.toLocaleLowerCase()?-1:1)).map((t=>{var o,s;return(0,g.jsxs)("li",{"data-item-id":t.id,className:`jsx-${T.__hash} text-style-list-item`,children:[(0,g.jsxs)("div",{className:`jsx-${T.__hash} list-item-left-side`,children:[(0,g.jsx)("div",{style:E(E({},(0,y.N)(t.content)),{},{fontSize:"14px",letterSpacing:"normal",color:`${b.bo.INACTIVE}`}),className:`jsx-${T.__hash} preview`,children:"Aa"}),(0,g.jsx)("span",{className:`jsx-${T.__hash} text-style-name `+((null===(o=e.boundTextStyle)||void 0===o?void 0:o.id)===t.id?"selected":""),children:t.name})]}),(0,g.jsxs)("div",{className:`jsx-${T.__hash} options-container`,children:[(0,g.jsx)("span",{className:`jsx-${T.__hash} font-size`,children:null===(s=t.content.fontSize)||void 0===s?void 0:s.content}),(0,g.jsx)(j.z,{title:`Edit ${t.name}`,onClick:e=>((e,t)=>{e.stopPropagation(),F(t),a(!r),A(""),P(""),n(!1)})(e,t),style:"transparent",shape:"square",size:"small",colorScheme:"neutral",children:(0,g.jsx)(S.J,{type:"settings",size:12})})]})]},t.id)}))})}),r&&(0,g.jsx)(m.B,{tokenInfo:D,onDismiss:()=>a(!1),topPosition:"auto",rightPosition:"491px"}),o&&(0,g.jsxs)("div",{className:`jsx-${T.__hash} add-panel`,children:[(0,g.jsx)("span",{className:`jsx-${T.__hash} add-panel-title`,children:"Add Text Style"}),(0,g.jsx)(w.c,{children:(0,g.jsx)("div",{className:`jsx-${T.__hash} input-container`,children:(0,g.jsx)(x.W,{value:C,type:"textinput",style:"boxed",placeholder:"New Style",refAttrs:{autoFocus:!0},onChange:e=>{const t=e.target.value.trim();A(t),L(t)},onKeyDown:e=>{e.keyCode===u.KEY_CODE.ENTER&&U()},validationMessage:k})})}),(0,g.jsx)("div",{className:`jsx-${T.__hash} btn-group`,children:(0,g.jsx)(N.h,{alignment:"stretch",cornerStyle:"round",children:(0,g.jsx)(j.z,{size:"medium",onClick:U,isDisabled:!(C&&!k),children:"Add"})})})]}),(0,g.jsx)(p.default,{id:T.__hash,children:T})]})})};var F,C,A,k,P,U,L,Z,R,M;function H(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function $(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?H(Object(o),!0).forEach((function(t){(0,s.Z)(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):H(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}const B=["fontFamily","fontSize","textDecoration","textTransform","fontWeight","fontStyle","lineHeight","letterSpacing"];let G=(F=(0,d.f3)("projectDoc"),C=(0,d.f3)("projectUIState"),A=(0,d.f3)("fontsInProjectFlow"),k=(0,d.f3)("designLanguageManagementFlow"),M=new WeakMap,P=class extends l.Component{constructor(...e){super(...e),(0,n.Z)(this,"projectDoc",U,this),(0,n.Z)(this,"projectUIState",L,this),(0,n.Z)(this,"fontsInProjectFlow",Z,this),(0,n.Z)(this,"designLanguageManagementFlow",R,this),M.set(this,{writable:!0,value:[]}),(0,s.Z)(this,"state",{selectedNodes:Object.keys(this.projectUIState.selection.nodes||{}),textStyles:Object.values(this.projectDoc.designLanguage.textStyleSetsById)}),(0,s.Z)(this,"handleBindTextStylesToSelectedNodes",(e=>{const{selectionTextComponent:t}=this.props;if(t)return void t.bindTextStyle(e);const o=this.state.selectedNodes[0];if(!o)return;this.projectDoc.nodes.byId[o]&&this.designLanguageManagementFlow.bindTextStyleToNodes({textStyleId:e,nodeIds:this.state.selectedNodes})})),(0,s.Z)(this,"handleCreateTextStyleAndBindToSelectedNode",(e=>{const{name:t,content:o}=e;this.designLanguageManagementFlow.createTextStyle({name:t,content:o,nodeIds:this.state.selectedNodes})}))}componentDidMount(){this.subscribeForTextStyles()}componentWillUnmount(){this.unsubscribeFromChanges()}subscribeForTextStyles(){const e=(0,c.Ys)(this.projectDoc,["designLanguage/textStyleSetsById/*","designLanguage/categoriesById/*"],(e=>{this.setState({textStyles:Object.values(e.designLanguage.textStyleSetsById)})}),"InspectorTextStylePanelWrapper");(0,r.Z)(this,M).push((()=>e.dispose()))}unsubscribeFromChanges(){(0,r.Z)(this,M).forEach((e=>e())),(0,i.Z)(this,M,[])}getActualStyles(){const{inheritedStyles:e,styles:t}=this.props,o={};return e&&t?(Object.keys(e).forEach((t=>{B.includes(t)&&e[t]&&(o[t]=e[t])})),Object.keys(t).forEach((e=>{B.includes(e)&&t[e]&&(o[e]=t[e])})),o):{}}render(){const{textStyles:e,selectedNodes:t}=this.state;if(!e||0===t.length)return;if(!this.projectDoc.nodes.byId[t[0]])return null;const o=this.designLanguageManagementFlow.getSelectedNodesTextStyles();return(0,g.jsx)(D,$($({},this.props),{},{boundTextStyle:o,textStyles:e,typographySectionPosition:this.props.typographySectionPosition,selectedNodeStyles:this.getActualStyles(),createTextSyleAndBindToNode:this.handleCreateTextStyleAndBindToSelectedNode,bindTextStyleToNode:this.handleBindTextStylesToSelectedNodes}))}},U=(0,a.Z)(P.prototype,"projectDoc",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),L=(0,a.Z)(P.prototype,"projectUIState",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Z=(0,a.Z)(P.prototype,"fontsInProjectFlow",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),R=(0,a.Z)(P.prototype,"designLanguageManagementFlow",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),P)},27789:function(e,t,o){o.d(t,{FG:function(){return i},hm:function(){return r},sb:function(){return a},He:function(){return l},vS:function(){return c}});var n=o(71023),s=o(92734);const i=(e,t)=>{var o;return(null===(o=e.find((e=>(0,n.MU)(e)===t)))||void 0===o?void 0:o.value)||t},r=e=>{var t,o;return null===(t=Object.values(e.referencedStyles||{}).find((e=>"design-language-referenced"===e.content.mapType)))||void 0===t||null===(o=t.content)||void 0===o?void 0:o.referenceId},a=e=>{const t=document.querySelector(`[data-section-title="${e?`${e.name}`:s.PN.TEXT_STYLES}"]`);return t?null===t||void 0===t?void 0:t.getBoundingClientRect():null},l=e=>{const t=document.querySelector(`[data-section-title="${e}"]`);return t?null===t||void 0===t?void 0:t.getBoundingClientRect():null},c=(e,t,o=!1)=>{if(e.matchedBreakpoint!==t.matchedBreakpoint)return!0;if(e.interactionStateMeta.state!==t.interactionStateMeta.state)return!0;if(!o)return!1;const n=e.selectionStyles,s=t.selectionStyles;return JSON.stringify(n)!==JSON.stringify(s)}},65714:function(e,t,o){o.d(t,{zC:function(){return d},zl:function(){return p},jx:function(){return u},Jw:function(){return y}});var n=o(92809),s=o(10440),i=o(7446),r=o(39078);function a(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function l(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?a(Object(o),!0).forEach((function(t){(0,n.Z)(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):a(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}const c=["inherit","initial","revert","unset"],d=["zoom"],p=(e,t)=>{if(e&&t&&null!==t&&void 0!==t&&t.cssKeyValue){const o=null===t||void 0===t?void 0:t.cssKeyValue[e];if(o){let e=[...o.values];return"color"===o.type&&e.push(...Object.keys(null===t||void 0===t?void 0:t.cssColors)),e.push(...c),e=e.sort(),e}}return[]},u=(e,t,o,n)=>Object.keys(e).reduce(((i,a)=>{let c={[a]:e[a]};return a===t&&(c={[(0,s._A)(o)]:n?new r.P({content:{referenceType:"token",id:n}}):e[a]}),l(l({},i),c)}),{}),h={[i.i.COLOR]:["color","fill"],[i.i.SIZE]:["width","height"],[i.i.SPACE]:["margin","padding","gap"],[i.i.RADIUS]:["radius"]},y=(e,t)=>/border.*width/.test(e)?[]:t.filter((t=>{const o=t.type;switch(o){case"radius":return e.toLowerCase().includes(o);case"space":if(h.space.find((t=>e.includes(t))))return"space"===o;break;case"color":if(h.color.find((t=>e.includes(t))))return"color"===o;break;case"size":if(h.size.find((t=>e.includes(t))))return"size"===o;break;default:return[]}}))},77736:function(e,t,o){o.d(t,{wY:function(){return s},vI:function(){return i},ay:function(){return r}});var n=o(92809);let s;!function(e){e.WHITE_CHESS="whiteChessboard",e.BLACK_CHESS="blackChessboard"}(s||(s={}));class i{constructor(){(0,n.Z)(this,"byId",{})}change(e,t){this.byId[e]=t}}s.WHITE_CHESS,s.BLACK_CHESS;const r={[s.WHITE_CHESS]:"linear-gradient(to right, rgba(255, 255, 255, 0.92), rgba(255, 255, 255, 0.92)),linear-gradient(to right, black 50%, white 50%),linear-gradient(to bottom, black 50%, white 50%)",[s.BLACK_CHESS]:"linear-gradient(to right, rgba(255, 255, 255, 0.2), rgba(255, 255, 255, 0.2)),linear-gradient(to right, #0e0e10 50%, #2f3234 50%),linear-gradient(to bottom, #0e0e10 50%, #2f3234 50%)"}},78772:function(e,t,o){o.d(t,{s:function(){return q}});var n=o(65988),s=o(73202),i=o(92809),r=o(9626),a=o(33800),l=o(30773),c=o(67294),d=o(49899),p=o(77729),u=o(65989),h=o(56924),y=o(89361),m=o(92763),f=o(60408),b=o(31768),g=o(22404),I=o(85893);const v=({fontFamily:e,placeholder:t,onChange:o,callbackArgs:s,handleOpenGoogleFonts:i,projectUsedFonts:r})=>{const a=(0,c.createRef)(),{0:l,1:d}=(0,c.useState)(""),{0:v,1:j}=(0,c.useState)([]),{0:N,1:x}=(0,c.useState)(!1);(0,c.useEffect)((()=>{N&&(S(),x(!1))}),[N]),(0,c.useEffect)((()=>{j((e=>[...new Set([...e,...Object.values(r).filter((e=>"system"!==e.type)).map((e=>e.name))].sort(((e,t)=>e<t?-1:1)))]))}),[r]),(0,c.useEffect)((()=>{const e=[...new Set([...h.Lx,...h.j1,...Object.values(r).map((e=>e.name))])].sort().filter((e=>e!==h.xK));j(e)}),[]),(0,c.useEffect)((()=>{let t=e&&e.replace(/['"]+/g,"").split(",")[0];e===h.xK&&(t=g.ks),d(t)}),[e]);const S=()=>{let t=l;if(t===e)return;if(""===t||!t)return o("",s),void d("");let n=!1;t===g.ks?(t=h.xK,n=!0):v.forEach((e=>{var o;n||e.toLowerCase()!==(null===(o=t)||void 0===o?void 0:o.toLowerCase())||(n=!0)})),n?o(t,s):(o("",s),d(""))};return(0,I.jsxs)("div",{className:n.default.dynamic([["920110473",[u.Pt.LIGHT_02,u.N_.HALF_UNIT,u.N_.UNIT]]])+" font-dropdown-wrapper",children:[(0,I.jsx)(b.P,{size:"long",style:"label",value:l,placeholder:t===h.xK?g.ks:t,ref:a,options:v,onSelectValue:e=>{d(e)},onChange:e=>{const t=e.currentTarget.value;d(t)},onKeyDown:e=>{var t;e.keyCode===p.sd.KEY_CODE.ESC&&(S(),null!==a&&void 0!==a&&a.current&&(null===(t=a.current)||void 0===t||t.blur()))},onBlur:()=>x(!0),fixedBottomOption:(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)("div",{className:n.default.dynamic([["920110473",[u.Pt.LIGHT_02,u.N_.HALF_UNIT,u.N_.UNIT]]])+" separator"}),(0,I.jsxs)(y.z,{style:"transparent",onClick:i,colorScheme:"neutral",cornerStyle:"sharp",children:[(0,I.jsx)(m.J,{type:"add",size:8}),(0,I.jsx)("span",{className:n.default.dynamic([["920110473",[u.Pt.LIGHT_02,u.N_.HALF_UNIT,u.N_.UNIT]]]),children:" More Google fonts "})]})]})}),e===h.xK?(0,I.jsx)("div",{className:n.default.dynamic([["920110473",[u.Pt.LIGHT_02,u.N_.HALF_UNIT,u.N_.UNIT]]])+" info-icon",children:(0,I.jsx)(f.s,{tooltipName:"Font",tooltipContent:(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)("p",{className:n.default.dynamic([["920110473",[u.Pt.LIGHT_02,u.N_.HALF_UNIT,u.N_.UNIT]]]),children:"Uses the system font of the operating system."}),(0,I.jsx)("p",{className:n.default.dynamic([["920110473",[u.Pt.LIGHT_02,u.N_.HALF_UNIT,u.N_.UNIT]]]),children:"Those fonts offer the great advantage of speed and performance, and a reduction of your web page size."}),(0,I.jsx)("p",{className:n.default.dynamic([["920110473",[u.Pt.LIGHT_02,u.N_.HALF_UNIT,u.N_.UNIT]]]),children:" And as it\u2019s the system font, it\u2019s guaranteed to look great."})]})})}):null,(0,I.jsx)(n.default,{id:"920110473",dynamic:[u.Pt.LIGHT_02,u.N_.HALF_UNIT,u.N_.UNIT],children:[".font-dropdown-wrapper.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}",`.separator.__jsx-style-dynamic-selector{content:'';background:${u.Pt.LIGHT_02};height:1px;margin-top:${u.N_.HALF_UNIT};}`,`.info-icon.__jsx-style-dynamic-selector{padding-left:${u.N_.UNIT};}`]})]})};var j=o(76883),N=o(61030),x=o(10913),S=o(84073),w=o(16588),O=o(14554);const T=["Popularity","Name","Styles"];class _ extends c.Component{render(){const{inPreview:e,setInPreview:t,showFontPreview:o,handleScroll:s,isFontAlreadyImported:i,handleSearch:r,handleSortChange:a,sortTerm:l,searchTerm:c,variants:d,selectedFont:p,importGoogleFont:u,searchResults:h}=this.props;return(0,I.jsxs)("div",{className:`jsx-${S.ex.__hash} google-fonts-modal `+(e?"in-preview":""),children:[e?(0,I.jsxs)(I.Fragment,{children:[(0,I.jsxs)("div",{className:`jsx-${S.ex.__hash} modal-header`,children:[(0,I.jsxs)("div",{className:`jsx-${S.ex.__hash} btns-in-preview`,children:[(0,I.jsxs)(y.z,{style:"outline",colorScheme:"neutral",onClick:()=>t(!1),children:[(0,I.jsx)(m.J,{type:"arrow-left",size:12}),(0,I.jsx)("span",{className:`jsx-${S.ex.__hash}`,children:"Back to list"})]}),(0,I.jsxs)(y.z,{style:"solid",dataAttrs:i(p)?{"data-tooltip-name":"This font is already imported."}:void 0,isDisabled:i(p),onClick:()=>u(p),children:[(0,I.jsx)(m.J,{type:"add",size:12})," ",(0,I.jsx)("span",{className:`jsx-${S.ex.__hash}`,children:"Import"})]})]}),(0,I.jsx)("h1",{className:`jsx-${S.ex.__hash}`,children:p})]}),(0,I.jsx)("div",{className:`jsx-${S.ex.__hash} google-font-variants-list`,children:d.map(((e,t)=>(0,I.jsxs)("span",{className:`jsx-${S.ex.__hash} google-fonts-variant`,children:[(0,I.jsx)("div",{className:`jsx-${S.ex.__hash} weight-name`,children:e.label}),(0,I.jsx)("div",{style:{fontFamily:`${p}`,fontWeight:Number(`${e.value}`),fontStyle:e.italic?"italic":"normal"},className:`jsx-${S.ex.__hash} text-sample`,children:"The quick brown fox, jumps over the lazy dog."})]},t)))})]}):(0,I.jsxs)(I.Fragment,{children:[(0,I.jsxs)("div",{className:`jsx-${S.ex.__hash} modal-header`,children:[(0,I.jsx)("span",{className:`jsx-${S.ex.__hash} search-input`,children:(0,I.jsx)(x.M,{id:"google-fonts-search",onType:r,initialValue:c})}),(0,I.jsxs)("div",{className:`jsx-${S.ex.__hash} select-section`,children:[(0,I.jsx)("span",{className:`jsx-${S.ex.__hash}`,children:"Sort by "}),(0,I.jsx)(w.P,{dropdownAnchor:"right",value:l,options:T,onChange:a})]})]}),(0,I.jsx)("div",{onScroll:s,className:`jsx-${S.ex.__hash} google-fonts-list`,children:h.length?h.map(((e,t)=>(0,I.jsxs)("span",{className:`jsx-${S.ex.__hash} google-fonts-item`,children:[(0,I.jsxs)("div",{className:`jsx-${S.ex.__hash} font-name`,children:[e.name," - ",e.weights.length," ",1===e.weights.length?"style":"styles"]}),(0,I.jsxs)("div",{className:`jsx-${S.ex.__hash} add-section`,children:[(0,I.jsxs)(y.z,{style:"outline",colorScheme:"neutral",size:"small",dataAttrs:{"data-font-name":e.name},onClick:o,children:[(0,I.jsx)(m.J,{type:"preview",size:16}),(0,I.jsx)("span",{className:`jsx-${S.ex.__hash}`,children:"Preview"})]}),(0,I.jsxs)(y.z,{dataAttrs:i(e.name)?{"data-tooltip-name":"This font is already imported."}:void 0,style:"solid",size:"small",isDisabled:i(e.name),onClick:()=>u(e.name),children:[(0,I.jsx)(m.J,{type:"add",size:12})," ",(0,I.jsx)("span",{className:`jsx-${S.ex.__hash}`,children:"Import"})]})]})]},t))):(0,I.jsxs)("div",{className:`jsx-${S.ex.__hash} no-result-container`,children:[(0,I.jsx)(O.Q,{type:"no-results"}),(0,I.jsxs)("div",{className:`jsx-${S.ex.__hash} error-message`,children:["No results found. ",(0,I.jsx)("br",{className:`jsx-${S.ex.__hash}`}),"Try again using a different keyword."]})]})})]}),(0,I.jsx)(n.default,{id:S.ex.__hash,children:S.ex})]})}}var E,D,F,C,A;function k(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function P(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?k(Object(o),!0).forEach((function(t){(0,i.Z)(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):k(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}let U=(E=(0,j.f3)("fontsInProjectFlow"),D=(0,j.f3)("projectDoc"),F=class extends c.Component{constructor(...e){super(...e),(0,s.Z)(this,"fontsInProjectFlow",C,this),(0,s.Z)(this,"projectDoc",A,this),(0,i.Z)(this,"currentPage",1),(0,i.Z)(this,"nrOfPages",Math.ceil(this.fontsInProjectFlow.allGoogleFonts.length/24)),(0,i.Z)(this,"state",{allGoogleFonts:[...this.fontsInProjectFlow.allGoogleFonts.map(((e,t)=>({name:e.family,weights:this.fontsInProjectFlow.getFontAvailableWeights(e.family),popularity:t})))],searchResults:[],searchTerm:"",sortTerm:T[0],inPreview:!1,selectedFont:"",variants:[]}),(0,i.Z)(this,"setInPreview",(e=>{this.setState({inPreview:e})})),(0,i.Z)(this,"handleScroll",(e=>{const t=e.target;if(t.scrollHeight-t.scrollTop===t.clientHeight){if(this.currentPage===this.nrOfPages)return;const e=this.getPaginatedGoogleFonts(this.currentPage+1),t=[...this.state.searchResults,...e];this.currentPage++,this.setState({searchResults:t})}})),(0,i.Z)(this,"handleSortChange",(e=>{switch(e){case"Name":const t=this.state.allGoogleFonts.sort(((e,t)=>e.name.localeCompare(t.name)));this.setState({sortTerm:e,allGoogleFonts:t,searchResults:this.getPaginatedGoogleFonts(1)});break;case"Styles":const o=this.state.allGoogleFonts.sort(((e,t)=>e.weights.length-t.weights.length)).reverse();this.setState({sortTerm:e,allGoogleFonts:o,searchResults:this.getPaginatedGoogleFonts(1)});break;case"Popularity":const n=this.state.allGoogleFonts.sort(((e,t)=>e.popularity-t.popularity)).reverse();this.setState({sortTerm:e,allGoogleFonts:n,searchResults:this.getPaginatedGoogleFonts(1)})}this.currentPage=1})),(0,i.Z)(this,"handleSearch",(e=>{if(e.length<3)return this.currentPage=1,void this.setState({searchTerm:e,searchResults:this.getPaginatedGoogleFonts(1)});this.currentPage=this.nrOfPages;const t=this.searchGoogleFonts(e);this.setState({searchTerm:e,searchResults:t})})),(0,i.Z)(this,"showFontPreview",(e=>{const t=e.currentTarget.dataset.fontName,o=this.fontsInProjectFlow.getFontAvailableWeights(t).map((e=>Object.values(g.dS).find((t=>t.label===e))));Object.keys(this.fontsInProjectFlow.fontsAppendedToHead||{}).find((e=>e===t))||this.fontsInProjectFlow.appendGoogleFontLinkToHead(t),this.setState({inPreview:!0,selectedFont:t,variants:o})})),(0,i.Z)(this,"importGoogleFont",(e=>{const{onDismiss:t,onSubmit:o}=this.props;if(this.fontsInProjectFlow.isFontImported(e))return;const n=this.fontsInProjectFlow.importGoogleFont({fontName:e});o&&o(n),t&&t()})),(0,i.Z)(this,"getPaginatedGoogleFonts",((e,t=24)=>this.state.allGoogleFonts.slice((e-1)*t,e*t))),(0,i.Z)(this,"searchGoogleFonts",(e=>this.state.allGoogleFonts.filter((t=>t.name.toLocaleLowerCase().includes(e.toLocaleLowerCase())))))}componentDidMount(){const e=[...this.getPaginatedGoogleFonts(1)];this.setState({searchResults:e})}render(){return(0,I.jsx)(_,P(P({},this.state),{},{setInPreview:this.setInPreview,showFontPreview:this.showFontPreview,handleScroll:this.handleScroll,isFontAlreadyImported:this.fontsInProjectFlow.isFontImported,handleSearch:this.handleSearch,handleSortChange:this.handleSortChange,importGoogleFont:this.importGoogleFont}))}},C=(0,l.Z)(F.prototype,"fontsInProjectFlow",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),A=(0,l.Z)(F.prototype,"projectDoc",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),F);var L,Z,R,M,H,$,B,G;function z(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function W(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?z(Object(o),!0).forEach((function(t){(0,i.Z)(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):z(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}let V=(L=(0,j.f3)("modalManagementFlow"),Z=(0,j.f3)("projectDoc"),R=(0,j.f3)("fontsInProjectFlow"),G=new WeakMap,M=class extends c.Component{constructor(...e){super(...e),(0,s.Z)(this,"modalManagementFlow",H,this),(0,s.Z)(this,"projectDoc",$,this),(0,s.Z)(this,"fontsInProjectFlow",B,this),(0,i.Z)(this,"state",{projectUsedFonts:{}}),G.set(this,{writable:!0,value:[]}),(0,i.Z)(this,"subscribeForImportedFonts",(()=>{const e=(0,d.Ys)(this.projectDoc,["fonts/byId/*"],((e,t)=>{t.forEach((e=>{const{op:t,value:o,pathArray:n}=e;"add"===t&&"fonts"===n[0]&&this.setState({projectUsedFonts:W(W({},this.state.projectUsedFonts),{[o.id]:o})})}))}),"FontFamilyDropdownWrapper");(0,a.Z)(this,G).push((()=>e.dispose()))})),(0,i.Z)(this,"handleOpenGoogleFontsModal",(()=>{const e=N.d.createCustomModal({Component:U,onSubmit:e=>{this.props.onFontSelect(e,this.props.callbackArgs)}});this.modalManagementFlow.showModal(e)})),(0,i.Z)(this,"handleFontChange",((e,t)=>{this.props.importGoogleFontsForPreview&&this.fontsInProjectFlow.importGoogleFontForPreview(e),!this.projectDoc.fonts.getFontIdByName(e)&&h.j1.includes(e)&&this.fontsInProjectFlow.addFont({fontName:e}),this.props.onFontSelect(e,t)}))}componentDidMount(){this.setState({projectUsedFonts:this.projectDoc.fonts.byId||{}}),this.subscribeForImportedFonts()}componentWillUnmount(){(0,a.Z)(this,G).forEach((e=>e())),(0,r.Z)(this,G,[])}render(){return(0,I.jsx)(v,{fontFamily:this.props.fontFamily,placeholder:this.props.placeholder,callbackArgs:this.props.callbackArgs,onChange:this.handleFontChange,handleOpenGoogleFonts:this.handleOpenGoogleFontsModal,projectUsedFonts:this.state.projectUsedFonts})}},H=(0,l.Z)(M.prototype,"modalManagementFlow",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),$=(0,l.Z)(M.prototype,"projectDoc",[Z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),B=(0,l.Z)(M.prototype,"fontsInProjectFlow",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),M);var K=o(81665),J=o(55193),X=o(86451),Y=o(49657);const q=({styles:e,inheritedStyles:t,defaultStyles:o,classesStyles:s,onTextTransformChange:i,availableWeights:r,onFontSizeChange:a,onFontFamilyDropdownChange:l,onFontWeightChange:c,onLineHeightChange:d,onLetterSpacingChange:p,onTextDecorationChange:h,onInputBlur:y,selectedNodes:f})=>{var b,v,j,N;const{fontFamily:x,fontWeight:S,fontSize:w,fontStyle:O,lineHeight:T,letterSpacing:_,textTransform:E,textDecoration:D}=e,F=e=>{if(!e)return"";if("mixed"===e.fontWeight)return"mixed";if(null!==e&&void 0!==e&&e.fontWeight){var t;if("italic"===O){const t=g.dS[`${null===e||void 0===e?void 0:e.fontWeight}italic`];if(t)return t.label}return"bold"===(null===e||void 0===e?void 0:e.fontWeight)?"700 - Bold":null===(t=g.dS[`${null===e||void 0===e?void 0:e.fontWeight}${null!==e&&void 0!==e&&e.fontStyle?null===e||void 0===e?void 0:e.fontStyle:""}`])||void 0===t?void 0:t.label}return r.includes(C)?C:""},C="mixed"===O?"mixed":null===(b=g.dS[`${S}${O||""}`])||void 0===b?void 0:b.label;return(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(V,{onFontSelect:l,fontFamily:x||(null===t||void 0===t?void 0:t.fontFamily),placeholder:(null===s||void 0===s?void 0:s.fontFamily)||(null===o||void 0===o?void 0:o.fontFamily),callbackArgs:{name:"baseFontFamily"},importGoogleFontsForPreview:!0}),(0,I.jsxs)("div",{className:n.default.dynamic([["3294335468",[u.Pt.LIGHT_02,u.n_.DEFAULT]]])+" text-style-item-wrapper",children:[(0,I.jsx)("div",{style:{height:"24px"},className:n.default.dynamic([["3294335468",[u.Pt.LIGHT_02,u.n_.DEFAULT]]]),children:(0,I.jsx)(X.R,{selectedNodes:f,property:"fontWeight",value:C||F(e)||F(t),placeholder:F(s)||F(o)||"400 - Regular",inputProps:{size:"long"},onSave:e=>{const{value:t}=e;if(!t)return void c("",!1);const o=Object.values(g.dS).find((e=>e.label===t));o&&c(o.value,o.italic)},options:r})}),(0,I.jsx)(Y.O,{value:w||(null===t||void 0===t?void 0:t.fontSize),onBlur:y,onChange:a,placeholder:(null===s||void 0===s?void 0:s.fontSize)||(null===o||void 0===o?void 0:o.fontSize)||"auto"})]}),(0,I.jsxs)("div",{style:{marginTop:`${u.N_.UNIT}`},className:n.default.dynamic([["3294335468",[u.Pt.LIGHT_02,u.n_.DEFAULT]]])+" text-style-item-wrapper",children:[(0,I.jsxs)("div",{className:n.default.dynamic([["3294335468",[u.Pt.LIGHT_02,u.n_.DEFAULT]]])+" icon-unit-wrapper",children:[(0,I.jsx)(m.J,{type:"typography/line-height"}),(0,I.jsx)(Y.O,{onChange:d,onBlur:y,value:T||(null===t||void 0===t?void 0:t.lineHeight),placeholder:(null===s||void 0===s?void 0:s.lineHeight)||(null===o||void 0===o?void 0:o.lineHeight)||"auto"})]}),(0,I.jsxs)("div",{className:n.default.dynamic([["3294335468",[u.Pt.LIGHT_02,u.n_.DEFAULT]]])+" icon-unit-wrapper",children:[(0,I.jsx)(m.J,{type:"typography/letter-spacing"}),(0,I.jsx)(Y.O,{onChange:p,onBlur:y,type:"letterSpacing",value:_||(null===t||void 0===t?void 0:t.letterSpacing),placeholder:(null===s||void 0===s?void 0:s.letterSpacing)||(null===o||void 0===o?void 0:o.letterSpacing)||"auto"})]})]}),(0,I.jsxs)("div",{className:n.default.dynamic([["3294335468",[u.Pt.LIGHT_02,u.n_.DEFAULT]]])+" text-style-item-wrapper",children:[(0,I.jsx)("div",{className:n.default.dynamic([["3294335468",[u.Pt.LIGHT_02,u.n_.DEFAULT]]])+" button_groups_wrapper",children:(0,I.jsxs)(K.h,{cornerStyle:"round",behavior:"toggles",selectedButton:E||(null===t||void 0===t?void 0:t.textTransform)||(null===s||void 0===s?void 0:s.textTransform)||(null===o||void 0===o?void 0:o.textTransform),onSelectionChange:i,children:[(0,I.jsx)(J.C,{actionName:"uppercase",style:"transparent",size:"small",children:"AA"}),(0,I.jsx)(J.C,{actionName:"lowercase",style:"transparent",size:"small",children:"aa"}),(0,I.jsx)(J.C,{actionName:"capitalize",style:"transparent",size:"small",children:"Aa"})]})}),(0,I.jsx)("div",{className:n.default.dynamic([["3294335468",[u.Pt.LIGHT_02,u.n_.DEFAULT]]])+" button_groups_wrapper",children:(0,I.jsxs)(K.h,{cornerStyle:"round",behavior:"toggles",selectedButton:D?D.split(" "):(null===t||void 0===t||null===(v=t.textDecoration)||void 0===v?void 0:v.split(" "))||(null===s||void 0===s||null===(j=s.textDecoration)||void 0===j?void 0:j.split(" "))||(null===o||void 0===o||null===(N=o.textDecoration)||void 0===N?void 0:N.split(" ")),onSelectionChange:h,children:[(0,I.jsx)(J.C,{actionName:"underline",style:"transparent",size:"small",children:(0,I.jsx)(m.J,{type:"underline",size:12})}),(0,I.jsx)(J.C,{actionName:"line-through",style:"transparent",size:"small",children:(0,I.jsx)(m.J,{type:"line-through",size:12})})]})})]}),(0,I.jsx)(n.default,{id:"3294335468",dynamic:[u.Pt.LIGHT_02,u.n_.DEFAULT],children:[".text-style-item-wrapper.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;width:100%;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}",`.button_groups_wrapper.__jsx-style-dynamic-selector{border:1px solid ${u.Pt.LIGHT_02};border-radius:${u.n_.DEFAULT};}`,".icon-unit-wrapper.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}"]})]})}},44787:function(e,t,o){o.d(t,{xE:function(){return n},m5:function(){return s},lH:function(){return i},qz:function(){return r},PX:function(){return a},Zu:function(){return l}});const n="Can't add collaborators. The maximum number allowed in the same time on a project has been reached.",s="Page name cannot be empty.",i="Each page should have a unique name to ensure your application works correctly.",r="Each page should have a unique URL to ensure your application works correctly.",a="This URL is reserved for the home page to ensure your application works correctly.",l="Cannot delete page URL, because the one that will be generated in its place is already in use."},68124:function(e,t,o){o.d(t,{aM:function(){return n},Bk:function(){return s},m7:function(){return i},Or:function(){return r}});const n={GENERAL_PAGE_NAME:"GENERAL_PAGE_NAME",GENERAL_URL:"GENERAL_URL",SEO_TITLE:"SEO_TITLE",SEO_DESCRIPTION:"SEO_DESCRIPTION",SOCIAL_TITLE:"SOCIAL_TITLE",SOCIAL_DESCRIPTION:"SOCIAL_DESCRIPTION",SOCIAL_IMAGE:"SOCIAL_IMAGE"},s=1200,i={controlValues:{x:.5,y:.675,scale:1},stateValues:{contentBox:{width:0,height:0,top:0,left:0,bottom:0,right:0},stageBox:{width:0,height:0,top:0,left:0,bottom:0,right:0},translateXValue:0,translateYValue:0,logicalValues:{minX:0,maxX:0,minY:0,maxY:0},reverseScale:1}},r=["margin","padding","border","width","height","self","flex","position","top","left","right","bottom"]},47361:function(e,t,o){o.d(t,{n:function(){return I}});var n,s,i,r=o(73202),a=o(92809),l=o(30773),c=o(76883),d=o(49899),p=o(70705),u=o(72045),h=o(26903),y=o(63639),m=o(33381),f=o(77736);function b(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function g(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?b(Object(o),!0).forEach((function(t){(0,a.Z)(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):b(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}let I=(n=(0,c.f3)("projectUIState"),s=class e{constructor(e={}){(0,a.Z)(this,d.t1,void 0),(0,a.Z)(this,"title",void 0),(0,a.Z)(this,"id",void 0),(0,a.Z)(this,"pos",void 0),(0,a.Z)(this,"rootNodeId",void 0),(0,a.Z)(this,"instantiatedByNodes",{}),(0,a.Z)(this,"usedComponents",{}),(0,a.Z)(this,"stateDefinitions",{}),(0,a.Z)(this,"propDefinitions",{}),(0,a.Z)(this,"sectionIds",{}),(0,a.Z)(this,"styleSetDefinitions",{}),(0,a.Z)(this,"checkerRenderStyle",void 0),(0,a.Z)(this,"slots",{}),(0,r.Z)(this,"projectUIState",i,this);const{title:t="",id:o,rootNodeId:n,pos:s,instantiatedByNodes:l,usedComponents:c,stateDefinitions:p,propDefinitions:h,sectionIds:y,styleSetDefinitions:m,checkerRenderStyle:b,slots:g}=e;this.title=t,this.id=null!==o&&void 0!==o?o:(0,u.Z)(),this.rootNodeId=n,this.pos=null!==s&&void 0!==s?s:"0",this.instantiatedByNodes=l||{},this.usedComponents=c||{},this.stateDefinitions=p||{},this.propDefinitions=h||{},this.sectionIds=y||{},this.styleSetDefinitions=m||{},this.checkerRenderStyle=b||f.wY.WHITE_CHESS,this.slots=g}create(t){const o=(0,u.Z)();return new e(g(g({},t),{},{id:o,instantiatedByNodes:{},usedComponents:{},stateDefinitions:{},propDefinitions:{},sectionIds:{},styleSetDefinitions:{},checkerRenderStyle:f.wY.WHITE_CHESS,slots:{}}))}changeRenderStyle(e){this.checkerRenderStyle=e.newRenderStyle}createPropDefinition(e){const t=Object.values(this.propDefinitions).map((e=>e.name)),o="func"===e.type?e.name:(0,p.Zu)(t,e.name),n=g(g({},e),{},{id:e.id||(0,u.Z)(),name:o});return this.propDefinitions[n.id]=n,n}updatePropDefinition(e,t){const o=this.propDefinitions[e];if(!o)throw new Error("Prop definition was not found");t.name&&this.propDefinitions[e].name!==t.name&&(t.name=this.getUniquePropDefinitionName(t.name)),this.propDefinitions[e]=g(g({},o),t)}createStateDefinition(e){const t=Object.values(this.stateDefinitions).map((e=>e.name)),o=(0,p.Zu)(t,e.name),n=g(g({},e),{},{id:(0,u.Z)(),name:o,value:e.defaultValue});return this.stateDefinitions[n.id]=n,n}deleteStateDefinition(e){this.stateDefinitions[e]={},delete this.stateDefinitions[e]}updateStateDefinition(e,t){const o=this.stateDefinitions[e];if(!o)throw new Error("State definition was not found");t.name&&this.stateDefinitions[e].name!==t.name&&(t.name=this.getUniqueStateDefinitionName(t.name)),this.stateDefinitions[e]=g(g({},o),t)}getInlineConditionalStyleMapForClass(e,t){const o=this.styleSetDefinitions[t];if(o&&o.referencedStyles)return(0,m.YR)(o.referencedStyles,e)}getUniqueStyleSetName(e){const t=y.Q,o=Object.keys(this.instantiatedByNodes||{}).map((t=>{var o,n;return null===(o=e.nodes.byId[t])||void 0===o||null===(n=o.attrs[y.Q])||void 0===n?void 0:n.content})).filter((e=>e)),n=[...Object.keys(this.styleSetDefinitions||{}),...o];if(-1===n.indexOf(t))return t;let s=1;for(;-1!==n.indexOf(`${t}${s}`);)s+=1;return`${t}${s}`}getInlineMatchedStyleSetIdsForClass(e,t){var o;const n=(null===(o=this.styleSetDefinitions[t])||void 0===o?void 0:o.referencedStyles)||{};return(0,m.uY)(n,e)}initStyleSetForClass(e){this.styleSetDefinitions&&Object.keys(this.styleSetDefinitions).length||(this.styleSetDefinitions={}),this.styleSetDefinitions[e]||(this.styleSetDefinitions[e]={usedByInstances:{},styles:{},referencedStyles:{}})}removePropDefinitionsForNodes(e){Object.keys(this.propDefinitions).filter((t=>{const o=this.propDefinitions[t];if(!Object.keys(o.locations).length)return!1;if(Object.keys(o.locations).every((t=>e.indexOf(t)>-1)))return!0;for(const n of e)o.locations[n]&&delete o.locations[n];return!1})).forEach((e=>delete this.propDefinitions[e]))}addLocationToPropDefinition(e,t,o){const n=this.propDefinitions[e],s=n.locations[t],i=(0,h.m)(o);s?n.locations[t][i]=o:n.locations[t]={[i]:o}}removeLocationFromPropDefinition(e,t,o,n){var s;const i=this.propDefinitions[e],r=(0,h.m)(o);(null===(s=i.locations[t])||void 0===s?void 0:s[r])&&(1===Object.keys(i.locations[t]).length?1===Object.keys(i.locations).length?n?delete i.locations[t]:delete this.propDefinitions[e]:delete i.locations[t]:delete i.locations[t][r])}removePropDefinitionFromComp(e){delete this.propDefinitions[e]}getUniquePropDefinitionName(e){const t=Object.values(this.propDefinitions).map((e=>(null===e||void 0===e?void 0:e.name)||""));return(0,p.Zu)(t,e)}getUniqueStateDefinitionName(e){const t=Object.values(this.stateDefinitions).map((e=>(null===e||void 0===e?void 0:e.name)||""));return(0,p.Zu)(t,e)}mapStyleSetDefinitionsJsonToObject(e){return Object.keys(e||{}).reduce(((t,o)=>(t[o]=this.mapStyleSetContentJsonToObject(e[o]),t)),{})}mapStyleSetContentJsonToObject(e){return{styles:(0,m.bb)(e.styles),referencedStyles:(0,m.o0)(e.referencedStyles),usedByInstances:e.usedByInstances}}clone(){return new e({title:this.title,rootNodeId:this.rootNodeId,instantiatedByNodes:{},usedComponents:JSON.parse(JSON.stringify(this.usedComponents)),stateDefinitions:JSON.parse(JSON.stringify(this.stateDefinitions)),propDefinitions:JSON.parse(JSON.stringify(this.propDefinitions)),sectionIds:JSON.parse(JSON.stringify(this.sectionIds))})}fromJSON(e){const{title:t,id:o,rootNodeId:n,instantiatedByNodes:s,sectionIds:i,usedComponents:r,pos:a,checkerRenderStyle:l,slots:c}=e,{stateDefinitions:d,propDefinitions:p,styleSetDefinitions:u}=e;return this.title=t,this.id=o,this.pos=a,this.rootNodeId=n,this.instantiatedByNodes=s,this.sectionIds=i||{},this.usedComponents=r,this.propDefinitions=p,this.stateDefinitions=d,this.styleSetDefinitions=this.mapStyleSetDefinitionsJsonToObject(u),this.checkerRenderStyle=l,this.slots=c,this}toJSON(){return{title:this.title,id:this.id,pos:this.pos,rootNodeId:this.rootNodeId,instantiatedByNodes:this.instantiatedByNodes,sectionIds:this.sectionIds,usedComponents:this.usedComponents,stateDefinitions:this.stateDefinitions,propDefinitions:this.propDefinitions,styleSetDefinitions:this.styleSetDefinitions,checkerRenderStyle:this.checkerRenderStyle,slots:this.slots}}applyPatch(e){const{op:t,pathArray:o,value:n}=e;switch(o[0]){case"title":return void(this.title=n);case"pos":return void(this.pos=n);case"rootNodeId":return void(this.rootNodeId=n);case"instantiatedByNodes":if(1===o.length)return void(this.instantiatedByNodes=n);if(2===o.length){if("add"===t||"replace"===t)return void(this.instantiatedByNodes[o[1]]=n);"remove"===t&&delete this.instantiatedByNodes[o[1]]}return;case"usedComponents":if(1===o.length)return void(this.usedComponents=n);if(2===o.length){if("add"===t||"replace"===t)return void(this.usedComponents[o[1]]=n);"remove"===t&&delete this.usedComponents[o[1]]}return;case"stateDefinitions":if(1===o.length)return void(this.stateDefinitions=n);if(2===o.length){if("add"===t||"replace"===t)return void(this.stateDefinitions[o[1]]=n);"remove"===t&&(this.stateDefinitions[o[1]]={},delete this.stateDefinitions[o[1]])}return;case"propDefinitions":return void this.processPropDefinitionPatch(e);case"slots":if(1===o.length)return"add"===t||"replace"===t?void(this.slots=n):void delete this.slots;if(2===o.length){if(this.slots||(this.slots={}),"add"===t||"replace"===t)return void(this.slots[o[1]]=n);if("remove"===t)return void delete this.slots[o[1]]}return;case"sectionIds":if(1===o.length)return void(this.sectionIds=n);if(2===o.length){if("add"===t||"replace"===t)return void(this.sectionIds[o[1]]=n);"remove"===t&&delete this.sectionIds[o[1]]}return;case"styleSetDefinitions":return void this.processStyleSetDefinitionPatch(e);default:return}}processStyleSetDefinitionPatch(e){const{pathArray:t,op:o,value:n}=e;if(1===t.length){if("add"===o||"replace"===o)return void(this.styleSetDefinitions=this.mapStyleSetDefinitionsJsonToObject(n));if("remove"===o)return void(this.styleSetDefinitions={})}const s=t[1];if(2===t.length){if("add"===o||"replace"===o)return void(this.styleSetDefinitions[s]=this.mapStyleSetContentJsonToObject(n));if("remove"===o)return void delete this.styleSetDefinitions[s]}if(3===t.length){if("styles"===t[2]){if("add"===o||"replace"===o)return void(this.styleSetDefinitions[s].styles=(0,m.bb)(n));"remove"===o&&(this.styleSetDefinitions[s].styles={})}if("usedByInstances"===t[2])return void(this.styleSetDefinitions[s].usedByInstances=n||{})}if(4===t.length&&"usedByInstances"===t[2]){if("add"===o||"replace"===o)return void(this.styleSetDefinitions[s].usedByInstances[t[3]]=n);if("remove"===o)return void delete this.styleSetDefinitions[s].usedByInstances[t[3]]}if(4===t.length&&"styles"===t[2]){if("add"===o||"replace"===o)return void(this.styleSetDefinitions[s].styles[t[3]]=(0,m.KC)(n));if("remove"===o)return void delete this.styleSetDefinitions[s].styles[t[3]]}if("referencedStyles"===t[2]){if(3===t.length){if("add"===o||"replace"===o)return void(this.styleSetDefinitions[s].referencedStyles=(0,m.o0)(n));if("remove"===o)return void(this.styleSetDefinitions[s].referencedStyles={})}if(4===t.length){if("remove"===o){const e=this.styleSetDefinitions[s].referencedStyles;return delete e[t[1]],void(this.styleSetDefinitions[s].referencedStyles=g({},e))}const e=(0,m.LA)(n);return void(e&&(this.styleSetDefinitions[s].referencedStyles[t[3]]=e))}if(7===t.length&&"styles"===t[5]){const{type:e,content:i}=this.styleSetDefinitions[s].referencedStyles[t[3]];if(("replace"===o||"add"===o)&&"style-map"===e&&"inlined"===i.mapType)return void(i.styles[t[6]]=(0,m.KC)(n))}}}processPropDefinitionPatch(e){const{pathArray:t,op:o,value:n}=e;if(1!==t.length){if(2===t.length){if("add"===o||"replace"===o)return void(this.propDefinitions[t[1]]=n);if("remove"===o)return void delete this.propDefinitions[t[1]]}if(4===t.length&&"locations"===t[2]){if("add"===o||"replace"===o)return void(this.propDefinitions[t[1]].locations[t[3]]=n);if("remove"===o)return void delete this.propDefinitions[t[1]].locations[t[3]]}if(5===t.length&&"locations"===t[2]){if("add"===o||"replace"===o)return void(this.propDefinitions[t[1]].locations[t[3]][t[4]]=n);if("remove"===o)return void delete this.propDefinitions[t[1]].locations[t[3]][t[4]]}}else this.propDefinitions=n}},i=(0,l.Z)(s.prototype,"projectUIState",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),s)},26903:function(e,t,o){o.d(t,{m:function(){return n},B:function(){return s}});const n=e=>e.base+(e.sufix||""),s=e=>({[n(e)]:e})},87146:function(e,t,o){o.d(t,{ST:function(){return m},$e:function(){return f},ZC:function(){return b}});var n=o(7446),s=o(10440),i=o(72045),r=o(246);const a={id:(0,i.Z)(),name:"Primary",section:"colors",position:0},l={id:(0,i.Z)(),name:"Gray",section:"colors",position:Number.MAX_SAFE_INTEGER},c={id:(0,i.Z)(),name:"Success",section:"colors",position:2*Number.MAX_SAFE_INTEGER},d={id:(0,i.Z)(),name:"Danger",section:"colors",position:3*Number.MAX_SAFE_INTEGER},p={id:(0,i.Z)(),name:"Text Styles",section:"typography",position:0},u={id:(0,i.Z)(),name:"Size",section:"layout",position:0},h={id:(0,i.Z)(),name:"Space",section:"layout",position:Number.MAX_SAFE_INTEGER},y={id:(0,i.Z)(),name:"Radius",section:"layout",position:2*Number.MAX_SAFE_INTEGER},m=[a,l,c,d,p,u,h,y],f=[{id:(0,i.Z)(),name:"Content",identifier:(0,s.Ky)("Content"),categoryId:p.id,type:n.i.TEXT_STYLE,position:0,content:{fontFamily:new r.F({content:"Inter"}),fontWeight:new r.F({content:"400"}),fontSize:new r.F({content:"16px"}),lineHeight:new r.F({content:"1.15"}),textTransform:new r.F({content:"none"}),textDecoration:new r.F({content:"none"})},role:"default",usedInNodes:{}},{id:(0,i.Z)(),name:"Heading",identifier:(0,s.Ky)("Heading"),categoryId:p.id,type:n.i.TEXT_STYLE,position:Number.MAX_SAFE_INTEGER,content:{fontFamily:new r.F({content:"Inter"}),fontWeight:new r.F({content:"700"}),fontSize:new r.F({content:"32px"}),lineHeight:new r.F({content:"1.15"}),textTransform:new r.F({content:"none"}),textDecoration:new r.F({content:"none"})},usedInNodes:{}}],b=[{id:(0,i.Z)(),name:"100",value:"#003EB3",type:n.i.COLOR,categoryId:a.id,position:0,usedInNodes:{}},{id:(0,i.Z)(),name:"300",value:"#0074F0",type:n.i.COLOR,categoryId:a.id,position:Number.MAX_SAFE_INTEGER,usedInNodes:{}},{id:(0,i.Z)(),name:"500",value:"#14A9FF",type:n.i.COLOR,categoryId:a.id,position:2*Number.MAX_SAFE_INTEGER,usedInNodes:{}},{id:(0,i.Z)(),name:"700",value:"#85DCFF",type:n.i.COLOR,categoryId:a.id,position:3*Number.MAX_SAFE_INTEGER,usedInNodes:{}},{id:(0,i.Z)(),name:"Black",value:"#000000",type:n.i.COLOR,categoryId:l.id,position:0,role:"foreground-color",usedInNodes:{}},{id:(0,i.Z)(),name:"500",value:"#595959",type:n.i.COLOR,categoryId:l.id,position:Number.MAX_SAFE_INTEGER,usedInNodes:{}},{id:(0,i.Z)(),name:"700",value:"#999999",type:n.i.COLOR,categoryId:l.id,position:2*Number.MAX_SAFE_INTEGER,usedInNodes:{}},{id:(0,i.Z)(),name:"900",value:"#D9D9D9",type:n.i.COLOR,categoryId:l.id,position:3*Number.MAX_SAFE_INTEGER,usedInNodes:{}},{id:(0,i.Z)(),name:"White",value:"#FFFFFF",type:n.i.COLOR,categoryId:l.id,position:4*Number.MAX_SAFE_INTEGER,role:"background-color",usedInNodes:{}},{id:(0,i.Z)(),name:"300",value:"#199033",type:n.i.COLOR,categoryId:c.id,position:0,usedInNodes:{}},{id:(0,i.Z)(),name:"500",value:"#32A94C",type:n.i.COLOR,categoryId:c.id,position:Number.MAX_SAFE_INTEGER,usedInNodes:{}},{id:(0,i.Z)(),name:"700",value:"#4CC366",type:n.i.COLOR,categoryId:c.id,position:2*Number.MAX_SAFE_INTEGER,usedInNodes:{}},{id:(0,i.Z)(),name:"300",value:"#A22020",type:n.i.COLOR,categoryId:d.id,position:0,usedInNodes:{}},{id:(0,i.Z)(),name:"500",value:"#BF2626",type:n.i.COLOR,categoryId:d.id,position:Number.MAX_SAFE_INTEGER,usedInNodes:{}},{id:(0,i.Z)(),name:"700",value:"#E14747",type:n.i.COLOR,categoryId:d.id,position:2*Number.MAX_SAFE_INTEGER,usedInNodes:{}},{id:(0,i.Z)(),name:"XSmall",value:"16px",type:n.i.SIZE,categoryId:u.id,position:0,usedInNodes:{}},{id:(0,i.Z)(),name:"Small",value:"48px",type:n.i.SIZE,categoryId:u.id,position:Number.MAX_SAFE_INTEGER,usedInNodes:{}},{id:(0,i.Z)(),name:"Medium",value:"96px",type:n.i.SIZE,categoryId:u.id,position:2*Number.MAX_SAFE_INTEGER,usedInNodes:{}},{id:(0,i.Z)(),name:"Large",value:"144px",type:n.i.SIZE,categoryId:u.id,position:3*Number.MAX_SAFE_INTEGER,usedInNodes:{}},{id:(0,i.Z)(),name:"XLarge",value:"192px",type:n.i.SIZE,categoryId:u.id,position:4*Number.MAX_SAFE_INTEGER,usedInNodes:{}},{id:(0,i.Z)(),name:"XXLarge",value:"288px",type:n.i.SIZE,categoryId:u.id,position:4*Number.MAX_SAFE_INTEGER,usedInNodes:{}},{id:(0,i.Z)(),name:"MaxWidth",value:"1400px",type:n.i.SIZE,categoryId:u.id,position:5*Number.MAX_SAFE_INTEGER,usedInNodes:{}},{id:(0,i.Z)(),name:"HalfUnit",value:"8px",type:n.i.SPACE,categoryId:h.id,position:0,usedInNodes:{}},{id:(0,i.Z)(),name:"Unit",value:"16px",type:n.i.SPACE,categoryId:h.id,position:Number.MAX_SAFE_INTEGER,usedInNodes:{}},{id:(0,i.Z)(),name:"OneAndHalfUnits",value:"24px",type:n.i.SPACE,categoryId:h.id,position:Number.MAX_SAFE_INTEGER,usedInNodes:{}},{id:(0,i.Z)(),name:"TwoUnits",value:"32px",type:n.i.SPACE,categoryId:h.id,position:2*Number.MAX_SAFE_INTEGER,usedInNodes:{}},{id:(0,i.Z)(),name:"ThreeUnits",value:"48px",type:n.i.SPACE,categoryId:h.id,position:3*Number.MAX_SAFE_INTEGER,usedInNodes:{}},{id:(0,i.Z)(),name:"FourUnits",value:"64px",type:n.i.SPACE,categoryId:h.id,position:4*Number.MAX_SAFE_INTEGER,usedInNodes:{}},{id:(0,i.Z)(),name:"FiveUnits",value:"80px",type:n.i.SPACE,categoryId:h.id,position:5*Number.MAX_SAFE_INTEGER,usedInNodes:{}},{id:(0,i.Z)(),name:"SixUnits",value:"96px",type:n.i.SPACE,categoryId:h.id,position:6*Number.MAX_SAFE_INTEGER,usedInNodes:{}},{id:(0,i.Z)(),name:"Radius2",value:"2px",type:n.i.RADIUS,categoryId:y.id,position:0,usedInNodes:{}},{id:(0,i.Z)(),name:"Radius4",value:"4px",type:n.i.RADIUS,categoryId:y.id,position:Number.MAX_SAFE_INTEGER,usedInNodes:{}},{id:(0,i.Z)(),name:"Radius8",value:"8px",type:n.i.RADIUS,categoryId:y.id,position:2*Number.MAX_SAFE_INTEGER,usedInNodes:{}},{id:(0,i.Z)(),name:"Round",value:"50%",type:n.i.RADIUS,categoryId:y.id,position:3*Number.MAX_SAFE_INTEGER,usedInNodes:{}}]},22447:function(e,t,o){o.d(t,{o:function(){return d}});var n=o(92809),s=o(72045),i=o(7446),r=o(246),a=o(49899),l=o(10440);function c(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}class d{constructor(e){(0,n.Z)(this,a.t1,void 0),(0,n.Z)(this,"id",void 0),(0,n.Z)(this,"name",void 0),(0,n.Z)(this,"categoryId",void 0),(0,n.Z)(this,"type",i.i.TEXT_STYLE),(0,n.Z)(this,"content",void 0),(0,n.Z)(this,"identifier",void 0),(0,n.Z)(this,"position",void 0),(0,n.Z)(this,"role",void 0),(0,n.Z)(this,"usedInNodes",void 0);const{id:t,name:o,categoryId:r,role:c,content:d,usedInNodes:p,position:u,type:h}=e||{};this.id=t||(0,s.Z)(),this.name=o||"",this.identifier=(0,l.Ky)(this.name),this.categoryId=r,this.role=c||void 0,this.content=d||{},this.usedInNodes=p||{},this.position=u,this.type=h}setDefault(){this.role="default"}removeDefault(){this.role=void 0}toUIDL(){return{type:"reusable-project-style-map",content:Object.keys(this.content||{}).reduce(((e,t)=>{const o=this.content[t];return o&&"static"===o.type&&(e[t]=o.toUIDL()),e}),{})}}fromJSON(e){const{id:t,name:o,categoryId:n,role:s,content:i,usedInNodes:r={},position:a,type:l,identifier:c}=e;return this.id=t,this.name=o,this.categoryId=n,this.type=l,this.identifier=c,this.role=s||void 0,this.usedInNodes=JSON.parse(JSON.stringify(r)),this.position=a,this.content=this.mapOverStyles(i),this.type=l,this}toJSON(){return{id:this.id,name:this.name,categoryId:this.categoryId,type:this.type,role:this.role,content:JSON.parse(JSON.stringify(this.content)),usedInNodes:JSON.parse(JSON.stringify(this.usedInNodes)),identifier:this.identifier,position:this.position}}mapOverStyles(e){return Object.keys(e||{}).reduce(((t,o)=>{const s=e[o];return"static"===s.type&&(t[o]=new r.F(function(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?c(Object(o),!0).forEach((function(t){(0,n.Z)(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):c(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}({},s))),t}),{})}applyPatch(e){const{op:t,pathArray:o,value:n}=e;switch(o[0]){case"content":return"add"!==t&&"replace"!==t||!n?"remove"!==t||n?void 0:void(this.content={}):void(this.content=this.mapOverStyles(n));case"role":return"add"===t&&n?void(this.role=n):void("remove"!==t||n||(this.role=void 0));case"name":return void("add"!==t&&"replace"!==t||!n||(this.name=n));case"usedInNodes":return"add"!==t&&"replace"!==t||!n?"remove"===t?void delete this.usedInNodes[o[1]]:void 0:void(this.usedInNodes[o[1]]=n);default:return}}}},51676:function(e,t,o){o.d(t,{Q:function(){return r}});var n=o(92809),s=o(72045),i=o(49899);class r{constructor(e){(0,n.Z)(this,i.t1,void 0),(0,n.Z)(this,"id",void 0),(0,n.Z)(this,"name",void 0),(0,n.Z)(this,"value",void 0),(0,n.Z)(this,"type",void 0),(0,n.Z)(this,"categoryId",void 0),(0,n.Z)(this,"position",void 0),(0,n.Z)(this,"role",void 0),(0,n.Z)(this,"usedInNodes",{});const{id:t,name:o,value:r,categoryId:a,type:l,role:c,position:d,usedInNodes:p}=e;this.id=t||(0,s.Z)(),this.name=o,this.value=r,this.categoryId=a,this.usedInNodes=JSON.parse(JSON.stringify(p)),this.type=l,this.position=d,this.role=c}setTokenName(e){this.name=e}setTokenValue(e){this.value=e}setRole(e){this.role=e}setPosition(e){this.position=e}toJSON(){return{id:this.id,name:this.name,type:this.type,value:this.value,categoryId:this.categoryId,usedInNodes:JSON.parse(JSON.stringify(this.usedInNodes)),role:this.role,position:this.position}}toUIDL(){return{type:"static",content:this.value}}applyPatch(e){const{op:t,pathArray:o,value:n}=e;switch(o[0]){case"role":return"add"!==t&&"replace"!==t||!n?"remove"!==t||n?void 0:void(this.role=void 0):void(this.role=n);case"name":return"add"!==t&&"replace"!==t||!n?void 0:void(this.name=n);case"value":return void("add"!==t&&"replace"!==t||!n||(this.value=n));case"usedInNodes":return"add"!==t&&"replace"!==t||!n?"remove"===t?void delete this.usedInNodes[o[1]]:void 0:void(this.usedInNodes[o[1]]=n);case"position":return"replace"===t&&n?void(this.position=n):void 0;default:return}}}},7446:function(e,t,o){let n;o.d(t,{i:function(){return n}}),function(e){e.COLOR="color",e.SIZE="size",e.SPACE="space",e.RADIUS="radius",e.TYPEFACE="typeface",e.TEXT_SCALE="text-scale",e.TEXT_STYLE="text-style"}(n||(n={}))},71023:function(e,t,o){o.d(t,{iR:function(){return n},p4:function(){return s},MU:function(){return i}});const n=(e,t)=>{if(e.categoryId){const o=t[e.categoryId].name.toLowerCase().replace(/ /g,""),n=e.name.toLowerCase().replace(/ /g,"");return`--dl-${e.type}-${o}-${n}`}return`--dl-${e.type}-${e.name.toLowerCase()}`},s=e=>Object.keys(e).length?Object.keys(e).map((t=>e[t].position)).reduce(((e,t)=>t>e?t:e),0)+Number.MAX_SAFE_INTEGER:0,i=e=>"color"===e.type?`${e.name} (${e.categoryName})`:e.name},60178:function(e,t,o){o.d(t,{F:function(){return i}});var n=o(92809),s=o(49899);class i{constructor(e){(0,n.Z)(this,s.t1,void 0),(0,n.Z)(this,"id",void 0),(0,n.Z)(this,"path",void 0),(0,n.Z)(this,"name",void 0),(0,n.Z)(this,"type",void 0),(0,n.Z)(this,"usedInNodes",{}),(0,n.Z)(this,"usedInTokens",{});const{id:t,path:o,name:i,type:r}=e;this.id=t,this.path=o||void 0,this.name=i,this.type=r||"system",this.usedInTokens=e.usedInTokens,this.usedInNodes=e.usedInNodes}fromJSON(e){const{id:t,name:o,path:n,usedInTokens:s,usedInNodes:i,type:r}=e;this.id=t,this.name=o,this.type=r||"system",this.path=n,this.usedInNodes=i,this.usedInTokens=s}toJSON(){return{id:this.id,name:this.name,path:this.path,type:this.type,usedInNodes:this.usedInNodes,usedInTokens:this.usedInTokens}}applyPatch(e){const{op:t,pathArray:o,value:n}=e;"add"!==t&&"replace"!==t||2!==o.length||!n||("usedInNodes"===o[0]&&(this.usedInNodes[o[1]]=n),"usedInTokens"===o[0]&&(this.usedInTokens[o[1]]=!0)),"remove"!==t||2!==o.length||n||("usedInNodes"===o[0]&&delete this.usedInNodes[o[1]],"usedInTokens"===o[0]&&delete this.usedInTokens[o[1]])}}},8044:function(e,t,o){o.d(t,{n:function(){return uo}});var n,s,i,r=o(73202),a=o(92809),l=o(30773),c=o(99798),d=o(76883),p=o(84003),u=o(23861),h=o(49899),y=o(48055);let m=(n=(0,d.f3)("positioningService"),s=class{constructor(){(0,a.Z)(this,h.t1,void 0),(0,r.Z)(this,"positioningService",i,this),(0,a.Z)(this,"byId",{})}create(e){const t=y.m.prototype.create(e);return this.byId[t.id]=t,t}add(e){this.byId[e.id]=e}getIds(){return Object.keys(this.byId)}getIdsInOrder(){return this.positioningService.orderEntities({entitiyCollection:this.byId})}getIdsOrderedByPageName(){return Object.keys(this.byId).sort(((e,t)=>this.byId[e].title.localeCompare(this.byId[t].title)))}getHomePageId(){var e;const t=Object.values(this.byId).find((e=>null===e||void 0===e?void 0:e.isHomePage));return null!==(e=null===t||void 0===t?void 0:t.id)&&void 0!==e?e:null}getFallbackPageId(){var e;const t=Object.values(this.byId).find((e=>null===e||void 0===e?void 0:e.isFallbackPage));return null!==(e=null===t||void 0===t?void 0:t.id)&&void 0!==e?e:null}getPositionAfterPage(e){return this.positioningService.getPositionAfterEntity({entitiyCollection:this.byId,entity:e})}getPositionAfterLast(){return this.positioningService.getHighestAvailablePosition({entitiyCollection:this.byId})}clonePage(e){const t=this.byId[e];if(!t)throw new Error("Could not clone page as it was not found");return t.clone()}toJSON(){return{byId:Object.keys(this.byId).reduce(((e,t)=>{var o;return e[t]=null===(o=this.byId[t])||void 0===o?void 0:o.toJSON(),e}),{})}}fromJSON(e){this.byId={};const{byId:t={}}=e;if(!t||"object"!==typeof t)return;const o=Object.keys(t||{});let n="",s={};for(let i=0;i<o.length;i+=1)n=o[i],s=t[n],this.byId[n]=(new y.m).fromJSON(s)}applyPatch(e){const{pathArray:t,value:o}=e;2===t.length&&"byId"===t[0]&&(o?this.byId[t[1]]=(new y.m).fromJSON(o):delete this.byId[t[1]])}},i=(0,l.Z)(s.prototype,"positioningService",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),s);var f,b,g,I=o(47361),v=o(70705);let j=(f=(0,d.f3)("positioningService"),b=class{constructor(){(0,a.Z)(this,h.t1,void 0),(0,r.Z)(this,"positioningService",g,this),(0,a.Z)(this,"byId",{})}create(e){const t=I.n.prototype.create(e);return this.byId[t.id]=t,t}add(e){this.byId[e.id]=e}getIds(){return Object.keys(this.byId)}getIdsInOrder(){return this.positioningService.orderEntities({entitiyCollection:this.byId})}getIdsOrderedByCompName(){return Object.keys(this.byId).sort(((e,t)=>this.byId[e].title.localeCompare(this.byId[t].title)))}getComponentByName(e){return Object.values(this.byId).find((t=>(null===t||void 0===t?void 0:t.title)===e))}getPositionAfterComp(e){return this.positioningService.getPositionAfterEntity({entitiyCollection:this.byId,entity:e})}getPositionAfterLast(){return this.positioningService.getHighestAvailablePosition({entitiyCollection:this.byId})}getIdsWithStateDefs(){return this.getIds().filter((e=>{const t=this.byId[e];return t&&Object.keys(t.stateDefinitions).length}))}checkIfComponentsHaveCircularDependency(e,t){if(e===t)return!0;const o=this.byId[e];if(!o)throw new Error("Component to add was not found while checking circular dependency");return!(!o.usedComponents||!Object.keys(o.usedComponents).length)&&Object.keys(o.usedComponents||{}).some((e=>e===t||this.checkIfComponentsHaveCircularDependency(e,t)))}getUniqueCompName(e){const t=Object.values(this.byId).map((e=>(null===e||void 0===e?void 0:e.title)||""));return(0,v.Zu)(t,e)}cloneComponent(e){const t=this.byId[e];if(!t)throw new Error("Could not clone component as it was not found");return t.clone()}toJSON(){return{byId:Object.keys(this.byId).reduce(((e,t)=>{var o;return e[t]=null===(o=this.byId[t])||void 0===o?void 0:o.toJSON(),e}),{})}}fromJSON(e){this.byId={};const{byId:t={}}=e;if(!t||"object"!==typeof t)return;const o=Object.keys(t||{});let n="",s={};for(let i=0;i<o.length;i+=1)n=o[i],s=t[n],this.byId[n]=(new I.n).fromJSON(s)}applyPatch(e){const{pathArray:t,value:o,op:n}=e;var s;"remove"===n&&4===t.length&&"instantiatedByNodes"===t[2]&&(null===(s=this.byId[t[1]])||void 0===s||delete s.instantiatedByNodes[t[3]]);2===t.length&&"byId"===t[0]&&(o?this.byId[t[1]]=(new I.n).fromJSON(o):delete this.byId[t[1]])}},g=(0,l.Z)(b.prototype,"positioningService",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),b);var N,x,S,w=o(33381),O=o(40652),T=o(75222),_=o(28520),E=o(34437);const D=new(N=(0,d.f3)("projectDoc"),x=class{constructor(){(0,r.Z)(this,"projectDoc",S,this)}cleanupMissingChildNode(e){const{doc:t,parentNodeId:o,missingChildId:n}=e;if(!t)return;const s=t.nodes.byId[o];s&&delete s.childrenIds[n]}},S=(0,l.Z)(x.prototype,"projectDoc",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),(0,l.Z)(x.prototype,"cleanupMissingChildNode",[E.P],Object.getOwnPropertyDescriptor(x.prototype,"cleanupMissingChildNode"),x.prototype),x);var F,C,A,k,P,U;Object.freeze(D);class L extends Error{constructor(e,t){super(JSON.stringify({parentNodeId:e,missingChildId:t}))}}let Z=(F=(0,d.f3)("positioningService"),C=(0,d.f3)("sentryService"),A=function(e,t,o){const n=o.value;let s=0;o.value=function(...e){try{return n.apply(this,e)}catch(t){if(t instanceof L){const{parentNodeId:o,missingChildId:i}=JSON.parse(t.message);if(D.cleanupMissingChildNode({parentNodeId:o,missingChildId:i}),s>1e3)throw new Error("Too many missing children node ids");return s+=1,n.apply(this,e)}throw t}}},k=class{constructor(){(0,a.Z)(this,h.t1,void 0),(0,r.Z)(this,"positioningService",P,this),(0,r.Z)(this,"sentryService",U,this),(0,a.Z)(this,"byId",{}),(0,a.Z)(this,"getNodeIdClosestToRootFromNodes",(e=>{const t=[this.getRootIdOf(e[0])];let o=e[0];if(e.length<2)return o;for(;t.length;){const n=t.shift();if(e.includes(n)){o=n;break}const s=this.byId[n];Object.keys(s.childrenIds).forEach((e=>t.push(e)))}return o})),(0,a.Z)(this,"getOrderedTopLevelNodes",(e=>{if(e.length<2)return e;const{compInstanceId:t}=this.getSlotAndCompInstanceIdForNodeById(e[0]),o=this.getAllPaths(this.getRootIdOf(e[0]),[],t),n=new Set;return o.forEach((t=>{for(const o of t)if(e.includes(o)){n.add(o);break}})),[...n]})),(0,a.Z)(this,"getAllPaths",((e,t=[],o)=>{t.push(e);const n=this.byId[e];if(!n)throw new Error(`No node with id ${e}!`);const s=this.getChildren(n,o);if(!s.length)return[t];const i=this.orderChildrenIds(s),r=[];return i.forEach((e=>{const n=this.getAllPaths(e,[...t],o);r.push(...n)})),r}))}getIds(){return Object.keys(this.byId)}getIdsWithEvents(){return this.getIds().filter((e=>{const t=this.byId[e];return t&&Object.keys(t.events).length}))}getNodeSubtreeIds(e){const t=[],o=[e];for(;o.length;){const e=o.pop();if(!e)continue;t.push(e);const n=this.byId[e];n&&o.push(...Object.keys((null===n||void 0===n?void 0:n.childrenIds)||{}))}return t}removeNode(e,t){const o=this.byId[e];if(!o)return;const{parentId:n,compIdOfRootNode:s}=o;var i,r;n&&(null===(i=this.byId[n])||void 0===i||delete i.childrenIds[e]);s&&(null===(r=this.byId[s])||void 0===r||delete r.childrenIds[e]);t&&Object.keys((null===o||void 0===o?void 0:o.childrenIds)||{}).forEach((e=>{this.removeNode(e,!0)})),delete this.byId[e]}getDescendents(e){const t=[],o=this.byId[e];if(!o)return[];const{childrenIds:n={}}=o,s=Object.keys(n);return t.push(o),s.reduce(((e,t)=>(e.push(...this.getDescendents(t)),e)),t),t}getNodesDepthInTree(e){let t=0;const o=this.byId[e];if(!o||!o.parentOrSlotId)return t;let{compInstanceId:n}=this.getSlotAndCompInstanceIdForNodeById(e),s=[];for(s.push(o.parentOrSlotId);s.length>0;){t++;const e=this.byId[s[0]];if(!e||!e.parentOrSlotId)return s=[],t;if(e.primitiveType!==T.sO.SLOT)s=s.slice(1),s.push(e.parentOrSlotId);else{const e=this.byId[n||""];if(!e)return s=[],t;n=this.getSlotAndCompInstanceIdForNodeById(e.id).compInstanceId,s=s.slice(1),s.push(e.id)}}return t}bfs(e,t,o){const n=this.byId[e];if(!n)return;const{childrenIds:s={}}=n;let i,r=0,a=t(n,r);i=o?Object.keys(s):this.orderChildrenIds(Object.keys(s||{})),r++;let l=i[0],c=this.byId[l],d=[];for(;i.length&&!a;){if(l=i[0],c=this.byId[l],!c){const e=Object.values(this.byId).find((e=>Object.keys((null===e||void 0===e?void 0:e.childrenIds)||{}).includes(l)));if(!e){const e=new Error("Both parent and child nodes are missing!");throw this.sentryService.captureException(e),e}const t=new Error(`Requsted node is missing from the list - ${l}`);throw this.sentryService.captureException(t),new L(e.id,l)}a=t(c,r),i=i.slice(1),o?d.push(...Object.keys(c.childrenIds||{})):d.push(...this.orderChildrenIds(Object.keys(c.childrenIds||{}))),0===i.length&&(i=d,d=[],r++)}}orderChildrenIds(e){return this.positioningService.orderEntities({entitiyCollection:this.byId,entitiesOfInterest:e})}getNextSibling(e){return this.getSibling(e,"next")}getPrevSibling(e){return this.getSibling(e,"prev")}getSibling(e,t){if(e.slotId&&!e.compInstanceId)return null;const o=e.parentOrSlotId;if(!o||!this.byId[o])return null;if(e.slotId&&!e.compInstanceId)return null;const n=this.byId[o],s=this.getChildren(n,e.compInstanceId);return"next"===t?this.positioningService.getNextEntity({entitiyCollection:this.byId,entitiesOfInterest:s,entity:e}):this.positioningService.getPrevEntity({entitiyCollection:this.byId,entitiesOfInterest:s,entity:e})}getFirstChild(e,t){const o=this.getChildren(e,t),n=this.orderChildrenIds(o);return n.length?this.byId[n[0]]:null}getLastChild(e,t){const o=this.getChildren(e,t),n=this.orderChildrenIds(o);return n.length?this.byId[n[n.length-1]]:null}getChildren(e,t){var o;const n=this.byId[t||""];return e.primitiveType===T.sO.SLOT?Object.keys((null===n||void 0===n||null===(o=n.slottedNodes)||void 0===o?void 0:o[e.id||""])||{}):Object.keys((null===e||void 0===e?void 0:e.childrenIds)||{})}getPositionAfterNode(e){const t=this.getNextSibling(e);return t?(0,w.Dd)(e.pos,t.pos):(parseFloat(e.pos)+Number.MAX_SAFE_INTEGER).toString()}getPositionBeforeNode(e){const t=this.getPrevSibling(e);return t?(0,w.Dd)(e.pos,t.pos):(0,w.Dd)(e.pos,"0")}setNodeAsLastChildInParentNode(e,t){const o=this.getLastChild(t);o&&(e.pos=this.getPositionAfterNode(o))}countDescendents(e){return this.getDescendents(e).length}add(e){if(this.byId[e.id]=e,e.parentId){const t=this.byId[e.parentId];t&&(t.childrenIds[e.id]=!0)}}nodeIsCompInstance(e){return e.primitiveType===T.sO.COMPONENT}nodeIsDevCompInstance(e){return e.primitiveType===T.sO.DEV_COMPONENT}getSlotAndCompInstanceIdForNodeById(e){var t,o;let n=this.byId[e],s=null===(t=n)||void 0===t?void 0:t.slotId,i=null===(o=n)||void 0===o?void 0:o.compInstanceId;for(;null!==(r=n)&&void 0!==r&&r.parentId&&!s;){var r,a,l;n=this.byId[n.parentId],s=null===(a=n)||void 0===a?void 0:a.slotId,i=null===(l=n)||void 0===l?void 0:l.compInstanceId}return{slotId:s,compInstanceId:i}}getRootIdOf(e){var t,o;let n=this.byId[e],s=(null===(t=n)||void 0===t?void 0:t.parentId)||e;for(;n&&n.parentId;){var i;n=this.byId[n.parentId],s=(null===(i=n)||void 0===i?void 0:i.parentId)||s}return null!==(o=n)&&void 0!==o&&o.slotId&&(s=n.slotId),s}getComponentIdOf(e){const t=this.getRootIdOf(e),o=this.byId[t];return(null===o||void 0===o?void 0:o.compIdOfRootNode)||(null===o||void 0===o?void 0:o.compIdOfSlot)||null}areNodesSiblings(e){const t=this.byId[e[0]],o=null===t||void 0===t?void 0:t.compInstanceId,n=null===t||void 0===t?void 0:t.parentOrSlotId;for(let s=1;s<e.length;s++){const t=this.byId[e[s]];if(n!==(null===t||void 0===t?void 0:t.parentOrSlotId))return!1;if(o!==(null===t||void 0===t?void 0:t.compInstanceId))return!1}return!0}getAncestors(e,t,o,n){const s=[];let i=this.byId[e],r=this.getSlotAndCompInstanceIdForNodeById(e).compInstanceId;const a=n?"parentOrSlotId":"parentId";for(o&&s.push(e);null!==(l=i)&&void 0!==l&&l[a];){var l,c,d;if(i.primitiveType===T.sO.SLOT&&r)s.push(r),i=this.byId[r],null!==(d=i)&&void 0!==d&&d.compInstanceId&&(r=i.compInstanceId);else s.push(i[a]),i=this.byId[i[a]];t&&null!==(c=i)&&void 0!==c&&c.compIdOfRootNode&&s.pop()}return s}toJSON(){return{byId:Object.keys(this.byId).reduce(((e,t)=>{var o;return e[t]=null===(o=this.byId[t])||void 0===o?void 0:o.toJSON(),e}),{})}}fromJSON(e){this.byId={};const{byId:t={}}=e||{};t&&"object"===typeof t&&Object.keys(t).forEach((e=>{const o=(t||{})[e];let n;n=o.primitiveType===T.sO.COMPONENT?(new _.F).fromJSON(o):(new O.H).fromJSON(o),this.byId[n.id]=n}))}applyPatch(e){const{pathArray:t,value:o,op:n}=e;if(2===t.length&&"byId"===t[0]){if(("add"===n||"replace"===n)&&o)return(null===o||void 0===o?void 0:o.primitiveType)===T.sO.COMPONENT?void this.add((new _.F).fromJSON(o)):void this.add((new O.H).fromJSON(o));if("remove"===n)return void delete this.byId[t[1]]}}},P=(0,l.Z)(k.prototype,"positioningService",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),U=(0,l.Z)(k.prototype,"sentryService",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),(0,l.Z)(k.prototype,"bfs",[A],Object.getOwnPropertyDescriptor(k.prototype,"bfs"),k.prototype),k);var R=o(5395),M=o(89308),H=o(69812),$=o(45461);function B(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function G(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?B(Object(o),!0).forEach((function(t){(0,a.Z)(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):B(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}class z{constructor(){(0,a.Z)(this,h.t1,void 0),(0,a.Z)(this,"byId",{})}create(e){const t=M.G.prototype.create(e);return this.byId[t.id]=t,t}add(e){this.byId[e.id]=e}remove(e){delete this.byId[e]}getSelectableIds(e=u.D.ASSETS){return Object.keys(this.byId).filter((t=>![R.K.FAVICON,R.K.PAGE_OG_IMAGE,R.K.PROJECT_OG_IMAGE].includes(this.byId[t].type)&&this.byId[t].parentFolderId===e))}copyAssetsInNodeRelationToNode(e){const{sourceNodeId:t,targetNodeId:o}=e,n=this.getAssetsUsedInNode(t);n.length&&n.forEach((e=>{e.createNodeRelation(o)}))}removeAssetsRelationToNode(e){Object.values(this.byId).forEach((t=>{t.usedInNodes[e]&&t.removeNodeRelation(e)}))}getAssetsUsedInNode(e){return Object.values(this.byId).filter((t=>Object.keys(t.usedInNodes).some((t=>t===e))))}getAssetsUsedInProject(){return Object.values(this.byId).filter((e=>e.type!==R.K.IMAGE||(Object.keys(e.usedInNodes).length>0||Object.keys(e.usedInClasses||{}).length>0)))}mapClassesAndNodesToOptimisedAssets(e,t=!1){const o={};return e.forEach((e=>{const n=e.usedInClasses||{};Object.keys(G(G({},e.usedInNodes),n)).forEach((n=>{o[n]||(o[n]=[]),o[n].push({localPath:`${H.Bq}/${t?e.name:encodeURIComponent(e.name)}`,id:e.id})}))})),o}changeParentFolder(e,t){e.forEach((e=>{this.byId[e].parentFolderId=t}))}getAssetsFromFolder(e){return Object.values(this.byId).filter((t=>t.parentFolderId===e))}getAssetsForCustomCode(){return Object.values(this.byId).reduce(((e,t)=>(e[`${$.Wn}${H.Bq}/${t.name}`]={code:t.remoteSrc},e)),{})}findAssetUsingName(e){return Object.values(this.byId).find((t=>t.name===e))}toJSON(){return{byId:Object.keys(this.byId).reduce(((e,t)=>(e[t]=this.byId[t].toJSON(),e)),{})}}fromJSON(e){this.byId={};const{byId:t={}}=e;if(!t||"object"!==typeof t)return;const o=Object.keys(t||{});let n="",s={};for(let i=0;i<o.length;i+=1)n=o[i],s=t[n],this.byId[n]=(new M.G).fromJSON(s)}applyPatch(e){const{pathArray:t,value:o}=e;2===t.length&&"byId"===t[0]&&(o?this.byId[t[1]]=(new M.G).fromJSON(o):delete this.byId[t[1]])}}var W=o(246),V=o(77729),K=o(39469),J=o(78064),X=o(87146),Y=o(3054),q=o(72045),Q=o(7446),ee=o(71023),te=o(51676),oe=o(22447),ne=o(88439);function se(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function ie(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?se(Object(o),!0).forEach((function(t){(0,a.Z)(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):se(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}class re{constructor(){(0,a.Z)(this,h.t1,void 0),(0,a.Z)(this,"tokensById",{}),(0,a.Z)(this,"categoriesById",{}),(0,a.Z)(this,"textStyleSetsById",{}),X.ST.forEach((e=>{this.categoriesById[e.id]=e})),X.ZC.forEach((e=>{this.tokensById[e.id]=new te.Q(e)})),X.$e.forEach((e=>this.textStyleSetsById[e.id]=new oe.o(e)))}resolveTokensWithCategoryName(){return Object.values((0,Y.F)(Object.values(this.tokensById).map((e=>ie(ie({},e),{},{categoryName:this.categoriesById[e.categoryId].name}))))).flat()}createCategory(e,t="colors"){const o=(0,q.Z)(),n=this.getCategoriesBySection(t).reduce(((e,t)=>(e[t.id]=t,e)),{}),s=(0,ee.p4)(n),i=Object.values(this.categoriesById).map((e=>e.name.toLowerCase())),r=(0,v.Zu)(i,e.toLowerCase()),a={id:o,name:`${e}${r.substring(e.length)}`,section:t,position:s};return this.categoriesById[o]=a,a}deleteCategory(e){this.getTokensByCategoryId(e).forEach((e=>delete this.tokensById[e.id])),delete this.categoriesById[e]}duplicateCategory(e){const t=this.categoriesById[e].name,o=this.createCategory(t);return this.getTokensByCategoryId(e).sort(((e,t)=>e.position>t.position?1:-1)).forEach((e=>{e.type===Q.i.COLOR&&null!==e&&void 0!==e&&e.value&&this.createToken({name:e.name,value:e.value,categoryId:o.id,type:Q.i.COLOR})})),o}editCategoryName(e,t){const o=Object.values(this.categoriesById).map((e=>e.name.toLowerCase())),n=this.categoriesById[e].name.toLowerCase(),s=t.toLowerCase();let i=t;if(n!==s){i=`${t}${(0,v.Zu)(o,s).substring(t.length)}`}this.categoriesById[e].name=i}changeCategoryPosition(e,t){this.categoriesById[e].position=t}getCategoryIds(){return Object.keys(this.categoriesById)}getCategoriesBySection(e){return Object.values(this.categoriesById).filter((t=>t.section===e))}createToken(e){const{categoryId:t,name:o}=e,n=(0,q.Z)(),s=this.getTokensByCategoryId(t).reduce(((e,t)=>(e[t.id]=t,e)),{}),i=(0,ee.p4)(s),r=(0,v.Zu)(this.getTokensByCategoryId(t).map((e=>e.name.toLowerCase())),o.toLowerCase()),a=`${o}${r.substring(o.length)}`,l=ie(ie({},e),{},{id:n,position:i,name:a,usedInNodes:{}});return this.tokensById[n]=new te.Q(l),this.tokensById[n]}duplicateToken(e){const t=this.tokensById[e];this.createToken(ie(ie({},t),{},{role:void 0}))}deleteNodeReferenceFromAllTokens(e){Object.values(this.tokensById).forEach((t=>{delete t.usedInNodes[e]})),Object.values(this.textStyleSetsById).forEach((t=>{delete t.usedInNodes[e]}))}deleteToken(e){delete this.tokensById[e]}editTokenValue(e,t){this.tokensById[e].setTokenValue(t)}editTokenName(e,t){const o=this.tokensById[e].name.toLowerCase(),n=t.toLowerCase();let s=t;if(o!==n){s=`${t}${(0,v.Zu)(this.getTokensByCategoryId(this.tokensById[e].categoryId).map((e=>e.name.toLowerCase())),n).substring(t.length)}`}this.tokensById[e].setTokenName(s)}changeTokenRole(e,t){const o=this.getTokenWithRole(t);(null===o||void 0===o?void 0:o.id)!==e&&(null===o||void 0===o||delete o.role,this.tokensById[e].setRole(t))}getTokenWithRole(e){return Object.values(this.tokensById).find((t=>t.role===e))}switchTokenRoles(e,t){if(e===t)return;const o=this.getTokenWithRole(e),n=this.getTokenWithRole(t);o&&n&&(this.tokensById[o.id].setRole(t),this.tokensById[n.id].setRole(e))}createTextStyle(e){const{name:t,content:o}=e,n=(0,q.Z)(),s=(0,ee.p4)(this.textStyleSetsById),i=(0,v.Zu)(Object.values(this.textStyleSetsById).map((e=>e.name.toLowerCase())),t.toLowerCase()),r=`${t}${i.substring(t.length)}`,a=this.getCategoryOfTextStyle();if(!a)return null;const l=new oe.o({id:n,name:r,position:s,content:o,type:Q.i.TEXT_STYLE,categoryId:a.id,usedInNodes:{}});return this.textStyleSetsById[n]=l,l}getCategoryOfTextStyle(){return Object.values(this.categoriesById||{}).find((e=>{if("typography"===e.section)return e}))||null}duplicateTextStyle(e){const t=this.textStyleSetsById[e];this.createTextStyle(ie(ie({},t),{},{role:void 0,usedInNodes:{}}))}editTextStyle(e){const{id:t,name:o,content:n}=e;if(!this.textStyleSetsById[t])return;const s=this.textStyleSetsById[t].name;if(o&&s!==o){let e=o;const n=o.toLowerCase();if(s.toLowerCase()!==n){const t=Object.values(this.textStyleSetsById).map((e=>e.name.toLowerCase()));e=`${o}${(0,v.Zu)(t,n).substring(o.length)}`}this.textStyleSetsById[t].name=e}n&&(this.textStyleSetsById[t].content=n)}deleteTextStyle(e){delete this.textStyleSetsById[e]}setDefaultTextStyle(e){const t=Object.values(this.textStyleSetsById).find((e=>"default"===e.role));if((null===t||void 0===t?void 0:t.id)===e)return;this.textStyleSetsById[e].setDefault(),null===t||void 0===t||t.removeDefault()}getTokensByCategoryId(e){return Object.values(this.tokensById).filter((t=>t.categoryId===e))}getTokensByTokenType(e){return Object.values(this.tokensById).filter((t=>t.type===e))}getTokensAsCustomProperties(){return Object.keys(this.tokensById).reduce(((e,t)=>(e[t]={name:(0,ee.iR)(this.tokensById[t],this.categoriesById),value:this.tokensById[t].value},e)),{})}getTokenNameResolvedWithCategory(e){const t=this.tokensById[e];if(!t)throw new Error(`${e} is missing from the list`);return(0,ee.iR)(t,this.categoriesById)}getDefaultTextStyle(){return Object.values(this.textStyleSetsById).find((e=>"default"===(null===e||void 0===e?void 0:e.role)))}changeTokenOrTextStylePosition(e,t){this.tokensById[e]?this.tokensById[e].position=t:this.textStyleSetsById[e]&&(this.textStyleSetsById[e].position=t)}toJSON(){return{tokensById:Object.values(this.tokensById).reduce(((e,t)=>(e[t.id]=t.toJSON(),e)),{}),categoriesById:Object.keys(this.categoriesById).reduce(((e,t)=>(e[t]=ie({},this.categoriesById[t]),e)),{}),textStyleSetsById:Object.values(this.textStyleSetsById).reduce(((e,t)=>(e[t.id]=t.toJSON(),e)),{})}}fromJSON(e){null!==e&&void 0!==e&&e.tokensById&&(this.tokensById={},Object.values(JSON.parse(JSON.stringify((null===e||void 0===e?void 0:e.tokensById)||{}))).forEach((e=>{const t=e;this.tokensById[t.id]=new te.Q(t)}))),null!==e&&void 0!==e&&e.categoriesById&&(this.categoriesById=JSON.parse(JSON.stringify(e.categoriesById))),null!==e&&void 0!==e&&e.textStyleSetsById&&(this.textStyleSetsById={},Object.values(JSON.parse(JSON.stringify((null===e||void 0===e?void 0:e.textStyleSetsById)||{}))).forEach((e=>{const t=e;this.textStyleSetsById[t.id]=(new oe.o).fromJSON(t)})))}textStylesToUIDL(){return Object.values(this.textStyleSetsById||{}).reduce(((e,t)=>(e[(0,ne.hN)(t.name)]=t.toUIDL(),e)),{})}getFlatTextStyleContent(e){const t=this.textStyleSetsById[e];return t?Object.keys((null===t||void 0===t?void 0:t.content)||{}).reduce(((e,o)=>{const n=t.content[o];return n&&"static"===(null===n||void 0===n?void 0:n.type)&&null!==n&&void 0!==n&&n.content&&(e[o]=n.content),e}),{}):null}getTextStyleByIdentifier(e){let t;return Object.values(this.textStyleSetsById).forEach((o=>{o.identifier===e&&(t=o)})),t}applyPatch(e){const{op:t,pathArray:o,value:n}=e;if("add"===t&&2===o.length&&n)switch(o[0]){case"tokensById":return void(this.tokensById[o[1]]=new te.Q(n));case"categoriesById":return void(this.categoriesById[o[1]]=n);case"textStyleSetsById":return void(this.textStyleSetsById[o[1]]=(new oe.o).fromJSON(n));default:return}if("remove"===t&&2===o.length&&!n)switch(o[0]){case"tokensById":return void delete this.tokensById[o[1]];case"textStyleSetsById":return void delete this.textStyleSetsById[o[1]];case"categoriesById":return void delete this.categoriesById[o[1]];default:return}if("categoriesById"===o[0]){const e=o[2],t=this.categoriesById[o[1]];if(!t)return;this.categoriesById[o[1]]=ie(ie({},t),{},{[e]:n})}}}var ae=o(60178);class le{constructor(){(0,a.Z)(this,h.t1,void 0),(0,a.Z)(this,"byId",{})}getById(){return this.byId}addFont(e){this.byId[e.id]=e}removeFont(e){delete this.byId[e]}updateFontUsageById(e,t){const{tokens:o=[],nodeIds:n=[]}=t;o.forEach((t=>{this.byId[e].usedInTokens[t]=!0})),n.forEach((t=>{this.byId[e].usedInNodes[t]?this.byId[e].usedInNodes[t]++:this.byId[e].usedInNodes[t]=1}))}deleteNodeReferenceFromAllFonts(e){Object.values(this.byId).forEach((t=>{delete t.usedInNodes[e]}))}getFontIdByName(e){var t;return null!==(t=Object.values(this.byId).find((t=>t.name===e)))&&void 0!==t?t:null}fromJSON(e){this.byId={},null!==e&&void 0!==e&&e.byId&&Object.keys((null===e||void 0===e?void 0:e.byId)||{}).length>0&&Object.values(e.byId||{}).forEach((e=>{this.byId[e.id]=new ae.F({id:e.id,name:e.name,path:e.path||void 0,usedInNodes:e.usedInNodes,usedInTokens:e.usedInTokens,type:e.type||"system"})}))}toJSON(){return{byId:this.byId}}applyPatch(e){const{op:t,pathArray:o,value:n}=e;if("add"===t&&2===o.length){const t=e.value;this.byId[t.id]=new ae.F(t)}"remove"!==t||2!==o.length||n||delete this.byId[o[1]],"replace"===t&&2===o.length&&n&&(this.byId[o[1]].usedInNodes[o[3]]=n)}}var ce=o(27190);const de=new class{constructor(){(0,a.Z)(this,"execute",((e,t)=>{const{compId:o,nodeId:n,sectionId:s}=e,i=t.pages.byId[o]||t.components.byId[o];i&&(i.sectionIds[n]=s)}))}};Object.freeze(de);const pe=new class{constructor(){(0,a.Z)(this,"execute",((e,t)=>{const{compId:o,nodeId:n}=e,s=t.pages.byId[o]||t.components.byId[o];(null===s||void 0===s?void 0:s.sectionIds[n])&&s&&delete s.sectionIds[n]}))}};Object.freeze(pe);var ue=o(63639);const he=new class{constructor(){(0,a.Z)(this,"execute",((e,t)=>{const{nodeIds:o,withSubtree:n,compId:s,lockedNodeIds:i=[],deleteRoot:r,skipRestoreParentsFakeSize:a,notificationsManagementFlow:l}=e;let c=!1;for(const h of o)t.nodes.bfs(h,(e=>{-1===i.indexOf(e.id)||(c=!0)}));if(c)return void(null===l||void 0===l||l.handleError("Could not delete node because another user is editing something inside it."));const d=[...o];for(const h of o){const o=t.nodes.byId[h];if(!o)continue;if(!r&&o.compIdOfRootNode)continue;a||(t.restoreBGColor(o),t.restoreParentNodesFakeSize(h));const i=n?t.nodes.getNodeSubtreeIds(h):[h];if(d.push(...i),i.forEach((e=>{var o,n;const i=t.nodes.byId[e];if(!i)return;const r=null===(o=i.attrs)||void 0===o||null===(n=o.id)||void 0===n?void 0:n.content;if(s&&r&&(t.removeSectionIdFromComponent({compId:s,nodeId:e}),t.getNodesFromSelectedComponent().filter((e=>{const t=e.abilities.link,o=null===t||void 0===t?void 0:t.content;return t&&o.section===r})).forEach((e=>{var t;null===e||void 0===e||(null===(t=e.abilities)||void 0===t||delete t.link)}))),t.nodes.nodeIsCompInstance(i)&&s){var a;const o=i.compIdOfCompInstance;t.removeUsedComponentRelation({toRemoveComponentId:s,linkedComponentId:o}),null===(a=t.components.byId[o])||void 0===a||delete a.instantiatedByNodes[e]}t.assets.removeAssetsRelationToNode(e),t.designLanguage.deleteNodeReferenceFromAllTokens(e),t.fonts.deleteNodeReferenceFromAllFonts(e),t.classes.deleteNodeReferenceFromClasses(e),t.tailwindCSS.deleteClassesForNode(e)})),o.parentId){const e=t.nodes.byId[o.parentId];if((null===e||void 0===e?void 0:e.primitiveType)===T.sO.BUTTON&&1===Object.keys(e.childrenIds).length)return void t.nodes.removeNode(o.parentId,!0)}if(o.primitiveType===T.sO.SLOT&&o.compIdOfSlot){const e=t.components.byId[o.compIdOfSlot];var p;if(e)null===(p=e.slots)||void 0===p||delete p[o.id];Object.keys((null===e||void 0===e?void 0:e.instantiatedByNodes)||{}).forEach((e=>{const n=t.nodes.byId[e],i=[];n.slottedNodes[o.id]&&Object.keys(n.slottedNodes[o.id]||{}).forEach((e=>{i.push(e)})),this.execute({nodeIds:i,compId:s,deletingSlot:!0},t),n.cleanInstanceDataOnSlotRemove(o.id)}))}if(t.nodes.nodeIsCompInstance(o)){var u;const e=[];if(Object.keys(o.slottedNodes).forEach((t=>{Object.keys(o.slottedNodes[t]).forEach((t=>{e.push(t)}))})),this.execute({nodeIds:e,compId:o.compIdOfCompInstance},t),"string"===typeof(null===(u=o.attrs[ue.Q])||void 0===u?void 0:u.content)){const e=t.components.byId[o.compIdOfCompInstance];e&&delete e.styleSetDefinitions[o.attrs[ue.Q].content]}}o.slotId&&o.compInstanceId&&!e.deletingSlot&&t.unslotNodeFromInstance({node:o,slotId:o.slotId,instanceId:o.compInstanceId}),t.nodes.removeNode(h,n),t.tailwindCSS.deleteClassesForNode(h)}if(s){const e=t.components.byId[s];null===e||void 0===e||e.removePropDefinitionsForNodes([...new Set(d)])}}))}};Object.freeze(he);const ye=new class{constructor(){(0,a.Z)(this,"execute",(e=>{const{node:t,component:o,doc:n}=e;if(!o)throw new Error("Component not provided to add default prop definitions");if(!t.parentId)return;if(t.slotId||n.nodes.getSlotAndCompInstanceIdForNodeById(t.parentId).slotId)return;const s=n.nodes.byId[t.parentId];if((null===s||void 0===s?void 0:s.primitiveType)!==T.sO.TEXT){if(t.primitiveType===T.sO.IMAGE||t.primitiveType===T.sO.VIDEO){const e=t.attrs.src,s=t.attrs.alt;e&&n.addDefaultAttrPropDefinition({node:t,component:o,defaultValue:e.content,attrName:"src"}),s&&n.addDefaultAttrPropDefinition({node:t,component:o,defaultValue:s.content,attrName:"alt"})}if(t.primitiveType!==T.sO.TEXT&&t.primitiveType!==T.sO.BUTTON||(n.addDefaultContentPropDefinition(t,o),n.addDefaultLinkPropDefinition({node:t,comp:o})),t.primitiveType===T.sO.TEXTAREA||t.primitiveType===T.sO.TEXTINPUT){const e=t.attrs.placeholder;n.addDefaultAttrPropDefinition({node:t,component:o,defaultValue:e.content,attrName:"placeholder"})}}}))}};Object.freeze(ye);var me=o(53482),fe=o(26903),be=o(39078),ge=o(25074),Ie=o(7721);function ve(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function je(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?ve(Object(o),!0).forEach((function(t){(0,a.Z)(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):ve(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}const Ne=new class{constructor(){(0,a.Z)(this,"execute",(e=>{const{node:t,comp:o,type:n,defaultValue:s}=e,i=(0,Ie.r)(t),{link:r}=t.abilities;if(r||n)switch(n||r.type){case V.RZ.NAVLINK:case V.RZ.SECTION:break;case V.RZ.URL:const e=`link_${i.name}`,a=r?r.content.url:"",l=!r||r.content.newTab,c=o.createPropDefinition(je(je({},i),{},{name:e,defaultValue:s||("string"===typeof a?a:""),inputType:me.SO.LINK,locations:{[t.id]:(0,fe.B)({base:me.hD.ABILITY,sufix:"url"})}})),d=new be.P({content:{referenceType:"prop",id:c.id}});n?t.abilities.link=new ge.G({type:n,content:{url:d,newTab:l}}):r.content.url=d}}))}};function xe(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function Se(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?xe(Object(o),!0).forEach((function(t){(0,a.Z)(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):xe(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}Object.freeze(Ne);const we=new class{constructor(){(0,a.Z)(this,"execute",(e=>{const{node:t,component:o,defaultValue:n,attrName:s}=e,i=(0,Ie.r)(t),r=`${i.name}_${s}`,a=o.createPropDefinition(Se(Se({},i),{},{name:r,defaultValue:n,inputType:"src"===s?me.SO.IMAGE:me.SO.TEXT,locations:{[t.id]:(0,fe.B)({base:me.hD.ATTR,sufix:s})}}));t.attrs[s]=new be.P({content:{referenceType:"prop",id:a.id}})}))}};function Oe(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function Te(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?Oe(Object(o),!0).forEach((function(t){(0,a.Z)(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):Oe(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}Object.freeze(we);const _e=new class{constructor(){(0,a.Z)(this,"execute",((e,t)=>{if(!e.contentChildren||!Object.keys(e.contentChildren).length)return;const o=(0,Ie.r)(e),n=Object.keys(e.contentChildren)[0],s=e.contentChildren[n].content,i=t.createPropDefinition(Te(Te({},o),{},{defaultValue:s,locations:{[e.id]:(0,fe.B)({base:me.hD.CONTENT})}}));Object.keys(e.contentChildren).forEach((t=>{e.contentChildren&&delete e.contentChildren[t]}));const r=new be.P({content:{referenceType:"prop",id:i.id}});e.contentChildren[r.id]=r}))}};Object.freeze(_e);var Ee=o(3715);const De=new class{constructor(){(0,a.Z)(this,"execute",((e,t)=>{Object.values(t.locations).forEach((o=>{Object.values(o).forEach((o=>{const{base:n,sufix:s}=o;switch(n){case me.hD.CONTENT:const o=e.contentChildren;if(!o)break;Object.keys(o).forEach((e=>{s&&e!==s||(o[e]=new be.P({content:{referenceType:"prop",id:t.id},id:e}))}));break;case me.hD.ATTR:Object.keys(e.attrs).forEach((o=>{s&&o!==s||(e.attrs[o]=new be.P({content:{referenceType:"prop",id:t.id}}))}));break;case me.hD.ABILITY:Object.keys(e.abilities).forEach((o=>{const n=e.abilities[o],i=s;if(!(0,Ie.L)(n,i))return;const r=this.replaceStaticAbilityWithDynamic({ability:n,location:i,prop:t});r&&(e.abilities[o]=r)}));break;case me.hD.STYLE:}}))}))}))}replaceStaticAbilityWithDynamic(e){const{ability:t,prop:o,location:n}=e,{content:s}=t;switch(n){case"url":const e=s;if(!e.url)break;e.url=new be.P({content:{referenceType:"prop",id:o.id}});break;case"phone":const t=s;if(!t.phone)break;t.phone=new be.P({content:{referenceType:"prop",id:o.id}});break;case"mail":case"subject":const i=s;if(!i[n])break;i[n]=new be.P({content:{referenceType:"prop",id:o.id}})}return t}};Object.freeze(De);var Fe=o(76291);function Ce(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function Ae(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?Ce(Object(o),!0).forEach((function(t){(0,a.Z)(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):Ce(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}const ke=new class{execute(e){const{doc:t,sourceCompId:o,targetCompId:n,node:s,nodeClone:i}=e,r=t.components.byId[o];if(!r)return;const a=t.components.byId[n];a&&Object.keys(r.propDefinitions).forEach((e=>{const t=r.propDefinitions[e];if(!t.locations[s.id])return;const o=Ae({},t.locations[s.id]),n=Ae(Ae({},JSON.parse(JSON.stringify(t))),{},{id:(0,q.Z)(),locations:{[i.id]:o},name:a.getUniquePropDefinitionName(t.name)});a.propDefinitions[n.id]=n,Object.values(o).forEach((t=>{const{base:o,sufix:s}=t;switch(o){case me.hD.CONTENT:const t=i.contentChildren;if(!t)return;Object.keys(t).forEach((o=>{const i=t[o];s&&o!==s||"dynamic"===i.type&&i.content.id===e&&(i.content.id=n.id)}));break;case me.hD.ATTR:Object.keys(i.attrs).forEach((t=>{const o=i.attrs[t];s&&t!==s||"dynamic"===o.type&&o.content.id===e&&(o.content.id=n.id)}));break;case me.hD.ABILITY:Object.keys(i.abilities).forEach((t=>{const o=i.abilities[t],r=s;if(!(0,Ie.L)(o,r))return;const{type:a,content:l}=o;switch(a){case Fe.R.URL:const t=l;"string"!==typeof t.url&&t.url.content.id===e&&(t.url.content.id=n.id);break;case Fe.R.PHONE:const o=l,{phone:s}=o;"string"!==typeof s&&s.content.id===e&&(s.content.id=n.id);break;case Fe.R.MAIL:const i=l,{body:r,mail:a,subject:c}=i;"string"!==typeof r&&(null===r||void 0===r?void 0:r.content.id)===e&&(r.content.id=n.id),"string"!==typeof a&&a.content.id===e&&(a.content.id=n.id),"string"!==typeof c&&(null===c||void 0===c?void 0:c.content.id)===e&&(c.content.id=n.id)}}));break;case me.hD.STYLE:}}))}))}};Object.freeze(ke);const Pe=new class{constructor(){(0,a.Z)(this,"execute",(e=>{const{rootNodeId:t,sourceCompId:o,targetCompId:n,doc:s,nodeInterceptor:i=(()=>null)}=e,r={};if(!s.nodes.byId[t])throw new Error(`Could not clone hierarchy. Node does not exist - ${t}`);return s.nodes.bfs(t,(e=>{var a,l;if(e.primitiveType===T.sO.SLOT)return;const c=s.cloneNode({nodeId:e.id});if(!c)throw new Error(`Failed in cloning the node - ${e.id}`);if(c.name=e.name,c.pos=this.computeNewNodePosition(e,t,s),r[e.id]=c.id,e.parentId){const o=r[e.parentId];o?(s.nodes.byId[o].childrenIds[c.id]=!0,c.parentId=o):e.id===t&&(s.nodes.byId[e.parentId].childrenIds[c.id]=!0,c.parentId=e.parentId)}e.slotId&&(c.slotId=e.slotId,c.compInstanceId=e.compInstanceId,e.compInstanceId&&s.slotNodeInInstance({instanceId:e.compInstanceId,node:c,slotId:e.slotId})),ke.execute({node:e,nodeClone:c,sourceCompId:o,targetCompId:n,doc:s}),s.addNode(c),s.nodes.nodeIsCompInstance(e)&&(s.updatePageAndComponentRelations({sourceNodeId:e.id,newNodeId:c.id,doc:s}),s.cloneSlottedNodes({sourceInstanceId:e.id,targetInstanceId:c.id,doc:s})),s.assets.copyAssetsInNodeRelationToNode({sourceNodeId:e.id,targetNodeId:c.id});const d=null===(a=c.attrs)||void 0===a||null===(l=a.id)||void 0===l?void 0:l.content;d&&de.execute({sectionId:d,compId:n,nodeId:c.id},s),i(e,c)})),r}))}computeNewNodePosition(e,t,o){if(e.id!==t)return e.pos;const n=o.nodes.getNextSibling(e);return n?(0,w.Dd)(e.pos,n.pos):(parseFloat(e.pos)+Number.MAX_SAFE_INTEGER).toString()}};Object.freeze(Pe);const Ue=new class{constructor(){(0,a.Z)(this,"execute",((e,t)=>{const o=t.components.byId[e];if(!o)throw new Error(`Could not find target component for duplicate operation - ${e}`);if(!o.rootNodeId)throw new Error(`Componnt does not have a root node id - ${e}`);const n=t.components.cloneComponent(e);return n.title=t.getUniqueCompOrPageName(n.title),n.pos=t.components.getPositionAfterComp(o),n.sectionIds={},n.propDefinitions={},t.addComponent({component:n}),Pe.execute({doc:t,sourceCompId:o.id,targetCompId:n.id,rootNodeId:o.rootNodeId,nodeInterceptor:(e,s)=>{o.rootNodeId===e.id&&(t.components.byId[n.id].rootNodeId=s.id,t.nodes.byId[s.id].compIdOfRootNode=n.id)}}),n.id}))}};function Le(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function Ze(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?Le(Object(o),!0).forEach((function(t){(0,a.Z)(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):Le(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}Object.freeze(Ue);const Re=new class{constructor(){(0,a.Z)(this,"execute",(e=>{var t;const{pageId:o,duplicatedSocialImage:n,doc:s}=e,i=s.pages.byId[o];if(!i)throw new Error("Could not find target page for duplicate operation");n&&s.assets.add(n);const r=Object.values(s.pages.byId).map((e=>{var t;return null===e||void 0===e||null===(t=e.settings)||void 0===t?void 0:t.url})).filter((e=>e)),a=s.getUniqueCompOrPageName(i.title),l=`/${(0,v.N0)(a)}`;let c=null!==(t=i.settings)&&void 0!==t&&t.url?(0,v.Zu)(r,i.settings.url):void 0;!c&&r.includes(l)&&(c=(0,v.Zu)(r,l));const d=Ze(Ze({},i.settings),{},{url:c,socialImage:null===n||void 0===n?void 0:n.id}),p=s.pages.clonePage(o);return p.pos=s.pages.getPositionAfterPage(i),p.title=a,p.settings=d,s.addPage({page:p}),i.rootNodeId&&Pe.execute({doc:s,sourceCompId:i.id,targetCompId:p.id,rootNodeId:i.rootNodeId,nodeInterceptor:(e,t)=>{var o,n;i.rootNodeId===e.id&&(s.pages.byId[p.id].rootNodeId=t.id,s.nodes.byId[t.id].compIdOfRootNode=p.id);const r=null===(o=e.attrs)||void 0===o||null===(n=o.id)||void 0===n?void 0:n.content;r&&de.execute({sectionId:r,compId:p.id,nodeId:t.id},s)}}),p.id}))}};Object.freeze(Re);const Me=new class{constructor(){(0,a.Z)(this,"execute",(e=>{var t;const{nodeId:o,doc:n}=e;if(!n)return null;const s=n.nodes.byId[o];if(!s||!n.nodes.nodeIsCompInstance(s))throw new Error("Component Instance to detach is non existent");const i=n.components.byId[s.compIdOfCompInstance];if(!i)throw new Error("Component Instance to detach not attached to a component");const r=Object.keys(i.slots||{}).map((e=>n.nodes.byId[e])),a=s.compIdOfCompInstance;if(!a)throw new Error("Component Id non existent");const l=n.components.byId[a];if(!l)throw new Error("Component non existent");const c=n.nodes.byId[l.rootNodeId];if(!c)throw new Error(`Root Node of the comppnent is missing from the nodes - ${l.rootNodeId}`);const d=[],p=null===(t=s.attrs[ue.Q])||void 0===t?void 0:t.content,u=s.parentOrSlotId;if(s.slotId&&s.compInstanceId&&n.unslotNodeFromInstance({node:s,instanceId:s.compInstanceId,slotId:s.slotId}),u){const e=n.copyNodesToTarget({targetId:u,nodes:[n.nodes.byId[c.id]],copyBefore:s,compInstanceId:s.compInstanceId});d.push(...e.copiedNodes),n.nodes.byId[e.nodeIdsMap[c.id]].compIdOfRootNode=null;const t=n.getComponentIdForNode(u);n.removeUsedComponentRelation({toRemoveComponentId:t,linkedComponentId:a}),Object.keys(e.nodeIdsMap).forEach((t=>{const o=d.find((o=>o.id===e.nodeIdsMap[t]));null!==o&&void 0!==o&&o.renderingConditions&&(o.renderingConditions=null);const i=r.find((e=>(null===e||void 0===e?void 0:e.parentId)===t));if(i&&o){var a;const e=n.nodes.getNextSibling(i);n.moveNodesToTarget({nodes:Object.keys((null===(a=s.slottedNodes)||void 0===a?void 0:a[i.id])||{}).map((e=>n.nodes.byId[e])),targetId:o.id,nextSibling:e})}const c=null===o||void 0===o?void 0:o.attrs.src;if(!c||!o)return;const p=Object.values(l.propDefinitions).find((e=>Object.values(e.locations[t]||{}).some((e=>"attr"===e.base&&"src"===e.sufix))));null!==p&&void 0!==p&&p.defaultValue&&n.syncAssetInNodeRelationByNewContent({oldContent:new W.F({content:p.defaultValue}),newContent:c,node:o})}))}return n.assets.removeAssetsRelationToNode(s.id),n.nodes.removeNode(s.id),delete i.instantiatedByNodes[s.id],"string"===typeof p&&delete i.styleSetDefinitions[p],d}))}};Object.freeze(Me);var He=o(91164);const $e=["parentNode","addedNodes","styleManagementFlow"];function Be(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function Ge(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?Be(Object(o),!0).forEach((function(t){(0,a.Z)(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):Be(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}const ze=new class{constructor(){(0,a.Z)(this,"execute",((e,t)=>{var o;const{parentNode:n,addedNodes:s,styleManagementFlow:i}=e,r=(0,He.Z)(e,$e),a=(null===(o=n.styles[V.X7.DISPLAY])||void 0===o?void 0:o.content.toString().indexOf("flex"))>-1,l=n.primitiveType===T.sO.COMPONENT;if(!a||!n.fakeSize||l)return;if(s.every((e=>"fixed"===i.getCurrentStyleValueByKeyForNode(e.id,["position"]).position)))return;const{widthBiggerOrEqualToDefault:c,heightBiggerOrEqualToDefault:d}=this.checkForBiggerThanDefaultElements(s,t);this.shouldDeleteFakeHeight(Ge({parentNode:n,heightBiggerOrEqualToDefault:d},r))&&delete n.styles[V.X7.HEIGHT],this.shouldDeleteFakeWidth(Ge({parentNode:n,widthBiggerOrEqualToDefault:c},r))&&delete n.styles[V.X7.WIDTH]})),(0,a.Z)(this,"checkForBiggerThanDefaultElements",((e,t)=>{let o=!1,n=!1;for(const c of e){var s,i;if(o&&n)break;if(!c)break;let e=null===(s=c.styles[V.X7.HEIGHT])||void 0===s?void 0:s.content,d=null===(i=c.styles[V.X7.WIDTH])||void 0===i?void 0:i.content;if(t.nodes.nodeIsCompInstance(c)){var r;const o=null===(r=t.components.byId[c.compIdOfCompInstance])||void 0===r?void 0:r.rootNodeId;if(o){var a,l;const n=t.nodes.byId[o];e=null===(a=n.styles[V.X7.HEIGHT])||void 0===a?void 0:a.content,d=null===(l=n.styles[V.X7.WIDTH])||void 0===l?void 0:l.content}}o||(e?o=Number.parseInt(e.toString().slice(0,-2),10)>=Number.parseInt(K.xD.slice(0,-2),10):c.primitiveType===T.sO.IMAGE&&(o=!0)),d&&!n&&(n=Number.parseInt(d.toString().slice(0,-2),10)>=Number.parseInt(K.pF.slice(0,-2),10))}return{widthBiggerOrEqualToDefault:n,heightBiggerOrEqualToDefault:o}})),(0,a.Z)(this,"shouldDeleteFakeHeight",(e=>{var t;const{heightBiggerOrEqualToDefault:o,parentNode:n,addingFirstChildren:s,dropPosition:i}=e;if(o)return!0;return"column"===(null===(t=n.styles[V.X7.FLEX_DIRECTION])||void 0===t?void 0:t.content)&&s?!(i&&-1===i.indexOf("top")):void 0})),(0,a.Z)(this,"shouldDeleteFakeWidth",(e=>{var t,o;const{widthBiggerOrEqualToDefault:n,parentNode:s,addingFirstChildren:i,dropPosition:r}=e;if((null===(t=s.styles[V.X7.WIDTH])||void 0===t?void 0:t.content)===K.V0)return!1;if(n)return!0;if("row"===(null===(o=s.styles[V.X7.FLEX_DIRECTION])||void 0===o?void 0:o.content)&&i){if(r&&-1===r.indexOf("left"))return;return!0}}))}};Object.freeze(ze);const We=new class{constructor(){(0,a.Z)(this,"execute",((e,t)=>{var o,n,s;const i=t.nodes.byId[e];if(!i||!i.parentId)return;const r=t.nodes.byId[i.parentId];if(!r)return;const a=Object.keys(r.childrenIds).length,l=(null===(o=r.styles[V.X7.DISPLAY])||void 0===o?void 0:o.content.toString().indexOf("flex"))>-1;if(1!==a||!l||!r.fakeSize)return;const c=null===(n=r.styles[V.X7.HEIGHT])||void 0===n?void 0:n.content,d=null===(s=r.styles[V.X7.WIDTH])||void 0===s?void 0:s.content;c||(r.styles[V.X7.HEIGHT]=new W.F({content:r.primitiveType===T.sO.COMPONENT?K.K3:K.xD})),d||(r.styles[V.X7.WIDTH]=new W.F({content:K.pF})),r.fakeSize=!0}))}};Object.freeze(We);var Ve=o(5360),Ke=o(37326);const Je=new class{constructor(){(0,a.Z)(this,"execute",(e=>{var t;const{doc:o,nodeId:n,targetNodeId:s}=e;if(!o)return null;const i=o.nodes.byId[n];if(!i)return null;const r=null===(t=i.attrs[ue.Q])||void 0===t?void 0:t.content;let a="";if(o.nodes.nodeIsCompInstance(i)&&r&&s){const e=o.components.byId[i.compIdOfCompInstance];a=e.getUniqueStyleSetName(o);const t=o.cloneStyleSetDefinition({targetInstanceId:s,instanceId:n,className:r,doc:o});t&&(e.styleSetDefinitions[a]=t)}return Object.keys(i.attrs||{}).reduce(((e,t)=>(e[t]=i.attrs[t].clone(),t.includes(ue.Q)&&(e[t].content=a),e)),{})}))}};Object.freeze(Je);const Xe=new class{constructor(){(0,a.Z)(this,"execute",(e=>{const{doc:t,nodeId:o,removeRootStatus:n}=e;if(!t)return null;const s=t.nodes.byId[o];if(!s)return null;let i;var r,a,l;t.nodes.nodeIsCompInstance(s)?i=new _.F({primitiveType:s.primitiveType,compIdOfRootNode:n?null:s.compIdOfRootNode,semanticType:s.semanticType,contentChildren:Object.keys(s.contentChildren||{}).reduce(((e,t)=>{var o;if(null===(o=s.contentChildren)||void 0===o||!o[t])throw new Error(`Could not clone content children for node with id ${s.id}`);return e[t]=s.contentChildren[t].clone(),e}),{}),pos:s.pos,name:s.name,fakeSize:null!==(r=s.fakeSize)&&void 0!==r?r:void 0,compIdOfCompInstance:s.compIdOfCompInstance,abilities:s.cloneAbilities()}):i=new O.H({primitiveType:s.primitiveType,devComponentPath:s.devComponentPath||void 0,compIdOfRootNode:n?null:s.compIdOfRootNode,semanticType:s.semanticType,contentChildren:Object.keys(s.contentChildren||{}).reduce(((e,t)=>{var o;if(null===(o=s.contentChildren)||void 0===o||!o[t])throw new Error(`Could not clone content children for node with id ${s.id}`);return e[t]=s.contentChildren[t].clone(),e}),{}),pos:s.pos,name:s.name,fakeSize:null!==(a=s.fakeSize)&&void 0!==a?a:void 0,compIdOfSlot:s.compIdOfSlot,abilities:s.cloneAbilities(),customCodeSnippet:s.customCodeSnippet,html:null!==(l=s.html)&&void 0!==l?l:void 0});const c=Je.execute({nodeId:o,doc:t,targetNodeId:i.id});c&&(i.attrs=c);const d=Ve.S.execute({targetNodeId:i.id,nodeId:o,doc:t});d&&(i.styles=d);const p=Ke.l.execute({targetNodeId:i.id,nodeId:o,doc:t});return p&&(i.referencedStyles=p),t.tailwindCSS.cloneTailwindCSSFromNode(o,i.id),i}))}};Object.freeze(Xe);var Ye,qe,Qe,et,tt,ot=o(71919);const nt=new(Ye=(0,d.f3)("nodeStyleManagmentFlow"),qe=(0,d.f3)("notificationsManagementFlow"),Qe=class{constructor(){(0,r.Z)(this,"nodeStyleManagementFlow",et,this),(0,r.Z)(this,"notificationsManagementFlow",tt,this),(0,a.Z)(this,"execute",(e=>{const{doc:t,nodes:o,targetId:n,nextSibling:s,dropPosition:i,ignoreAcceptanceCheck:r=!1,useContentAsNode:a=!1,targetCompInstanceId:l}=e,c=t.nodes.byId[n];if(!o.length)return;let d;if(s){const e=t.nodes.getPrevSibling(s);d=(0,w.Dd)(s.pos,(null===e||void 0===e?void 0:e.pos)||"0")}else{const e=t.nodes.getLastChild(c,l);d=(parseFloat((null===e||void 0===e?void 0:e.pos)||"0")+Number.MAX_SAFE_INTEGER).toString()}const p=a&&(0,w.j1)(t,c),u=!t.nodes.getFirstChild(c),h=o.map((e=>e.id)),y=t.nodes.getOrderedTopLevelNodes(h),m=[],f=t.getComponentIdForNode(h[0]),b=t.getComponentIdForNode(n);if(!f||!b)throw new Error("Target or Source component not found");const g=t.getProjectPageOrComponent(b),v=t.getProjectPageOrComponent(f);if(!g||!v)throw new Error("Target or source comp nout found");const j=g.id!==v.id;if(j&&v instanceof I.n&&h.forEach((e=>{t.nodes.bfs(e,(o=>{g instanceof I.n?t.moveNodePropDefinitionToTarget({doc:t,sourceCompId:f,targetCompId:b,nodeId:o.id}):Object.values(v.propDefinitions).forEach((n=>{n.locations[o.id]&&(t.replaceDynamicPropWithStaticNode({node:o,propDefinition:n,propId:n.id,staticValue:n.defaultValue}),1===Object.keys(n.locations).length?delete v.propDefinitions[n.id]:delete n.locations[e])}))}))})),y.forEach((e=>{const o=t.nodes.byId[e];if(!o)return;if(t.nodes.nodeIsCompInstance(o)&&j){if(t.components.checkIfComponentsHaveCircularDependency(o.compIdOfCompInstance,g.id))return void this.notificationsManagementFlow.createNotification(ot.k.ERROR,"Could not move component because it would create a circular dependency.");t.removeUsedComponentRelation({toRemoveComponentId:v.id,linkedComponentId:o.compIdOfCompInstance}),t.addUsedComponentRelation({toAddComponentId:g.id,linkedComponentId:o.compIdOfCompInstance})}if(!o.primitiveType||!r&&!t.isNodeAcceptingChild(c,o))return;if(t.nodes.getDescendents(o.id).find((e=>e.id===n)))return;const i=o.parentOrSlotId;if(!i)throw new Error("Attempted to move a node without a parent! Could it be root?");t.restoreBGColor(o,c),t.restoreParentNodesFakeSize(e);const a=c.primitiveType===T.sO.SLOT,p=o.compInstanceId,u=t.nodes.byId[i],h=u.primitiveType===T.sO.SLOT;if(u.id!==c.id||l!==p)if(h?t.unslotNodeFromInstance({node:o,instanceId:p,slotId:u.id}):delete u.childrenIds[o.id],a){if(!t.slotNodeInInstance({node:o,instanceId:l,slotId:c.id}))return}else c.childrenIds[o.id]=!0;a?(o.parentId=null,o.slotId=c.id,o.compInstanceId=l):(delete o.slotId,delete o.compInstanceId,o.parentId=n),o.pos=d,m.push(o),Object.keys(u.childrenIds).length||u.primitiveType!==T.sO.BUTTON||he.execute({nodeIds:[i],withSubtree:!1,compId:f},t),d=s?(0,w.Dd)(o.pos,s.pos):(parseFloat(o.pos)+Number.MAX_SAFE_INTEGER).toString()})),t.removeDefaultBorder(u,c),m.length&&t.removeParentNodeFakeSize({parentNode:c,addedNodes:m,addingFirstChildren:u,dropPosition:i,styleManagementFlow:this.nodeStyleManagementFlow}),p){if("before"===i){const e=t.nodes.getLastChild(c,l);p.pos=(parseFloat((null===e||void 0===e?void 0:e.pos)||"0")+Number.MAX_SAFE_INTEGER).toString()}else{const e=t.nodes.getFirstChild(c,l);p.pos=(0,w.Dd)("0",(null===e||void 0===e?void 0:e.pos)||"0")}t.nodes.add(p)}}))}},et=(0,l.Z)(Qe.prototype,"nodeStyleManagementFlow",[Ye],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),tt=(0,l.Z)(Qe.prototype,"notificationsManagementFlow",[qe],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Qe);function st(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function it(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?st(Object(o),!0).forEach((function(t){(0,a.Z)(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):st(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}Object.freeze(nt);const rt=new class{constructor(){(0,a.Z)(this,"execute",(e=>{const{sourceCompId:t,targetCompId:o,nodeId:n,doc:s}=e,i=s.components.byId[t],r=s.components.byId[o];if(!i)throw new Error("Source comp was not found");if(!r)throw new Error("Target comp was not found");Object.keys(i.propDefinitions).forEach((e=>{const t=i.propDefinitions[e];if(t.locations[n]){const o=it(it({},JSON.parse(JSON.stringify(t))),{},{name:r.getUniquePropDefinitionName(t.name)});r.propDefinitions[e]=o,1===Object.keys(t.locations).length?delete i.propDefinitions[e]:delete t.locations[n]}}))}))}};Object.freeze(rt);var at=o(28132);class lt{constructor(e){(0,a.Z)(this,h.t1,void 0),(0,a.Z)(this,"id",void 0),(0,a.Z)(this,"accessType",void 0),(0,a.Z)(this,"account",void 0),(0,a.Z)(this,"invitedEmail",void 0),(0,a.Z)(this,"permissionLevel",void 0),(0,a.Z)(this,"meta",void 0);const{id:t,accessType:o,account:n,invitedEmail:s,permissionLevel:i}=e||{};this.id=null!==t&&void 0!==t?t:(0,q.Z)(),this.accessType=o||at.Z.WRITE,this.account=n||null,this.invitedEmail=s||"",this.permissionLevel=i||at.z.PROJECT}fromJSON(e){const{id:t,accessType:o,permissionLevel:n,account:s,invitedEmail:i,meta:r}=e;return this.id=t,this.accessType=o,this.permissionLevel=n,this.account=s,this.invitedEmail=i,this.meta=r,this}toJSON(){return{id:this.id,accessType:this.accessType,permissionLevel:this.permissionLevel,account:this.account,invitedEmail:this.invitedEmail}}}function ct(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}class dt{constructor(){(0,a.Z)(this,h.t1,void 0),(0,a.Z)(this,"byId",{})}add(e){this.byId[e.id]=(new lt).fromJSON(function(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?ct(Object(o),!0).forEach((function(t){(0,a.Z)(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):ct(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}({},e))}setAll(e){this.byId={},e.forEach((e=>{this.add(e)}))}remove(e){delete this.byId[e]}getAll(){return Object.values(this.byId)}getWorkspaceOwner(){return Object.values(this.byId).find((e=>e.accessType===at.Z.OWNER))}toJSON(){return{byId:Object.keys(this.byId).reduce(((e,t)=>{var o;return null!==(o=this.byId[t])&&void 0!==o&&o.toJSON?e[t]=this.byId[t].toJSON():e[t]=JSON.parse(JSON.stringify(this.byId[t])),e}),{})}}fromJSON(e){if(this.byId={},!e)return;const{byId:t={}}=e;if(!t||"object"!==typeof t)return;const o=Object.keys(t||{});let n="",s={};for(let i=0;i<o.length;i+=1)n=o[i],s=t[n],this.byId[n]=(new lt).fromJSON(s)}applyPatch(e){const{pathArray:t,value:o}=e;2===t.length&&"byId"===t[0]&&(o?this.byId[t[1]]=(new lt).fromJSON(o):delete this.byId[t[1]])}}const pt=new class{constructor(){(0,a.Z)(this,"execute",(e=>{const{nodeIds:t,doc:o,freestyleParams:n}=e;if(!o.nodes.areNodesSiblings(t))throw new Error("Attempted to group nodes that are not siblings");const s=o.nodes.orderChildrenIds(t).map((e=>o.nodes.byId[e])),i=s[0],r=i.parentOrSlotId,{compInstanceId:a}=o.nodes.getSlotAndCompInstanceIdForNodeById(i.id);if(!i||!r)return null;const l=o.nodes.byId[r];if(!l)return null;const c=new O.H({semanticType:T.iX.DIV,primitiveType:T.sO.CONTAINER,fakeSize:!1});n&&(c.styles.position=new W.F({content:"absolute"}),c.styles.left=new W.F({content:`${n.left}px`}),c.styles.top=new W.F({content:`${n.top}px`}),c.styles.width=new W.F({content:`${n.width}px`}),c.styles.height=new W.F({content:`${n.height}px`}));const d=l.styles.display;if(d instanceof W.F&&"flex"===d.content){c.styles.display=new W.F({content:d.content});const e=l.styles.flexDirection;e instanceof W.F&&(c.styles.flexDirection=new W.F({content:e.content}));const t=l.styles.justifyContent;t instanceof W.F&&(c.styles.justifyContent=new W.F({content:t.content}));const o=l.styles.alignItems;o instanceof W.F&&(c.styles.alignItems=new W.F({content:o.content}))}let p=!1,u=!1;s.forEach((e=>{var t,o;p||"100%"!==(null===(t=e.styles.width)||void 0===t?void 0:t.content)||(p=!0),u||"100%"!==(null===(o=e.styles.height)||void 0===o?void 0:o.content)||(u=!0)})),u&&(c.styles.height=new W.F({content:"100%"})),p&&(c.styles.width=new W.F({content:"100%"}));const h=o.nodes.getNextSibling(i)||null;return o.addNodesToParentOrStage({nodes:[c],parentId:l.id,nextSibling:h,compInstanceId:a}),nt.execute({nodes:s,targetId:c.id,targetCompInstanceId:a,doc:o}),c.id}))}};Object.freeze(pt);const ut=new class{constructor(){(0,a.Z)(this,"execute",(e=>{const{nodeId:t,doc:o}=e,n=o.nodes.byId[t];if(!n)throw new Error("Node not found");const s=n.parentOrSlotId;if(!s)return;if(n.compIdOfRootNode)throw new Error("Attempted to ungroup component root");if(n.primitiveType!==T.sO.CONTAINER)throw new Error("Attempted to ungroup element that is not a container");const i=[];Object.keys((null===n||void 0===n?void 0:n.childrenIds)||{}).forEach((e=>{const t=o.nodes.byId[e];t&&i.push(t)}));const r=o.nodes.getNextSibling(n);nt.execute({nodes:i,targetId:s,nextSibling:r,targetCompInstanceId:o.nodes.getSlotAndCompInstanceIdForNodeById(n.id).compInstanceId,doc:o}),o.deleteNodesById({nodeIds:[t],withSubtree:!1})}))}};Object.freeze(ut);var ht=o(26470);function yt(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function mt(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?yt(Object(o),!0).forEach((function(t){(0,a.Z)(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):yt(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}class ft{constructor(){(0,a.Z)(this,h.t1,void 0),(0,a.Z)(this,"remote",{}),(0,a.Z)(this,"staged",{[$.cY]:{byId:{}}}),(0,a.Z)(this,"local",{[$.cY]:{byId:{}}}),(0,a.Z)(this,"conflicts",{}),(0,a.Z)(this,"isAddingExternalDependency",null),(0,a.Z)(this,"lastSync",null),(0,a.Z)(this,"lastSave",null)}getNextFileId(e,t){const o=this.local[t].byId||{},n=Object.keys(o),s=n.indexOf(e);if(-1===s)return null;for(let i=s+1;i<n.length-1;i++){const e=n[i];if(e.split(".").length>1)return e}return null}getFirstFileId(e){const t=this.local[e].byId||{};return Object.keys(t).find((e=>e.split(".").length>1))||null}getUniqueName(e,t){const{byId:o={}}=this.local[t],n=Object.keys(o);let s="";const i=e.split("."),r=1===i.length;r||(s=i[i.length-1],e=i.slice(0,i.length-1).join("."));let a=1;for(;n.some((t=>t===(r?e:`${e}.${s}`)));)e+=a,a+=1;return r?e:`${e}.${s}`}getFileChildren(e,t){const{byId:o={}}=this.local[t];return Object.keys(o).filter((t=>t!==e&&0===t.indexOf(`${e}/`)))}getRemoteChildren(e,t){const{byId:o={}}=this.remote[t];return Object.keys(o).filter((t=>t!==e&&0===t.indexOf(`${e}/`)))}flatFiles(e){const{includeFolders:t=!1,assets:o={},branch:n}=e,{byId:s={}}=this.local[n]||{},i=mt(mt({},s),o);return Object.keys(i||{}).reduce(((e,o)=>{const n=(0,ht.parse)(o);return(t||n.ext)&&(e[o]=i[o].code),e}),{})}addConflict(e,t){this.conflicts[e]=t}pack(e){const{filesToPack:t,withContent:o=!0,toDeploy:n=!1,branch:s,assets:i,customFiles:r={}}=e||{};let a=t;if(!a){if(!s)throw new Error("Branch name must be provided if files to parse are not given");const{byId:e}=this.local[s]||{};a=mt(mt({},e),i)}if(!a)return null;const l=Object.keys(r||{}).reduce(((e,t)=>{const o=r[t];return e[(0,ht.join)($.y$,o.path,o.name)]={code:o.content},e}),{});if(a=mt(mt({},a),l),!Object.keys(a).length)return null;return Object.keys(a).reduce(((e,t)=>{const s=t.split("/").filter((e=>e));s.shift();let i=e;return s.forEach(((e,r)=>{const l=(0,ht.parse)(e);if(l.ext){const e=l.name;if(r===s.length-1){var c;const s=null===(c=a)||void 0===c?void 0:c[t],r=l.ext.substring(1);return void i.files.push(mt(mt({},(o||n)&&{content:null===s||void 0===s?void 0:s.code}),{},{fileType:r,status:null===s||void 0===s?void 0:s.status,name:e},!n&&{isProtected:null===s||void 0===s?void 0:s.is_protected}))}}const d=i.subFolders.find((t=>t.name===e));if(d)i=d;else{const t={name:e,files:[],subFolders:[]};i.subFolders.push(t),i.subFolders.sort(((e,t)=>e.name.localeCompare(t.name))),i=t}})),e}),{name:$.y$,files:[],subFolders:[]})}toJSON(){return{local:JSON.parse(JSON.stringify(this.local)),remote:JSON.parse(JSON.stringify(this.remote)),staged:JSON.parse(JSON.stringify(this.staged)),conflicts:JSON.parse(JSON.stringify(this.conflicts)),isAddingExternalDependency:this.isAddingExternalDependency,lastSync:this.lastSync,lastSave:this.lastSave}}fromJSON(e){if(this.local={[$.cY]:{byId:{}}},this.remote={},!e)return;const{local:t={[$.cY]:{byId:{}}},staged:o={[$.cY]:{byId:{}}},conflicts:n={},remote:s={},lastSync:i=null,lastSave:r=null,isAddingExternalDependency:a}=e;t&&"object"===typeof t&&Object.keys(t||{}).length&&(this.local=t,this.staged=o,this.conflicts=n,this.isAddingExternalDependency=a||null,this.lastSync=i,this.lastSave=r,s&&"object"===typeof s&&Object.keys(s||{}).length&&(this.remote=s))}applyPatch(e){const{pathArray:t,value:o,op:n}=e;if(1===t.length){if("lastSave"===t[0])return void(this.lastSave=o||null);"isAddingExternalDependency"===t[0]&&(this.isAddingExternalDependency=o||null)}if("add"===n&&4===t.length){let e=null;for(let o=0;o<t.length-1;o++)e=e?e[t[o]]:this[t[o]];return e[t[t.length-1]]&&delete e[t[t.length-1]],void(e[t[t.length-1]]=o)}if("remove"===n&&4===t.length){let e=null;for(let o=0;o<t.length-1;o++)e=e?e[t[o]]:this[t[o]];return e[t[3]]={content:""},void delete e[t[3]]}if("remove"===n&&2===t.length&&"conflicts"===t[0]&&(this.conflicts[t[1]]={byId:{}},delete this.conflicts[t[1]]),"remove"===n&&3===t.length&&"actionInProgress"===t[2]&&(this.conflicts[t[1]].actionInProgress=!1),"replace"===n&&5===t.length&&"code"===t[4]){let e=null;for(let o=0;o<t.length-1;o++)e=e?e[t[o]]:this[t[o]];return delete e.code,void(e.code=`${o}`)}if("replace"!==n||2!==t.length||"conflicts"!==t[0]){if(("replace"===n||"add"===n)&&5===t.length&&"conflicts"===t[0]){if("replace"===n&&5===t.length){let e=null;for(let o=0;o<t.length-1;o++)e=e?e[t[o]]:this[t[o]];e[t[4]]=void 0,e[t[4]]=o}if("add"===n){let e=null,n=0;for(;n<t.length-1;)e=e?e[t[n]]:this[t[n]],n+=1;if(!e)return;return e[t[n]]=void 0,void(e[t[n]]=o)}if("replace"===n&&5===t.length){let e=null;for(let o=0;o<t.length-1;o++)e=e?e[t[o]]:this[t[o]];switch(t[4]){case"code":return delete e.code,void(e.code=`${o}`);case"synced_at":return void(e.synced_at=o);default:0}}}}else this.conflicts[t[1]]=o}}var bt,gt,It,vt=o(40615),jt=o(78460);function Nt(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function xt(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?Nt(Object(o),!0).forEach((function(t){(0,a.Z)(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):Nt(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}let St=(bt=(0,d.f3)("positioningService"),gt=class{constructor(e){if((0,a.Z)(this,h.t1,void 0),(0,r.Z)(this,"positioningService",It,this),(0,a.Z)(this,"byId",{}),(0,a.Z)(this,"categoriesById",{}),this.categoriesById[0])return;jt.XL.forEach((e=>{this.categoriesById[e.id]=e}));const t=(0,jt.fE)(e);Object.entries(t).forEach((([e,t])=>{const o=new vt.q({id:(0,q.Z)(),name:e,pos:this.positioningService.getHighestAvailablePosition({entitiyCollection:this.byId}),categoryId:jt.XL[0].id,usedInNodes:{},content:(0,w.bb)(t),isDefault:!0});this.byId[o.id]=o}))}getAll(){return Object.values(this.byId||{})}getSortedClassesListByPos(){return this.positioningService.orderEntities({entitiyCollection:this.byId}).reduce(((e,t)=>(e[t]=this.byId[t],e)),{})}getSortedClassesListByName(){return Object.values(this.byId).sort(((e,t)=>e.name.toLowerCase()>t.name.toLowerCase()?1:-1)).reduce(((e,t)=>(e[t.id]=t,e)),{})}createNewProjectClass(e){this.byId[e.id]=e}getUniqueClassName(e){const t=Object.values(this.byId).map((e=>(null===e||void 0===e?void 0:e.name)||""));return(0,v.Zu)(t,e)}deleteNodeReferenceFromClasses(e){Object.values(this.byId).forEach((t=>{t.usedInNodes[e]&&delete t.usedInNodes[e]}))}fromJSON(e){(null!==e&&void 0!==e&&e.byId||null!==e&&void 0!==e&&e.categoriesById)&&(this.byId={},this.categoriesById={},Object.values(e.byId||{}).forEach((e=>{const t=new vt.q(xt(xt({},e),{},{content:(0,w.bb)(e.content),conditions:this.mapOverConditions(e.conditions)}));this.byId[t.id]=t})),Object.values(e.categoriesById||{}).forEach((e=>{this.categoriesById[e.id]=e})))}mapOverConditions(e){return Object.values(e).reduce(((e,t)=>(e[t.id]=xt(xt({},t),{},{content:(0,w.bb)(t.content)}),e)),{})}toUIDL(e){return Object.values(this.getSortedClassesListByPos()).reduce(((t,o)=>{const n=o.toUIDL(null===e||void 0===e?void 0:e[o.id]);return t[o.name]=n,t}),{})}toJSON(){return JSON.parse(JSON.stringify({byId:this.byId,categoriesById:this.categoriesById}))}applyPatch(e){const{op:t,pathArray:o,value:n}=e;switch(t){case"add":if(2===o.length&&"byId"===o[0]&&n){const e=n,t=new vt.q(xt(xt({},e),{},{content:(0,w.bb)(e.content),conditions:Object.values(e.conditions||{}).reduce(((e,t)=>(e[t.id]=xt(xt({},t),{},{content:(0,w.bb)(t.content)}),e)),{})}));this.byId[t.id]=t}return;case"remove":return void(2===o.length&&"byId"===o[0]&&delete this.byId[o[1]]);default:return}}},It=(0,l.Z)(gt.prototype,"positioningService",[bt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),gt);var wt=o(96486),Ot=o.n(wt),Tt=o(39856);function _t(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function Et(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?_t(Object(o),!0).forEach((function(t){(0,a.Z)(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):_t(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}const Dt=new class{constructor(){(0,a.Z)(this,"execute",(e=>{const{node:t,component:o,defaultValue:n="() => {}",supportedEvent:s,propDefName:i,pos:r}=e,a=i||`handle${Tt.H[s]}`;let l=Object.values(o.propDefinitions).find((e=>e.name===a));l?o.addLocationToPropDefinition(l.id,t.id,{base:me.hD.EVENT,sufix:s}):l=o.createPropDefinition({id:(0,q.Z)(),name:a,type:"func",defaultValue:n,inputType:me.SO.FUNCTION,locations:{[t.id]:(0,fe.B)({base:me.hD.EVENT,sufix:s})}});const c=(0,q.Z)(),d={id:l.id,type:"propCall",calls:a,pos:r};t.events=Et(Et({},t.events),{},{[s]:Et(Et({},t.events[s]),{},{[c]:Et({},d)})})}))}};Object.freeze(Dt);var Ft,Ct,At,kt=o(39795);const Pt=new(Ft=(0,d.f3)("nodeStyleManagmentFlow"),Ct=class{constructor(){(0,r.Z)(this,"nodeStyleManagementFlow",At,this),this.execute=this.execute.bind(this),this.getNumericValueInPixels=this.getNumericValueInPixels.bind(this)}execute(e){var t,o,n,s,i,r;const{key:a,nodeId:l,doc:c}=e,d=V.ou.Cg,p=V.ou.yL,u=c.nodes.byId[l];if(!u)return d;const h=this.nodeStyleManagementFlow.getAllStyleValuesForKey({nodeId:l,key:a});let y=[],m=[];u.compIdOfRootNode||(y=this.nodeStyleManagementFlow.getAllStyleValuesForKey({nodeId:l,key:`max${(0,wt.capitalize)(a)}`}),m=this.nodeStyleManagementFlow.getAllStyleValuesForKey({nodeId:l,key:`min${(0,wt.capitalize)(a)}`}));const f=u.parentId?c.nodes.byId[u.parentId]:null,b=null===(t=u.attrs[a])||void 0===t?void 0:t.content;if("string"===typeof b&&h.push(b),!h.length&&!y.length&&!m.length)return f?this.execute({key:a,nodeId:f.id,doc:c}):p;const g=h.map((e=>this.getNumericValueInPixels(e,a,f,c))).sort(((e,t)=>t-e)),I=y.map((e=>this.getNumericValueInPixels(e,a,f,c))).sort(((e,t)=>t-e)),v=m.map((e=>this.getNumericValueInPixels(e,a,f,c))).sort(((e,t)=>t-e)),j=null!==(o=null!==(n=null!==(s=g[0])&&void 0!==s?s:I[0])&&void 0!==n?n:v[0])&&void 0!==o?o:d;return Math.max(null!==(i=v[0])&&void 0!==i?i:0,Math.min(null!==(r=I[0])&&void 0!==r?r:Number.MAX_SAFE_INTEGER,j))}getNumericValueInPixels(e,t,o,n){const s=V.ou.Cg,i=V.ou.yL,r=e.replace(/[0-9]/g,""),a=parseInt(e,10);switch(r){case"":case"px":return a>i?a:i;case"vw":const e=s*a/100;return e>i?e:i;case"%":if(!o){const e=s*a/100;return e>i?e:i}const r=this.execute({key:t,nodeId:o.id,doc:n})*a/100;return r>i?r:i;default:return a?s:i}}},At=(0,l.Z)(Ct.prototype,"nodeStyleManagementFlow",[Ft],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ct);Object.freeze(Pt);var Ut=o(12443);const Lt=new class{constructor(){(0,a.Z)(this,"execute",(e=>{const{doc:t,sourceInstanceId:o,targetInstanceId:n}=e,s=t.nodes.byId[o];t.nodes.orderChildrenIds(Object.keys((null===s||void 0===s?void 0:s.slottedNodes)||{})).forEach((e=>{const o=t.nodes.orderChildrenIds(Object.keys((null===s||void 0===s?void 0:s.slottedNodes[e])||{})).map((e=>t.nodes.byId[e])).filter((e=>e));t.copyNodesToTarget({nodes:o,targetId:e,compInstanceId:n})}))}))}};Object.freeze(Lt);class Zt{constructor(){(0,a.Z)(this,h.t1,void 0),(0,a.Z)(this,"byId",{})}getUrlList(e){return this.byId[e]||{}}saveComponent(e){const{id:t,component:o,path:n}=e;this.byId[t]?this.byId[t][n]=o:this.byId[t]={[n]:o}}fromJSON(e){this.byId=(null===e||void 0===e?void 0:e.byId)||{}}toJSON(){return{byId:this.byId}}applyPatch(e){const{pathArray:t,op:o,value:n}=e;2===t.length&&"add"===o&&n&&(this.byId[t[1]]=n),2===t.length&&"remove"===o&&delete this.byId[t[1]],3===t.length&&"replace"===o&&n&&(this.byId[t[1]][t[2]]=n),3===t.length&&"remove"===o&&delete this.byId[t[1]][t[2]]}}class Rt{constructor(e){(0,a.Z)(this,h.t1,void 0),(0,a.Z)(this,"id",void 0),(0,a.Z)(this,"name",void 0),(0,a.Z)(this,"content",void 0),(0,a.Z)(this,"path",void 0);const{id:t,name:o,content:n="",path:s=""}=e;this.name=o,this.content=n,this.path=s,this.id=t||(0,q.Z)()}applyPatch(e){const{op:t,pathArray:o,value:n}=e;"content"===o[0]&&("add"!==t&&"replace"!==t||(this.content=n))}}class Mt{constructor(){(0,a.Z)(this,h.t1,void 0),(0,a.Z)(this,"byId",{})}createFile(e){const t=new Rt(e);return this.byId[t.id]=t,t}deleteFile(e){delete this.byId[e]}length(){return Object.keys(this.byId).length}fromJSON(e){e&&0!==Object.keys(null===e||void 0===e?void 0:e.byId).length&&Object.values(e.byId).forEach((e=>{this.byId[e.id]=new Rt(e)}))}toJSON(){return{byId:this.byId}}applyPatch(e){const{op:t,value:o,pathArray:n}=e;if("add"===t){const e=new Rt(o);this.byId[e.id]=e}"remove"===t&&delete this.byId[n[1]]}}class Ht{constructor(){(0,a.Z)(this,h.t1,void 0),(0,a.Z)(this,"byId",{})}getTailwindClassesForNode(e){return this.byId[e]||{}}addTailwindClassToNode(e,t){this.byId[e]||(this.byId[e]={}),t.forEach((t=>{t&&(this.byId[e][(0,q.Z)()]=t)}))}deleteClassesForNode(e,t){t?delete this.byId[e][t]:delete this.byId[e]}cloneTailwindCSSFromNode(e,t){this.byId[t]={};const o=this.getTailwindClassesForNode(e);Object.values(o).forEach((e=>{this.byId[t][(0,q.Z)()]=e}))}toJSON(){return{byId:JSON.parse(JSON.stringify(this.byId))}}fromJSON(e){this.byId=(null===e||void 0===e?void 0:e.byId)||{}}applyPatch(e){const{pathArray:t,value:o}=e;if(3===t.length&&"byId"===t[0]){const e=t[1],n=t[2];o?this.byId[e][n]=o:delete this.byId[e][n]}}}var $t=o(77260),Bt=o(61621);const Gt=new class{constructor(){(0,a.Z)(this,"execute",(e=>{const{instanceId:t,targetInstanceId:o,className:n,doc:s}=e;if(!s)return null;const i=s.nodes.byId[t];if(!i||!s.nodes.nodeIsCompInstance(i))return null;const r=s.components.byId[i.compIdOfCompInstance];if(!r)return null;const a=r.styleSetDefinitions[n],l={styles:{},referencedStyles:{},usedByInstances:{[o]:!0}};return l.styles=$t.l.execute({targetNodeId:o,doc:s,styles:null===a||void 0===a?void 0:a.styles}),l.referencedStyles=Bt.T.execute({targetNodeId:o,styles:null===a||void 0===a?void 0:a.referencedStyles,doc:s}),l}))}};function zt(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function Wt(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?zt(Object(o),!0).forEach((function(t){(0,a.Z)(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):zt(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}Object.freeze(Gt);const Vt=new class{constructor(){(0,a.Z)(this,"execute",(e=>{const{node:t,component:o,supportedEvent:n,modifies:s,pos:i}=e;let{newState:r}=e;const a=Object.values(o.stateDefinitions).find((e=>e.name===s));if(!a)throw new Error(`State definition "${s}" not present in referenced component`);"toggle"===r&&(r="$toggle");const l=(0,q.Z)(),c={id:a.id,type:"stateChange",modifies:s,newState:r,pos:i};t.events=Wt(Wt({},t.events),{},{[n]:Wt(Wt({},t.events[n]),{},{[l]:Wt({},c)})})}))}};var Kt,Jt,Xt,Yt,qt,Qt,eo,to,oo,no,so,io,ro,ao,lo;function co(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function po(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?co(Object(o),!0).forEach((function(t){(0,a.Z)(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):co(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}Object.freeze(Vt);let uo=(Kt=(0,d.JJ)("projectDoc"),Jt=(0,d.f3)("projectUIState"),Xt=(0,d.f3)("webRTCState"),Yt=(0,d.f3)("nodeStyleManagmentFlow"),qt=(0,d.f3)("projectClassManagementFlow"),Qt=(0,d.f3)("notificationsManagementFlow"),eo=(0,d.f3)("sentryService"),Kt((oo=class{constructor(){(0,a.Z)(this,h.t1,void 0),(0,a.Z)(this,"id",""),(0,a.Z)(this,"accessType",p.W.PUBLIC),(0,a.Z)(this,"settings",{}),(0,a.Z)(this,"stats",{}),(0,a.Z)(this,"fonts",new le),(0,a.Z)(this,"folders",new u.$),(0,a.Z)(this,"pages",new m),(0,a.Z)(this,"components",new j),(0,a.Z)(this,"nodes",new Z),(0,a.Z)(this,"assets",new z),(0,a.Z)(this,"designLanguage",new re),(0,a.Z)(this,"collaborators",new dt),(0,a.Z)(this,"projectFiles",new ft),(0,a.Z)(this,"classes",new St(this.designLanguage)),(0,a.Z)(this,"cloudComponents",new Zt),(0,a.Z)(this,"mediaQueryBreakpoints",new c.s),(0,a.Z)(this,"customFiles",new Mt),(0,a.Z)(this,"tailwindCSS",new Ht),(0,r.Z)(this,"projectUIState",no,this),(0,r.Z)(this,"webRTCState",so,this),(0,r.Z)(this,"nodeStyleManagementFlow",io,this),(0,r.Z)(this,"projectClassManagementFlow",ro,this),(0,r.Z)(this,"notificationsManagementFlow",ao,this),(0,r.Z)(this,"sentryService",lo,this),(0,a.Z)(this,"addDefaultPropsDefinitionForNode",ye.execute),(0,a.Z)(this,"addDefaultLinkPropDefinition",Ne.execute),(0,a.Z)(this,"addDefaultContentPropDefinition",_e.execute),(0,a.Z)(this,"addDefaultAttrPropDefinition",we.execute),(0,a.Z)(this,"addPropCallEvent",Dt.execute),(0,a.Z)(this,"addStateChangeEvent",Vt.execute),(0,a.Z)(this,"replaceDynamicPropWithStaticNode",Ee.X.execute),(0,a.Z)(this,"replaceStaticPropWithDynamicNode",De.execute),(0,a.Z)(this,"duplicateNodeInstanceHierarchy",Pe.execute),(0,a.Z)(this,"moveNodePropDefinitionToTarget",rt.execute),(0,a.Z)(this,"cloneSlottedNodes",Lt.execute),(0,a.Z)(this,"duplicateComponent",Ue.execute),(0,a.Z)(this,"duplicatePage",Re.execute),(0,a.Z)(this,"detachComponentInstance",Me.execute),(0,a.Z)(this,"cloneStyleSetDefinition",Gt.execute)}addPage(e){const{page:t,folderId:o}=e;if(!t.rootNodeId){const e=new O.H({primitiveType:T.sO.CONTAINER,semanticType:T.iX.DIV});e.styles={width:new W.F({content:"100%"}),minHeight:new W.F({content:"100vh"}),overflow:new W.F({content:"auto"}),display:new W.F({content:"flex"}),flexDirection:new W.F({content:"column"}),alignItems:new W.F({content:"center"})},t.rootNodeId=e.id,e.compIdOfRootNode=t.id,this.nodes.add(e)}this.pages.add(t),this.folders.add(null!==o&&void 0!==o?o:"pages",{id:t.id,type:"page"})}addComponent(e){const{component:t,folderId:o,hasDefaultStyles:n}=e;if(!t.rootNodeId){const e=new O.H({primitiveType:T.sO.CONTAINER,semanticType:T.iX.DIV});e.styles={display:new W.F({content:"flex"}),position:new W.F({content:"relative"})},n&&(e.styles.height=new W.F({content:"400px"}),e.styles.width=new W.F({content:"100%"}),e.styles.alignItems=new W.F({content:"flex-start"}),e.styles.flexDirection=new W.F({content:"column"})),t.rootNodeId=e.id,e.compIdOfRootNode=t.id,this.nodes.add(e)}return this.components.add(t),this.folders.add(null!==o&&void 0!==o?o:"components",{id:t.id,type:"component"}),t}addNode(e){e.primitiveType===T.sO.CONTAINER&&setTimeout((()=>{const t=this.nodes.byId[e.id];Object.keys((null===t||void 0===t?void 0:t.childrenIds)||{}).length||this.notificationsManagementFlow.createLimitedUseNotification(ot.C.ADD_CONTAINER)}),100);const t=this.components.byId[this.getComponentIdForNode(e.parentId||"")||""];if(e.primitiveType===T.sO.SLOT){if(!t)throw new Error("Tried to add a slot in a page");t.slots||(t.slots={}),t.slots[e.id]={width:kt.l.WIDTH,height:kt.l.HEIGHT},e.compIdOfSlot=t.id}this.nodes.add(e)}addAsset(e){this.assets.add(e)}removePage(e){var t;const o=null===(t=this.pages.byId[e])||void 0===t?void 0:t.rootNodeId;o&&this.deleteNodesById({nodeIds:[o],skipRestoreParentsFakeSize:!0,deleteRoot:!0}),delete this.pages.byId[e],delete this.folders.byId.pages.children[e]}removeComponent(e){const t=this.components.byId[e];if(!t)throw new Error(`Component requested is missing - ${e}`);const o=t.rootNodeId;if(!o)throw new Error(`Component's root node is missing - ${t}`);this.deleteNodesById({nodeIds:[...Object.keys((null===t||void 0===t?void 0:t.instantiatedByNodes)||{}),o],deleteRoot:!0,skipRestoreParentsFakeSize:!0}),delete this.components.byId[e],delete this.folders.byId.components.children[e],Object.values(po(po({},this.pages.byId),this.components.byId)||{}).forEach((t=>{null===t||void 0===t||delete t.usedComponents[e]}))}moveNodesToTarget(e){nt.execute(po(po({},e),{},{doc:this}))}copyNodesHierarchyToTarget(e){const{nodes:t}=e,o=t.map((e=>e.id)),n=this.nodes.getOrderedTopLevelNodes(o).map((e=>this.nodes.byId[e]));return this.copyNodesToTarget(po(po({},e),{},{nodes:n}))}syncAssetInNodeRelationByNewContent(e){const{oldContent:t,newContent:o,node:n}=e,s=Object.values(this.assets.byId);if("dynamic"===(null===t||void 0===t?void 0:t.type)&&"dynamic"===(null===o||void 0===o?void 0:o.type)&&t.content.id===o.content.id)return;if("dynamic"===(null===t||void 0===t?void 0:t.type)){var i;const e=this.getComponentIdForNode(n.id),o=null===(i=this.components.byId[e])||void 0===i?void 0:i.propDefinitions[t.content.id],r=s.find((e=>(null===o||void 0===o?void 0:o.defaultValue)===e.id));null===r||void 0===r||r.removeNodeRelation(n.id)}if("dynamic"===(null===o||void 0===o?void 0:o.type)){var r;const e=this.getComponentIdForNode(n.id),t=null===(r=this.components.byId[e])||void 0===r?void 0:r.propDefinitions[o.content.id],i=s.find((e=>(null===t||void 0===t?void 0:t.defaultValue)===e.id));null===i||void 0===i||i.createNodeRelation(n.id)}if((null===t||void 0===t?void 0:t.content)===(null===o||void 0===o?void 0:o.content))return;const a=null===t||void 0===t?void 0:t.content,l=null===o||void 0===o?void 0:o.content;"string"!==typeof a||this.nodes.nodeIsCompInstance(n)&&Object.values(n.attrs).some((e=>"static"===e.type&&e.content===(null===t||void 0===t?void 0:t.content)))||s.forEach((e=>{"string"!==typeof l&&"undefined"!==typeof l||null!==l&&void 0!==l&&l.includes(e.id)||a.includes(e.id)&&e.removeNodeRelation(n.id)})),"string"===typeof l&&s.forEach((e=>{"undefined"!==typeof a&&"string"!==typeof a||null!==a&&void 0!==a&&a.includes(e.id)||l.includes(e.id)&&e.createNodeRelation(n.id)}))}updatePageAndComponentRelations(e){const{sourceNodeId:t,newNodeId:o,doc:n}=e;if(!n)return;const s=n.nodes.byId[t];if(!s)throw new Error("Attempting to add a relation without the source node");if(!this.nodes.nodeIsCompInstance(s))throw new Error("Attempting to update relation when source is not component");if(s.parentId){const e=this.getComponentIdForNode(s.id);if(!e)throw new Error("Target page to add the component is not found");this.addUsedComponentRelation({toAddComponentId:e,linkedComponentId:s.compIdOfCompInstance})}const i=n.components.byId[s.compIdOfCompInstance];if(!i)throw new Error("Trying to duplicate a component instance but the componet is missing");i.instantiatedByNodes[o]=!0}getSlotNodesForComp(e){const t=this.components.byId[e];if(!t||!t.rootNodeId)return[];const o=[];return this.nodes.bfs(t.rootNodeId,(e=>{e.primitiveType===T.sO.SLOT&&o.push(e)})),o}getUniqueSlotNameForComp(e,t){const o=this.getSlotNodesForComp(e);return(0,v.Zu)(o.map((e=>e.name)),t)}addNodesToParentOrStage(e){const{nodes:t,parentId:o,nextSibling:n,keepOriginalParent:s,dropPosition:i,compInstanceId:r}=e,a=this.nodes.byId[o],l=a.primitiveType===T.sO.SLOT;if(l&&!r)return;let c;if(n){const e=this.nodes.getPrevSibling(n);c=(0,w.Dd)(n.pos,(null===e||void 0===e?void 0:e.pos)||"0")}else{const e=this.nodes.getLastChild(a,r);c=(parseFloat((null===e||void 0===e?void 0:e.pos)||"0")+Number.MAX_SAFE_INTEGER).toString()}const{useContentAsNode:d=!1}=e,p=d&&(0,w.j1)(this,a);p&&(i&&"after"!==i?t.push(p):t.unshift(p));const u=!this.nodes.getFirstChild(a,r),h=this.getComponentIdForNode(o)||this.projectUIState.selection.componentId,y=this.pages.byId[h||""]||this.components.byId[h||""];if(!y)throw new Error("Tried to add node but no accepting component found!");t.forEach((t=>{if(t.primitiveType===T.sO.SLOT){const e=this.nodes.getComponentIdOf(o)||"";if(e!==this.projectUIState.selection.componentId)return;const t=this.components.byId[e];if(t&&Object.keys(t.slots||{}).length)return void this.notificationsManagementFlow.createNotification(ot.k.INFO,"Only one slot per component is currently supported.")}if(this.nodes.nodeIsCompInstance(t)){if(this.components.checkIfComponentsHaveCircularDependency(t.compIdOfCompInstance,y.id))return void this.notificationsManagementFlow.createNotification(ot.k.ERROR,"Could not add component because it would create a circular dependency.");this.addUsedComponentRelation({toAddComponentId:y.id,linkedComponentId:t.compIdOfCompInstance})}if(l){if(!s||!t.parentOrSlotId){const e=this.nodes.byId[r];if(!e)throw new Error("Tried to slot a node with no instance provided!");e.slotNode(t.id,a.id),t.slotId=a.id,t.compInstanceId=r}}else s&&t.parentOrSlotId||(t.parentId=o);if(t.parentOrSlotId===o)t.pos=c,c=null!==n&&void 0!==n&&n.pos?(0,w.Dd)(t.pos,n.pos):c=(parseFloat(t.pos)+Number.MAX_SAFE_INTEGER).toString();else{const e=this.nodes.byId[t.parentOrSlotId],o=this.nodes.getLastChild(e,r);t.pos=(parseFloat((null===o||void 0===o?void 0:o.pos)||"0")+Number.MAX_SAFE_INTEGER).toString()}this.adjustAddedNodeWidth(t,a),this.projectClassManagementFlow.bindDefaultClassByNodePrimitive({node:t}),this.initializeComponentTypeNode(t,a),this.addNode(t),e.skipInitForNonComponents||(this.initializeListTypeNodeChildren(t),this.initializeSelectTypeNode(t))})),this.removeDefaultBorder(u,a),this.removeParentNodeFakeSize({parentNode:a,addedNodes:t,addingFirstChildren:u,dropPosition:i,styleManagementFlow:this.nodeStyleManagementFlow})}deleteNodesById(e){const{nodeIds:t,withSubtree:o=!0,skipRestoreParentsFakeSize:n=!1,deleteRoot:s=!1}=e,i=this.projectUIState.selection.componentId,r=Object.values(this.webRTCState.editedNodes||{}).reduce(((e,t)=>e.concat(t.nodeIds)),[]);he.execute({nodeIds:t,withSubtree:o,compId:i,skipRestoreParentsFakeSize:n,deleteRoot:s,lockedNodeIds:r,notificationsManagementFlow:this.notificationsManagementFlow},this)}copyNodesToTarget(e){const{nodes:t,targetId:o,copyBefore:n,dropPosition:s,useContentAsNode:i=!1,compInstanceId:r}=e;let a=!1;const l=[],c=[],d={},p={},u=this.nodes.byId[o];if(!u)throw new Error("Attempted to copy inside a node that does not exist");const h=u.primitiveType===T.sO.SLOT,y=i&&(0,w.j1)(this,u);if(y){const e=this.getComponentIdForNode(o),t=this.components.byId[e];t&&this.projectUIState.userPreferences.automaticallyCreateOverrides&&!h&&this.addDefaultPropsDefinitionForNode({node:y,component:t,doc:this}),this.addNode(y)}const m=this.getComponentIdForNode(o)||this.projectUIState.selection.componentId,f=this.getProjectPageOrComponent(m);if(t.forEach(((e,t)=>{const s={};this.nodes.bfs(e.id,(i=>{if(i.primitiveType===T.sO.SLOT)return;let y=i.pos;if(f&&this.nodes.nodeIsCompInstance(i)&&this.components.checkIfComponentsHaveCircularDependency(i.compIdOfCompInstance,f.id))return void this.notificationsManagementFlow.createNotification(ot.k.ERROR,"Could not copy component because it would create a circular dependency.");if(i.id===e.id){if(!e.primitiveType||!this.isNodeAcceptingChild(u,e))return;const s=c.length?c[c.length-1]:this.nodes.getLastChild(u,r);if(n){const e=c.length?c[c.length-1]:this.nodes.getPrevSibling(n);y=e?(0,w.Dd)(n.pos,e.pos):(0,w.Dd)(n.pos,"0")}else y=(parseFloat((null===s||void 0===s?void 0:s.pos)||"0")+Number.MAX_SAFE_INTEGER).toString();0===t&&(a=!this.nodes.getFirstChild(this.nodes.byId[o],r))}const m=this.cloneNode({nodeId:i.id,removeRootStatus:!0});if(!m)throw new Error(`Failed in cloning node - ${i.id}`);m.pos=y,s[i.id]=m.id;const b=i.parentOrSlotId;if(b){const t=s[b];t?m.parentId=t:i.id===e.id&&(h&&r?(m.slotId=o,m.compInstanceId=r):m.parentId=o)}else h&&r?(m.slotId=o,m.compInstanceId=r):m.parentId=o;if(this.nodes.nodeIsCompInstance(i)&&f){this.addUsedComponentRelation({toAddComponentId:f.id,linkedComponentId:i.compIdOfCompInstance});const e=this.components.byId[i.compIdOfCompInstance];if(!e)throw new Error("Trying to duplicate a component instance but the component is missing");e.instantiatedByNodes[m.id]=!0,p[m.id]=i.id}l.push(m),i.id===e.id&&c.push(m),this.assets.copyAssetsInNodeRelationToNode({sourceNodeId:i.id,targetNodeId:m.id});if(!this.getComponentIdForNode(e.id))throw new Error(`Component not found for node - ${e.id}`);this.copyPropDefinitionsForCopiedNode({node:i,copiedNode:m,targetNodeId:o,initialNode:n,compInstanceId:r}),Object.assign(d,po({},s))})),this.addSectionIdToComponent(Object.values(s))})),l.forEach((e=>{e.slotId&&e.compInstanceId&&this.slotNodeInInstance({instanceId:e.compInstanceId,slotId:e.slotId,node:e}),this.addNode(e),e.parentId&&(this.nodes.byId[e.parentId].childrenIds[e.id]=!0),p[e.id]&&this.cloneSlottedNodes({sourceInstanceId:p[e.id],targetInstanceId:e.id,doc:this})})),y&&s){const e=this.nodes.byId[y.id];if("before"===s&&e){const t=l[l.length-1];e.pos=(parseFloat((null===t||void 0===t?void 0:t.pos)||"0")+Number.MAX_SAFE_INTEGER).toString()}}return l.length&&(this.removeDefaultBorder(a,u),this.removeParentNodeFakeSize({parentNode:u,addedNodes:l,addingFirstChildren:a,styleManagementFlow:this.nodeStyleManagementFlow})),{copiedNodes:l,nodeIdsMap:d}}groupNodes(e){return pt.execute(po({doc:this},e))}ungroupNodeChildren(e){return ut.execute(po({doc:this},e))}isNodePageRoot(e){var t;const o=null===(t=this.nodes.byId[e])||void 0===t?void 0:t.compIdOfRootNode;return!!o&&!!this.pages.byId[o]}isNodeRoot(e){var t;return!(null===(t=this.nodes.byId[e])||void 0===t||!t.compIdOfRootNode)}isResizeAllowedForNode(e){var t;if(this.isNodePageRoot(e))return!1;const o=this.nodes.byId[e];if(!o)throw new Error("Node not found");if(this.nodes.nodeIsCompInstance(o)||this.nodes.nodeIsDevCompInstance(o)||o.primitiveType===T.sO.SLOT)return!1;const n=null===(t=o.styles.display)||void 0===t?void 0:t.content;if(n)return"inline"!==n;return"inline"!==(ce.bC[o.semanticType||""]||ce.bC[o.primitiveType])}isMarginAndPaddingAdjustAllowedForNode(e){var t;if(this.isNodePageRoot(e))return!1;const o=this.nodes.byId[e];if(!o)throw new Error("Node not found");if(o.primitiveType===T.sO.SLOT)return!1;if(this.nodes.nodeIsCompInstance(o)||this.nodes.nodeIsDevCompInstance(o))return!1;if(this.projectUIState.staticNodeInterationsData.editingNode[o.id])return!1;const n=null===(t=o.styles.display)||void 0===t?void 0:t.content;if(n)return"inline"!==n;return"inline"!==(ce.bC[o.semanticType||""]||ce.bC[o.primitiveType])}getProjectPageOrComponent(e){if(!e)return null;const t=this.pages.byId[e]||this.components.byId[e];return t||null}getComponentIdForNode(e,t){const o=this.nodes.byId[e];if(!o)return null;if(o.parentId)return this.getComponentIdForNode(o.parentId,t);if(o.slotId){const{compInstanceId:o}=this.nodes.getSlotAndCompInstanceIdForNodeById(e);return o?t?this.nodes.byId[o].compIdOfCompInstance:this.getComponentIdForNode(o,t):null}return o.compIdOfRootNode}getRootNodeIdForPageOrComponent(e){var t,o;if(!e)return null;const n=null!==(t=this.pages.byId[e])&&void 0!==t?t:this.components.byId[e];return n&&null!==(o=null===n||void 0===n?void 0:n.rootNodeId)&&void 0!==o?o:null}getNodesFromSelectedComponent(){var e;const t=this.projectUIState.selection.componentId;if(!t)return[];const o=null===(e=this.getProjectPageOrComponent(t))||void 0===e?void 0:e.rootNodeId;return o?this.nodes.getDescendents(o):[]}removeAsset(e){delete this.assets.byId[e]}removeSectionIdFromComponent(e){pe.execute(po({},e),this)}estimateNodeDimensionInPxByStyle(e,t){return Pt.execute({key:e,nodeId:t,doc:this})}removeParentNodeFakeSize(e){ze.execute(e,this)}restoreParentNodesFakeSize(e){We.execute(e,this)}cloneNode(e){return Xe.execute(po(po({},e),{},{doc:this}))}getLocalWorkClone(e){const{nodeId:t}=e,o=this.nodes.byId[t];if(!o)throw new Error(`Referring element for clone is missing - ${t}`);const n=new O.H({id:this.id,fakeSize:o.fakeSize,contentChildren:po({},o.contentChildren),abilities:o.cloneAbilities()}),s=Je.execute({nodeId:t,doc:this});s&&(n.attrs=s);const i=Ve.S.execute({targetNodeId:n.id,nodeId:t,doc:this});i&&(n.styles=i);const r=Ke.l.execute({targetNodeId:n.id,nodeId:t,doc:this});return r&&(n.referencedStyles=r),n}getUsedProjectClassesForNodesByPos(e){let t=new Array;return e.forEach(((e,o)=>{const n=this.nodes.byId[e],s=new Array;Object.values((null===n||void 0===n?void 0:n.referencedStyles)||{}).forEach((t=>{if("project-referenced"===t.content.mapType){var o;const n=this.classes.byId[t.content.referenceId];if(!n){const e=new Error(`Project Class ${t.content.referenceId} is missing from doc`);return void this.sentryService.captureException(e)}s.push({id:n.id,name:n.name,pos:n.pos,isDefault:n.isDefault,isDisabled:null===(o=n.disabledInNodes)||void 0===o?void 0:o[e]})}})),t=0===o?t.concat(s):Ot().intersectionWith(t,s,Ot().isEqual)})),Object.values(t).sort(((e,t)=>(0,w.F0)(parseFloat(e.pos))-(0,w.F0)(parseFloat(t.pos))))}restoreBGColor(e,t){var o;if(!e.parentId)return;const n=this.nodes.byId[e.parentId];if(!n||!n.parentId||n.primitiveType!==T.sO.CONTAINER)return;const s=Object.keys(n.childrenIds).length;1!==s||1===s&&t&&e.parentId===t.id||null!==(o=n.styles[V.X7.BORDER])&&void 0!==o&&o.content||(n.styles[V.X7.BORDER]=new W.F({content:J.Ln}))}removeDefaultBorder(e,t){const o=t.styles.border;e&&"static"===(null===o||void 0===o?void 0:o.type)&&(null===o||void 0===o?void 0:o.content)===J.Ln&&delete t.styles.border}isNodeAcceptingChildByElementType(e,t){if(!e||!e.primitiveType)return!1;const o=T.y7[e.primitiveType];if(!o)return!1;if(t===T.sO.SLOT){if(!this.components.byId[this.getComponentIdForNode(e.id)||""])return!1}return o.includes(t)}isNodeAcceptingChild(e,t){if(!e||!t.primitiveType)return!1;if(e.compIdOfSlot===this.projectUIState.selection.componentId)return!1;if(this.nodes.nodeIsCompInstance(t)){if(e.primitiveType===T.sO.SLOT&&e.compIdOfSlot===t.compIdOfCompInstance)return!1;if(this.nodes.getSlotAndCompInstanceIdForNodeById(e.id)){const o=this.nodes.byId[e.id];if((null===o||void 0===o?void 0:o.compIdOfSlot)===t.compIdOfCompInstance)return!1}}return this.isNodeAcceptingChildByElementType(e,t.primitiveType)}isNodeAcceptingChildren(e){return!(!e||null===e||void 0===e||!e.primitiveType)&&!!T.y7[e.primitiveType].length}slotNodeInInstance(e){const{instanceId:t,slotId:o,node:n}=e,s=this.nodes.byId[t];if(!s||!this.nodes.nodeIsCompInstance(s))throw new Error("Attempted to slot node in non-component!");if(!this.components.byId[s.compIdOfCompInstance])throw new Error("Comp instance is referencing nonexisting component!");return s.slotNode(n.id,o),!0}unslotNodeFromInstance(e){const{instanceId:t,slotId:o,node:n}=e,s=this.nodes.byId[t];if(!s||!this.nodes.nodeIsCompInstance(s))throw new Error("Attempted to slot node in non-component!");if(!this.components.byId[s.compIdOfCompInstance])throw new Error("Comp instance is referencing nonexisting component!");s.unslotNode(n.id,o)}addUsedComponentRelation(e){const{toAddComponentId:t,linkedComponentId:o}=e,n=this.getProjectPageOrComponent(t);if(!n)throw new Error("Did not find component to add relation to");n.usedComponents[o]?n.usedComponents[o]+=1:n.usedComponents[o]=1}removeUsedComponentRelation(e){const{toRemoveComponentId:t,linkedComponentId:o}=e,n=this.getProjectPageOrComponent(t);if(!n)throw new Error("Did not find component to remove relation from");1!==n.usedComponents[o]?n.usedComponents[o]&&(n.usedComponents[o]-=1):delete n.usedComponents[o]}copyPropDefinitionsForCopiedNode(e){const{node:t,copiedNode:o,initialNode:n,targetNodeId:s,compInstanceId:i}=e,r=this.getComponentIdForNode(t.id);if(!r)throw new Error(`Component not found for source node - ${t.id}`);const a=this.getComponentIdForNode(i||"")||this.getComponentIdForNode(s);if(!a)throw new Error(`Component not found for target node - ${a}`);const l=this.getProjectPageOrComponent(r),c=this.getProjectPageOrComponent(a),d=this.projectUIState.userPreferences.automaticallyCreateOverrides;l instanceof I.n&&c instanceof y.m||l instanceof I.n&&c instanceof I.n&&!d?Object.keys(l.propDefinitions).forEach((e=>{const s=l.propDefinitions[e];if(!s.locations[t.id])return;const i=n&&n.attrs[s.name],r=i&&"static"===i.type?i.content:s.defaultValue;this.replaceDynamicPropWithStaticNode({node:o,propDefinition:s,staticValue:r,propId:s.id})})):l instanceof I.n&&c instanceof I.n?ke.execute({node:t,nodeClone:o,sourceCompId:r,targetCompId:a,doc:this}):l instanceof y.m&&c instanceof I.n&&d&&this.addDefaultPropsDefinitionForNode({node:o,component:c,doc:this})}addSectionIdToComponent(e){const t=this.projectUIState.selection.componentId;e.forEach((e=>{var o,n,s;const i=null===(o=this.nodes.byId[e])||void 0===o||null===(n=o.attrs)||void 0===n||null===(s=n.id)||void 0===s?void 0:s.content;i&&t&&de.execute({compId:t,nodeId:e,sectionId:i},this)}))}adjustAddedNodeWidth(e,t){var o;if(e.primitiveType===T.sO.CONTAINER&&(null===(o=e.styles[V.X7.FLEX_DIRECTION])||void 0===o?void 0:o.content)===J.sO.ROW){var n,s;const o="column"===(null===(n=t.styles[V.X7.FLEX_DIRECTION])||void 0===n?void 0:n.content),i=(null===(s=t.styles[V.X7.WIDTH])||void 0===s?void 0:s.content)===K.pF;o&&!i&&(e.styles[V.X7.WIDTH]=new W.F({content:K.V0}))}}initializeComponentTypeNode(e,t){if(this.nodes.nodeIsCompInstance(e)&&(this.components.byId[e.compIdOfCompInstance].instantiatedByNodes[e.id]=!0),t.primitiveType===T.sO.SLOT)return;const o=this.getComponentIdForNode(t.id),n=this.components.byId[o];n&&this.projectUIState.userPreferences.automaticallyCreateOverrides&&this.addDefaultPropsDefinitionForNode({node:e,component:n,doc:this})}initializeListTypeNodeChildren(e){if(e.primitiveType===T.sO.LIST){let t=0;for(;t<T.SD;){const o=(0,Ut.a)({stencilKey:J.sO.LISTITEM});o.parentId=e.id,o.pos=(t+1).toString(),this.projectClassManagementFlow.bindDefaultClassByNodePrimitive({node:o}),this.addNode(o),this.initializeListItemNodeChildren(o),t++}}e.primitiveType===T.sO.LISTITEM&&this.initializeListItemNodeChildren(e)}initializeListItemNodeChildren(e){const t=(0,Ut.a)({stencilKey:J.sO.TEXT});t.parentId=e.id,this.addNode(t)}initializeSelectTypeNode(e){if(e.primitiveType===T.sO.SELECT){let t=0;for(;t<3;)this.addNewOptionItem({parentNodeId:e.id,pos:(t+1).toString(),defaultValue:`Option ${t+1}`}),t++}}addNewOptionItem(e){const{parentNodeId:t,pos:o,defaultValue:n}=e,s={value:n||""};"0"===o&&(s.selected="");const i=(0,Ut.a)({stencilKey:J.sO.OPTION,attrs:s,defaultValue:n});o&&(i.pos=o),i.parentId=t,this.addNode(i)}updateHtmlForNode(e){const{node:t,value:o}=e;o?t.html=o:this.deleteNodesById({nodeIds:[t.id]})}getUniqueCompOrPageName(e){const t=[...Object.values(this.pages.byId).map((e=>(null===e||void 0===e?void 0:e.title)||"")),...Object.values(this.components.byId).map((e=>(null===e||void 0===e?void 0:e.title)||""))];return(0,v.Zu)(t,e)}applyPatch(e){const{pathArray:t,value:o}=e;2===t.length&&"deployments"===t[1]&&(this.stats.deployments=po(po({},this.stats.deployments),o)),1===t.length&&"settings"===t[0]&&(this.settings=o)}fromJSON(e){const{settings:t,folders:o,pages:n,components:s,nodes:i,assets:r,fonts:a,designLanguage:l,stats:c,collaborators:d,classes:p,projectFiles:u,cloudComponents:h,mediaQueryBreakpoints:y,customFiles:m,tailwindCSS:f}=e;this.stats=c,this.settings=t,this.fonts.fromJSON(a),this.folders.fromJSON(o),this.pages.fromJSON(n),this.components.fromJSON(s),this.nodes.fromJSON(i),this.assets.fromJSON(r),this.designLanguage.fromJSON(l),this.collaborators.fromJSON(d),this.projectFiles.fromJSON(u),this.classes.fromJSON(p),this.cloudComponents.fromJSON(h),this.mediaQueryBreakpoints.fromJSON(y),this.customFiles.fromJSON(m),this.tailwindCSS.fromJSON(f)}toJSON(){return{settings:this.settings,folders:this.folders.toJSON(),pages:this.pages.toJSON(),components:this.components.toJSON(),nodes:this.nodes.toJSON(),assets:this.assets.toJSON(),designLanguage:this.designLanguage.toJSON(),fonts:this.fonts.toJSON(),collaborators:this.collaborators.toJSON(),stats:this.stats,projectFiles:this.projectFiles.toJSON(),classes:this.classes.toJSON(),cloudComponents:this.cloudComponents.toJSON(),mediaQueryBreakpoints:this.mediaQueryBreakpoints.toJSON(),customFiles:this.customFiles.toJSON(),tailwindCSS:this.tailwindCSS.toJSON()}}},no=(0,l.Z)(oo.prototype,"projectUIState",[Jt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),so=(0,l.Z)(oo.prototype,"webRTCState",[Xt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),io=(0,l.Z)(oo.prototype,"nodeStyleManagementFlow",[Yt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ro=(0,l.Z)(oo.prototype,"projectClassManagementFlow",[qt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ao=(0,l.Z)(oo.prototype,"notificationsManagementFlow",[Qt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),lo=(0,l.Z)(oo.prototype,"sentryService",[eo],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),to=oo))||to)},83382:function(e,t,o){o.d(t,{z4:function(){return i},UL:function(){return r},vn:function(){return a}});var n=o(30499),s=o(72045);const i={[n.yy["viewport/mobile"]]:479,[n.yy["viewport/mobile-landscape"]]:767,[n.yy["viewport/tablet"]]:991,[n.yy["viewport/laptop"]]:1200,[n.yy["viewport/desktop"]]:1600,[n.yy["viewport/ultrawide"]]:1920},r=5,a=[{id:(0,s.Z)(),icon:n.yy["viewport/mobile"],maxWidth:i[n.yy["viewport/mobile"]]},{id:(0,s.Z)(),icon:n.yy["viewport/mobile-landscape"],maxWidth:i[n.yy["viewport/mobile-landscape"]]},{id:(0,s.Z)(),icon:n.yy["viewport/tablet"],maxWidth:i[n.yy["viewport/tablet"]]},{id:(0,s.Z)(),icon:n.yy["viewport/laptop"],maxWidth:i[n.yy["viewport/laptop"]],isDefault:!0},{id:(0,s.Z)(),icon:n.yy["viewport/desktop"],maxWidth:i[n.yy["viewport/desktop"]],isDisabled:!0},{id:(0,s.Z)(),icon:n.yy["viewport/ultrawide"],maxWidth:i[n.yy["viewport/ultrawide"]],isDisabled:!0}]},99798:function(e,t,o){o.d(t,{s:function(){return p}});var n=o(92809),s=o(49899),i=o(30499),r=o(72045),a=o(72790);class l{constructor(e){var t;(0,n.Z)(this,s.t1,void 0),(0,n.Z)(this,"id",void 0),(0,n.Z)(this,"maxWidth",void 0),(0,n.Z)(this,"icon",void 0),(0,n.Z)(this,"isDefault",void 0),(0,n.Z)(this,"isDisabled",void 0),this.id=(null===e||void 0===e?void 0:e.id)||(0,r.Z)(),this.maxWidth=null!==(t=null===e||void 0===e?void 0:e.maxWidth)&&void 0!==t?t:a.MIN_STAGE_WIDTH,this.icon=(null===e||void 0===e?void 0:e.icon)||i.yy["viewport/desktop"],this.isDefault=null===e||void 0===e?void 0:e.isDefault,this.isDisabled=null===e||void 0===e?void 0:e.isDisabled}getName(){return i.lJ[this.icon]}getColor(){return i.dr[this.icon]}fromJSON(e){const{id:t,maxWidth:o,isDefault:n,icon:s,isDisabled:i}=e;return this.id=t,this.maxWidth=o,this.icon=s,this.isDefault=n,this.isDisabled=i,this}toJSON(){return{id:this.id,maxWidth:this.maxWidth,icon:this.icon,isDefault:this.isDefault,isDisabled:this.isDisabled}}applyPatch(e){const{pathArray:t,value:o}=e;"maxWidth"!==t[0]?"icon"!==t[0]?"isDefault"!==t[0]?"isDisabled"!==t[0]||(this.isDisabled=o):this.isDefault=o:this.icon=o:this.maxWidth=o}}function c(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function d(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?c(Object(o),!0).forEach((function(t){(0,n.Z)(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):c(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}class p{constructor(){(0,n.Z)(this,s.t1,void 0),(0,n.Z)(this,"byId",{})}getNonDefaultActiveMQBreakpointsInOrder(e){return this.getAllMediaQueriesInOrder(e).filter((e=>!e.isDefault&&!e.isDisabled))}getDefaultMediaQuery(){return Object.values(this.byId).find((e=>e.isDefault))}getActiveMediaQueriesInOrder(e){return this.getAllMediaQueriesInOrder(e).filter((e=>!e.isDisabled))}getAllMediaQueriesInOrder(e){return Object.values(this.byId).sort(((t,o)=>e?i.Lp.findIndex((e=>e===o.icon))-i.Lp.findIndex((e=>e===t.icon)):i.Lp.findIndex((e=>e===t.icon))-i.Lp.findIndex((e=>e===o.icon))))}create(e){const{id:t}=e,o=t||(0,r.Z)();return this.byId[o]=new l(d(d({},e),{},{id:o})),this.byId[o]}remove(e){delete this.byId[e]}toJSON(){return{byId:Object.keys(this.byId).reduce(((e,t)=>{var o;return e[t]=null===(o=this.byId[t])||void 0===o?void 0:o.toJSON(),e}),{})}}fromJSON(e){this.byId={};const{byId:t={}}=e||{};if(t&&"object"===typeof t)return Object.keys(t).forEach((e=>{const o=(t||{})[e],n=(new l).fromJSON(o);this.byId[n.id]=n})),this}applyPatch(e){const{pathArray:t,value:o}=e;2===t.length&&"byId"===t[0]&&(o?this.byId[t[1]]=(new l).fromJSON(o):delete this.byId[t[1]])}}},28520:function(e,t,o){o.d(t,{F:function(){return c}});var n=o(92809),s=o(75222),i=o(40652),r=o(39795);function a(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function l(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?a(Object(o),!0).forEach((function(t){(0,n.Z)(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):a(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}class c extends i.H{constructor(e={}){super(e),(0,n.Z)(this,"previewSize",void 0),(0,n.Z)(this,"slottedNodes",void 0),(0,n.Z)(this,"primitiveType",void 0),(0,n.Z)(this,"slotsWithHiddenPreview",void 0),(0,n.Z)(this,"compIdOfCompInstance",void 0),this.previewSize=e.previewSize||{},this.slottedNodes=e.slottedNodes||{},this.slotsWithHiddenPreview=e.slotsWithHiddenPreview||{},this.primitiveType=s.sO.COMPONENT,this.compIdOfCompInstance=e.compIdOfCompInstance||""}toJSON(){return l(l({},super.toJSON()),{},{previewSize:this.previewSize,slottedNodes:this.slottedNodes,slotsWithHiddenPreview:this.slotsWithHiddenPreview,compIdOfCompInstance:this.compIdOfCompInstance})}slotNode(e,t){this.slottedNodes[t]||(this.slottedNodes[t]={[e]:!0}),this.slottedNodes[t][e]=!0}unslotNode(e,t){var o,n;null===(o=this.slottedNodes)||void 0===o||(null===(n=o[t])||void 0===n||delete n[e])}setPreviewSize(e,t,o){this.previewSize[o]={width:e,height:t}}getPreviewSizeForSlot(e){return this.previewSize[e]}cleanInstanceDataOnSlotRemove(e){var t;delete this.slottedNodes[e],delete this.previewSize[e],null===(t=this.slotsWithHiddenPreview)||void 0===t||delete t[e]}fromJSON(e){super.fromJSON(e);const{previewSize:t,slottedNodes:o,compIdOfCompInstance:n,slotsWithHiddenPreview:s}=e;return this.previewSize=t||{root:{width:r.l.WIDTH,height:r.l.HEIGHT}},this.compIdOfCompInstance=n,this.slottedNodes=o||{},this.slotsWithHiddenPreview=s||{},this}applyPatch(e){super.applyPatch(e);const{op:t,pathArray:o,value:n}=e;switch(o[0]){case"compIdOfCompInstance":return void("add"!==t&&"replace"!==t||(this.compIdOfCompInstance=n));case"previewSize":if(1===o.length){if("add"===t||"replace"===t)return void(this.previewSize=n);if("remove"===t)return void(this.previewSize={root:{width:r.l.WIDTH,height:r.l.HEIGHT}})}if(2===o.length){if("add"===t||"replace"===t)return this.previewSize||(this.previewSize={[o[1]]:n}),void(this.previewSize[o[1]]=n);if("remove"===t){var s;if("root"!==o[1])null===(s=this.previewSize)||void 0===s||delete s[o[1]];return}}if(3===o.length&&("add"===t||"replace"===t))return this.previewSize||(this.previewSize={[o[1]]:{width:r.l.WIDTH,height:r.l.HEIGHT}}),this.previewSize[o[1]]||(this.previewSize[o[1]]={width:r.l.WIDTH,height:r.l.HEIGHT}),void(this.previewSize[o[1]][o[2]]=n);case"slottedNodes":if(1===o.length){if("add"===t||"replace"===t)return void(this.slottedNodes=n);if("remove"===t)return void(this.slottedNodes={})}if(2===o.length){if("add"===t||"replace"===t)return void(this.slottedNodes[o[1]]=n);var i;if("remove"===t)return void(null===(i=this.slottedNodes)||void 0===i||delete i[o[1]])}if(3===o.length){if("add"===t||"replace"===t)return void(this.slottedNodes[o[1]][o[2]]=n);var a,l;if("remove"===t)return void(null===(a=this.slottedNodes)||void 0===a||(null===(l=a[o[1]])||void 0===l||delete l[o[2]]))}case"slotsWithHiddenPreview":if("add"===t||"replace"===t)return void(this.slotsWithHiddenPreview[o[1]]=n);if("remove"===t)return void delete this.slotsWithHiddenPreview[o[1]]}}}},39795:function(e,t,o){o.d(t,{l:function(){return n}});const n={WIDTH:"150px",HEIGHT:"100px"}},39856:function(e,t,o){o.d(t,{H:function(){return n}});const n={click:"onClick",focus:"onFocus",blur:"onBlur",change:"onChange",submit:"onSubmit",keydown:"onKeyDown",keyup:"onKeyUp",keypress:"onKeyPress",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",mouseover:"onMouseOver",select:"onSelect",touchstart:"onTouchStart",touchend:"onTouchEnd",scroll:"onScroll",load:"onLoad"}},16815:function(e,t,o){let n;o.d(t,{F:function(){return n}}),function(e){e.focus="focus",e.hover="hover",e.active="active",e.disabled="disabled",e.checked="checked",e["focus-within"]="focus-within",e["focus-visible"]="focus-visible"}(n||(n={}))},48055:function(e,t,o){o.d(t,{m:function(){return l}});var n=o(92809),s=o(49899),i=o(72045);function r(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function a(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?r(Object(o),!0).forEach((function(t){(0,n.Z)(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):r(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}class l{constructor(e={}){(0,n.Z)(this,s.t1,void 0),(0,n.Z)(this,"title",void 0),(0,n.Z)(this,"id",void 0),(0,n.Z)(this,"pos",void 0),(0,n.Z)(this,"rootNodeId",void 0),(0,n.Z)(this,"isHomePage",void 0),(0,n.Z)(this,"isFallbackPage",void 0),(0,n.Z)(this,"settings",void 0),(0,n.Z)(this,"sectionIds",{}),(0,n.Z)(this,"usedComponents",{});const{title:t="",id:o,rootNodeId:r,settings:a,isHomePage:l,isFallbackPage:c,sectionIds:d,usedComponents:p,pos:u}=e;this.title=t,this.id=null!==o&&void 0!==o?o:(0,i.Z)(),this.pos=null!==u&&void 0!==u?u:"0",this.rootNodeId=r,this.settings=a||{},this.isHomePage=l||!1,this.isFallbackPage=c||!1,this.sectionIds=d||{},this.usedComponents=p||{}}create(e){const t=(0,i.Z)();return new l(a(a({},e),{},{id:t}))}clone(){return new l({title:this.title,rootNodeId:this.rootNodeId,isHomePage:!1,settings:JSON.parse(JSON.stringify(this.settings)),sectionIds:{},usedComponents:JSON.parse(JSON.stringify(this.usedComponents))})}fromJSON(e){const{title:t,id:o,rootNodeId:n,settings:s,isHomePage:i,sectionIds:r,usedComponents:a,pos:l,isFallbackPage:c}=e;return this.title=t,this.id=o,this.isHomePage=i,this.rootNodeId=n,this.pos=l,this.settings=s,this.sectionIds=r||{},this.usedComponents=a,this.isFallbackPage=c,this}toJSON(){return{title:this.title,id:this.id,pos:this.pos,isHomePage:this.isHomePage,rootNodeId:this.rootNodeId,settings:this.settings,sectionIds:this.sectionIds,usedComponents:this.usedComponents,isFallbackPage:this.isFallbackPage}}applyPatch(e){const{pathArray:t,value:o,op:n}=e;switch(t[0]){case"title":return void(this.title=o);case"isHomePage":return void(this.isHomePage=o);case"isFallbackPage":return void(this.isFallbackPage=o);case"rootNodeId":return void(this.rootNodeId=o);case"pos":return void(this.pos=o);case"sectionIds":if(1===t.length)return void(this.sectionIds=o);if(2===t.length){if("add"===n||"replace"===n)return void(this.sectionIds[t[1]]=o);"remove"===n&&delete this.sectionIds[t[1]]}return;case"settings":return 1===t.length&&(this.settings=o),void(2===t.length&&(this.settings=a(a({},this.settings),{},{[t[1]]:o})));case"usedComponents":if(1===t.length)return void(this.usedComponents=o);if(2===t.length){if("add"===n||"replace"===n)return void(this.usedComponents[t[1]]=o);"remove"===n&&delete this.usedComponents[t[1]]}return;default:return}}}},78460:function(e,t,o){o.d(t,{XL:function(){return a},VM:function(){return h},fE:function(){return y}});var n=o(246),s=o(49403),i=o(39078),r=o(75222);const a=[{id:(0,o(72045).Z)(),name:"Primary"}],l="button",c="input",d="textarea",p="list",u="list-item",h={[r.sO.BUTTON]:l,[r.sO.TEXTINPUT]:c,[r.sO.TEXTAREA]:d,[r.sO.LIST]:p,[r.sO.LISTITEM]:u},y=e=>{const t=Object.values(e.tokensById||{}).find((e=>"background-color"===e.role)),o=Object.values(e.tokensById||{}).find((e=>"foreground-color"===e.role)),r={},a={display:new n.F({content:"inline-block"}),backgroundColor:t?new i.P({content:{referenceType:"token",id:t.id}}):new n.F({content:s.d3.backgroundColor}),color:o?new i.P({content:{referenceType:"token",id:o.id}}):new n.F({content:s.d3.color}),borderRadius:new n.F({content:s.d3.borderRadius}),borderColor:o?new i.P({content:{referenceType:"token",id:o.id}}):new n.F({content:s.d3.primaryColor}),borderWidth:new n.F({content:s.d3.borderWidth}),padding:new n.F({content:"0.5rem 1rem"})};r.button=a;const l={backgroundColor:t?new i.P({content:{referenceType:"token",id:t.id}}):new n.F({content:s.d3.backgroundColor}),borderColor:o?new i.P({content:{referenceType:"token",id:o.id}}):new n.F({content:s.d3.primaryColor}),color:o?new i.P({content:{referenceType:"token",id:o.id}}):new n.F({content:s.d3.color}),borderWidth:new n.F({content:s.d3.borderWidth}),borderRadius:new n.F({content:s.d3.borderRadius}),padding:new n.F({content:"0.5rem 1rem"}),cursor:new n.F({content:"auto"})};r.input=l;const c={backgroundColor:t?new i.P({content:{referenceType:"token",id:t.id}}):new n.F({content:s.d3.backgroundColor}),borderColor:o?new i.P({content:{referenceType:"token",id:o.id}}):new n.F({content:s.d3.primaryColor}),color:o?new i.P({content:{referenceType:"token",id:o.id}}):new n.F({content:s.d3.color}),borderWidth:new n.F({content:s.d3.borderWidth}),borderRadius:new n.F({content:s.d3.borderRadius}),padding:new n.F({content:"0.5rem"}),cursor:new n.F({content:"auto"})};r.textarea=c;const d={display:new n.F({content:"block"}),listStyleType:new n.F({content:"none"}),listStylePosition:new n.F({content:"outside"}),margin:new n.F({content:"1em 0px 1em 0px"}),padding:new n.F({content:"0px 0px 0px 1.5rem"}),width:new n.F({content:"100%"})};r.list=d;const p={display:new n.F({content:"list-item"})};r["list-item"]=p;const u={display:new n.F({content:"flex !important"}),transform:new n.F({content:"none !important"})};return r["teleport-show"]=u,r}},40615:function(e,t,o){o.d(t,{q:function(){return f}});var n=o(92809),s=o(10440),i=o(72045),r=o(49899),a=o(39078),l=o(246),c=o(16815),d=o(33381),p=o(13723),u=o(68803),h=o(12394);function y(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function m(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?y(Object(o),!0).forEach((function(t){(0,n.Z)(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):y(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}class f{constructor(e){(0,n.Z)(this,r.t1,void 0),(0,n.Z)(this,"id",void 0),(0,n.Z)(this,"name",void 0),(0,n.Z)(this,"identifier",void 0),(0,n.Z)(this,"usedInNodes",{}),(0,n.Z)(this,"disabledInNodes",{}),(0,n.Z)(this,"linkedTextStyles",{}),(0,n.Z)(this,"type","reusable-project-style-map"),(0,n.Z)(this,"pos",void 0),(0,n.Z)(this,"conditions",{}),(0,n.Z)(this,"content",{}),(0,n.Z)(this,"categoryId",void 0),(0,n.Z)(this,"isDefault",void 0);const{id:t,name:o,conditions:a={},content:l={},categoryId:c,usedInNodes:d={},pos:p,linkedTextStyles:u={},disabledInNodes:h,isDefault:y}=e||{};this.id=t||(0,i.Z)(),this.name=o||"",this.identifier=(0,s.Ky)(this.name),this.usedInNodes=d,this.linkedTextStyles=u,this.conditions=a,this.content=l,this.categoryId=c,this.pos=p,this.isDefault=y||!1,this.disabledInNodes=h}addPropertyToContent(e){const{key:t,value:o,tokenId:n}=e;this.content[t]=n?new a.P({content:{referenceType:"token",id:n}}):new l.F({content:o})}addPropertyToMediaCondition(e){const{key:t,value:o,tokenId:n,viewPort:s}=e,r=Object.values(this.conditions).find((e=>"screen-size"===e.type&&e.meta.maxWidth===s));if(r)this.conditions[r.id].content[t]=n?new a.P({content:{referenceType:"token",id:n}}):new l.F({content:o});else{const e={id:(0,i.Z)(),type:"screen-size",meta:{maxWidth:Number(s)},content:{[t]:n?new a.P({content:{referenceType:"token",id:n}}):new l.F({content:o})}};this.conditions[e.id]=e}}addPropertyToStateCondition(e){const{key:t,value:o,tokenId:n,identifier:s}=e,r=Object.values(this.conditions).find((e=>"element-state"===e.type&&e.meta.state===s));if(r)this.conditions[r.id].content[t]=n?new a.P({content:{referenceType:"token",id:n}}):new l.F({content:o});else{const e={id:(0,i.Z)(),type:"element-state",meta:{state:s},content:{[t]:n?new a.P({content:{referenceType:"token",id:n}}):new l.F({content:o})}};this.conditions[e.id]=e}}deletePropertyByKey(e,t){const o=this.content[e].content;"string"===typeof o&&h.H.includes(e)&&(0,u.B)(o).forEach((e=>{var o;return null===(o=t.byId[e])||void 0===o?void 0:o.removeClassRelation(this.id)})),delete this.content[e]}deletePropertyFromMediaCondition(e,t,o){const n=Object.values(this.conditions).find((e=>"screen-size"===e.type&&e.meta.maxWidth===t));if(!n)return;const s=this.conditions[n.id].content[e];"string"===typeof s&&h.H.includes(e)&&(0,u.B)(s).forEach((e=>{var t;return null===(t=o.byId[e])||void 0===t?void 0:t.removeClassRelation(this.id)})),delete this.conditions[n.id].content[e]}deletePropertyFromStateCondition(e,t,o){const n=Object.values(this.conditions).find((e=>"element-state"===e.type&&e.meta.state===t));if(!n)return;const s=this.conditions[n.id].content[e];"string"===typeof s&&h.H.includes(e)&&(0,u.B)(s).forEach((e=>{var t;return null===(t=o.byId[e])||void 0===t?void 0:t.removeClassRelation(this.id)})),delete this.conditions[n.id].content[e]}togglePropertyByKey(e){this.content[e].content&&(this.content[e].disabled=!this.content[e].disabled)}togglePropertyFromMediaCondition(e,t){const o=Object.values(this.conditions).find((e=>"screen-size"===e.type&&e.meta.maxWidth===t));o&&(this.conditions[o.id].content[e].disabled=!this.conditions[o.id].content[e].disabled)}togglePropertyFromStateCondition(e,t){const o=Object.values(this.conditions).find((e=>"element-state"===e.type&&e.meta.state===t));o&&(this.conditions[o.id].content[e].disabled=!this.conditions[o.id].content[e].disabled)}getStateConditions(){return Object.values(this.conditions||{}).reduce(((e,t)=>("element-state"===t.type&&(e[t.id]=t),e)),{})}getMissingStates(){const e=new Set(Object.values(c.F));return Object.values(this.conditions||{}).forEach((t=>{"element-state"===t.type&&e.has(t.meta.state)&&e.delete(t.meta.state)})),Array.from(e)}getMatchedScreenSizeStyleSetIds(e){return(0,d.I2)(this.conditions,e)}toUIDL(e){return{type:"reusable-project-style-map",content:(0,p.q)(this.content||{},e),conditions:Object.values(this.conditions||{}).reduce(((t,o)=>{if("screen-size"===o.type){const n={type:"screen-size",content:(0,p.q)(o.content||{},e),meta:{maxWidth:Number(o.meta.maxWidth)}};t.push(n)}if("element-state"===o.type){const n={type:"element-state",content:(0,p.q)(o.content||{},e),meta:{state:o.meta.state}};t.push(n)}return t}),[])}}toJSON(){return{id:this.id,name:this.name,type:this.type,conditions:this.conditions,content:this.content,categoryId:this.categoryId,usedInNodes:this.usedInNodes,linkedTextStyles:this.linkedTextStyles,identifier:this.identifier,pos:this.pos,isDefault:this.isDefault}}fromJSON(e){const{id:t,name:o,conditions:n={},content:i={},categoryId:r,usedInNodes:a={},pos:l,linkedTextStyles:c={},disabledInNodes:d,isDefault:p}=e;return this.id=t,this.name=o,this.categoryId=r,this.type="reusable-project-style-map",this.identifier=(0,s.Ky)(o),this.pos=l,this.usedInNodes=JSON.parse(JSON.stringify(a)),this.isDefault=p,this.disabledInNodes=d,this.linkedTextStyles=c,this.content=this.mapOverStyles(i),this.conditions=this.mapOverConditions(n),this}mapOverStyles(e){return Object.keys(e||{}).reduce(((t,o)=>{const n=e[o];return"static"===n.type&&(t[o]=new l.F(m({},n))),"dynamic"===n.type&&(t[o]=new a.P(m({},n))),t}),{})}mapOverConditions(e){return e.reduce(((e,t)=>{const o=(0,i.Z)();if("screen-size"===t.type){const n={id:o,type:t.type,content:this.mapOverStyles(t.content),meta:{maxWidth:t.meta.maxWidth}};e[o]=n}if("element-state"===t.type){const n={id:o,type:t.type,content:this.mapOverStyles(t.content),meta:{state:t.meta.state}};e[o]=n}return e}),{})}applyPatch(e){const{op:t,pathArray:o,value:n}=e;switch(o[0]){case"name":return"add"!==t&&"replace"!==t||(this.name=n),void("remove"===t&&(this.name=""));case"content":return"add"===t&&2===o.length&&o[1].length>0?void(this.content[o[1]]=(0,d.KC)(e.value)):("remove"===t&&2===o.length&&delete this.content[o[1]],"replace"===t&&1===o.length&&n&&(this.content=(0,d.bb)(n)),void("replace"===t&&2===o.length&&n&&(this.content[o[1]]=(0,d.KC)(n))));case"conditions":if("add"===t&&2===o.length){const t=e.value;return void(this.conditions[t.id]=m(m({},t),{},{content:(0,d.bb)(t.content)}))}if("add"===t&&4===o.length)return void(this.conditions[o[1]].content[o[3]]=(0,d.KC)(e.value));if("remove"===t&&4===o.length)return void delete this.conditions[o[1]].content[o[3]];if("replace"===t&&3===o.length&&n)return void(this.conditions[o[1]].content=(0,d.bb)(n));if("replace"===t&&4===o.length&&n)return void(this.conditions[o[1]].content[o[3]]=(0,d.KC)(n));case"usedInNodes":if("add"===t&&2===o.length)return void(this.usedInNodes[o[1]]=!0);"remove"===t&&2===o.length&&delete this.usedInNodes[o[1]];default:return}}}},72579:function(e,t,o){let n,s;o.d(t,{B:function(){return n},E:function(){return s}}),function(e){e.ADDING="adding",e.SUCCESS="success",e.FAILED="failed"}(n||(n={})),function(e){e.ADDED="added",e.NEW="new",e.MODIFIED="modified",e.REMOVED="removed",e.STAGED="staged",e.RENAMED="renamed",e.CONFLICT="conflict",e.RESOLVED="resolved"}(s||(s={}))},61621:function(e,t,o){o.d(t,{T:function(){return r}});var n=o(92809),s=o(72045);function i(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}const r=new class{constructor(){(0,n.Z)(this,"execute",(e=>{const{doc:t,targetNodeId:o,styles:r}=e;return Object.keys(r||{}).reduce(((e,a)=>{const l=r[a],{type:c,content:d}=l;if("style-map"===c&&"inlined"===d.mapType){const r=d.conditions.map((e=>function(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?i(Object(o),!0).forEach((function(t){(0,n.Z)(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):i(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}({},e))),a=(0,s.Z)();e[a]={id:a,type:"style-map",content:{mapType:"inlined",conditions:r,styles:Object.keys(d.styles||{}).reduce(((e,n)=>{const s=d.styles[n];if("static"===s.type&&(e[n]=s.clone(),"fontFamily"===n&&o)){const n=t.fonts.getFontIdByName(s.content);if(!n)return e;t.fonts.byId[n.id].usedInNodes[o]?t.fonts.byId[n.id].usedInNodes[o]+=1:t.fonts.byId[n.id].usedInNodes[o]=1}if("dynamic"===s.type&&(e[n]=s.clone(),"token"===s.content.referenceType&&s.content.id&&o)){const n=t.designLanguage.tokensById[s.content.id];if(!n)return e;n.usedInNodes[o]?n.usedInNodes[o]++:n.usedInNodes[o]=1}return e}),{})}}}if("style-map"===c&&"design-language-referenced"===d.mapType){const n=(0,s.Z)();e[n]={id:n,type:"style-map",content:{mapType:"design-language-referenced",referenceId:d.referenceId}};const i=t.designLanguage.textStyleSetsById[d.referenceId];if(!i||!o)return e;i.usedInNodes[o]=!0}if("style-map"===c&&"project-referenced"===d.mapType){const n=d.referenceId;e[n]={id:n,type:"style-map",content:{mapType:"project-referenced",referenceId:d.referenceId}};const s=t.classes.byId[d.referenceId];if(!s||!o)return e;s.usedInNodes[o]=!0}return e}),{})}))}};Object.freeze(r)},37326:function(e,t,o){o.d(t,{l:function(){return i}});var n=o(92809),s=o(61621);const i=new class{constructor(){(0,n.Z)(this,"execute",(e=>{const{doc:t,targetNodeId:o,nodeId:n}=e;if(!t)return null;const i=t.nodes.byId[n];if(!i)throw new Error("Node to clone referencedStyles is missing");return s.T.execute({targetNodeId:o,styles:i.referencedStyles,doc:t})}))}};Object.freeze(i)},77260:function(e,t,o){o.d(t,{l:function(){return n}});const n=new class{execute(e){const{styles:t,targetNodeId:o,doc:n}=e;return Object.keys(t||{}).reduce(((e,s)=>{const i=t[s];if("static"===i.type&&i.content&&(e[s]=i.clone(),"fontFamily"===s&&o)){const t=n.fonts.getFontIdByName(i.content.toString());if(!t)return e;n.fonts.byId[t.id].usedInNodes[o]?n.fonts.byId[t.id].usedInNodes[o]+=1:n.fonts.byId[t.id].usedInNodes[o]=1}if("dynamic"===i.type&&(e[s]=i.clone(),"token"===i.content.referenceType&&i.content.id&&o)){const t=n.designLanguage.tokensById[i.content.id];if(!t)return e;t.usedInNodes[o]?t.usedInNodes[o]++:t.usedInNodes[o]=1}return e}),{})}};Object.freeze(n)},5360:function(e,t,o){o.d(t,{S:function(){return i}});var n=o(92809),s=o(77260);const i=new class{constructor(){(0,n.Z)(this,"execute",(e=>{const{nodeId:t,doc:o,targetNodeId:n}=e,i=o.nodes.byId[t];if(!i)throw new Error("Source node is missing");return s.l.execute({styles:i.styles,targetNodeId:n,doc:o})}))}};Object.freeze(i)},3715:function(e,t,o){o.d(t,{X:function(){return l}});var n=o(92809),s=o(77729),i=o(53482),r=o(246),a=o(7721);const l=new class{constructor(){(0,n.Z)(this,"execute",(e=>{const{node:t,propId:o,propDefinition:n,staticValue:s}=e;Object.values(n.locations).forEach((e=>{Object.values(e).forEach((e=>{const{base:n,sufix:l}=e;switch(n){case i.hD.CONTENT:const e=t.contentChildren;if(!e)return;Object.keys(e).forEach((t=>{const n=e[t];l&&t!==l||"dynamic"===n.type&&n.content.id===o&&(e[t]=new r.F({content:s,id:t}))}));break;case i.hD.ATTR:Object.keys(t.attrs).forEach((e=>{const n=t.attrs[e];l&&e!==l||"dynamic"===n.type&&n.content.id===o&&(t.attrs[e]=new r.F({content:s}))}));break;case i.hD.ABILITY:Object.keys(t.abilities).forEach((e=>{const n=t.abilities[e],i=l;if(!(0,a.L)(n,i))return;const r=this.replaceDynamicAbilityWithStatic({ability:n,propId:o,staticValue:s});r&&(t.abilities[e]=r)}));break;case i.hD.STYLE:}}))}))})),(0,n.Z)(this,"replaceDynamicAbilityWithStatic",(e=>{const{ability:t,propId:o,staticValue:n}=e,{type:i,content:r}=t;switch(i){case s.RZ.URL:const e=r;"string"!==typeof e.url&&e.url.content.id===o&&(e.url=n);break;case s.RZ.PHONE:const t=r,{phone:i}=t;"string"!==typeof i&&i.content.id===o&&(t.phone=n);break;case s.RZ.MAIL:const a=r,{body:l,mail:c,subject:d}=a;"string"!==typeof l&&(null===l||void 0===l?void 0:l.content.id)===o&&(a.body=n),"string"!==typeof c&&c.content.id===o&&(a.mail=n),"string"!==typeof d&&(null===d||void 0===d?void 0:d.content.id)===o&&(a.subject=n)}return t}))}};Object.freeze(l)},7721:function(e,t,o){o.d(t,{r:function(){return c},L:function(){return d}});var n=o(77729),s=o(75222),i=o(10440),r=o(72045),a=o(53482);const l={[s.RY.HEADING1]:"heading",[s.RY.HEADING2]:"heading",[s.RY.HEADING3]:"heading",[s.RY.HEADING4]:"heading",[s.RY.HEADING5]:"heading",[s.RY.HEADING6]:"heading"},c=e=>{const t=e.semanticType?l[e.semanticType]:e.semanticType;return{id:(0,r.Z)(),name:(0,i.yE)(e.name||t||e.primitiveType||"")||"new_prop",type:"string",inputType:a.SO.TEXT}},d=(e,t)=>{const{type:o}=e;return!!t&&(o!==n.RZ.NAVLINK&&o!==n.RZ.SECTION&&((o!==n.RZ.URL||"url"===t)&&((o!==n.RZ.PHONE||"phone"===t)&&!(o===n.RZ.MAIL&&"mail"!==t&&"subject"!==t))))}},83141:function(e,t,o){o.d(t,{K:function(){return j}});var n,s,i,r=o(92809),a=o(76883),l=o(73202),c=o(30773),d=o(68124),p=o(69517);let u=(n=(0,a.f3)("mediaQueryBreakpointManagementFlow"),s=class{constructor(e){(0,r.Z)(this,"pan",void 0),(0,r.Z)(this,"loaded",void 0),(0,r.Z)(this,"currentWidth",void 0),(0,r.Z)(this,"matchedBreakpoint",void 0),(0,r.Z)(this,"interactionState",{state:null}),(0,r.Z)(this,"mediaQueryModeEnabled",void 0),(0,r.Z)(this,"webComp",void 0),(0,l.Z)(this,"mediaQueryBreakpointManagementFlow",i,this),(0,r.Z)(this,"getPercentageYForPixels",(e=>{const t=this.webComp.stateValues.logicalValues;return(0,p.iq)(e,t.minY,t.maxY)}));const{pan:t,loaded:o,webComp:n,currentWidth:s}=e||{pan:!1,loaded:!1,currentWidth:d.Bk,webComp:JSON.parse(JSON.stringify(d.m7))};this.pan=t,this.loaded=o,this.webComp=n,this.setCurrentWidth(s)}getCurrentWidth(){return this.currentWidth}setCurrentWidth(e){this.currentWidth=e;const t=this.mediaQueryBreakpointManagementFlow.getActiveMediaQueriesInOrder().filter((t=>e<=(null===t||void 0===t?void 0:t.maxWidth)))[0];this.mediaQueryModeEnabled=!(!t&&this.mediaQueryModeEnabled),this.matchedBreakpoint=null===t||void 0===t?void 0:t.id}setInteractionState(e,t){this.interactionState=e?{state:e,classId:t}:{state:null}}fromJSON(e){const{pan:t,loaded:o,currentWidth:n,webComp:s}=e;return this.loaded=o,this.pan=t,this.webComp=s,this.setCurrentWidth(n),this}toJSON(){return{pan:this.pan,loaded:this.loaded,currentWidth:this.currentWidth,webComp:this.webComp,matchedBreakpoint:this.matchedBreakpoint,mediaQueryModeEnabled:this.mediaQueryModeEnabled}}},i=(0,c.Z)(s.prototype,"mediaQueryBreakpointManagementFlow",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),s);var h,y=o(93510),m=o(62256),f=o(39923),b=o(77736),g=o(2318),I=o(45461),v=o(23861);let j=(0,a.JJ)("projectUIState")(h=class{constructor(){(0,r.Z)(this,"title",""),(0,r.Z)(this,"slug",""),(0,r.Z)(this,"customDomain",""),(0,r.Z)(this,"teleportVercelAlias",""),(0,r.Z)(this,"workspace",{id:"",slug:"",name:"",professionalSubscription:!1,subscriptionPlanType:null}),(0,r.Z)(this,"tokens",{githubToken:null,vercelToken:null}),(0,r.Z)(this,"pageList",{pageUnderLocalWork:null,isSettingsPanelOpen:!1}),(0,r.Z)(this,"componentList",{componentUnderLocalWork:null,currentComponentSearch:"",stateValues:{}}),(0,r.Z)(this,"layersSearchText",""),(0,r.Z)(this,"nodesList",{renamedNodeId:null}),(0,r.Z)(this,"localWork",{nodesUnderLocalWork:null,changedStyles:null,changedAttrs:null,changedContent:null,initialPropValues:null}),(0,r.Z)(this,"assetsList",{assetUnderLocalWork:null,assetUploading:!1,assetsDownloading:{},toggledIconLibraries:{},currentIconSearch:"",currentUnsplashSearch:"",currentUploadsSearch:"",selected:{}}),(0,r.Z)(this,"isLeavingProject",!1),(0,r.Z)(this,"commandPalette",{opened:!1,actionCommandActive:!1}),(0,r.Z)(this,"designLanguage",{currentlyEditedCategoryName:"",sidebarPanel:null}),(0,r.Z)(this,"folders",{folderUnderEdit:null,selectedAssetFolderId:v.D.ASSETS}),(0,r.Z)(this,"layout",{sidebarPanel:y.tI.FILES,mainPanel:y.iW.STAGE,designLanguageTab:y.Xd.COLORS,visibleInspector:y.dG.MAIN,selectedAssetsTab:y.Zs.UNSPLASH,selectedElementsTab:y.GP.ELEMENTS,shortcutsVisible:!1,helpBubbleVisible:!1,projectMenuOpen:!1,selectedSectionTemplatesGroup:f.mY.Headers,selectedComponentSetupTab:y.wU.PROPS}),(0,r.Z)(this,"stageElementsInView",{widthLabel:!0}),(0,r.Z)(this,"currentTextInClipboard",""),(0,r.Z)(this,"drag",{draggingFiles:!1,draggedEntity:null,currentMousePosition:null,initialMousePosition:null,dragInAbsolutePosition:{absDraggedElements:{},absDraggedElementsParents:{},clonePlaceholders:{}}}),(0,r.Z)(this,"dropFlowStates",{treeView:{dropAnchor:null,acceptedDropTarget:null,dropAllowed:!0},flexContainer:{acceptedDropTarget:null,childAnchoringDrop:null,newWrapperFlexDirection:null,dropPosition:null,dropOutsideTarget:null,dropIsDisabled:!1},unknownContainer:{acceptedDropTarget:null,childAnchoringDrop:null,newWrapperFlexDirection:null,dropPosition:null,dropOutsideTarget:null,dropIsDisabled:!1},blockInlineContainer:{acceptedDropTarget:null,childAnchoringDrop:null,newWrapperFlexDirection:null,dropPosition:null,dropOutsideTarget:null,dropIsDisabled:!1},tokenCategory:{dropAnchor:null,acceptedDropTarget:null,closestTokenElement:null},button:{acceptedDropTarget:null,dropPosition:null,childAnchoringDrop:null,dropOutsideTarget:null,dropIsDisabled:!1,newWrapperFlexDirection:null},list:{acceptedDropTarget:null,dropPosition:null,childAnchoringDrop:null,dropOutsideTarget:null,dropIsDisabled:!1,newWrapperFlexDirection:null},slot:{acceptedDropTarget:null,dropPosition:null,childAnchoringDrop:null,dropOutsideTarget:null,dropIsDisabled:!1,newWrapperFlexDirection:null},navbar:{acceptingTab:null,dropPosition:null},folder:{acceptedDropTarget:null}}),(0,r.Z)(this,"selection",{componentId:null,nodes:{},expandedTreeNodes:{},dragSelection:null,compInstanceId:null,interactiveElementRootId:null,nodesWithUtilityClasses:{}}),(0,r.Z)(this,"tailwind",{building:!1}),(0,r.Z)(this,"devMode",{selectedFile:null,previouslySelectedFile:null,bundlerStatus:null,navigation:{},expandedFolders:{},pathUnderRename:null,devComponents:{},devStyles:{},sidebarSettings:{panel:y.Xk.FILES,gridTemplateColumns:"286px 0px 1fr",width:"286px"},showPreviewer:!0,showConsole:!1,loadingPackages:!1,fileUnderUpdate:!1,selectedDiffingFile:null,selectedStagedFile:null,selectedCommitFile:null,selectedCommitFilesHistory:{},selectedConflictFile:null,githubCommits:{},selectedBranch:I.cY,githubInitializing:!1,githubBranches:{byId:{},underRename:null,underCreationSource:null},hasAccessToGithubRepo:!0,githubTokenValid:!0,githubOperationInProgress:null,conflictModalOpened:!1,fileUnderExternalUpdate:null,packageExports:null}),(0,r.Z)(this,"lastVisitedPage",null),(0,r.Z)(this,"lastVisitedComponent",null),(0,r.Z)(this,"previousSelectedPageOrCompId",null),(0,r.Z)(this,"hoveredNodes",{nodes:{}}),(0,r.Z)(this,"mediaQueryBreakpoints",{showManagementPanel:!1,defaultBreakpoint:d.Bk}),(0,r.Z)(this,"componentCodeGeneration",{compiledComponent:null,status:"initial"}),(0,r.Z)(this,"projectPublish",{[y.Fb.TELEPORT]:{status:"initial"},[y.Fb.VERCEL]:{status:"initial"}}),(0,r.Z)(this,"projectDownload",{zip:{status:"initial"},codesandbox:{status:"initial"},github:{status:"initial"}}),(0,r.Z)(this,"userPreferences",{projectType:m.cd.REACT,projectExportType:y.iW.STAGE,componentCodeType:m.re.REACT,componentCodeStyleVariation:m.cx.CSSModules,highlightParent:!0,persistViewportSize:!0,viewportSize:d.Bk,persistZoomLevel:!0,zoomLevel:1,layoutStructureVisible:!1,keepAspectRatio:!1,highlightMarginAndPadding:!0,mediaQueryOnRichText:!0,automaticallyCreateOverrides:!0,classesInTreeView:!0,showElementTag:!1,showMediaQueryGuideLines:!0,devPreviewerType:y.jK.INSIDE,devFileViewState:{local:{},diffing:{},commit:{},staged:{}}}),(0,r.Z)(this,"sidebarSettings",{expanded:{[g.S.PAGES]:!0,[g.S.COMPONENTS]:!0,[g.S.WIDGETS]:!0},filesGridTemplateRows:"1fr 10px 1fr",width:256}),(0,r.Z)(this,"userInteractions",{undo:0,redo:0,pressedKeys:{},clipboard:{copiedNodes:null,cutNodesEnabled:!1,copiedUIDL:null},resizeInProgress:!1,zoomInProgress:!1,focusedImgAttr:null,focusedBgImgIndex:null,UploadedAssetType:null,cursorProperty:"auto",inPreviewMode:!1}),(0,r.Z)(this,"projectStatus",null),(0,r.Z)(this,"stage",new u),(0,r.Z)(this,"tutorials",{currentStep:null,tutorialInProgress:null}),(0,r.Z)(this,"staticNodeInterationsData",{selectionStyles:null,selectedText:null,editingNode:{},isSettingLink:!1,activeSelection:null}),(0,r.Z)(this,"dynamicNodeInteractionsData",{isManagingState:!1,isManagingProps:!1,autofocusDefaultValue:!1}),(0,r.Z)(this,"navbar",{tabs:{},devModeTabs:{}}),(0,r.Z)(this,"readonly",null),(0,r.Z)(this,"cloneable",null),(0,r.Z)(this,"componentRenderStyleList",new b.vI)}})||h},85591:function(e,t,o){o.d(t,{g:function(){return i}});var n,s=o(92809);let i=(0,o(76883).JJ)("webRTCState")(n=class{constructor(){(0,s.Z)(this,"editedNodes",{}),(0,s.Z)(this,"selectedNodes",{}),(0,s.Z)(this,"selectedComp",{}),(0,s.Z)(this,"connectedPeers",{}),(0,s.Z)(this,"followedUserId",null),(0,s.Z)(this,"prevSelectedLockedNodeIds",{}),(0,s.Z)(this,"isLoadingPeers",!1),(0,s.Z)(this,"devData",{})}})||n},24023:function(e,t,o){var n,s,i,r,a,l,c,d,p,u,h,y,m,f,b,g,I,v,j,N,x,S,w,O,T,_=o(73202),E=o(92809),D=o(30773),F=o(49899),C=o(76883),A=o(89308),k=o(61030),P=o(69812),U=o(34437),L=o(89880),Z=o(70705);n=(0,C.JJ)("assetsEditFlow"),s=(0,C.f3)("assetsSelectionFlow"),i=(0,C.f3)("sharedbProjectSyncService"),r=(0,C.f3)("projectDoc"),a=(0,C.f3)("projectUIState"),l=(0,C.f3)("modalManagementFlow"),c=(0,C.f3)("nodeAttributeManagmentFlow"),d=(0,C.f3)("nodeStyleManagmentFlow"),p=(0,C.f3)("guardsService"),u=(0,C.f3)("assetsRepository"),h=(0,C.f3)("notificationsManagementFlow"),y=(0,C.f3)("projectClassManagementFlow"),n((f=class{constructor(){(0,_.Z)(this,"assetsSelectionFlow",b,this),(0,_.Z)(this,"dbSync",g,this),(0,_.Z)(this,"projectDoc",I,this),(0,_.Z)(this,"projectUIState",v,this),(0,_.Z)(this,"modalManagementFlow",j,this),(0,_.Z)(this,"nodeAttributeManagmentFlow",N,this),(0,_.Z)(this,"nodeStyleManagmentFlow",x,this),(0,_.Z)(this,"guardsService",S,this),(0,_.Z)(this,"assetsRepository",w,this),(0,_.Z)(this,"notificationsManagementFlow",O,this),(0,_.Z)(this,"projectClassManagementFlow",T,this),(0,E.Z)(this,"replaceAssetAbsoluteSrcWithLocal",(e=>{if(!e)return"";const t=this.findAssetByAbsolutePath(e);return t?`${P.Bq}/${t.name}`:e})),(0,E.Z)(this,"replaceAssetLocalSrcWithAbsolute",((e,t)=>{if(!e)return"";const o=this.findAssetByLocalPath(e);return o?t?o.getRemoteSrcForComp(t):o.remoteSrc:e})),(0,E.Z)(this,"getAssetBySrc",(e=>{if(e)return this.findAssetByAbsolutePath(e)||this.findAssetByLocalPath(e)}))}beginEditing(e){e&&this.projectDoc.assets.byId[e]&&(0,F.JG)(this.projectUIState,(t=>{t.assetsList.assetUnderLocalWork=(new A.G).fromJSON(this.projectDoc.assets.byId[e].toJSON())}))}stopEditing(){(0,F.JG)(this.projectUIState,(e=>{e.assetsList.assetUnderLocalWork=null}))}createAssetInNodeRelation(e){const{assetId:t,nodeId:o,doc:n}=e;if(!n)return;const s=n.assets.byId[t];s&&s.createNodeRelation(o)}removeAssetInNodeRelation(e){const{assetId:t,nodeId:o}=e;this.dbSync.mutate(this.projectDoc,(e=>{const n=e.assets.byId[t];n&&n.removeNodeRelation(o)}))}rename(e,t,o=!1){if(!e||!t||!t.length)return;const n=this.projectDoc.assets.byId[e];if(!n)throw new Error("Tried to rename an asset that doesn't exist");if(n.name===t)return void this.stopEditing();t=this.getAssetUniqueName(t);const{isValid:s,error:i}=A.G.prototype.nameIsValid(t);if(!s)return o&&this.stopEditing(),void this.notificationsManagementFlow.handleError(i);this.dbSync.mutate(this.projectDoc,(o=>{o.assets.byId[e].name=t})),this.stopEditing()}getAssetUniqueName(e){const t=Object.values(this.projectDoc.assets.byId).map((e=>e.name));return(0,Z._x)(t,e)}deleteSelectedAssets(){const e=Object.keys(this.projectUIState.assetsList.selected);this.deleteWithConfirmation(e)}deleteWithConfirmation(e){let t="asset";Array.isArray(e)&&e.length>1&&(t="assets");const o=k.d.createDeleteModal({deletedEntity:t,onSubmit:()=>{this.delete(e),(0,F.JG)(this.projectUIState,(t=>{Array.isArray(e)?e.forEach((e=>delete t.assetsList.selected[e])):delete t.assetsList.selected[e]}))}});this.modalManagementFlow.showModal(o)}async delete(e,t){if(!e||Array.isArray(e)&&!e.length)return!1;const o=[].concat(e),n=o.map((e=>{var t;return null===(t=this.projectDoc.assets.byId[e])||void 0===t?void 0:t.path})).filter((e=>e));return!!n.length&&(this.guardsService.executeFunctionGuarded(L._.DISABLE_HISTORY,(()=>this.dbSync.mutate(this.projectDoc,(e=>{this.removeAssetsFromNodes({doc:e,assetIds:o}),this.removeAssetsFromClasses({doc:e,assetIds:o}),o.forEach((t=>{const o=e.assets.byId[t];o&&(o.parentFolderId&&e.folders.removeChildFromFolder({child:{[o.id]:"asset"},folderId:o.parentFolderId}),e.assets.remove(t))}))})))),t||await this.assetsRepository.delete(this.projectDoc.id,n),!0)}removeAssetsFromNodes(e){const{assetIds:t,doc:o}=e;if(o)for(const n of t){const e=o.assets.byId[n];if(!Object.keys(e.usedInNodes).length)continue;Object.keys(e.usedInNodes).map((t=>{const n=o.nodes.byId[t];if(!n)return null;return{nodeId:t,nodeInstance:n,assetSrc:e.id}})).forEach((e=>{if(!e)return;const{nodeInstance:t,assetSrc:n,nodeId:s}=e;this.removeAssetSourceFromNodeAttrs({doc:o,nodeInstance:t,assetSrc:n,nodeId:s}),this.removeAssetFromNodeStyle({doc:o,nodeInstance:t,assetSrc:n,nodeId:s})}))}}removeAssetsFromClasses(e){const{assetIds:t,doc:o}=e;if(o)for(const n of t){const e=o.assets.byId[n];if(!Object.keys(e.usedInClasses||{}).length)continue;Object.keys(e.usedInClasses||{}).map((t=>({classId:t,assetSrc:e.id}))).forEach((e=>{if(!e)return;const{assetSrc:t,classId:n}=e;this.removeAssetFromClassStyle({doc:o,assetSrc:t,classId:n})}))}}removeAssetSourceFromNodeAttrs(e){const{doc:t,nodeInstance:o,assetSrc:n,nodeId:s}=e;if(!t)return;const i=o.attrs;Object.keys(i).forEach((e=>{const o=i[e];if("comp-style"!==o.type){if("dynamic"===o.type&&"prop"===o.content.referenceType){const e=t.components.byId[t.getComponentIdForNode(s)||""];if(!e)throw new Error(`Could not find source component for node ${s}`);const i=e.propDefinitions[o.content.id];if((null===i||void 0===i?void 0:i.defaultValue)!==n)return}"number"!==typeof o.content&&("static"===o.type&&-1===o.content.indexOf(n)&&o.content!==P.i$||this.nodeAttributeManagmentFlow.updateAttrByKey({doc:t,nodeId:s,key:e,value:P.i$}))}}))}removeAssetFromNodeStyle(e){const{doc:t,nodeInstance:o,assetSrc:n,nodeId:s}=e;if(!t)return;const i=o.styles;Object.keys(i).forEach((e=>{const o=i[e];if("static"!==o.type||"string"!==typeof o.content)return;if(-1===o.content.indexOf(n))return;const r=this.nodeStyleManagmentFlow.replaceRemovedAssetFromBgImg(n,o.content);r?this.nodeStyleManagmentFlow.setStyleByKey({doc:t,nodeIds:[s],key:e,value:r}):this.nodeStyleManagmentFlow.removeStyleByKey({doc:t,nodeIds:[s],key:e})}));const r=o.referencedStyles;Object.keys(r).forEach((e=>{if("inlined"!==r[e].content.mapType)return;const o=r[e],i=o.content.styles;Object.keys(i).forEach((e=>{const r=i[e];if("static"!==r.type||"string"!==typeof r.content)return;if(-1===r.content.indexOf(n))return;const a=o.content.conditions[0];if(!a)return;const l=this.nodeStyleManagmentFlow.replaceRemovedAssetFromBgImg(n,r.content);l?this.nodeStyleManagmentFlow.setConditionalInlineStyleByKey({doc:t,nodeIds:[s],key:e,value:l,condition:a}):this.nodeStyleManagmentFlow.removeConditionalInlineStyleByKey({doc:t,nodeIds:[s],key:e,condition:a})}))}))}removeAssetFromClassStyle(e){const{doc:t,assetSrc:o,classId:n}=e;if(!t)return;const s=t.classes.byId[n],i=s.content;Object.keys(i).forEach((e=>{const s=i[e];"static"===s.type&&"string"===typeof s.content&&-1!==s.content.indexOf(o)&&this.projectClassManagementFlow.addOrUpdate({doc:t,classId:n,key:e,identifier:"desktop",value:`url("${P.i$}")`})}));const r=s.conditions;Object.keys(r).forEach((e=>{const s=r[e];let i;i="screen-size"===s.type?s.meta.maxWidth:s.meta.state,Object.keys(s.content||{}).forEach((e=>{const r=s.content[e];"static"===r.type&&"string"===typeof r.content&&-1!==r.content.indexOf(o)&&this.projectClassManagementFlow.addOrUpdate({doc:t,classId:n,key:e,identifier:i,value:`url("${P.i$}")`})}))}))}findAssetByAbsolutePath(e){if(null!==e&&void 0!==e&&e.includes(P.rq))return Object.values(this.projectDoc.assets.byId).find((t=>-1!==e.indexOf(t.path)))}findAssetByLocalPath(e){if(null===e||void 0===e||!e.includes(P.Bq))return;const t=Object.values(this.projectDoc.assets.byId),o=e.split("/"),n=o[o.length-1];return t.find((e=>-1!==n.indexOf(e.name)))}},b=(0,D.Z)(f.prototype,"assetsSelectionFlow",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),g=(0,D.Z)(f.prototype,"dbSync",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),I=(0,D.Z)(f.prototype,"projectDoc",[r],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),v=(0,D.Z)(f.prototype,"projectUIState",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),j=(0,D.Z)(f.prototype,"modalManagementFlow",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),N=(0,D.Z)(f.prototype,"nodeAttributeManagmentFlow",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),x=(0,D.Z)(f.prototype,"nodeStyleManagmentFlow",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),S=(0,D.Z)(f.prototype,"guardsService",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),w=(0,D.Z)(f.prototype,"assetsRepository",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),O=(0,D.Z)(f.prototype,"notificationsManagementFlow",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),T=(0,D.Z)(f.prototype,"projectClassManagementFlow",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),(0,D.Z)(f.prototype,"createAssetInNodeRelation",[U.P],Object.getOwnPropertyDescriptor(f.prototype,"createAssetInNodeRelation"),f.prototype),(0,D.Z)(f.prototype,"removeAssetsFromNodes",[U.P],Object.getOwnPropertyDescriptor(f.prototype,"removeAssetsFromNodes"),f.prototype),(0,D.Z)(f.prototype,"removeAssetsFromClasses",[U.P],Object.getOwnPropertyDescriptor(f.prototype,"removeAssetsFromClasses"),f.prototype),(0,D.Z)(f.prototype,"removeAssetSourceFromNodeAttrs",[U.P],Object.getOwnPropertyDescriptor(f.prototype,"removeAssetSourceFromNodeAttrs"),f.prototype),(0,D.Z)(f.prototype,"removeAssetFromClassStyle",[U.P],Object.getOwnPropertyDescriptor(f.prototype,"removeAssetFromClassStyle"),f.prototype),m=f))},91070:function(e,t,o){var n,s,i,r,a,l,c,d,p,u,h,y,m,f,b,g,I,v,j,N,x,S,w,O,T,_,E,D,F,C,A,k,P,U=o(73202),L=o(92809),Z=o(30773),R=o(76883),M=o(12443),H=o(78064),$=o(71919),B=o(5395),G=o(77729),z=o(75222),W=o(53482),V=o(4509),K=o(34437),J=o(70705),X=o(55733),Y=o.n(X),q=o(49899),Q=o(36565);n=(0,R.JJ)("assetsManagementFlow"),s=(0,R.f3)("sharedbProjectSyncService"),i=(0,R.f3)("projectDoc"),r=(0,R.f3)("projectUIState"),a=(0,R.f3)("assetsEditFlow"),l=(0,R.f3)("nodeStyleManagmentFlow"),c=(0,R.f3)("nodeManagementFlow"),d=(0,R.f3)("nodeAttributeManagmentFlow"),p=(0,R.f3)("unsplashFlow"),u=(0,R.f3)("notificationsManagementFlow"),h=(0,R.f3)("assetsRepository"),y=(0,R.f3)("projectInitFlow"),m=(0,R.f3)("assetsService"),f=(0,R.f3)("imageOptimisationFlow"),b=(0,R.f3)("sentryService"),g=(0,R.f3)("fileDownloadService"),n((v=class{constructor(){(0,U.Z)(this,"dbSync",j,this),(0,U.Z)(this,"projectDoc",N,this),(0,U.Z)(this,"projectUIState",x,this),(0,U.Z)(this,"assetsEditFlow",S,this),(0,U.Z)(this,"nodeStyleManagmentFlow",w,this),(0,U.Z)(this,"nodeManagementFlow",O,this),(0,U.Z)(this,"nodeAttributeManagmentFlow",T,this),(0,U.Z)(this,"unsplashFlow",_,this),(0,U.Z)(this,"notificationsManagementFlow",E,this),(0,U.Z)(this,"assetsRepository",D,this),(0,U.Z)(this,"projectInitFlow",F,this),(0,U.Z)(this,"assetsService",C,this),(0,U.Z)(this,"imageOptimisationFlow",A,this),(0,U.Z)(this,"sentryService",k,this),(0,U.Z)(this,"fileDownloadService",P,this),(0,L.Z)(this,"getPropNameAndTargetNodeForImageInComp",(e=>{let t=e;const o=this.projectDoc.nodes.byId[e];if(!o)throw new Error("No node found for node id");let n=this.projectUIState.userInteractions.focusedImgAttr||"";if(this.projectDoc.nodes.nodeIsCompInstance(o)){var s;const e=o.compIdOfCompInstance;if(!e)throw new Error("No comp id found for comp instance");const i=(null===(s=this.projectDoc.components.byId[e])||void 0===s?void 0:s.propDefinitions)||{},r=Object.values(i).find((e=>n?e.name===n:e.inputType===W.SO.IMAGE))||Object.values(i).find((e=>e.inputType===W.SO.IMAGE));if(r&&(n&&n===r.name||(n=r.name),t=Object.keys(r.locations).find((e=>Object.values(r.locations[e]).find((e=>"src"===e.sufix))))||t),!n)return{targetNodeId:t,propName:""}}return{propName:n,targetNodeId:t}})),(0,L.Z)(this,"setPosterForSelectedNode",(async(e,t)=>{const o=Object.keys(this.projectUIState.selection.nodes)[0],n=this.projectDoc.nodes.byId[o];if(!n)return;const s=await this.getAssetSrc(e,{targetNodeId:o,downloadLink:t});this.nodeAttributeManagmentFlow.updateAttrByKey({nodeId:n.id,key:"poster",value:s})})),(0,L.Z)(this,"setSrcForSelectedNode",(async(e,t)=>{const o=Object.keys(this.projectUIState.selection.nodes)[0],n=this.projectDoc.nodes.byId[o];if(!n)return;const{propName:s,targetNodeId:i}=this.getPropNameAndTargetNodeForImageInComp(n.id),r=await this.getAssetSrc(e,{targetNodeId:i,downloadLink:t}),a=n.primitiveType===z.sO.COMPONENT;a&&-1!==s.indexOf("bgImage")&&-1!==s.indexOf(i)?this.setBgImageForSelectedNode(e,t):this.nodeAttributeManagmentFlow.updateAttrByKey({nodeId:n.id,key:a?s:"src",value:r})})),(0,L.Z)(this,"setBgImageForSelectedNode",(async(e,t)=>{const o=Object.keys(this.projectUIState.selection.nodes)[0];if(!o)return;let n=await this.getAssetSrc(e,{targetNodeId:o,downloadLink:t});this.projectDoc.assets.byId[n]||(n=`url("${n}")`);const s=this.nodeStyleManagmentFlow.getNewBackgroundImageValue(n,o),i={backgroundImage:{value:s}};s===n&&(i.backgroundSize={value:"cover"}),this.nodeStyleManagmentFlow.setMultipleStylesByKeyForCurrentBreakpoint({nodeIds:[o],styleMap:i})})),(0,L.Z)(this,"setListStyleImageForSelectedNode",(async(e,t)=>{const o=Object.keys(this.projectUIState.selection.nodes)[0],n=this.projectDoc.nodes.byId[o];if(!n)return;let s=await this.getAssetSrc(e,{targetNodeId:o,downloadLink:t});this.projectDoc.assets.byId[s]||(s=`url("${s}")`);const i=this.nodeStyleManagmentFlow.getNewBackgroundImageValue(s,o);this.nodeStyleManagmentFlow.setStyleByKeyBasedOnCurrentBreakpoint({nodeIds:[n.id],key:"listStyleImage",value:i})})),(0,L.Z)(this,"addAssetAfterSelectedNode",(async(e,t)=>{const o=Object.keys(this.projectUIState.selection.nodes)[0],n=this.projectDoc.nodes.byId[o],s=null===n||void 0===n?void 0:n.parentId;if(!n||!s)throw new Error("Selected node or parent not found");const i=this.projectDoc.assets.byId[e],r=await this.getAssetSrc(e,{downloadLink:t,targetNodeId:o}),a=(null===i||void 0===i?void 0:i.type)===B.K.VIDEO,l=(0,M.a)({stencilKey:a?H.sO.VIDEO:H.sO.IMAGE,attrs:{src:r}});this.dbSync.mutate(this.projectDoc,(e=>{e.addNodesToParentOrStage({nodes:[l],parentId:s,nextSibling:e.nodes.getNextSibling(n)}),i&&l&&(this.assetsEditFlow.createAssetInNodeRelation({nodeId:l.id,assetId:i.id,doc:e}),this.imageOptimisationFlow.computeAssetSizeForComponent({assetId:i.id,doc:e}))}))})),(0,L.Z)(this,"addAssetOrContainerToSelectedNode",(async(e,t,o)=>{const n=Object.keys(this.projectUIState.selection.nodes)[0],s=await this.getAssetSrc(e,{downloadLink:t,targetNodeId:n}),i=this.projectDoc.assets.byId[s],r=(null===i||void 0===i?void 0:i.type)===B.K.VIDEO,a=o?(0,M.a)({stencilKey:H.sO.ROW,styles:{backgroundImage:i?s:`url("${s}")`,backgroundSize:"cover"}}):(0,M.a)({stencilKey:r?H.sO.VIDEO:H.sO.IMAGE,attrs:{src:s}});this.dbSync.mutate(this.projectDoc,(e=>{this.nodeManagementFlow.addPrimitivesToSelNodeSelectAndScroll({primitives:[a],doc:e}),i&&a&&(this.assetsEditFlow.createAssetInNodeRelation({nodeId:a.id,assetId:i.id,doc:e}),this.imageOptimisationFlow.computeAssetSizeForComponent({assetId:i.id,doc:e}))}))})),(0,L.Z)(this,"getAssetSrc",(async(e,t)=>{const o=this.projectDoc.assets.byId[e];if(o)return o.id;if(null===t||void 0===t||!t.downloadLink)return e;this.triggerUnsplashDownload(t.downloadLink);const n=`&w=${G.ou.yL}`;return e+(t&&t.targetNodeId?this.estimateNodeDimensions(t.targetNodeId):n)})),(0,L.Z)(this,"triggerUnsplashDownload",(e=>{try{return this.unsplashFlow.getAPIDownloadUrl(e)}catch(t){this.notificationsManagementFlow.createNotification($.k.ERROR,"There was a problem when getting the image")}})),(0,L.Z)(this,"estimateNodeDimensions",(e=>{let t=this.projectDoc.estimateNodeDimensionInPxByStyle("width",e),o=this.projectDoc.estimateNodeDimensionInPxByStyle("height",e);const n=G.ou.I1;t=t>G.ou.nq?G.ou.nq:t,o=o>G.ou.nq?G.ou.nq:o;const s=Math.ceil(t/n)*n,i=Math.ceil(o/n)*n;return t>o?`&w=${s}`:`&h=${i}`})),(0,L.Z)(this,"getAssetsStats",(()=>({count:Object.keys(this.projectDoc.assets.byId).length,size:Object.values(this.projectDoc.assets.byId).reduce(((e,t)=>e+parseInt(t.size.toString())),0)})))}downloadSelectedAsset(){this.downloadAssetsLocally(Object.keys(this.projectUIState.assetsList.selected))}async downloadAssetsLocally(e){(0,q.JG)(this.projectUIState,(t=>{e.forEach((e=>{t.assetsList.assetsDownloading[e]=!0}))}));const t=new(Y());try{for(const o of e){const n=this.projectDoc.assets.byId[o];await fetch(n.remoteSrc,{headers:{accept:"image/avif,image/webp,image/apng,image/*,*/*;q=0.8"}}).then((e=>e.blob())).then((o=>{1!==e.length?t.file(n.name,o):this.fileDownloadService.promptDownload(o,n.name)}))}if(1===e.length)return;t.generateAsync({type:"blob"}).then((e=>{this.fileDownloadService.promptDownload(e,"assets.zip")}))}catch(o){o.message=`Failed to download assets locally: ${o.message}`,this.sentryService.captureException(o)}finally{(0,q.JG)(this.projectUIState,(t=>{e.forEach((e=>{delete t.assetsList.assetsDownloading[e]}))}))}}async duplicateAssets(e){const t=this.projectInitFlow.getProjectLimitations(),{size:o,count:n}=this.getAssetsStats();if(e.length+n>t.MAX_ASSETS_FOR_PROJECT)throw new Error(V.N9.MAXIMUM_LIMIT_REACHED);let s=0;const i={};if(e.forEach((e=>{s+=parseInt(e.size.toString()),i[e.path]={name:e.name,type:e.type,parentFolderId:e.parentFolderId}})),s+o>t.MAX_ASSETS_SIZE_FOR_PROJECT)throw Q.Z.mixpanelEvent(Q.Z.AnalyticsEvents.WORKSPACE_LIMIT_ASSETS_REACHED),Q.Z.customEvents.workspace.assetsLimitReached(),new Error(V.N9.MAXIMUM_SIZE_LIMIT_REACHED);const r=await this.assetsRepository.duplicate(this.projectDoc.id,i);if(r&&r.length){const e=Object.values(this.projectDoc.assets.byId).map((e=>e.name));r.forEach((t=>{t.name=(0,J._x)(e,t.name),e.push(t.name)}))}return r}removeClassRelationsFromAssets(e){const{doc:t,classId:o}=e;t&&Object.values(t.assets.byId).forEach((e=>{var t;null===(t=e.usedInClasses)||void 0===t||delete t[o]}))}removeNodeRelationsFromAssets(e){const{doc:t,nodeId:o}=e;t&&Object.values(t.assets.byId).forEach((e=>{var t;null===(t=e.usedInNodes)||void 0===t||delete t[o]}))}toggleAssetOptimisation(e){const{doc:t,assetId:o}=e;if(!t)return;const n=t.assets.byId[o];if(n.skipOptimisations)return delete n.skipOptimisations,void(n.sizePerComponent=this.imageOptimisationFlow.computeAssetSizePerComponent([n])[n.id]);n.skipOptimisations=!0,delete n.sizePerComponent}checkIfOptimisationDisabled(e){var t;return!(null===(t=this.projectDoc.assets.byId[e])||void 0===t||!t.skipOptimisations)}async getOptimisedUsedAssets(){const e=this.projectDoc.assets.getAssetsUsedInProject();return await this.assetsService.createOptimisedAssets(e)}},j=(0,Z.Z)(v.prototype,"dbSync",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),N=(0,Z.Z)(v.prototype,"projectDoc",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),x=(0,Z.Z)(v.prototype,"projectUIState",[r],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),S=(0,Z.Z)(v.prototype,"assetsEditFlow",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),w=(0,Z.Z)(v.prototype,"nodeStyleManagmentFlow",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),O=(0,Z.Z)(v.prototype,"nodeManagementFlow",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),T=(0,Z.Z)(v.prototype,"nodeAttributeManagmentFlow",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_=(0,Z.Z)(v.prototype,"unsplashFlow",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),E=(0,Z.Z)(v.prototype,"notificationsManagementFlow",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),D=(0,Z.Z)(v.prototype,"assetsRepository",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),F=(0,Z.Z)(v.prototype,"projectInitFlow",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),C=(0,Z.Z)(v.prototype,"assetsService",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),A=(0,Z.Z)(v.prototype,"imageOptimisationFlow",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),k=(0,Z.Z)(v.prototype,"sentryService",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),P=(0,Z.Z)(v.prototype,"fileDownloadService",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),(0,Z.Z)(v.prototype,"removeClassRelationsFromAssets",[K.P],Object.getOwnPropertyDescriptor(v.prototype,"removeClassRelationsFromAssets"),v.prototype),(0,Z.Z)(v.prototype,"removeNodeRelationsFromAssets",[K.P],Object.getOwnPropertyDescriptor(v.prototype,"removeNodeRelationsFromAssets"),v.prototype),(0,Z.Z)(v.prototype,"toggleAssetOptimisation",[K.P],Object.getOwnPropertyDescriptor(v.prototype,"toggleAssetOptimisation"),v.prototype),I=v))},33567:function(e,t,o){var n=o(73202),s=o(92809),i=o(30773),r=o(49899),a=o(76883),l=o(69812),c=o(10440),d=o(4509),p=o(65988),u=(o(67294),o(85893));const h=e=>{const{handleLinkClick:t,isSizeError:o=!1}=e;return(0,u.jsxs)("div",{className:"jsx-1583539811",children:[(0,u.jsxs)("p",{className:"jsx-1583539811",children:["You have reached the uploads limit ",o?"size":""," in this project. "]}),(0,u.jsxs)("p",{className:"jsx-1583539811 next-row",children:["In order to upload more, you can delete some of the files you don't use anymore. You can do this from the",(0,u.jsx)("span",{onClick:t,className:"jsx-1583539811",children:(0,u.jsx)("b",{className:"jsx-1583539811 assets-manager",children:" assets manager."})})]}),(0,u.jsx)(p.default,{id:"1583539811",children:[".next-row.jsx-1583539811{margin-top:5px;}",".assets-manager.jsx-1583539811{cursor:pointer;}"]})]})};var y,m,f,b,g,I,v,j,N,x,S,w,O,T,_,E,D,F,C,A,k,P,U,L=o(93510),Z=o(71919),R=o(89880),M=o(70705),H=o(61030),$=o(46185),B=o(36565),G=o(23861);y=(0,a.JJ)("assetsUploadFlow"),m=(0,a.f3)("sharedbProjectSyncService"),f=(0,a.f3)("projectDoc"),b=(0,a.f3)("projectUIState"),g=(0,a.f3)("assetsRepository"),I=(0,a.f3)("globalAppState"),v=(0,a.f3)("guardsService"),j=(0,a.f3)("assetsManagementFlow"),N=(0,a.f3)("notificationsManagementFlow"),x=(0,a.f3)("modalManagementFlow"),S=(0,a.f3)("projectInitFlow"),y((O=class{constructor(){(0,n.Z)(this,"dbSync",T,this),(0,n.Z)(this,"projectDoc",_,this),(0,n.Z)(this,"projectUIState",E,this),(0,n.Z)(this,"assetsRepository",D,this),(0,n.Z)(this,"globalAppState",F,this),(0,n.Z)(this,"guardsService",C,this),(0,n.Z)(this,"assetsManagementFlow",A,this),(0,n.Z)(this,"notificationsManagementFlow",k,this),(0,n.Z)(this,"modalManagementFlow",P,this),(0,n.Z)(this,"projectInitFlow",U,this),(0,s.Z)(this,"checkAssetLimitReachedForFreePlan",(e=>{if(this.projectUIState.workspace.professionalSubscription)return!1;const{size:t}=this.assetsManagementFlow.getAssetsStats(),o=this.projectInitFlow.getProjectLimitations();let n=0;return(Array.isArray(e)?e:Object.values(e)).map((e=>{n+=(null===e||void 0===e?void 0:e.size)||0})),t+n>o.MAX_ASSETS_SIZE_FOR_PROJECT})),(0,s.Z)(this,"validateAssetsToUpload",(e=>{const{size:t,count:o}=this.assetsManagementFlow.getAssetsStats(),n=this.projectInitFlow.getProjectLimitations();let s=0;if(o+e.length>n.MAX_ASSETS_FOR_PROJECT)throw new Error(d.N9.MAXIMUM_LIMIT_REACHED);if((Array.isArray(e)?e:Object.values(e)).map((e=>{if(e&&(null===e||void 0===e?void 0:e.size)>10485760)throw new Error(d.N9.TOO_LARGE);s+=(null===e||void 0===e?void 0:e.size)||0;const t=e?e.name.match(/\.([^\.]+)$/):"";if(!t)throw new Error("Assets upload failed. Asset type file is missing.");if(t&&!l.oy.includes(t[1].toLowerCase())){const e=`The format of the upload is not supported. Please upload only ${(0,c.si)({list:l.oy,ending:"or"})} files.`;throw new Error(e)}})),t+s>n.MAX_ASSETS_SIZE_FOR_PROJECT)throw B.Z.mixpanelEvent(B.Z.AnalyticsEvents.WORKSPACE_LIMIT_ASSETS_REACHED),B.Z.customEvents.workspace.assetsLimitReached(),new Error(d.N9.MAXIMUM_SIZE_LIMIT_REACHED)}))}async upload(e){var t,o;const{files:n,assetType:s,parentFolderId:i=G.D.ASSETS}=e,a=null===(t=this.projectDoc.collaborators.getWorkspaceOwner())||void 0===t||null===(o=t.account)||void 0===o?void 0:o.id;if(this.checkAssetLimitReachedForFreePlan(n)){var l;const e=H.d.createCustomModal({Component:$.$,data:{entity:"assets",workspaceName:this.projectUIState.workspace.name,isWorkspaceOwner:a===(null===(l=this.globalAppState.user.userData)||void 0===l?void 0:l.id)}});this.modalManagementFlow.showModal(e)}else{try{this.validateAssetsToUpload(n)}catch(c){return void this.notificationsManagementFlow.createNotification(Z.k.ERROR,c)}try{(0,r.JG)(this.projectUIState,(e=>e.assetsList.assetUploading=!0));const e=await this.assetsRepository.upload({files:n,projectId:this.projectDoc.id,assetType:s,parentFolderId:i});if(!e)return;const t=Object.values(this.projectDoc.assets.byId).map((e=>e.name));return this.guardsService.executeFunctionGuarded(R._.DISABLE_HISTORY,(()=>this.dbSync.mutate(this.projectDoc,(o=>{e.forEach((e=>{e.name=(0,M._x)(t,e.name.toLowerCase()),t.push(e.name),o.assets.add(e);const n={[e.id]:"asset"};o.folders.addChildToFolder({child:n,folderId:this.projectUIState.folders.selectedAssetFolderId})}))})))),e}catch(c){const e=this.getUploadErrorMessage(c);this.notificationsManagementFlow.createNotification(Z.k.ERROR,e)}finally{(0,r.JG)(this.projectUIState,(e=>e.assetsList.assetUploading=!1))}}}getUploadErrorMessage(e){const t=(null===e||void 0===e?void 0:e.error)&&"string"===typeof e.error;return t&&e.error.includes(d.N9.MAXIMUM_SIZE_LIMIT_REACHED)?(B.Z.mixpanelEvent(B.Z.AnalyticsEvents.WORKSPACE_LIMIT_ASSETS_REACHED),B.Z.customEvents.workspace.assetsLimitReached(),h({handleLinkClick:this.setAssetsManagerAsOpenedSidebar,isSizeError:!0})):t&&e.error.includes(d.N9.MAXIMUM_LIMIT_REACHED)?h({handleLinkClick:this.setAssetsManagerAsOpenedSidebar}):(null===e||void 0===e?void 0:e.error)===d.lI.TOO_MANY_REQUESTS?d.lI.TOO_MANY_REQUESTS:e.message.includes("Payload Too Large")||e.message.includes("413")?"Assets upload failed. The free space limit was reached.":e.message.includes("Internal Server Error")||e.message.includes("500")?"Assets upload failed due to server connection. Please refresh or try again with fewer files.":"Assets upload failed. Please try again."}setAssetsManagerAsOpenedSidebar(){(0,r.JG)(this.projectUIState,(e=>e.layout.sidebarPanel=L.tI.ASSETS_MANAGER))}},T=(0,i.Z)(O.prototype,"dbSync",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_=(0,i.Z)(O.prototype,"projectDoc",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),E=(0,i.Z)(O.prototype,"projectUIState",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),D=(0,i.Z)(O.prototype,"assetsRepository",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),F=(0,i.Z)(O.prototype,"globalAppState",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),C=(0,i.Z)(O.prototype,"guardsService",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),A=(0,i.Z)(O.prototype,"assetsManagementFlow",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),k=(0,i.Z)(O.prototype,"notificationsManagementFlow",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),P=(0,i.Z)(O.prototype,"modalManagementFlow",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),U=(0,i.Z)(O.prototype,"projectInitFlow",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),w=O))},46882:function(e,t,o){o.d(t,{gG:function(){return n},EH:function(){return s},lJ:function(){return i}});const n=(e,t,o)=>{e=e.replace(/[\[\]]/g,"\\$&");const n=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)").exec(t);let s=t;return n?(s=s.replace(n[0],o),s):(s+=o,s)},s=(e,t)=>{e=e.replace(/[\[\]]/g,"\\$&");const o=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)").exec(t);return o||[]},i=e=>{if(!e)return"";if(!e.includes("url("))return e;const t=e.substring(e.indexOf("(")+1,e.lastIndexOf(")"));return!t||t.match(/'([^']*)|"([^"]*)/)?e:e.replace(t,`"${t}"`)}},99489:function(e,t,o){o.d(t,{P5:function(){return a},i2:function(){return l},YE:function(){return c},UO:function(){return u},EV:function(){return h},AA:function(){return y},_5:function(){return m},iY:function(){return f},pp:function(){return b},ex:function(){return g},Tj:function(){return I},vT:function(){return v},KD:function(){return j}});var n=o(92809),s=o(9420);function i(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function r(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?i(Object(o),!0).forEach((function(t){(0,n.Z)(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):i(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}const a="default-style",l="style",c="globals",{camelCaseToDashCase:d,removeIllegalCharacters:p}=s,u=e=>d(p(e)),h=e=>{const{component:t,sourcemap:o}=e;return{component:`https://jscdn.teleporthq.io/${t}`,sourcemap:`https://jscdn.teleporthq.io/${o}`}},y=(e,t)=>`https://jscdn.teleporthq.io/${e}/${t}`,m=(e,t,o)=>{const{component:n,sourcemap:s}=f(t,o);return{component:`${e}/${n}`,sourcemap:`${e}/${s}`}},f=(e,t)=>({component:`${e}.js@${t}`,sourcemap:`${e}.map@${t}`}),b=(e,t,o)=>`${e}\n //# sourceMappingURL=./${t}.map@${o}`,g=e=>({type:"element",content:{elementType:"component",semanticType:"Globals",dependency:{version:"0.0.0",type:"package",path:`./${e}`}}}),I=e=>({name:c,seo:{assets:e},node:{type:"element",content:{elementType:"container"}},outputOptions:{fileName:u("globals")}}),v=(e,t)=>({name:l,designLanguage:e,styleSetDefinitions:t,stateDefinitions:{route:{type:"string",defaultValue:"Home",values:[{value:"Home"}]}},propDefinitions:{},node:{type:"element",content:{elementType:"container"}},outputOptions:{fileName:u("style")}}),j=e=>{var t,o;const n=e.getDefaultTextStyle(),{content:s}=n||{},i=null===(t=e.getTokenWithRole("background-color"))||void 0===t?void 0:t.id,a=null===(o=e.getTokenWithRole("foreground-color"))||void 0===o?void 0:o.id,l=e.getTokensAsCustomProperties();return r(r(r({},Object.keys(s||{}).reduce(((e,t)=>{var o;return"static"===(null===(o=s[t])||void 0===o?void 0:o.type)&&(e[t]=s[t].toUIDL()),e}),{})),i&&{background:{type:"dynamic",content:{referenceType:"token",id:l[i].name}}}),a&&{color:{type:"dynamic",content:{referenceType:"token",id:l[a].name}}})}},73449:function(e,t,o){var n,s,i,r,a,l,c,d,p,u,h,y,m,f,b,g,I,v,j,N,x,S,w,O,T,_,E,D,F,C,A,k,P,U,L,Z,R,M=o(73202),H=o(92809),$=o(30773),B=o(76883),G=o(4509),z=o(28132),W=o(89880),V=o(49899),K=o(71919),J=o(61030),X=o(98951),Y=o(53937),q=o(65989),Q=o(75768),ee=o(55148),te=o(46089);function oe(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function ne(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?oe(Object(o),!0).forEach((function(t){(0,H.Z)(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):oe(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}n=(0,B.JJ)("collaboratorManagementFlow"),s=(0,B.f3)("notificationsManagementFlow"),i=(0,B.f3)("projectUIState"),r=(0,B.f3)("projectDoc"),a=(0,B.f3)("workspaceCollaboratorRepository"),l=(0,B.f3)("projectRepository"),c=(0,B.f3)("modalManagementFlow"),d=(0,B.f3)("globalAppState"),p=(0,B.f3)("sharedbProjectSyncService"),u=(0,B.f3)("guardsService"),h=(0,B.f3)("nodeSelectionFlow"),y=(0,B.f3)("stageScrollFlow"),m=(0,B.f3)("componentManagementFlow"),f=(0,B.f3)("webRTCState"),b=(0,B.f3)("stageMoveFlow"),g=(0,B.f3)("zoomControlFlow"),I=(0,B.f3)("userAccountRepository"),v=(0,B.f3)("permissionsRepository"),n((N=class{constructor(){(0,M.Z)(this,"notificationsManagementFlow",x,this),(0,M.Z)(this,"projectUIState",S,this),(0,M.Z)(this,"projectDoc",w,this),(0,M.Z)(this,"workspaceCollaboratorRepository",O,this),(0,M.Z)(this,"projectRepository",T,this),(0,M.Z)(this,"modalManagementFlow",_,this),(0,M.Z)(this,"globalAppState",E,this),(0,M.Z)(this,"dbSync",D,this),(0,M.Z)(this,"guardsService",F,this),(0,M.Z)(this,"nodeSelectionFlow",C,this),(0,M.Z)(this,"stageScrollFlow",A,this),(0,M.Z)(this,"componentManagementFlow",k,this),(0,M.Z)(this,"webRTCState",P,this),(0,M.Z)(this,"stageMoveFlow",U,this),(0,M.Z)(this,"zoomControlFlow",L,this),(0,M.Z)(this,"userAccountRepository",Z,this),(0,M.Z)(this,"permissionsRepository",R,this),(0,H.Z)(this,"emailIsAlreadyInvited",(e=>this.projectDoc.collaborators.getAll().some((t=>{var o;return(null===(o=t.account)||void 0===o?void 0:o.email)===e||t.invitedEmail===e})))),(0,H.Z)(this,"getCurrentUserProjectRole",(()=>{const e=this.globalAppState.user.userData,t=this.projectDoc.collaborators.getAll().find((t=>{var o;return(null===(o=t.account)||void 0===o?void 0:o.id)===(null===e||void 0===e?void 0:e.id)})),o=null===t||void 0===t?void 0:t.accessType;return o||null})),(0,H.Z)(this,"followUserSelectedPage",(e=>{this.componentManagementFlow.select(e,!0),setTimeout((()=>{this.zoomControlFlow.setStageZoomLevel(.5),this.projectUIState.selection.componentId===e&&this.stageMoveFlow.centerStage()}))})),(0,H.Z)(this,"followUserSelectedNodes",(e=>{e&&(e.length<=0||this.stageScrollFlow.bringNodeIntoView(e[0]))})),(0,H.Z)(this,"requestEditingPermissions",(async()=>{try{await this.permissionsRepository.requestEditingPermissions(this.projectDoc.id)}catch(e){return this.notificationsManagementFlow.handleError(e),!1}return this.notificationsManagementFlow.createNotification(K.k.INFO,"Permission change request sent."),(0,V.JG)(this.globalAppState,(({user:e})=>{if(!e||!e.userData)return;const t=e.userData.meta.sentEditingPermissionRequests;e.userData.meta.sentEditingPermissionRequests=ne(ne({},t),{},{[this.projectDoc.id]:(new Date).toISOString()})})),!0})),(0,H.Z)(this,"resetFollowedUserId",(()=>{(0,V.JG)(this.webRTCState,(e=>{e.followedUserId=null}))})),(0,H.Z)(this,"setFollowedUserId",(e=>{(0,V.JG)(this.webRTCState,(t=>{t.followedUserId=e}))})),(0,H.Z)(this,"changeProjectAccessType",(async e=>{try{await this.projectRepository.update(this.projectDoc.id,{accessType:e}),this.guardsService.executeFunctionGuarded(W._.DISABLE_HISTORY,(()=>this.dbSync.mutate(this.projectDoc,(t=>{t.accessType=e}))))}catch(t){this.notificationsManagementFlow.handleError(G.FC.UPDATE_PROJECT_ACCESS_TYPE)}})),(0,H.Z)(this,"addOrUpdateProjectCollaborator",(async e=>{const{accessType:t,action:o,actionFnc:n,collabEmail:s}=e;if(t===z.Z.READ)return void n();const i=(0,Q.m)({email:s});if(!i){if(await this.isEditorsLimitReached())return void this.notificationsManagementFlow.createNotification(K.k.ERROR,G.FC.EDITORS_LIMIT_REACHED)}if(!i&&await this.shouldBillNewSeat()){const e=J.d.createCustomModal({Component:X.L,data:{onSubmit:async()=>{await n();const e=J.d.createCustomModal({Component:Y.F});this.modalManagementFlow.showModal(e,{backgroundColor:q.Pt.DEFAULT,padding:0})},action:o}});this.modalManagementFlow.showModal(e)}else n()}))}init(e){if(this.getCurrentUserProjectRole()===z.Z.READ)return;const t=e.collaborators,o=Object.values(this.projectDoc.collaborators.byId);(null===t||void 0===t?void 0:t.length)===o.length&&null!==t&&void 0!==t&&t.every((e=>{const t=o.find((t=>t.id===e.id));return!!t&&(t.accessType===e.accessType&&t.permissionLevel===e.permissionLevel&&t.projectsAccessType===e.projectsAccessType)}))||this.dbSync.mutate(this.projectDoc,(t=>{t.collaborators.setAll((null===e||void 0===e?void 0:e.collaborators)||[])}))}async delete(e,t){const o=this.projectDoc.collaborators.byId[e];if(this.guardsService.executeFunctionGuarded(W._.DISABLE_HISTORY,(()=>this.dbSync.mutate(this.projectDoc,(t=>{delete t.collaborators.byId[e]})))),t)return await this.deleteData(e,o);setTimeout((async()=>{await this.deleteData(e,o)}),100)}async deleteData(e,t){try{const o=await this.workspaceCollaboratorRepository.delete({collaboratorId:e,projectId:this.projectDoc.id});return o||this.guardsService.executeFunctionGuarded(W._.DISABLE_HISTORY,(()=>this.dbSync.mutate(this.projectDoc,(o=>{o.collaborators.byId[e]=t})))),o}catch(o){return o.message.includes(G.FC.CANNOT_DELETE_COLLABORATOR)||(this.dbSync.mutate(this.projectDoc,(o=>{o.collaborators.byId[e]=t})),this.notificationsManagementFlow.handleError(`Could not remove collaborator from project. Please try again: ${null===o||void 0===o?void 0:o.message}`)),!1}}async changeAccess(e){const{id:t,accessType:o}=e;if(t&&o)try{await this.workspaceCollaboratorRepository.changeAccess({projectId:this.projectDoc.id,collaboratorId:t,accessType:o}),this.guardsService.executeFunctionGuarded(W._.DISABLE_HISTORY,(()=>this.dbSync.mutate(this.projectDoc,(e=>{const n=e.collaborators.byId[t];n&&(n.accessType=o)}))))}catch(n){this.notificationsManagementFlow.handleError(n.message)}}async add(e){const{email:t,accessType:o}=e;if(!t)return void this.notificationsManagementFlow.handleError(G.FC.NO_EMAIL_PROVIDED);const n=this.globalAppState.user.userData;if(n&&t===n.email)this.notificationsManagementFlow.handleError(G.FC.CANNOT_ADD_YOURSELF);else try{const e=await this.workspaceCollaboratorRepository.add({workspaceId:this.projectUIState.workspace.id,projectId:this.projectDoc.id,email:t,accessType:o});this.guardsService.executeFunctionGuarded(W._.DISABLE_HISTORY,(()=>this.dbSync.mutate(this.projectDoc,(t=>{t.collaborators.add(e)}))))}catch(s){this.notificationsManagementFlow.handleError(s.message)}}getLoggedInUserAccessType(){const e=this.projectDoc.collaborators.getAll(),t=this.globalAppState.user.userData;if(!t)throw new Error("Logged in user not found");const o=e.find((e=>{var o;return(null===(o=e.account)||void 0===o?void 0:o.id)===t.id||e.invitedEmail===t.email}));return(null===o||void 0===o?void 0:o.accessType)||z.Z.READ}getLoggedInUserPermissionLevel(){const e=this.projectDoc.collaborators.getAll(),t=this.globalAppState.user.userData;if(!t)throw new Error("Logged in user not found");const o=e.find((e=>{var o;return(null===(o=e.account)||void 0===o?void 0:o.id)===t.id||e.invitedEmail===t.email}));return(null===o||void 0===o?void 0:o.permissionLevel)||z.z.PROJECT}shouldBillNewSeat(){if(this.getLoggedInUserPermissionLevel()===z.z.PROJECT||this.getLoggedInUserAccessType()!==z.Z.OWNER)return!1;const e=this.projectUIState.workspace.subscriptionPlanType;return!(!e||!(0,te.LV)(e))}async isEditorsLimitReached(){const e=this.projectUIState.workspace.subscriptionPlanType;if(e){const t=await this.workspaceCollaboratorRepository.getAll(this.projectUIState.workspace.id),o=null===t||void 0===t?void 0:t.filter((e=>e.accessType!==z.Z.READ)).length;return!(o&&o<ee.cF[e].MAX_WORKSPACE_EDITORS)}return!1}},x=(0,$.Z)(N.prototype,"notificationsManagementFlow",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),S=(0,$.Z)(N.prototype,"projectUIState",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),w=(0,$.Z)(N.prototype,"projectDoc",[r],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),O=(0,$.Z)(N.prototype,"workspaceCollaboratorRepository",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),T=(0,$.Z)(N.prototype,"projectRepository",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_=(0,$.Z)(N.prototype,"modalManagementFlow",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),E=(0,$.Z)(N.prototype,"globalAppState",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),D=(0,$.Z)(N.prototype,"dbSync",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),F=(0,$.Z)(N.prototype,"guardsService",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),C=(0,$.Z)(N.prototype,"nodeSelectionFlow",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),A=(0,$.Z)(N.prototype,"stageScrollFlow",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),k=(0,$.Z)(N.prototype,"componentManagementFlow",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),P=(0,$.Z)(N.prototype,"webRTCState",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),U=(0,$.Z)(N.prototype,"stageMoveFlow",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),L=(0,$.Z)(N.prototype,"zoomControlFlow",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Z=(0,$.Z)(N.prototype,"userAccountRepository",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),R=(0,$.Z)(N.prototype,"permissionsRepository",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),j=N))},63639:function(e,t,o){o.d(t,{Q:function(){return x}});var n,s,i,r,a,l,c,d=o(73202),p=o(92809),u=o(30773),h=o(34437),y=o(76883),m=o(53482),f=o(39078),b=o(246),g=o(72045),I=o(26903),v=o(94430);function j(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function N(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?j(Object(o),!0).forEach((function(t){(0,p.Z)(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):j(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}const x="rootClassName";n=(0,y.JJ)("componentStyleManagementFlow"),s=(0,y.f3)("projectDoc"),i=(0,y.f3)("nodeStyleManagmentFlow"),n((a=class{constructor(){(0,d.Z)(this,"projectDoc",l,this),(0,d.Z)(this,"nodeStyleManagementFlow",c,this)}addStyleToCompInstance(e){var t;const{doc:o,nodeId:n,key:s,value:i,tokenId:r}=e,a=null===o||void 0===o?void 0:o.nodes.byId[n];if(!o||!a||!o.nodes.nodeIsCompInstance(a))return;const l=o.components.byId[a.compIdOfCompInstance];if(!l)return;const c=(null===(t=a.attrs[x])||void 0===t?void 0:t.content)||l.getUniqueStyleSetName(o);this.addClassToCompInstance({className:c,compId:a.compIdOfCompInstance,compInstanceId:a.id,doc:o});const d=N({},l.styleSetDefinitions[c].styles[s]);if(this.nodeStyleManagementFlow.updateNodeReferenceForTokenWhenRemovingStyle({tokenReference:d,nodeId:a.id}),r){const e=o.designLanguage.tokensById[r];if(!e)return;e.usedInNodes[a.id]?e.usedInNodes[a.id]+=1:e.usedInNodes[a.id]=1,l.styleSetDefinitions[c].styles[s]=new f.P({content:{referenceType:"token",id:r}})}else l.styleSetDefinitions[c].styles[s]=new b.F({content:i}),o.syncAssetInNodeRelationByNewContent({node:a,oldContent:d,newContent:l.styleSetDefinitions[c].styles[s]});l.styleSetDefinitions[c].usedByInstances[a.id]=!0}addReferencedStyleToCompInstance(e){var t;const{doc:o,nodeId:n,condition:s,key:i,value:r,tokenId:a}=e;if(!o)return;const l=o.nodes.byId[n];if(!l||!o.nodes.nodeIsCompInstance(l))return;const c=null===l||void 0===l?void 0:l.compIdOfCompInstance,d=o.components.byId[c];if(!d)return;const p=(null===(t=l.attrs[x])||void 0===t?void 0:t.content.toString())||d.getUniqueStyleSetName(o);this.addClassToCompInstance({className:p,compId:d.id,compInstanceId:n});let u=d.getInlineConditionalStyleMapForClass(s,p),h=!1;u||(u={type:"style-map",id:(0,g.Z)(),content:{mapType:"inlined",conditions:[s],styles:{}}},h=!0);const y=N({},u.content.styles[i]);if(this.nodeStyleManagementFlow.updateNodeReferenceForTokenWhenRemovingStyle({tokenReference:y,nodeId:l.id}),a||(u.content.styles[i]=new b.F({content:r}),o.syncAssetInNodeRelationByNewContent({node:l,oldContent:y,newContent:d.styleSetDefinitions[p].styles[i]}),h&&(d.styleSetDefinitions[p].referencedStyles[u.id]=u)),a){const e=o.designLanguage.tokensById[a];if(!e)return;e.usedInNodes[l.id]?e.usedInNodes[l.id]+=1:e.usedInNodes[l.id]=1,u.content.styles[i]=new f.P({content:{referenceType:"token",id:a}}),h&&(d.styleSetDefinitions[p].referencedStyles[u.id]=u)}}removeStyleFromCompInstance(e){var t;const{nodeId:o,key:n,doc:s}=e;if(!s)return;const i=s.nodes.byId[o];if(!i||!s.nodes.nodeIsCompInstance(i))return;const r=s.components.byId[i.compIdOfCompInstance];if(!r)return;const a=null===(t=i.attrs[x])||void 0===t?void 0:t.content;if(!a)return;const l=r.styleSetDefinitions[a].styles[n];this.nodeStyleManagementFlow.updateNodeReferenceForTokenWhenRemovingStyle({tokenReference:l,nodeId:i.id,doc:s}),delete r.styleSetDefinitions[a].styles[n]}removeConditionalStyleFromCompInstance(e){var t;const{nodeId:o,doc:n,key:s,condition:i}=e;if(!n)return;const r=n.nodes.byId[o];if(!r||!n.nodes.nodeIsCompInstance(r))return;const a=n.components.byId[r.compIdOfCompInstance];if(!a)return;const l=null===(t=r.attrs[x])||void 0===t?void 0:t.content;if(!l)return;const c=a.getInlineConditionalStyleMapForClass(i,l);if(!c)return;const d=c.content.styles[s];this.nodeStyleManagementFlow.updateNodeReferenceForTokenWhenRemovingStyle({tokenReference:d,nodeId:r.id});const p=Object.keys(c.content.styles);1===p.length&&p[0]===s&&"element-state"!==i.conditionType?delete a.styleSetDefinitions[l].referencedStyles[c.id]:delete c.content.styles[s]}unbindTokenFromCompInstance(e){const{doc:t,tokenId:o,nodeId:n}=e;if(!t)return;const s=t.nodes.byId[n];if(!s||!t.nodes.nodeIsCompInstance(s))return;const i=t.components.byId[s.compIdOfCompInstance],r=t.designLanguage.tokensById[o];if(!i||!r)return;const a=s.attrs[x].content;a&&"string"===typeof a&&(Object.values(i.styleSetDefinitions[a].referencedStyles||{}).forEach((e=>{var t;"inlined"===e.content.mapType&&null!==(t=e.content)&&void 0!==t&&t.conditions.length&&Object.values(e.content.styles||{}).length>0&&Object.keys(e.content.styles).forEach((t=>{const n=e.content.styles[t];"dynamic"===n.type&&"token"===n.content.referenceType&&n.content.id===o&&(delete i.styleSetDefinitions[a].referencedStyles[e.id].content.styles[t],i.styleSetDefinitions[a].referencedStyles[e.id].content.styles[t]=new b.F({content:r.value}))}))})),Object.keys(i.styleSetDefinitions[a].styles||{}).forEach((e=>{const t=i.styleSetDefinitions[a].styles[e];"dynamic"===t.type&&"token"==t.content.referenceType&&t.content.id===o&&(delete i.styleSetDefinitions[a].styles[e],i.styleSetDefinitions[a].styles[e]=new b.F({content:r.value}))})))}getStylesInheritedFromComponentInstance(e,t){const o=this.projectDoc.nodes.byId[e],n={styles:{},referencedStyles:{}};if(!o)return n;const s=Object.values(o.referencedStyles).find((e=>"component-referenced"===e.content.mapType));if(s&&"dynamic"===s.content.content.type){var i;const e=this.projectDoc.nodes.byId[t];if(!e||!this.projectDoc.nodes.nodeIsCompInstance(e))return n;const o=this.projectDoc.components.byId[e.compIdOfCompInstance],r=Object.values((null===o||void 0===o?void 0:o.propDefinitions)||{}).find((e=>e.id===s.content.content.content.id)),a=null===o||void 0===o?void 0:o.styleSetDefinitions[(null===(i=e.attrs[(null===r||void 0===r?void 0:r.name)||""])||void 0===i?void 0:i.content)||""];if(a){const{styles:e,referencedStyles:t}=a;return n.styles=e,n.referencedStyles=t,n}}return n}addClassToCompInstance(e){const{className:t,compId:o,compInstanceId:n,doc:s}=e;if(!s)return;const i=s.components.byId[o],r=s.nodes.byId[(null===i||void 0===i?void 0:i.rootNodeId)||""],a=s.nodes.byId[n];if(!i||!r||!a)return;i.initStyleSetForClass(t),i.styleSetDefinitions[t].usedByInstances[n]=!0,a.attrs[x]||(a.attrs[x]=new v.j(t));let l=!1,c=Object.values(i.propDefinitions).find((e=>e.name===x));if(c||(c=i.createPropDefinition({name:x,defaultValue:"",locations:{[r.id]:(0,I.B)({base:m.hD.STYLE,sufix:"componentRoot"})},id:(0,g.Z)(),type:"string",inputType:m.SO.TEXT,hidden:!0}),l=!0),!Object.values(r.referencedStyles).find((e=>"component-referenced"===e.content.mapType))||l){const e={type:"style-map",id:(0,g.Z)(),content:{mapType:"component-referenced",content:{type:"dynamic",content:{referenceType:"prop",id:c.id}}}};r.referencedStyles[e.id]=e}}},l=(0,u.Z)(a.prototype,"projectDoc",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),c=(0,u.Z)(a.prototype,"nodeStyleManagementFlow",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),(0,u.Z)(a.prototype,"addStyleToCompInstance",[h.P],Object.getOwnPropertyDescriptor(a.prototype,"addStyleToCompInstance"),a.prototype),(0,u.Z)(a.prototype,"addReferencedStyleToCompInstance",[h.P],Object.getOwnPropertyDescriptor(a.prototype,"addReferencedStyleToCompInstance"),a.prototype),(0,u.Z)(a.prototype,"removeStyleFromCompInstance",[h.P],Object.getOwnPropertyDescriptor(a.prototype,"removeStyleFromCompInstance"),a.prototype),(0,u.Z)(a.prototype,"removeConditionalStyleFromCompInstance",[h.P],Object.getOwnPropertyDescriptor(a.prototype,"removeConditionalStyleFromCompInstance"),a.prototype),(0,u.Z)(a.prototype,"unbindTokenFromCompInstance",[h.P],Object.getOwnPropertyDescriptor(a.prototype,"unbindTokenFromCompInstance"),a.prototype),(0,u.Z)(a.prototype,"addClassToCompInstance",[h.P],Object.getOwnPropertyDescriptor(a.prototype,"addClassToCompInstance"),a.prototype),r=a))},22404:function(e,t,o){o.d(t,{ks:function(){return n},dS:function(){return s},cM:function(){return i}});const n="System Font",s={100:{label:"100 - Thin",value:"100",italic:!1},"100normal":{label:"100 - Thin",value:"100",italic:!1},200:{label:"200 - Extra Light",value:"200",italic:!1},"200normal":{label:"200 - Extra Light",value:"200",italic:!1},300:{label:"300 - Light",value:"300",italic:!1},"300normal":{label:"300 - Light",value:"300",italic:!1},regular:{label:"400 - Regular",value:"400",italic:!1},400:{label:"400 - Regular",value:"400",italic:!1},"400normal":{label:"400 - Regular",value:"400",italic:!1},500:{label:"500 - Medium",value:"500",italic:!1},"500normal":{label:"500 - Medium",value:"500",italic:!1},600:{label:"600 - Semi-bold",value:"600",italic:!1},"600normal":{label:"600 - Semi-bold",value:"600",italic:!1},bold:{label:"700 - Bold",value:"700",italic:!1},700:{label:"700 - Bold",value:"700",italic:!1},"700normal":{label:"700 - Bold",value:"700",italic:!1},800:{label:"800 - Extra-bold",value:"800",italic:!1},"800normal":{label:"800 - Extra-bold",value:"800",italic:!1},900:{label:"900 - Black",value:"900",italic:!1},"900normal":{label:"900 - Black",value:"900",italic:!1},"100italic":{label:"100 - Thin Italic",value:"100",italic:!0},"200italic":{label:"200 - Extra-light Italic",value:"200",italic:!0},"300italic":{label:"300 - Light Italic",value:"300",italic:!0},"400italic":{label:"400 - Regular Italic",value:"400",italic:!0},italic:{label:"400 - Regular Italic",value:"400",italic:!0},"500italic":{label:"500 - Medium Italic",value:"500",italic:!0},"600italic":{label:"600 - Semi-bold Italic",value:"600",italic:!0},"700italic":{label:"700 - Bold Italic",value:"700",italic:!0},"800italic":{label:"800 - Extra-bold Italic",value:"800",italic:!0},"900italic":{label:"900 - Black Italic",value:"900",italic:!0}},i={Arial:["400 - Regular","700 - Bold","400 - Regular Italic","700 - Bold Italic"],ArialBlack:["900 - Black","900 - Black Italic"],ComicSansMS:["400 - Regular","700 - Bold","400 - Regular Italic","700 - Bold Italic"],CourierNew:["400 - Regular","700 - Bold","400 - Regular Italic","700 - Bold Italic"],Georgia:["400 - Regular","700 - Bold","400 - Regular Italic","700 - Bold Italic"],Impact:["400 - Regular"],Tahoma:["400 - Regular","700 - Bold"],TimesNewRoman:["400 - Regular","700 - Bold","400 - Regular Italic","700 - Bold Italic"],Verdana:["400 - Regular","700 - Bold","400 - Regular Italic","700 - Bold Italic"],System:["400 - Regular","700 - Bold","400 - Regular Italic","700 - Bold Italic"]}},54444:function(e,t,o){var n=o(73202),s=o(92809),i=o(30773),r=o(72045),a=o(76883);var l=async()=>{try{const e=await fetch("https://www.googleapis.com/webfonts/v1/webfonts?sort=popularity&key=AIzaSyAgebXXAIYZq76KRo-5I7MkWWwmJZaX2KM");return(await e.json()).items}catch(e){throw new Error(e)}},c=o(22404);const d=(e,t)=>{const o=e.replace(/ /g,"+");let n=!1;const s=t.map((e=>(e.includes("italic")&&!n&&(n=!0),"italic"===e?"400italic":"regular"===e?"400":e))),i=[...s.filter((e=>!e.includes("italic"))).sort(((e,t)=>e<t?-1:1)),...s.filter((e=>e.includes("italic"))).sort(((e,t)=>e<t?-1:1))].reduce(((e,t)=>{const o=parseInt(t);return e+=n?t.includes("italic")?`1,${o};`:`0,${o};`:`${o};`}),n?"ital,wght@":"wght@");return`https://fonts.googleapis.com/css2?family=${o}:${i.substring(0,i.length-1)}&display=swap`};var p,u,h,y,m,f,b,g,I,v=o(56924),j=o(34437),N=o(60178);function x(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function S(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?x(Object(o),!0).forEach((function(t){(0,s.Z)(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):x(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}const w=["auto","cursive","fantasy","monospace","sans-serif","serif","inherit","initial","revert","unset",'-apple-system, BlinkMacSystemFont, "Segoe UI", "Roboto", "Oxygen","Ubuntu", "Cantarell", "Fira Sans","Droid Sans", "Helvetica Neue", sans-serif'];p=(0,a.JJ)("fontsInProjectFlow"),u=(0,a.f3)("projectDoc"),h=(0,a.f3)("sentryService"),y=(0,a.f3)("sharedbProjectSyncService"),p((f=class{constructor(){(0,n.Z)(this,"projectDoc",b,this),(0,n.Z)(this,"sentryService",g,this),(0,n.Z)(this,"dbSync",I,this),(0,s.Z)(this,"allGoogleFonts",[]),(0,s.Z)(this,"allGoogleFontNames",[]),(0,s.Z)(this,"fontsAppendedToHead",{}),(0,s.Z)(this,"getFontType",(e=>{if(null===v.Lx||void 0===v.Lx?void 0:v.Lx.find((t=>t===e)))return"system";return this.allGoogleFonts.find((t=>t.family===e))?"google":"custom"})),(0,s.Z)(this,"getFontAvailableWeights",((e,t=!1)=>{const o=this.allGoogleFonts.find((t=>t.family===e)),n=Object.keys(c.dS);if(t)return null===o||void 0===o?void 0:o.variants;const s=null===o||void 0===o?void 0:o.variants.map((e=>{if(n.includes(e))return c.dS[e]}));if(null!==s&&void 0!==s&&s.length){return[...s.filter((e=>!1===(null===e||void 0===e?void 0:e.italic))).sort(((e,t)=>e&&t&&(null===e||void 0===e?void 0:e.value)<(null===t||void 0===t?void 0:t.value)?-1:1)),...s.filter((e=>!0===(null===e||void 0===e?void 0:e.italic))).sort(((e,t)=>e&&t&&(null===e||void 0===e?void 0:e.value)<(null===t||void 0===t?void 0:t.value)?-1:1))].map((e=>null===e||void 0===e?void 0:e.label))}return e===v.xK&&(e="System"),o&&null!==s&&void 0!==s&&s.length?[]:c.cM[e.replace(/\s/g,"")]})),(0,s.Z)(this,"appendGoogleFontLinkToHead",((e,t)=>{if("google"!==this.getFontType(e))return;const o=null!==t&&void 0!==t?t:d(e,this.getFontAvailableWeights(e,!0));if(!this.fontsAppendedToHead[e]){const t=document.createElement("link");return t.href=o,t.rel="stylesheet",document.head.appendChild(t),void(this.fontsAppendedToHead[e]=t)}})),(0,s.Z)(this,"appendCustomFontLinkToHead",((e,t)=>{if(this.fontsAppendedToHead[e])return;const o=document.createElement("link");o.href=t,o.rel="stylesheet",document.head.appendChild(o),this.fontsAppendedToHead[e]=o})),(0,s.Z)(this,"isFontImported",(e=>{const t=Object.values(this.projectDoc.fonts.byId||{}).map((e=>e.name)).includes(e),o=v.j1.includes(e);return t||o})),(0,s.Z)(this,"removeGoogleFontLinkFromHead",(e=>{var t;this.fontsAppendedToHead[e]&&(null===(t=this.fontsAppendedToHead[e])||void 0===t||t.remove(),delete this.fontsAppendedToHead[e])}))}async initAndListenForUpdates(){try{const e=await l();e&&(this.allGoogleFonts=e,this.allGoogleFonts.map((e=>this.allGoogleFontNames.push(e.family))))}catch(e){this.sentryService.captureException(e)}this.importGoogleFontsFromDefaultTextStyles(),Object.values(this.projectDoc.fonts.byId).forEach((e=>{Object.keys((null===e||void 0===e?void 0:e.usedInNodes)||{}).length>0||Object.keys((null===e||void 0===e?void 0:e.usedInTokens)||{}).length>0?this.appendGoogleFontLinkToHead(e.name,e.path):"custom"===(null===e||void 0===e?void 0:e.type)&&this.appendCustomFontLinkToHead(e.name,e.path)}))}deleteFontById(e){this.dbSync.mutate(this.projectDoc,(t=>{t.fonts.removeFont(e)}))}removeUnUsedFonts(){this.dbSync.mutate(this.projectDoc,(e=>{Object.values(this.projectDoc.fonts.byId).forEach((t=>{Object.keys(t.usedInNodes).length||Object.keys(t.usedInTokens).length||"custom"===(null===t||void 0===t?void 0:t.type)||e.fonts.removeFont(t.id)}))}))}importGoogleFontForPreview(e){return this.appendGoogleFontLinkToHead(e),e}importGoogleFont(e){const{doc:t,fontName:o,usedInDefaultTextStyles:n}=e;if(!t)return"";if("google"!==this.getFontType(o))return"";this.appendGoogleFontLinkToHead(o);const s=new N.F({id:(0,r.Z)(),name:o,path:d(o,this.getFontAvailableWeights(o,!0)),type:"google",usedInNodes:{},usedInTokens:S({},n)});return t.fonts.addFont(s),o}importGoogleFontsFromDefaultTextStyles(){const e=Object.values(this.projectDoc.designLanguage.textStyleSetsById).reduce(((e,t)=>{var o;const n=null===(o=t.content.fontFamily)||void 0===o?void 0:o.content;return"google"===this.getFontType(n)&&(e=S(S({},e),{},{[n]:S(S({},e[n]),{},{[t.id]:!0})})),e}),{});Object.keys(e).forEach((t=>{this.isFontImported(t)||this.importGoogleFont({fontName:t,usedInDefaultTextStyles:e[t]})}))}addFont(e){const{fontName:t,tokens:o=[],nodeIds:n=[],path:s,doc:i}=e;if(!i)return;const a=i.fonts.getFontIdByName(t);if(!a){let e;if("system"===this.getFontType(t))e={id:(0,r.Z)(),name:t,type:"system"};else{if("custom"===this.getFontType(t)&&!s)return;e={id:(0,r.Z)(),name:t,path:s||d(t,this.getFontAvailableWeights(t,!0)),type:s?"custom":"google"}}return e=S(S({},e),{},{usedInTokens:null===o||void 0===o?void 0:o.reduce(((e,t)=>(e[t]=!0,e)),{}),usedInNodes:null===n||void 0===n?void 0:n.reduce(((e,t)=>(e[t],e[t]=1,e)),{})}),void i.fonts.addFont(e)}i.fonts.updateFontUsageById(a.id,{tokens:o,nodeIds:n})}updateFontUsageWhenAddingStyles(e){const{key:t,nodeId:o,fontName:n,oldFontName:s,doc:i}=e;if(!i)return;if("fontFamily"!==t)return;if(s&&this.updateFontUsageWhenRemovingStyles({fontName:s,key:t,nodeId:o}),w.includes(n))return;const r=this.allGoogleFonts.find((e=>e.family===n)),a=v.Lx.find((e=>e===n)),l=i.fonts.getFontIdByName(n);if(!r&&!l&&!a)throw new Error(`Trying to enter a unrecognized font name - ${n}`);l?i.fonts.updateFontUsageById(l.id,{nodeIds:[o]}):this.addFont({fontName:n,tokens:[],nodeIds:[o]})}updateFontUsageWhenRemovingStyles(e){const{fontName:t,key:o,nodeId:n,doc:s}=e;if(!s)return;if("fontFamily"!==o)return;const i=s.fonts.getFontIdByName(t);i&&(1===i.usedInNodes[n]?delete i.usedInNodes[n]:i.usedInNodes[n]-=1)}},b=(0,i.Z)(f.prototype,"projectDoc",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),g=(0,i.Z)(f.prototype,"sentryService",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),I=(0,i.Z)(f.prototype,"dbSync",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),(0,i.Z)(f.prototype,"importGoogleFont",[j.P],Object.getOwnPropertyDescriptor(f.prototype,"importGoogleFont"),f.prototype),(0,i.Z)(f.prototype,"addFont",[j.P],Object.getOwnPropertyDescriptor(f.prototype,"addFont"),f.prototype),(0,i.Z)(f.prototype,"updateFontUsageWhenAddingStyles",[j.P],Object.getOwnPropertyDescriptor(f.prototype,"updateFontUsageWhenAddingStyles"),f.prototype),(0,i.Z)(f.prototype,"updateFontUsageWhenRemovingStyles",[j.P],Object.getOwnPropertyDescriptor(f.prototype,"updateFontUsageWhenRemovingStyles"),f.prototype),m=f))},3980:function(e,t,o){o.d(t,{F:function(){return s},x:function(){return i}});var n=o(75222);function s(e){try{if(JSON.parse(e))return!1}catch(o){}const t=(new DOMParser).parseFromString(e,"text/html");return Array.from(t.body.childNodes).some((e=>1===e.nodeType))}function i(e){switch(e){case"img":return n.sO.IMAGE;case"svg":case"path":return n.sO.ICON;case"input":return n.sO.TEXTINPUT;case"a":return n.sO.TEXT;default:return e}}},95681:function(e,t,o){var n,s,i,r,a,l,c,d,p,u=o(73202),h=o(92809),y=o(30773),m=o(49899),f=o(76883),b=o(74922),g=o(68124),I=o(76263),v=o(93510);n=(0,f.JJ)("layoutManagementFlow"),s=(0,f.f3)("projectUIState"),i=(0,f.f3)("userProjectDataPersistenceFlow"),r=(0,b.G)(I.l.SIDEBAR_CHANGE),a=(0,b.G)(I.l.INSPECTOR_TYPE_CHANGE),n((c=class{constructor(){(0,u.Z)(this,"projectUIState",d,this),(0,u.Z)(this,"userProjectDataPersistenceFlow",p,this),(0,h.Z)(this,"setShortcutsVisibleValue",(e=>{(0,m.JG)(this.projectUIState,(t=>{t.layout.shortcutsVisible=e}))})),(0,h.Z)(this,"toggleHelpBubble",(e=>{(0,m.JG)(this.projectUIState,(t=>{t.layout.helpBubbleVisible=e||!t.layout.helpBubbleVisible}))}))}changeActiveSidebar(e,t=!0){(0,m.JG)(this.projectUIState,(o=>{const{layout:n}=o;n.sidebarPanel===e?t&&(n.sidebarPanel=null):n.sidebarPanel=e,n.mainPanel===v.iW.DEV&&(n.mainPanel=v.iW.STAGE)}))}async openAssetsSidebar(e){(0,m.JG)(this.projectUIState,(t=>{t.layout.selectedAssetsTab=e})),this.projectUIState.layout.sidebarPanel!==v.tI.ASSETS_MANAGER&&await this.changeActiveSidebar(v.tI.ASSETS_MANAGER)}setSidebarWidth(e){(0,m.JG)(this.projectUIState,(t=>{t.sidebarSettings.width=e}))}toggleCodeview(){(0,m.JG)(this.projectUIState,(({layout:e,stage:t})=>{e.mainPanel===v.iW.DEV&&(e.sidebarPanel=v.tI.FILES),e.mainPanel=e.mainPanel===v.iW.STAGE||e.mainPanel===v.iW.DEV?v.iW.CODEVIEW:v.iW.STAGE,e.mainPanel===v.iW.STAGE&&(t.webComp.controlValues.x=g.m7.controlValues.x,t.webComp.controlValues.y=g.m7.controlValues.y)})),this.userProjectDataPersistenceFlow.savePreferences(this.projectUIState)}toggleCodeEdit(){(0,m.JG)(this.projectUIState,(({layout:e,stage:t})=>{e.mainPanel=e.mainPanel===v.iW.STAGE||e.mainPanel===v.iW.CODEVIEW?v.iW.DEV:v.iW.STAGE,e.mainPanel===v.iW.STAGE&&(t.webComp.controlValues.x=g.m7.controlValues.x,t.webComp.controlValues.y=g.m7.controlValues.y)})),this.userProjectDataPersistenceFlow.savePreferences(this.projectUIState)}changeDesignLanguageTab(e){(0,m.JG)(this.projectUIState,(t=>{const{layout:o,designLanguage:n}=t;o.designLanguageTab=e,n.sidebarPanel&&(n.sidebarPanel=null)}))}changeElementsPanelTab(e){(0,m.JG)(this.projectUIState,(t=>{t.layout.selectedElementsTab=e}))}changeInspectorType(e){(0,m.JG)(this.projectUIState,(({layout:t})=>{t.visibleInspector=e}))}changeLayoutPanel(e){(0,m.JG)(this.projectUIState,(({layout:t})=>{t.mainPanel=e})),this.userProjectDataPersistenceFlow.savePreferences(this.projectUIState)}toggleUserPreferenceValue(e){(0,m.JG)(this.projectUIState,(({userPreferences:t})=>{t[e]=!t[e]}))}toggleFolders(e){(0,m.JG)(this.projectUIState,(t=>{t.sidebarSettings.expanded[e]=!t.sidebarSettings.expanded[e]}))}setFileGridTemplateRows(e){(0,m.JG)(this.projectUIState,(t=>{t.sidebarSettings.filesGridTemplateRows=e}))}toggleProjectMenu(e){(0,m.JG)(this.projectUIState,(({layout:t})=>{t.projectMenuOpen=e}))}selectStyledSectionGroup(e){(0,m.JG)(this.projectUIState,(({layout:t})=>{t.selectedSectionTemplatesGroup=e}))}setFilesTabScroll(e){(0,m.JG)(this.projectUIState,(t=>{t.filesTabScroll=e}))}togglePreviewMode(){(0,m.JG)(this.projectUIState,(e=>{e.userInteractions.inPreviewMode=!e.userInteractions.inPreviewMode}))}stopPreviewMode(){(0,m.JG)(this.projectUIState,(e=>{e.userInteractions.inPreviewMode=!1}))}changeActiveComponentSetupTab(e){(0,m.JG)(this.projectUIState,(t=>{t.layout.selectedComponentSetupTab=e}))}},d=(0,y.Z)(c.prototype,"projectUIState",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),p=(0,y.Z)(c.prototype,"userProjectDataPersistenceFlow",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),(0,y.Z)(c.prototype,"changeActiveSidebar",[r],Object.getOwnPropertyDescriptor(c.prototype,"changeActiveSidebar"),c.prototype),(0,y.Z)(c.prototype,"changeInspectorType",[a],Object.getOwnPropertyDescriptor(c.prototype,"changeInspectorType"),c.prototype),l=c))},88601:function(e,t,o){var n,s,i,r,a,l,c,d,p,u,h,y,m,f=o(73202),b=o(92809),g=o(33800),I=o(9626),v=o(30773),j=o(49899),N=o(89880),x=o(93096),S=o.n(x),w=o(74922),O=o(93510),T=o(76263),_=o(76883);n=(0,_.JJ)("localHistoryStackFlow"),s=(0,_.f3)("projectUIState"),i=(0,_.f3)("guardsService"),r=(0,_.f3)("sentryService"),a=(0,w.G)(T.l.UNDO),l=(0,w.G)(T.l.REDO),n((y=new WeakMap,m=new WeakMap,d=class{constructor(){(0,f.Z)(this,"projectUIState",p,this),(0,f.Z)(this,"guardsService",u,this),(0,f.Z)(this,"sentryService",h,this),(0,b.Z)(this,"onUndo",void 0),(0,b.Z)(this,"onRedo",void 0),(0,b.Z)(this,"lastChangeAt",{}),y.set(this,{writable:!0,value:!1}),m.set(this,{writable:!0,value:!1}),(0,b.Z)(this,"undoStack",[]),(0,b.Z)(this,"redoStack",[])}init(e){this.onUndo=e.onUndo,this.onRedo=e.onRedo,this.undo=S()(this.undo,200),this.redo=S()(this.redo,200),(0,I.Z)(this,m,!0)}store(e,t){(0,g.Z)(this,m)&&this.projectUIState.layout.mainPanel!==O.iW.DEV&&((0,g.Z)(this,y)||!t.length||this.guardsService.getGuard(N._.DISABLE_HISTORY)||(this.updateLastChangeAt(),this.undoStack.push({root:e,patches:t}),this.redoStack=[],(0,j.JG)(this.projectUIState,(e=>{e.userInteractions.undo=this.undoStack.length,e.userInteractions.redo=this.redoStack.length}))))}undo(){if(!(0,g.Z)(this,m))return;if(this.projectUIState.layout.mainPanel===O.iW.DEV)return;const e=this.undoStack.pop();if(!e)return;this.updateLastChangeAt(),(0,I.Z)(this,y,!0);const{root:t,patches:o}=e,n=o.map(j.Y7).reverse();try{this.onUndo(t,n),this.redoStack.push({root:t,patches:o})}catch(s){this.sentryService.captureException(new Error(`Undo operation failed: ${s.message}`)),this.undoStack=[],this.redoStack=[]}finally{(0,I.Z)(this,y,!1),(0,j.JG)(this.projectUIState,(e=>{e.userInteractions.undo=this.undoStack.length,e.userInteractions.redo=this.redoStack.length}))}}redo(){if(!(0,g.Z)(this,m))return;if(this.projectUIState.layout.mainPanel===O.iW.DEV)return;const e=this.redoStack.pop();if(!e)return;this.updateLastChangeAt(),(0,I.Z)(this,y,!0);const{root:t,patches:o}=e;try{this.onRedo(t,o),this.undoStack.push({root:t,patches:o})}catch(n){this.sentryService.captureException(new Error(`Redo operation failed: ${n.message}`)),this.undoStack=[],this.redoStack=[]}finally{(0,I.Z)(this,y,!1),(0,j.JG)(this.projectUIState,(e=>{e.userInteractions.undo=this.undoStack.length,e.userInteractions.redo=this.redoStack.length}))}}updateLastChangeAt(){const{selection:e}=this.projectUIState;e.componentId&&(this.lastChangeAt[e.componentId]=new Date)}},p=(0,v.Z)(d.prototype,"projectUIState",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),u=(0,v.Z)(d.prototype,"guardsService",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),h=(0,v.Z)(d.prototype,"sentryService",[r],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),(0,v.Z)(d.prototype,"undo",[a],Object.getOwnPropertyDescriptor(d.prototype,"undo"),d.prototype),(0,v.Z)(d.prototype,"redo",[l],Object.getOwnPropertyDescriptor(d.prototype,"redo"),d.prototype),c=d))},86015:function(e,t,o){var n,s,i,r,a,l,c,d,p,u,h,y=o(73202),m=o(92809),f=o(30773),b=o(76883),g=o(49899),I=o(34437),v=o(83382),j=o(99798),N=o(72790),x=o(61030),S=o(20493),w=o(36565);function O(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function T(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?O(Object(o),!0).forEach((function(t){(0,m.Z)(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):O(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}n=(0,b.JJ)("mediaQueryBreakpointManagementFlow"),s=(0,b.f3)("projectDoc"),i=(0,b.f3)("projectUIState"),r=(0,b.f3)("modalManagementFlow"),a=(0,b.f3)("sentryService"),n((c=class{constructor(){(0,y.Z)(this,"projectDoc",d,this),(0,y.Z)(this,"projectUIState",p,this),(0,y.Z)(this,"modalManagementFlow",u,this),(0,y.Z)(this,"sentryService",h,this),(0,m.Z)(this,"openBreakpointManagementPanel",(()=>{w.Z.mixpanelEvent(w.Z.AnalyticsEvents.PROJECT_SIDEBARS_TOP_BREAKPOINTS_SETTINGS),(0,g.JG)(this.projectUIState,(e=>{e.mediaQueryBreakpoints.showManagementPanel=!0}))})),(0,m.Z)(this,"closeBreakpointManagementPanel",(()=>{(0,g.JG)(this.projectUIState,(e=>{e.mediaQueryBreakpoints.showManagementPanel=!1}))}))}getNonDefaultActiveMQBreakpointsInOrder(e){return this.projectDoc.mediaQueryBreakpoints.getNonDefaultActiveMQBreakpointsInOrder(e)}getActiveMediaQueriesInOrder(e){return this.projectDoc.mediaQueryBreakpoints.getActiveMediaQueriesInOrder(e)}getAllMediaQueriesInOrder(e){return this.projectDoc.mediaQueryBreakpoints.getAllMediaQueriesInOrder(e)}getDefaultMediaQuery(){return this.projectDoc.mediaQueryBreakpoints.getDefaultMediaQuery()}create(e){const{doc:t}=e;t&&t.mediaQueryBreakpoints.create(T({},e))}activateByIcon(e){const{doc:t,icon:o}=e;if(!t)return;const n=Object.values(t.mediaQueryBreakpoints.byId).find((e=>e.icon===o));n?delete n.isDisabled:this.create({icon:o,maxWidth:v.z4[o]})}activateById(e){const{doc:t,id:o}=e;t&&delete t.mediaQueryBreakpoints.byId[o].isDisabled}computeNewDefault(e){const{doc:t}=e;if(!t)return;const o=t.mediaQueryBreakpoints.getDefaultMediaQuery(),n=t.mediaQueryBreakpoints.getActiveMediaQueriesInOrder(!0)[0];(o.isDisabled||o.maxWidth<n.maxWidth)&&(delete o.isDefault,n.isDefault=!0,this.updateBreakpointFromNodeStyles({maxWidth:n.maxWidth,doc:t}))}computeNewMatchedMQ(e){const{doc:t}=e;if(!t)return;const o=this.projectUIState.stage.getCurrentWidth(),n=t.mediaQueryBreakpoints.getActiveMediaQueriesInOrder().filter((e=>e.maxWidth>=o))[0]||t.mediaQueryBreakpoints.getDefaultMediaQuery();(0,g.JG)(this.projectUIState,(e=>{e.stage.matchedBreakpoint=n.id}))}deleteFromBatchWithConfirmation(e){const{batch:t,onSubmit:o}=e;let n="";const s=Object.keys(t).map((e=>{if(!t[e].isDisabled)return null;const o=this.projectDoc.mediaQueryBreakpoints.byId[e];return o.isDefault&&(n="default-"),`'${o.getName()}'`})).filter((e=>e)),i=x.d.createDeleteModal({deletedEntity:s.length>1?`${n}breakpoints`:`${n}breakpoint`,entityNames:s,onSubmit:o});this.modalManagementFlow.showModal(i)}updateBatch(e){const{batch:t,doc:o}=e;o&&(Object.keys(t).forEach((e=>{const{maxWidth:n,isDisabled:s}=t[e];n&&this.resize({id:e,maxWidth:n,doc:o}),s&&this.disable({id:e,doc:o}),!1===s&&this.activateById({id:e,doc:o})})),this.computeNewDefault({doc:o}),this.computeNewMatchedMQ({doc:o}))}validateUpdates(e){const t={},o=this.processUpdates(e),n=this.getAllMediaQueriesInOrder().filter((e=>{var t,n;return!(void 0!==(null===(t=o[e.id])||void 0===t?void 0:t.isDisabled)?null===(n=o[e.id])||void 0===n?void 0:n.isDisabled:e.isDisabled)}));return Object.keys(o).forEach((e=>{var s,i,r,a;const l=n.findIndex((t=>t.id===e)),c=this.projectDoc.mediaQueryBreakpoints.byId[e],d=o[e].maxWidth||c.maxWidth,p=void 0!==o[e].isDisabled?o[e].isDisabled:c.isDisabled;if(!d||p)return;const u=n[l+1],h=n[l-1],y=N.MAX_STAGE_WIDTH+v.UL,m=N.MIN_STAGE_WIDTH-v.UL;let f=(null===(s=o[(null===u||void 0===u?void 0:u.id)||""])||void 0===s?void 0:s.maxWidth)||(null===(i=n[l+1])||void 0===i?void 0:i.maxWidth)||y,b=(null===(r=o[(null===h||void 0===h?void 0:h.id)||""])||void 0===r?void 0:r.maxWidth)||(null===(a=n[l-1])||void 0===a?void 0:a.maxWidth)||m;f-=v.UL,b+=v.UL,d<b&&(t[e]=`${c.getName()} must be bigger than ${(null===h||void 0===h?void 0:h.getName())||`${b}px`}${h?` by at least ${v.UL}px`:""}`),d>f&&(t[e]=`${c.getName()} must be smaller than ${(null===u||void 0===u?void 0:u.getName())||`${f}px`}${u?` by at least ${v.UL}px`:""}`)})),{errors:t,processedUpdates:o}}processUpdates(e){const t={};return Object.keys(e).forEach((o=>{const n=this.projectDoc.mediaQueryBreakpoints.byId[o];t[o]={},!e[o].isDisabled!==!n.isDisabled&&(t[o].isDisabled=e[o].isDisabled),e[o].maxWidth!==n.maxWidth&&(t[o].maxWidth=e[o].maxWidth),Object.values(t[o]).filter((e=>void 0!==e)).length||delete t[o]})),t}getCurrentMediaQuery(){const e=this.projectDoc.mediaQueryBreakpoints.byId[this.projectUIState.stage.matchedBreakpoint||""]||this.getDefaultMediaQuery();if(!e){const e=new Error(`Failed to get current media query, which means that project is in an invalid state. ProjectId: ${this.projectDoc.id}`);this.sentryService.captureException(e,{type:S.U.CRITICAL})}return e}disable(e){const{id:t,doc:o}=e;if(!o)return;const n=o.mediaQueryBreakpoints.byId[t];n&&(n.isDisabled=!0,this.updateBreakpointFromNodeStyles({maxWidth:n.maxWidth,doc:o}))}remove(e){const{id:t,doc:o}=e;if(!o)return;const n=o.mediaQueryBreakpoints.byId[t].maxWidth;this.updateBreakpointFromNodeStyles({maxWidth:n,doc:o}),o.mediaQueryBreakpoints.remove(t)}resize(e){const{id:t,maxWidth:o,doc:n}=e;if(!n)return;const s=n.mediaQueryBreakpoints.byId[t],i=s.maxWidth;s.maxWidth=o,this.updateBreakpointFromNodeStyles({doc:n,maxWidth:i,newMaxWidth:o})}createDefaultMediaQueries(e){const{doc:t}=e;t&&(t.mediaQueryBreakpoints=new j.s,v.vn.forEach((e=>{this.create(T(T({},e),{},{doc:t}))})))}updateBreakpointFromNodeStyles(e){const{maxWidth:t,doc:o,newMaxWidth:n}=e;o&&(Object.values(o.nodes.byId).forEach((e=>{Object.values((null===e||void 0===e?void 0:e.referencedStyles)||{}).forEach((o=>{if("inlined"!==o.content.mapType)return;const s=o.content.conditions.find((e=>"screen-size"===e.conditionType&&e.maxWidth===t));s&&s.maxWidth===t&&(n?s.maxWidth=n:null===e||void 0===e||delete e.referencedStyles[o.id])}))})),Object.values(o.components.byId).forEach((e=>{Object.values((null===e||void 0===e?void 0:e.styleSetDefinitions)||{}).forEach((e=>{Object.values((null===e||void 0===e?void 0:e.referencedStyles)||{}).forEach((o=>{if("inlined"!==o.content.mapType)return;const s=o.content.conditions.find((e=>"screen-size"===e.conditionType&&e.maxWidth===t));s&&s.maxWidth===t&&(n?s.maxWidth=n:null===e||void 0===e||delete e.referencedStyles[o.id])}))}))})),Object.values(o.classes.byId).forEach((e=>{Object.values(e.conditions).forEach((o=>{if("screen-size"===o.type&&o.meta.maxWidth===t){if(n)return void(o.meta.maxWidth=n);delete e.conditions[o.id]}}))})))}},d=(0,f.Z)(c.prototype,"projectDoc",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),p=(0,f.Z)(c.prototype,"projectUIState",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),u=(0,f.Z)(c.prototype,"modalManagementFlow",[r],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),h=(0,f.Z)(c.prototype,"sentryService",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),(0,f.Z)(c.prototype,"create",[I.P],Object.getOwnPropertyDescriptor(c.prototype,"create"),c.prototype),(0,f.Z)(c.prototype,"activateByIcon",[I.P],Object.getOwnPropertyDescriptor(c.prototype,"activateByIcon"),c.prototype),(0,f.Z)(c.prototype,"activateById",[I.P],Object.getOwnPropertyDescriptor(c.prototype,"activateById"),c.prototype),(0,f.Z)(c.prototype,"computeNewDefault",[I.P],Object.getOwnPropertyDescriptor(c.prototype,"computeNewDefault"),c.prototype),(0,f.Z)(c.prototype,"computeNewMatchedMQ",[I.P],Object.getOwnPropertyDescriptor(c.prototype,"computeNewMatchedMQ"),c.prototype),(0,f.Z)(c.prototype,"updateBatch",[I.P],Object.getOwnPropertyDescriptor(c.prototype,"updateBatch"),c.prototype),(0,f.Z)(c.prototype,"disable",[I.P],Object.getOwnPropertyDescriptor(c.prototype,"disable"),c.prototype),(0,f.Z)(c.prototype,"remove",[I.P],Object.getOwnPropertyDescriptor(c.prototype,"remove"),c.prototype),(0,f.Z)(c.prototype,"resize",[I.P],Object.getOwnPropertyDescriptor(c.prototype,"resize"),c.prototype),(0,f.Z)(c.prototype,"createDefaultMediaQueries",[I.P],Object.getOwnPropertyDescriptor(c.prototype,"createDefaultMediaQueries"),c.prototype),(0,f.Z)(c.prototype,"updateBreakpointFromNodeStyles",[I.P],Object.getOwnPropertyDescriptor(c.prototype,"updateBreakpointFromNodeStyles"),c.prototype),l=c))},12394:function(e,t,o){o.d(t,{H:function(){return ge}});var n,s,i,r,a,l,c,d,p,u,h,y,m,f,b,g,I,v,j,N,x,S,w,O,T,_,E,D,F,C,A,k,P,U,L,Z,R,M,H,$,B,G=o(73202),z=o(92809),W=o(30773),V=o(75222),K=o(76883),J=o(246),X=o(16815),Y=o(72045),q=o(39078),Q=o(49899),ee=o(99628),te=o(10440),oe=o(49403),ne=o(34437),se=o(71023),ie=o(63639),re=o(27789),ae=o(74922),le=o(76263),ce=o(33381),de=o(95633),pe=o(68803),ue=o(69812),he=o(46882),ye=o(42297),me=o(12293);function fe(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function be(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?fe(Object(o),!0).forEach((function(t){(0,z.Z)(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):fe(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}const ge=["backgroundImage","listStyleImage"];n=(0,K.JJ)("nodeStyleManagmentFlow"),s=(0,K.f3)("projectUIState"),i=(0,K.f3)("projectDoc"),r=(0,K.f3)("sharedbProjectSyncService"),a=(0,K.f3)("fontsInProjectFlow"),l=(0,K.f3)("componentStyleManagementFlow"),c=(0,K.f3)("propDefinitionManagementFlow"),d=(0,K.f3)("notificationsManagementFlow"),p=(0,K.f3)("assetSrcProvider"),u=(0,K.f3)("assetsEditFlow"),h=(0,K.f3)("mediaQueryBreakpointManagementFlow"),y=(0,K.f3)("temporaryStyleFlow"),m=(0,K.f3)("positioningService"),f=(0,K.f3)("sentryService"),b=(0,ae.G)(le.l.SET_NODE_STYLE),g=(0,ye.u)(ye.j.UPDATE_STYLE_KEY),I=(0,ae.G)(le.l.SET_CONDITIONAL_STYLE),v=(0,ye.u)(ye.j.UPDATE_STYLE_KEY),j=(0,ae.G)(le.l.OVERRIDE_NODE_STYLE),N=(0,ye.u)(ye.j.OVERRIDE_STYLE),x=(0,ae.G)(le.l.REMOVE_NODE_STYLE),S=(0,ye.u)(ye.j.UPDATE_STYLE_KEY),w=(0,ae.G)(le.l.REMOVE_CONDITIONAL_STYLE),O=(0,ye.u)(ye.j.UPDATE_STYLE_KEY),T=(0,ae.G)(le.l.OVERRIDE_CONDITIONAL_STYLE),_=(0,ye.u)(ye.j.OVERRIDE_STYLE),n((D=class{constructor(){(0,G.Z)(this,"projectUIState",F,this),(0,G.Z)(this,"projectDoc",C,this),(0,G.Z)(this,"dbSync",A,this),(0,G.Z)(this,"fontsInProjectFlow",k,this),(0,G.Z)(this,"componentStyleManagementFlow",P,this),(0,G.Z)(this,"propDefinitionManagementFlow",U,this),(0,G.Z)(this,"notificationsManagementFlow",L,this),(0,G.Z)(this,"assetSrcProvider",Z,this),(0,G.Z)(this,"assetsEditFlow",R,this),(0,G.Z)(this,"mediaQueryBreakpointManagementFlow",M,this),(0,G.Z)(this,"temporaryStyleFlow",H,this),(0,G.Z)(this,"positioningService",$,this),(0,G.Z)(this,"sentryService",B,this),(0,z.Z)(this,"getResolvedStyles",(e=>{const{dynamicStyleResult:t,replaceAssetIdsWithSrcs:o,nodeId:n,ignoreDisabledNodes:s}=e,i=this.projectDoc.nodes.byId[n];if(!i)return{};const r=this.projectDoc.getComponentIdForNode(n);if(this.projectDoc.nodes.nodeIsCompInstance(i)){const e=this.projectDoc.components.byId[i.compIdOfCompInstance],n=this.projectDoc.nodes.byId[(null===e||void 0===e?void 0:e.rootNodeId)||""],{styles:a}=this.componentStyleManagementFlow.getStylesInheritedFromComponentInstance((null===n||void 0===n?void 0:n.id)||"",i.id);return this.resolveStaticAndDynamicNodes({styles:a,dynamicStyleResult:t,replaceAssetIdsWithSrcs:o,compOwningNode:r||"",ignoreDisabledNodes:s})}return this.resolveStaticAndDynamicNodes({styles:i.styles,dynamicStyleResult:t,replaceAssetIdsWithSrcs:o,compOwningNode:r||"",ignoreDisabledNodes:s})})),(0,z.Z)(this,"getResolvedInlineStyles",(e=>{const{nodeId:t,condition:o,replaceAssetIdsWithSrcs:n,dynamicStyleResult:s,ignoreDisabledNodes:i}=e,r=this.projectDoc.nodes.byId[t];if(!r)return{};if(this.projectDoc.nodes.nodeIsCompInstance(r)){var a;const e=this.projectDoc.components.byId[r.compIdOfCompInstance],t=null===e||void 0===e?void 0:e.getInlineConditionalStyleMapForClass(o,null===(a=r.attrs[ie.Q])||void 0===a?void 0:a.content);return t?this.resolveStaticAndDynamicNodes({styles:t.content.styles,dynamicStyleResult:s,replaceAssetIdsWithSrcs:n,ignoreDisabledNodes:i}):{}}const l=r.getInlineConditionalStyleMap(o);return l?this.resolveStaticAndDynamicNodes({styles:l.content.styles,dynamicStyleResult:s,replaceAssetIdsWithSrcs:n,ignoreDisabledNodes:i}):{}})),(0,z.Z)(this,"nodeHasStyleAtCurrentBreakpoint",(e=>{const{nodeId:t,key:o,values:n,excludeValues:s}=e,{styles:i,inheritedStyles:r}=this.getComputedStyleByKeyForCurrentBreakpoint(t,[o]),{resolvedClassesStyles:a,resolvedInheritedClassesStyles:l}=this.getResolvedClassesStylesBasedOnCurrentBreakpoint({nodeId:t});if(!n)return!!i[o]||!!r[o]||!!a[o]||!!l[o];const c=i[o]||r[o]||a[o]||l[o];return s?(!!i[o]||!!r[o]||!!a[o]||!!l[o])&&-1===n.indexOf(c):-1!==n.indexOf(c)})),(0,z.Z)(this,"getCurrentStyleValueByKeyForNode",((e,t)=>{const o={},{styles:n,classesStyles:s,inheritedStyles:i}=this.getComputedStyleByKeyForCurrentBreakpoint(e,t);return t.forEach((e=>{o[e]=n[e]||s[e]||i[e]})),o})),(0,z.Z)(this,"getDefaultStylesForNodeByType",(e=>{const t=this.projectDoc.nodes.byId[e];if(!t||!t.primitiveType)return{};const o=this.getDefaultStylesFromTokens(),n=t.semanticType?(0,oe.ux)()[t.semanticType]:{},s=(0,oe.oD)(o)[t.primitiveType],i=t.abilities.link?(0,oe.oD)(o)[V.sO.LINK]:{},r=be(be(be({},s),n),i),a=t.semanticType,l=a&&Object.values(V.RY).includes(a);return Object.assign(r,be({},l?V.xp[a]:{})),r})),(0,z.Z)(this,"getInheritedStylesBasedOnCurrentBreakpoint",(e=>{const t=this.projectDoc.nodes.byId[e];if(!t)return{};let o={},n=t.parentId&&this.projectDoc.nodes.byId[t.parentId];for(;n;){const e=this.getResolvedStylesBasedOnCurrentBreakpoint({nodeId:n.id}),t=n.semanticType;o=be(be(be({},t&&Object.values(V.RY).includes(t)?V.xp[t]:{}),(0,te.ei)(e,ee.ki)),o),n=n.parentId&&this.projectDoc.nodes.byId[n.parentId]}return o})),(0,z.Z)(this,"getComputedStyleByKeyForCurrentBreakpoint",((e,t,o)=>this.getComputedStyleByKeyForBreakpoint(e,t,this.mediaQueryBreakpointManagementFlow.getCurrentMediaQuery(),o))),(0,z.Z)(this,"getComputedStyleByKeyForBreakpoint",((e,t,o,n)=>{const s={};let i={};const r={},a={};let l,c=!1;const d=this.projectDoc.nodes.byId[e];if(!d)return{styles:s,inheritedStyles:i,classesStyles:r,inheritedClassesStyles:a,breakpointForStyles:l,interactionStateStyles:c};const p=this.getResolvedStyles({nodeId:e,ignoreDisabledNodes:n}),{resolvedClassesStyles:u,resolvedInheritedClassesStyles:h}=this.getResolvedClassesStylesBasedOnCurrentBreakpoint({nodeId:e,ignoreDisabledNodes:n}),y=this.projectUIState.stage.interactionState.state;let m=!1;if(o.isDefault?t.forEach((e=>{"undefined"!==typeof p[e]&&(s[e]=p[e]),p[e]&&(s[e]=p[e])})):t.forEach((e=>{var r;let a,c;!m&&p[e]&&(m=!0);const u=(null===(r=d.attrs[ie.Q])||void 0===r?void 0:r.content.toString())||"",h=this.projectDoc.nodes.nodeIsCompInstance(d)?this.projectDoc.components.byId[d.compIdOfCompInstance]:void 0,y=h?h.getInlineMatchedStyleSetIdsForClass(o.maxWidth,u):d.getInlineMatchedStyleSetIds(o.maxWidth);y.forEach((t=>{const r=h?h.styleSetDefinitions[u].referencedStyles[t]:d.referencedStyles[t];if("inlined"===r.content.mapType){const t=this.resolveStaticAndDynamicNodes({styles:r.content.styles,ignoreDisabledNodes:n})[e];t&&a&&(m=!0),t&&!a&&(a=t,c=r.content.conditions[0].maxWidth)}if(c===o.maxWidth){const t=a||p[e];"undefined"!==typeof t&&(s[e]=t)}else{a&&(m=!0);const t=a||p[e];"undefined"!==typeof t&&(i[e]=t)}c&&(l=c)})),y.length||t.forEach((e=>{p[e]&&(i[e]=p[e])}))})),y){i=be(be({},i),s);const e=d.getInlineConditionalStyleMap({conditionType:"element-state",content:y});if(e){const o=this.resolveStaticAndDynamicNodes({styles:e.content.styles,ignoreDisabledNodes:n});t.forEach((e=>{o[e]&&(c||(c=!0),s[e]=o[e])}))}}if(u&&t.forEach((e=>{u[e]&&(r[e]=u[e])})),h&&t.forEach((e=>{h[e]&&(a[e]=h[e])})),this.projectDoc.nodes.nodeIsCompInstance(d)){const e=this.projectDoc.components.byId[d.compIdOfCompInstance],{inheritedStyles:o,styles:s}=this.getComputedStyleByKeyForCurrentBreakpoint((null===e||void 0===e?void 0:e.rootNodeId)||"",t,n);i=be(be(be({},s),o),i)}return{styles:s,inheritedStyles:i,classesStyles:r,inheritedClassesStyles:a,breakpointForStyles:l,interactionStateStyles:c,anyKeyHasValueOnBiggerMQ:m}}))}setMultipleStylesByKeyForCurrentBreakpoint(e){const{styleMap:t,doc:o,nodeIds:n}=e;Object.keys(t).forEach((e=>{!t[e]||!t[e].value&&0!==t[e].value?this.removeStyleByKeyBasedOnCurrentBreakpoint({key:e,doc:o,nodeIds:n}):this.setStyleByKeyBasedOnCurrentBreakpoint(be({key:e,doc:o,nodeIds:n},t[e]))}))}removeMultipleStylesByKeyBasedOnCurrentBreakpoint(e){const{keys:t,doc:o,nodeIds:n}=e;t.forEach((e=>{this.removeStyleByKeyBasedOnCurrentBreakpoint({key:e,doc:o,nodeIds:n})}))}setStyleByKeyBasedOnCurrentBreakpoint(e){const t=this.projectUIState.stage.interactionState.state,o=this.mediaQueryBreakpointManagementFlow.getCurrentMediaQuery();t?this.setConditionalInlineStyleByKey(be(be({},e),{},{condition:{conditionType:"element-state",content:t}})):o.isDefault?this.setStyleByKey(e):this.setConditionalInlineStyleByKey(be(be({},e),{},{condition:{conditionType:"screen-size",maxWidth:o.maxWidth}}))}copyStylesFromNodeBasedOnCurrentBreakpoint(e){const{doc:t,nodeId:o,changedKeys:n,node:s}=e;if(!t)return;const i=this.mediaQueryBreakpointManagementFlow.getCurrentMediaQuery(),r=this.projectUIState.stage.interactionState.state,a=r?{conditionType:"element-state",content:r}:i.isDefault?null:{conditionType:"screen-size",maxWidth:i.maxWidth};if(a){const e=s.getInlineConditionalStyleMap(a);n.forEach((n=>{const s=null===e||void 0===e?void 0:e.content.styles[n];if(s){if("static"!==s.type){if("token"===s.content.referenceType){const e=s.content.id;return void this.setConditionalInlineStyleByKey({doc:t,key:n,tokenId:e,value:"",nodeIds:[o],condition:a})}throw new Error("Copy style does not support dynamic prop values")}this.setConditionalInlineStyleByKey({doc:t,key:n,nodeIds:[o],value:s.content,condition:a})}else this.removeConditionalInlineStyleByKey({doc:t,key:n,nodeIds:[o],condition:a})}))}else n.forEach((e=>{const n=s.styles[e];if(n){if("static"!==n.type){if("token"===n.content.referenceType){const s=n.content.id;return void this.setStyleByKey({doc:t,nodeIds:[o],key:e,tokenId:s,value:""})}throw new Error("Copy style does not support dynamic prop values")}this.setStyleByKey({doc:t,nodeIds:[o],key:e,value:n.content})}else this.removeStyleByKey({doc:t,nodeIds:[o],key:e})}))}setStyleByKey(e){const{doc:t,nodeIds:o,key:n,value:s,tokenId:i}=e;if(!t)return;if(!o.length)throw new Error("NodeIds list cannot be empty");const r=this.projectUIState.localWork.nodesUnderLocalWork;o.forEach((o=>{const a=t.nodes.byId[o];if(!a)return;if(t.nodes.nodeIsCompInstance(a)&&a)return void this.componentStyleManagementFlow.addStyleToCompInstance(be(be({},e),{},{nodeId:o}));!a.fakeSize||r||!ee.E5.includes(n)||"width"===n&&"100%"===s||(a.fakeSize=!1);const l=be({},a.styles[n]);var c;if(this.updateNodeReferenceForTokenWhenRemovingStyle({tokenReference:l,nodeId:a.id}),"fontFamily"===n&&this.fontsInProjectFlow.updateFontUsageWhenAddingStyles({doc:t,key:n,nodeId:o,fontName:s,oldFontName:l.content}),!i)return a.styles[n]=new J.F({content:s,pos:null===(c=a.styles[n])||void 0===c?void 0:c.pos}),void(r||ge.includes(n)&&t.syncAssetInNodeRelationByNewContent({node:a,oldContent:l,newContent:a.styles[n]}));if(i){var d;const e=t.designLanguage.tokensById[i];if(!e)return;return e.usedInNodes[a.id]?e.usedInNodes[a.id]+=1:e.usedInNodes[a.id]=1,void(a.styles[n]=new q.P({content:{referenceType:"token",id:i},pos:null===(d=a.styles[n])||void 0===d?void 0:d.pos}))}})),r&&(0,Q.JG)(this.projectUIState,(e=>{var t;null===(t=e.localWork.changedStyles)||void 0===t||t.push(n)}))}setConditionalInlineStyleByKey(e){const{doc:t,nodeIds:o,condition:n,value:s,key:i,tokenId:r}=e;if(!t)return;if(!o.length)throw new Error("NodeIds list cannot be empty");const a=this.projectUIState.localWork.nodesUnderLocalWork;o.forEach((o=>{const l=t.nodes.byId[o];if(!l)return;if(t.nodes.nodeIsCompInstance(l))return void this.componentStyleManagementFlow.addReferencedStyleToCompInstance(be(be({},e),{},{nodeId:o}));let c=l.getInlineConditionalStyleMap(n),d=!1;c||(c={type:"style-map",id:(0,Y.Z)(),content:{mapType:"inlined",conditions:[n],styles:{}}},d=!0);const p=be({},c.content.styles[i]);var u;(this.updateNodeReferenceForTokenWhenRemovingStyle({tokenReference:p,nodeId:l.id}),"fontFamily"===i&&this.fontsInProjectFlow.updateFontUsageWhenAddingStyles({doc:t,key:i,nodeId:o,fontName:s,oldFontName:p.content}),r)||(c.content.styles[i]=new J.F({content:s,pos:null===(u=c.content.styles[i])||void 0===u?void 0:u.pos}),d&&(l.referencedStyles[c.id]=c),a||ge.includes(i)&&t.syncAssetInNodeRelationByNewContent({node:l,oldContent:p,newContent:c.content.styles[i]}));if(r){var h;const e=t.designLanguage.tokensById[r];if(!e)return;e.usedInNodes[l.id]?e.usedInNodes[l.id]+=1:e.usedInNodes[l.id]=1,c.content.styles[i]=new q.P({content:{referenceType:"token",id:r},pos:null===(h=c.content.styles[i])||void 0===h?void 0:h.pos}),d&&(l.referencedStyles[c.id]=c)}})),a&&(0,Q.JG)(this.projectUIState,(e=>{var t;null===(t=e.localWork.changedStyles)||void 0===t||t.push(i)}))}bindProjectStyleToNode({doc:e,refId:t,nodeId:o}){if(!e)return;const n=e.nodes.byId[o];if(!n)return;const s=e.classes.byId[t];if(!s)throw new Error(`Project is missing from the style sheet - ${t}`);const i={id:t,type:"style-map",content:{mapType:"project-referenced",referenceId:t}};n.referencedStyles[i.id]=i,null!==s&&void 0!==s&&s.usedInNodes?s.usedInNodes[o]=!0:s.usedInNodes={[o]:!0}}unbindProjectStyleFromNodeIds({doc:e,classId:t,nodeIds:o}){if(!e)return;const n=e.classes.byId[t];o.forEach((o=>{const s=e.nodes.byId[o];s&&((0,de.G)(n,s)||(delete s.referencedStyles[t],n&&delete n.usedInNodes[o]))}))}createInteractionState(e){const{doc:t,interactionState:o,nodeIds:n}=e;if(!t)return;if(!n.length)throw new Error("NodeIds list cannot be empty");const s={conditionType:"element-state",content:o};n.forEach((e=>{const o=t.nodes.byId[e];if(!o)return;let n=o.getInlineConditionalStyleMap(s);n||(n={type:"style-map",id:(0,Y.Z)(),content:{mapType:"inlined",conditions:[s],styles:{}}},"element-state"===s.conditionType&&this.setStyleByKey({nodeIds:[e],key:"transition",value:"0.3s"}),o.referencedStyles[n.id]=n)}))}getAllInteractionStates(e){if(!e.length)return[];const t=new Set;return e.forEach((e=>{const o=this.projectDoc.nodes.byId[e];if(!o)return[];Object.keys(X.F).forEach((e=>{const n={conditionType:"element-state",content:e};o.getInlineConditionalStyleMap(n)&&t.add(e)}))})),[...t]}bindTextStyleOnSelectedNodes(e){const{doc:t,nodeIds:o,textStyleId:n}=e;if(!t)return;const s=t.designLanguage.textStyleSetsById[n];s&&o.forEach((e=>{const o=t.nodes.byId[e];if(!o)return;if(Object.values(o.referencedStyles||{}).some((e=>"design-language-referenced"===e.content.mapType))){const n=(0,re.hm)(o);if(s.id===n)return;this.unbindTextStyleFromNode({doc:t,textStyleId:n,nodeIds:[e]})}const i=(0,Y.Z)();o.referencedStyles[i]={id:i,type:"style-map",content:{mapType:"design-language-referenced",referenceId:n}},s.usedInNodes[e]=!0}))}overrideNodeStyle(e){const{nodeIds:t,newStyle:o}=e,n=this.projectUIState.localWork.nodesUnderLocalWork;(n?Q.JG:this.dbSync.mutate)(this.projectDoc,(e=>{t.forEach((t=>{const n=e.nodes.byId[t];n&&(n.styles=o)}))})),n&&(0,Q.JG)(this.projectUIState,(e=>{var t;null===(t=e.localWork.changedStyles)||void 0===t||t.push(...Object.keys(o))}))}removeStyleByKeyBasedOnCurrentBreakpoint(e){const t=this.projectUIState.stage.interactionState.state,o=this.mediaQueryBreakpointManagementFlow.getCurrentMediaQuery();t?this.removeConditionalInlineStyleByKey(be(be({},e),{},{condition:{conditionType:"element-state",content:t}})):o.isDefault?this.removeStyleByKey(e):this.removeConditionalInlineStyleByKey(be(be({},e),{},{condition:{conditionType:"screen-size",maxWidth:o.maxWidth}}))}removeStyleByKey(e){const{nodeIds:t,key:o,doc:n}=e,s=this.projectUIState.localWork.nodesUnderLocalWork;n&&(t.forEach((t=>{const i=n.nodes.byId[t];if(!i)return;if(n.nodes.nodeIsCompInstance(i))return void this.componentStyleManagementFlow.removeStyleFromCompInstance(be(be({},e),{},{nodeId:t}));const r=i.styles[o];this.updateNodeReferenceForTokenWhenRemovingStyle({tokenReference:r,nodeId:i.id}),"static"===(null===r||void 0===r?void 0:r.type)&&this.fontsInProjectFlow.updateFontUsageWhenRemovingStyles({doc:n,fontName:r.content,key:o,nodeId:t});const a=be({},i.styles[o]);delete i.styles[o],s||ge.includes(o)&&n.syncAssetInNodeRelationByNewContent({node:i,oldContent:a,newContent:null})})),s&&(0,Q.JG)(this.projectUIState,(e=>{var t;null===(t=e.localWork.changedStyles)||void 0===t||t.push(o)})))}removeMultipleStylesByKey(e){const{nodeIds:t,keys:o,doc:n}=e;n&&o.forEach((e=>{this.removeStyleByKey({nodeIds:t,key:e})}))}removeConditionalInlineStyleByKey(e){const{nodeIds:t,key:o,doc:n,condition:s}=e;if(!n)return;if(!t.length)throw new Error("NodeIds list cannot be empty");const i=this.projectUIState.localWork.nodesUnderLocalWork;t.forEach((t=>{const r=n.nodes.byId[t];if(!r)return;if(n.nodes.nodeIsCompInstance(r))return void this.componentStyleManagementFlow.removeConditionalStyleFromCompInstance(be(be({},e),{},{nodeId:t}));const a=r.getInlineConditionalStyleMap(s);if(!a)return;const l=a.content.styles[o];this.updateNodeReferenceForTokenWhenRemovingStyle({tokenReference:l,nodeId:r.id}),"static"===(null===l||void 0===l?void 0:l.type)&&this.fontsInProjectFlow.updateFontUsageWhenRemovingStyles({doc:n,fontName:l.content,key:o,nodeId:t});const c=be({},a.content.styles[o]),d=Object.keys(a.content.styles);1===d.length&&d[0]===o&&"element-state"!==s.conditionType?delete r.referencedStyles[a.id]:delete a.content.styles[o],i||ge.includes(o)&&n.syncAssetInNodeRelationByNewContent({node:r,oldContent:c,newContent:null})})),i&&(0,Q.JG)(this.projectUIState,(e=>{var t;null===(t=e.localWork.changedStyles)||void 0===t||t.push(o)}))}removeInteractionStateStyles(e){const{nodeIds:t,doc:o,interactionState:n}=e;if(o){if(!t.length)throw new Error("NodeIds list cannot be empty");t.forEach((e=>{const t=o.nodes.byId[e];if(!t)return;const s=t.getInlineConditionalStyleMap({conditionType:"element-state",content:n});if(!s)return;delete t.referencedStyles[s.id];this.getAllInteractionStates([e]).length||this.removeStyleByKey({doc:o,nodeIds:[e],key:"transition"})}))}}orderStyles(e){var t;const{nodeId:o,condition:n,doc:s}=e;if(!s)return;const i=s.nodes.byId[o];if(!i)return;const r=n?(null===(t=i.getInlineConditionalStyleMap(n))||void 0===t?void 0:t.content.styles)||{}:i.styles;Object.values(r).forEach((e=>{e.pos||(e.pos=this.positioningService.getHighestAvailablePosition({entitiyCollection:r}))}))}overrideConditionalInlineStyles(e){const{nodeIds:t,condition:o,styles:n}=e;if(!t.length)throw new Error("NodeIds list cannot be empty");const s=this.projectUIState.localWork.nodesUnderLocalWork;(s?Q.JG:this.dbSync.mutate)(this.projectDoc,(e=>{t.forEach((t=>{const s=e.nodes.byId[t];if(!s)return;let i=JSON.parse(JSON.stringify(s.getInlineConditionalStyleMap(o)));i||(i={type:"style-map",id:(0,Y.Z)(),content:{mapType:"inlined",conditions:[o],styles:n}}),i.content.styles=n,s.referencedStyles[i.id]=i}))})),s&&(0,Q.JG)(this.projectUIState,(e=>{var t;null===(t=e.localWork.changedStyles)||void 0===t||t.push(...Object.keys(n))}))}getResolvedStylesBasedOnCurrentBreakpoint(e){const{nodeId:t,dynamicStyleResult:o,replaceAssetIdsWithSrcs:n,ignoreDisabledNodes:s}=e,i=this.projectDoc.nodes.byId[t];if(!i)return{};const r=this.projectUIState.stage.interactionState.state,a=this.mediaQueryBreakpointManagementFlow.getCurrentMediaQuery();if(r){const e=a.isDefault?[]:i.getInlineMatchedStyleSetIds(a.maxWidth),l=i.referencedStyles[e[0]];if(l&&"inlined"===l.content.mapType)return this.getResolvedInlineStyles({nodeId:t,condition:{conditionType:"element-state",content:r},dynamicStyleResult:o,replaceAssetIdsWithSrcs:n,ignoreDisabledNodes:s})}if(!a.isDefault){const e=i.getInlineMatchedStyleSetIds(a.maxWidth),r=i.referencedStyles[e[0]];if(r&&"inlined"===r.content.mapType)return this.getResolvedInlineStyles({nodeId:t,condition:{maxWidth:r.content.conditions[0].maxWidth,conditionType:"screen-size"},dynamicStyleResult:o,replaceAssetIdsWithSrcs:n,ignoreDisabledNodes:s})}return this.getResolvedStyles(e)}resolveStaticAndDynamicNodes(e){const{styles:t,compOwningNode:o,dynamicStyleResult:n,replaceAssetIdsWithSrcs:s,ignoreDisabledNodes:i}=e;return Object.keys(t).reduce(((e,r)=>{if(i&&t[r].disabled)return e;const a=this.resolveDynamicNode(t[r],r,n,s,o);return a&&(e[r]=a),e}),{})}resolveDynamicNode(e,t,o,n,s){if(e){if("static"===e.type){let o=String(e.content);return n&&ge.includes(t)&&(o=this.getAbsoluteBackgroundImage(e.content,s)),String(o)}if("dynamic"===e.type){const t=e.content;let n=t.defaultValue;if("token"===t.referenceType){const e=this.projectDoc.designLanguage.tokensById[t.id];if("variable"===o){var i;n=`var(${null===(i=this.projectDoc.designLanguage.getTokensAsCustomProperties()[t.id])||void 0===i?void 0:i.name})`}else if("value"===o)n=null===e||void 0===e?void 0:e.value;else{const t=this.projectDoc.designLanguage.categoriesById[null===e||void 0===e?void 0:e.categoryId];n="color"===(null===e||void 0===e?void 0:e.type)?(0,se.MU)(be(be({},e),{},{categoryName:t.name})):null===e||void 0===e?void 0:e.name}}if(n)return n}}}getResolvedClassesStylesBasedOnCurrentBreakpoint(e){const t=this.projectDoc.nodes.byId[e.nodeId];if(!t)return{resolvedClassesStyles:{},resolvedInheritedClassesStyles:{}};const o=Object.values((null===t||void 0===t?void 0:t.referencedStyles)||{}).filter((e=>"project-referenced"===e.content.mapType));let n=[];o.forEach((t=>{if(this.projectDoc.classes.byId[t.content.referenceId])n.push(this.projectDoc.classes.byId[t.content.referenceId]);else{void 0===t.id&&this.dbSync.mutate(this.projectDoc,(t=>{const o=t.nodes.byId[e.nodeId],n=o.referencedStyles;delete n[void 0],o.referencedStyles=be({},n)}));const o=new Error(`Class ${t.id} is missing from project`);this.sentryService.captureException(o)}})),n=n.sort(((e,t)=>(0,ce.F0)(parseFloat(e.pos)-(0,ce.F0)(parseFloat(t.pos)))));const{interactionState:s}=this.projectUIState.stage,i=s.state,r=this.mediaQueryBreakpointManagementFlow.getCurrentMediaQuery();let a={},l={};return n.forEach((t=>{const o=this.projectDoc.classes.byId[t.id];if(!o)return;let n={},s={},c=null;if(r.isDefault&&(n=o.content),!r.isDefault){s=be(be({},o.content),s);o.getMatchedScreenSizeStyleSetIds(r.maxWidth).forEach((e=>{const t=o.conditions[e];t.meta.maxWidth===r.maxWidth?n=t.content:s=be(be({},s),t.content)}))}i&&(c=Object.values(o.conditions).find((e=>"element-state"===e.type&&e.meta.state===i)),c&&(n=be(be({},n),c.content))),a=Object.assign(a,this.resolveStaticAndDynamicNodes(be({styles:n},e))),l=Object.assign(l,this.resolveStaticAndDynamicNodes(be({styles:s},e)))})),{resolvedClassesStyles:a,resolvedInheritedClassesStyles:l}}unbindTokenFromNodes(e){const{doc:t,tokenId:o,nodeIds:n}=e;if(!t)return;const s=t.designLanguage.tokensById[o];s&&n.forEach((e=>{const n=t.nodes.byId[e];n&&(t.nodes.nodeIsCompInstance(n)?this.componentStyleManagementFlow.unbindTokenFromCompInstance({doc:t,nodeId:e,tokenId:o}):(Object.values((null===n||void 0===n?void 0:n.referencedStyles)||{}).forEach((e=>{var t;"inlined"===e.content.mapType&&null!==(t=e.content)&&void 0!==t&&t.conditions.length&&Object.values(e.content.styles||{}).length>0&&Object.keys(e.content.styles).forEach((t=>{const i=e.content.styles[t];"dynamic"===i.type&&"token"===i.content.referenceType&&i.content.id===o&&(delete n.referencedStyles[e.id].content.styles[t],n.referencedStyles[e.id].content.styles[t]=new J.F({content:s.value}))}))})),Object.keys(n.styles||{}).forEach((e=>{const t=n.styles[e];"dynamic"===t.type&&"token"==t.content.referenceType&&t.content.id===o&&(delete n.styles[e],n.styles[e]=new J.F({content:s.value}))}))))}))}unbindTextStyleFromNode(e){const{nodeIds:t,doc:o,textStyleId:n}=e;if(!o)return;const s=o.designLanguage.textStyleSetsById[n],i=s.content;t.forEach((e=>{const t=o.nodes.byId[e];t&&(delete s.usedInNodes[e],t.referencedStyles={},Object.keys(i||{}).forEach((e=>{var o;t.styles[e]=new J.F({content:null===(o=i[e])||void 0===o?void 0:o.content})})))}))}updateNodesVisibility(e){const{hide:t,doc:o,nodeIds:n}=e;n.forEach((e=>{const{styles:n,inheritedStyles:s}=this.getComputedStyleByKeyForCurrentBreakpoint(e,["display"]);if(t){if("none"===n.display||"none"===s.display)return;return this.temporaryStyleFlow.movePropertiesToTempStyle({doc:o,properties:["display"],nodeIds:[e]}),void("none"===s.display?this.removeStyleByKeyBasedOnCurrentBreakpoint({doc:o,nodeIds:[e],key:"display"}):this.setStyleByKeyBasedOnCurrentBreakpoint({doc:o,key:"display",value:"none",nodeIds:[e]}))}const{style:i,inheritedStyle:r}=this.temporaryStyleFlow.getValuesFromTempStyle("display");i?this.temporaryStyleFlow.retrievePropertiesFromTempStyle({doc:o,properties:["display"],nodeIds:[e]}):r?this.setStyleByKeyBasedOnCurrentBreakpoint({doc:o,key:"display",value:r,nodeIds:[e]}):"none"!==n.display?"none"===s.display&&this.setStyleByKeyBasedOnCurrentBreakpoint({doc:o,key:"display",value:"flex",nodeIds:[e]}):this.removeStyleByKeyBasedOnCurrentBreakpoint({doc:o,key:"display",nodeIds:[e]})}))}getDefaultStylesFromTokens(){const e=this.projectDoc.designLanguage.getTokenWithRole("background-color"),t=this.projectDoc.designLanguage.getTokenWithRole("foreground-color"),o=this.projectDoc.designLanguage.getDefaultTextStyle(),{content:n}=o,s=e=>{const t=this.projectDoc.designLanguage.categoriesById[null===e||void 0===e?void 0:e.categoryId];return(0,se.MU)(be(be({},e),{},{categoryName:t.name}))};return be(be(be({},t?{color:s(t)}:null),e?{background:s(e)}:null),Object.keys(n||{}).reduce(((e,t)=>{var o;return"static"===(null===(o=n[t])||void 0===o?void 0:o.type)&&(e[t]=n[t].content),e}),{}))}updateNodeReferenceForTokenWhenRemovingStyle(e){const{doc:t,tokenReference:o,nodeId:n}=e;if(t&&o&&"dynamic"===o.type&&"token"===o.content.referenceType){const e=t.designLanguage.tokensById[o.content.id];if(!e)throw new Error(`Can't update Token node reference,Token ${o.content.id} does not exist`);1===e.usedInNodes[n]?delete e.usedInNodes[n]:e.usedInNodes[n]-=1}}ancestorHasStyleAtCurrentBreakpoint(e){const{nodeId:t,key:o,values:n}=e;let s=this.projectDoc.nodes.byId[t];for(;null!==(i=s)&&void 0!==i&&i.parentId;){var i;if(this.nodeHasStyleAtCurrentBreakpoint({nodeId:s.parentId,key:o,values:n}))return!0;s=this.projectDoc.nodes.byId[s.parentId]}return!1}getRelativeBackgroundImage(e){return(0,pe.B)(e).map((e=>{if(e.includes("gradient"))return e;const t=`${e}`.split(/'|"/)[1];let o=t;if(t)o=this.assetsEditFlow.replaceAssetAbsoluteSrcWithLocal(t)||t;else{const n=this.projectDoc.assets.byId[e];o=n?n.imageSrc:t}return o&&t?e.replace(t,o):o?`url("${o}")`:e})).join()}getAbsoluteBackgroundImage(e,t){return(0,pe.B)(e).map((e=>{if(e.includes("gradient"))return e;let o=`${e}`.split(/'|"/)[1];if(o)o=this.assetsEditFlow.replaceAssetLocalSrcWithAbsolute(o,t)||o;else{const n=this.projectDoc.assets.byId[e];o=n?n.getRemoteSrcForComp(t||""):o}return`url('${o}')`})).join()}getBackgroundImageWithAssetId(e){return(0,pe.B)(e).map((e=>{if(e.includes("gradient"))return e;const t=`${e}`.split(/'|"/)[1],o=this.assetsEditFlow.getAssetBySrc(t);return o?o.id:(0,he.lJ)(e)})).join()}getNewBackgroundImageValue(e,t){const{styles:o,inheritedStyles:n}=this.getComputedStyleByKeyForCurrentBreakpoint(t,["backgroundImage"]),s=o.backgroundImage||n.backgroundImage;if(!s)return e;const i=(0,pe.B)(s);if(1===i.length)return e;let{focusedBgImgIndex:r}=this.projectUIState.userInteractions;return r?(0,Q.JG)(this.projectUIState,(e=>{e.userInteractions.focusedBgImgIndex=null})):r=i.findIndex((e=>!e.includes("gradient")))||0,i[r]=e,i.join(",")}replaceRemovedAssetFromBgImg(e,t){const o=(0,pe.B)(t);if(1===o.length)return`url("${ue.i$}")`;const n=o.findIndex((t=>t===e));return o[n]=`url("${ue.i$}")`,o.join(",")}getNodeParentFlexDirection(e){var t;const{nodeId:o}=e,n=null===(t=this.projectDoc.nodes.byId[o])||void 0===t?void 0:t.parentId;if(!n)return;const s=this.getCurrentStyleValueByKeyForNode(n,["display","flexDirection"]);return"flex"===s.display?s.flexDirection||"row":void 0}getAllStyleValuesForKey(e){const{key:t,nodeId:o}=e,n=this.projectDoc.nodes.byId[o];if(!n)return[];const s=[this.resolveDynamicNode(n.styles[t],t,"value")];return Object.values(n.referencedStyles).forEach((e=>{if("inlined"===e.content.mapType&&s.push(this.resolveDynamicNode(e.content.styles[t],t,"value")),"project-referenced"===e.content.mapType){const o=this.projectDoc.classes.byId[e.content.referenceId];s.push(this.resolveDynamicNode(o.content[t],t,"value")),Object.values(o.conditions).forEach((e=>{s.push(this.resolveDynamicNode(e.content[t],t,"value"))}))}})),s.filter((e=>e))}nodeIsHidden(e){const t=[V.IV.DROPDOWN_LIST,V.IV.MOBILE_MENU];for(const s of t){const t=(0,me.U2)(this.projectDoc,e,s);if(t)return!this.projectUIState.selection.nodesWithUtilityClasses[t.id]}const{styles:o,inheritedStyles:n}=this.getComputedStyleByKeyForCurrentBreakpoint(e,["display"]);return"none"===o.display||"none"===n.display||this.ancestorHasStyleAtCurrentBreakpoint({nodeId:e,key:"display",values:["none"]})}toggleNodesPropertyByKey(e){const{nodeIds:t,condition:o,key:n}=e;(0,Q.JG)(this.projectDoc,(e=>{t.forEach((t=>{const s=e.nodes.byId[t];if(s)if(o){const e=s.getInlineConditionalStyleMap(o);if(null===e||void 0===e||!e.content.styles[n])return;e.content.styles[n].disabled=!e.content.styles[n].disabled}else s.styles[n]&&(s.styles[n].disabled=!s.styles[n].disabled)}))}))}nodeSatisfiesStateRenderingCondition(e,t,o){if(!t)return!1;const n=this.projectDoc.nodes.byId[e],s=this.projectUIState.componentList.stateValues[t];if(!n||!n.renderingConditions)return!0;const{renderingConditions:i}=n,r=Object.values(s||{}).find((e=>e.name===i.reference.content.id));var a;return"root"!==o?n.renderingConditions.value===(null===r||void 0===r||null===(a=r.componentInstanceValues)||void 0===a?void 0:a[o]):n.renderingConditions.value===(null===r||void 0===r?void 0:r.value)}},F=(0,W.Z)(D.prototype,"projectUIState",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),C=(0,W.Z)(D.prototype,"projectDoc",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),A=(0,W.Z)(D.prototype,"dbSync",[r],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),k=(0,W.Z)(D.prototype,"fontsInProjectFlow",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),P=(0,W.Z)(D.prototype,"componentStyleManagementFlow",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),U=(0,W.Z)(D.prototype,"propDefinitionManagementFlow",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),L=(0,W.Z)(D.prototype,"notificationsManagementFlow",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Z=(0,W.Z)(D.prototype,"assetSrcProvider",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),R=(0,W.Z)(D.prototype,"assetsEditFlow",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),M=(0,W.Z)(D.prototype,"mediaQueryBreakpointManagementFlow",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),H=(0,W.Z)(D.prototype,"temporaryStyleFlow",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),$=(0,W.Z)(D.prototype,"positioningService",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),B=(0,W.Z)(D.prototype,"sentryService",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),(0,W.Z)(D.prototype,"setMultipleStylesByKeyForCurrentBreakpoint",[ne.P],Object.getOwnPropertyDescriptor(D.prototype,"setMultipleStylesByKeyForCurrentBreakpoint"),D.prototype),(0,W.Z)(D.prototype,"removeMultipleStylesByKeyBasedOnCurrentBreakpoint",[ne.P],Object.getOwnPropertyDescriptor(D.prototype,"removeMultipleStylesByKeyBasedOnCurrentBreakpoint"),D.prototype),(0,W.Z)(D.prototype,"setStyleByKeyBasedOnCurrentBreakpoint",[ne.P],Object.getOwnPropertyDescriptor(D.prototype,"setStyleByKeyBasedOnCurrentBreakpoint"),D.prototype),(0,W.Z)(D.prototype,"copyStylesFromNodeBasedOnCurrentBreakpoint",[ne.P],Object.getOwnPropertyDescriptor(D.prototype,"copyStylesFromNodeBasedOnCurrentBreakpoint"),D.prototype),(0,W.Z)(D.prototype,"setStyleByKey",[b,ne.P,g],Object.getOwnPropertyDescriptor(D.prototype,"setStyleByKey"),D.prototype),(0,W.Z)(D.prototype,"setConditionalInlineStyleByKey",[I,ne.P,v],Object.getOwnPropertyDescriptor(D.prototype,"setConditionalInlineStyleByKey"),D.prototype),(0,W.Z)(D.prototype,"bindProjectStyleToNode",[ne.P],Object.getOwnPropertyDescriptor(D.prototype,"bindProjectStyleToNode"),D.prototype),(0,W.Z)(D.prototype,"unbindProjectStyleFromNodeIds",[ne.P],Object.getOwnPropertyDescriptor(D.prototype,"unbindProjectStyleFromNodeIds"),D.prototype),(0,W.Z)(D.prototype,"createInteractionState",[ne.P],Object.getOwnPropertyDescriptor(D.prototype,"createInteractionState"),D.prototype),(0,W.Z)(D.prototype,"bindTextStyleOnSelectedNodes",[ne.P],Object.getOwnPropertyDescriptor(D.prototype,"bindTextStyleOnSelectedNodes"),D.prototype),(0,W.Z)(D.prototype,"overrideNodeStyle",[j,N],Object.getOwnPropertyDescriptor(D.prototype,"overrideNodeStyle"),D.prototype),(0,W.Z)(D.prototype,"removeStyleByKeyBasedOnCurrentBreakpoint",[ne.P],Object.getOwnPropertyDescriptor(D.prototype,"removeStyleByKeyBasedOnCurrentBreakpoint"),D.prototype),(0,W.Z)(D.prototype,"removeStyleByKey",[x,ne.P,S],Object.getOwnPropertyDescriptor(D.prototype,"removeStyleByKey"),D.prototype),(0,W.Z)(D.prototype,"removeMultipleStylesByKey",[ne.P],Object.getOwnPropertyDescriptor(D.prototype,"removeMultipleStylesByKey"),D.prototype),(0,W.Z)(D.prototype,"removeConditionalInlineStyleByKey",[w,ne.P,O],Object.getOwnPropertyDescriptor(D.prototype,"removeConditionalInlineStyleByKey"),D.prototype),(0,W.Z)(D.prototype,"removeInteractionStateStyles",[ne.P],Object.getOwnPropertyDescriptor(D.prototype,"removeInteractionStateStyles"),D.prototype),(0,W.Z)(D.prototype,"orderStyles",[ne.P],Object.getOwnPropertyDescriptor(D.prototype,"orderStyles"),D.prototype),(0,W.Z)(D.prototype,"overrideConditionalInlineStyles",[T,_],Object.getOwnPropertyDescriptor(D.prototype,"overrideConditionalInlineStyles"),D.prototype),(0,W.Z)(D.prototype,"unbindTokenFromNodes",[ne.P],Object.getOwnPropertyDescriptor(D.prototype,"unbindTokenFromNodes"),D.prototype),(0,W.Z)(D.prototype,"unbindTextStyleFromNode",[ne.P],Object.getOwnPropertyDescriptor(D.prototype,"unbindTextStyleFromNode"),D.prototype),(0,W.Z)(D.prototype,"updateNodesVisibility",[ne.P],Object.getOwnPropertyDescriptor(D.prototype,"updateNodesVisibility"),D.prototype),(0,W.Z)(D.prototype,"updateNodeReferenceForTokenWhenRemovingStyle",[ne.P],Object.getOwnPropertyDescriptor(D.prototype,"updateNodeReferenceForTokenWhenRemovingStyle"),D.prototype),E=D))},75373:function(e,t,o){var n=o(73202),s=o(92809),i=o(30773),r=o(11163),a=o(20722),l=o(49899),c=o(76883),d=o(36565),p=o(93510),u=o(8044),h=o(83141),y=o(85591),m=o(68124),f=o(35307),b=o(71919),g=o(98444),I=o(61030),v=o(65988),j=o(67294),N=o(89361),x=o(92763),S=o(30499),w=o(14554),O=o(85893);const T=e=>{const{onOverride:t,onCancel:o,onClose:n,forCloneableProject:s=!1}=e,{0:i,1:r}=(0,j.useState)(!1);return(0,O.jsxs)("div",{className:"jsx-3144625160 wrapper override-project-root",children:[(0,O.jsx)("div",{onClick:n,className:"jsx-3144625160 override-project-close",children:(0,O.jsx)(x.J,{type:S.u2["actions/close"]})}),(0,O.jsx)("div",{className:"jsx-3144625160 icon-wrapper",children:(0,O.jsx)(w.Q,{size:140,type:"override-project"})}),(0,O.jsxs)("div",{className:"jsx-3144625160 text-wrapper",children:[(0,O.jsx)("h1",{className:"jsx-3144625160 overried-project-title",children:"Sure you want to overwrite your project? "}),(0,O.jsx)("p",{className:"jsx-3144625160",children:s?"You alreay have a project in anonymous session. If you choose to overwrite it, \nyou will lose all the modifications done in teleportHQ. Your action cannot be undone.":"You've already exported this project, and if you choose to overwrite it, you will lose all\nthe modifications done in teleportHQ. This action cannot be undone. Create a free account\nand save your project."})]}),(0,O.jsxs)("div",{className:"jsx-3144625160 modal-btns buttons-wrapper",children:[(0,O.jsx)("div",{className:"jsx-3144625160 override-button",children:(0,O.jsx)(N.z,{refAttrs:{autoFocus:!0},onClick:async()=>{r(!0),await t(),r(!1)},style:"solid",colorScheme:"neutral",isLoading:i,isDisabled:i,children:"Overwrite"})}),(0,O.jsx)(N.z,{onClick:o,style:"solid",children:s?"Redirect to existing project":"Let's save my project"})]}),(0,O.jsx)(v.default,{id:"3144625160",children:[".override-project-root.jsx-3144625160{position:relative;height:435px;width:630px;padding:60px;margin:-24px;background:var(--outline-color);border-radius:4px;}",".override-project-close.jsx-3144625160{position:absolute;cursor:pointer;top:20px;right:20px;}",".overried-project-title.jsx-3144625160{margin-bottom:14px;}",".icon-wrapper.jsx-3144625160{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;}",".text-wrapper.jsx-3144625160{color:var(--color-neutral-300);text-align:center;margin-top:30px;}",".buttons-wrapper.jsx-3144625160{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;}",".override-button.jsx-3144625160{margin-right:12px;}"]})]})};var _,E,D,F,C,A,k,P,U,L,Z,R,M,H,$,B,G,z,W,V,K,J,X,Y,q,Q,ee,te,oe,ne,se,ie,re,ae,le,ce,de,pe,ue,he,ye,me,fe,be,ge,Ie,ve,je,Ne,xe,Se,we,Oe,Te,_e,Ee,De,Fe,Ce,Ae,ke,Pe,Ue,Le,Ze,Re,Me,He,$e,Be,Ge,ze,We,Ve,Ke,Je,Xe,Ye,qe,Qe,et,tt=o(66997),ot=o(84003),nt=o(45461),st=o(55148),it=o(28132),rt=o(46089),at=o(18831),lt=o(2855),ct=o(20510);function dt(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function pt(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?dt(Object(o),!0).forEach((function(t){(0,s.Z)(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):dt(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}_=(0,c.JJ)("projectInitFlow"),E=(0,c.f3)("authService"),D=(0,c.f3)("projectRepository"),F=(0,c.f3)("sentryService"),C=(0,c.f3)("sharedbProjectSyncService"),A=(0,c.f3)("projectDoc"),k=(0,c.f3)("projectUIState"),P=(0,c.f3)("localHistoryStackFlow"),U=(0,c.f3)("userProjectDataPersistenceFlow"),L=(0,c.f3)("collaboratorManagementFlow"),Z=(0,c.f3)("pointerInteractionManagementFlow"),R=(0,c.f3)("globalAppState"),M=(0,c.f3)("userAccountRepository"),H=(0,c.f3)("fontsInProjectFlow"),$=(0,c.f3)("routerService"),B=(0,c.f3)("nodeSelectionFlow"),G=(0,c.f3)("zoomControlFlow"),z=(0,c.f3)("pageManagementFlow"),W=(0,c.f3)("asyncWatcherService"),V=(0,c.f3)("webRTCState"),K=(0,c.f3)("rtcFlow"),J=(0,c.f3)("sessionStorageService"),X=(0,c.f3)("notificationsManagementFlow"),Y=(0,c.f3)("tutorialFlow"),q=(0,c.f3)("uidlToProjectMapper"),Q=(0,c.f3)("uidlDownloadService"),ee=(0,c.f3)("navbarFlow"),te=(0,c.f3)("modalManagementFlow"),oe=(0,c.f3)("assetsRepository"),ne=(0,c.f3)("localStorageService"),se=(0,c.f3)("workspacesRepository"),ie=(0,c.f3)("projectChangesFlow"),re=(0,c.f3)("projectCloneFlow"),ae=(0,c.f3)("yDocumentManagementFlow"),le=(0,c.f3)("projectFilesFlow"),ce=(0,c.f3)("imageOptimisationFlow"),de=(0,c.f3)("githubFlow"),pe=(0,c.f3)("conflictManagementFlow"),ue=(0,c.f3)("assetFoldersFlow"),he=(0,c.f3)("mediaQueryBreakpointManagementFlow"),_((me=class{constructor(){(0,n.Z)(this,"authService",fe,this),(0,n.Z)(this,"projectRepository",be,this),(0,n.Z)(this,"sentryService",ge,this),(0,n.Z)(this,"dbSync",Ie,this),(0,n.Z)(this,"projectDoc",ve,this),(0,n.Z)(this,"projectUIState",je,this),(0,n.Z)(this,"localHistoryStackFlow",Ne,this),(0,n.Z)(this,"userProjectDataPersistenceFlow",xe,this),(0,n.Z)(this,"collaboratorManagementFlow",Se,this),(0,n.Z)(this,"pointerInteractionManagementFlow",we,this),(0,n.Z)(this,"globalAppState",Oe,this),(0,n.Z)(this,"userAccountRepository",Te,this),(0,n.Z)(this,"fontsInProjectFlow",_e,this),(0,n.Z)(this,"routerService",Ee,this),(0,n.Z)(this,"nodeSelectionFlow",De,this),(0,n.Z)(this,"zoomControlFlow",Fe,this),(0,n.Z)(this,"pageManagementFlow",Ce,this),(0,n.Z)(this,"asyncWatcherService",Ae,this),(0,n.Z)(this,"webRTCState",ke,this),(0,n.Z)(this,"rtcFlow",Pe,this),(0,n.Z)(this,"sessionStorageService",Ue,this),(0,n.Z)(this,"notificationsManagementFlow",Le,this),(0,n.Z)(this,"tutorialFlow",Ze,this),(0,n.Z)(this,"uidlToProjectMapper",Re,this),(0,n.Z)(this,"uidlDownloadService",Me,this),(0,n.Z)(this,"navbarFlow",He,this),(0,n.Z)(this,"modalManagementFlow",$e,this),(0,n.Z)(this,"assetsRepository",Be,this),(0,n.Z)(this,"localStorageService",Ge,this),(0,n.Z)(this,"workspacesRepository",ze,this),(0,n.Z)(this,"projectChangesFlow",We,this),(0,n.Z)(this,"projectCloneFlow",Ve,this),(0,n.Z)(this,"yDocumentManagementFlow",Ke,this),(0,n.Z)(this,"projectFilesFlow",Je,this),(0,n.Z)(this,"imageOptimisationFlow",Xe,this),(0,n.Z)(this,"githubFlow",Ye,this),(0,n.Z)(this,"conflictManagementFlow",qe,this),(0,n.Z)(this,"assetFoldersFlow",Qe,this),(0,n.Z)(this,"mediaQueryBreakpointManagementFlow",et,this),(0,s.Z)(this,"update",(async e=>{var t;let o=null===(t=e.query)||void 0===t?void 0:t.compId;this.projectDoc.pages.byId[o]||this.projectDoc.components.byId[o]||(o=this.projectUIState.selection.componentId||this.projectDoc.pages.getIds()[0]),this.updatePageSelection(o),this.updateZoomLevel(),this.updateViewportSize(),this.fontsInProjectFlow.initAndListenForUpdates()})),(0,s.Z)(this,"getProjectLimitations",(()=>{const e=this.projectUIState.workspace.subscriptionPlanType;return e?st.cF[e]:st.gY})),(0,s.Z)(this,"loadProjectFromUIDL",(async e=>{const t=await this.uidlDownloadService.fetchUIDL(e),o=JSON.parse(t);await this.uidlToProjectMapper.mapUIDLToProject(o)})),(0,s.Z)(this,"updatePageSelection",((e,t,o)=>{window.requestAnimationFrame((()=>{if(!e)return;(0,l.JG)(this.projectUIState,(e=>{const{stage:t}=e,n=e.previousSelectedPageOrCompId;n&&(this.projectDoc.pages.byId[n]&&(e.lastVisitedPage=n),this.projectDoc.components.byId[n]&&(e.lastVisitedComponent=n)),this.nodeSelectionFlow.resetNodeSelection(),this.projectUIState.userInteractions.inPreviewMode&&(e.userInteractions.inPreviewMode=!1),t.webComp.controlValues.x=m.m7.controlValues.x,t.webComp.controlValues.y=o?m.m7.controlValues.y:t.getPercentageYForPixels(160)}));if(!this.routerService.getRoutePath().includes("preview"))if(this.projectUIState.layout.mainPanel===p.iW.DEV){const e=this.projectUIState.devMode.selectedFile||nt.e3;this.navbarFlow.selectOrCreateTabByEntityId(e,!0)}else this.navbarFlow.selectOrCreateTabByEntityId(e,t&&"replace"===t)}))})),(0,s.Z)(this,"cloneProject",(async e=>{await this.projectCloneFlow.clone(e),d.Z.mixpanelEvent(d.Z.AnalyticsEvents.DASHBOARD_PROJECT_CLONE),d.Z.customEvents.dashboard.projectClone()})),(0,s.Z)(this,"setMetaInfoOnAccount",(async e=>{const t=this.collaboratorManagementFlow.getLoggedInUserPermissionLevel()===it.z.PROJECT;(0,l.JG)(this.globalAppState,(({user:o})=>{if(!o||!o.userData)return;o.userData.meta.lastAccessedProjects||(o.userData.meta.lastAccessedProjects={});const{lastAccessedSharedProjects:n,lastAccessedProjects:s}=o.userData.meta;if(t)o.userData.meta.lastAccessedSharedProjects=pt(pt({},n),{},{[e.id]:(new Date).toISOString()});else{const t=e.workspace.id,n=(null===s||void 0===s?void 0:s[t])||{};o.userData.meta.lasAccessedProject||(o.userData.meta.lastAccessedProjects={}),o.userData.meta.lastAccessedProjects[t]=pt(pt({},n),{},{[e.id]:(new Date).toISOString()})}o.userData.meta.login={lastTimeEnteredStage:(new Date).toISOString()},o.userData.meta.githubBranches||(o.userData.meta.githubBranches={[this.projectDoc.id]:nt.cY})}));const{userData:o}=this.globalAppState.user;o&&await this.userAccountRepository.update({meta:o.meta})})),(0,s.Z)(this,"initGithubData",(async()=>{var e,t;const o=this.projectUIState.navbar.devModeTabs||{},n=null===(e=this.globalAppState.user.userData)||void 0===e?void 0:e.meta.githubBranches;let s=n&&n[this.projectDoc.id]?n[this.projectDoc.id]:nt.cY;null!==(t=this.projectDoc.projectFiles.local[s])&&void 0!==t&&t.byId||s===nt.cY||(s=nt.cY),(0,l.JG)(this.projectUIState,(e=>{e.devMode.selectedBranch=s})),Object.keys(o).forEach((e=>{o[e].entityId.endsWith(nt.Vf)&&this.navbarFlow.deleteTab(e)})),this.projectUIState.readonly||this.githubFlow.init()})),(0,s.Z)(this,"updateZoomLevel",(()=>{this.projectUIState.userPreferences.persistZoomLevel&&this.projectUIState.userPreferences.zoomLevel&&"number"===typeof this.projectUIState.userPreferences.zoomLevel?this.zoomControlFlow.setStageZoomLevel(this.projectUIState.userPreferences.zoomLevel):this.zoomControlFlow.adjustStageZoomLevelToScreenResolution(window.innerWidth)})),(0,s.Z)(this,"updateViewportSize",(()=>{var e;this.projectUIState.userPreferences.persistViewportSize&&this.projectUIState.userPreferences.viewportSize&&"number"===typeof this.projectUIState.userPreferences.viewportSize?this.projectUIState.stage.setCurrentWidth(this.projectUIState.userPreferences.viewportSize):this.projectUIState.stage.setCurrentWidth((null===(e=this.projectDoc.mediaQueryBreakpoints.getDefaultMediaQuery())||void 0===e?void 0:e.maxWidth)||m.Bk)})),(0,s.Z)(this,"updateComponentsStateRenderValues",(()=>{(0,l.JG)(this.projectUIState,(e=>{const t=this.projectDoc.components.byId;t&&Object.values(t).forEach((t=>{if(!t)return;const{stateDefinitions:o,id:n,instantiatedByNodes:s}=t,i=Object.keys(o).reduce(((t,i)=>{var r,a,l,c;return t[i]={id:i,type:o[i].type,value:o[i].defaultValue,name:o[i].name,meta:{highlightInTreeView:!(null===(r=e.componentList.stateValues)||void 0===r||null===(a=r[n])||void 0===a||null===(l=a[i])||void 0===l||null===(c=l.meta)||void 0===c||!c.highlightInTreeView)},componentInstanceValues:Object.keys(s).reduce(((e,t)=>(e[t]=o[i].defaultValue,e)),{})},t}),{});e.componentList.stateValues[n]=pt(pt({},e.componentList.stateValues[n]),i)}))}))}))}async begin(e){var t,n,s;const i=await this.authService.getAuthUserAsync();if(!i)throw new Error("User should be logged in here");i&&i.isAnonymous&&this.localStorageService.set(tt.r.ANON_USER_ID,i.uid);const c=e.query.slug;let d;Object.assign(this.projectUIState,new h.K),Object.assign(this.webRTCState,new y.g),o.e(58354).then(o.bind(o,58354)).then((e=>{window.ResizeObserver=e.ResizeObserver}));try{d=await this.projectRepository.loadBySlug(c);const e="read"===await this.checkUserAccessType(d);(0,l.JG)(this.projectDoc,(e=>{e.id=d.id,e.accessType=d.accessType})),(0,l.JG)(this.projectUIState,(t=>{t.slug=c||"",t.teleportVercelAlias=d.vercelAlias,t.title=d.name||"",t.customDomain=d.domain||"",t.projectStatus=p.kJ.FOUND,t.readonly=e,t.cloneable=e&&d.accessType===ot.W.CLONEABLE,t.tokens={vercelToken:d.vercelToken,githubToken:d.githubToken},t.workspace={id:d.workspace.id,slug:d.workspace.slug,name:d.workspace.name,subscriptionPlanType:(0,rt.eq)(d.workspace)||null,professionalSubscription:!!d.workspace.subscriptionItem}})),this.userProjectDataPersistenceFlow.init(d)}catch(N){return(0,l.JG)(this.projectUIState,(e=>e.projectStatus=p.kJ.NOT_FOUND)),void r.default.replace(ct.Hj)}const m=await this.dbSync.init({documentSlug:null===(t=(null===(n=e.query)||void 0===n?void 0:n.slug)||"")||void 0===t?void 0:t.toString(),projectId:this.projectDoc.id,generateDefault:()=>(new u.n).toJSON(),onServerOp:e=>{(0,l.z9)(this.projectDoc,(0,lt.J)(e))},onClient:e=>{this.localHistoryStackFlow.store(this.projectDoc,(0,lt.J)(e))},onConnectionLost:()=>{this.projectChangesFlow.handleSocketConnectionLost()},onSocketStatus:e=>{"error"===e&&this.notificationsManagementFlow.createNotification(b.k.WARNING,g.lp.SOCKET_RECONNECT_NOTIFICATION)}});try{a.Z.validate(m)}catch(x){0}this.projectDoc.fromJSON(m),this.assetFoldersFlow.runMigrationForProjectAssets(),await this.handleCloneableProject(d,i),await this.fontsInProjectFlow.initAndListenForUpdates();const f=this.sessionStorageService.get(at.f.UIDL_LINK);let I;var v,j;(f&&(this.sessionStorageService.set(at.f.UIDL_LINK,void 0),await this.loadProjectFromUIDL(f)),this.cleanUpVolatileUserDataAfterInit(),this.projectDoc.pages.getIds().length||this.pageManagementFlow.createHomePage(),Object.keys((null===(s=this.projectDoc.mediaQueryBreakpoints)||void 0===s?void 0:s.byId)||{}).length||this.mediaQueryBreakpointManagementFlow.createDefaultMediaQueries({}),e.inPreviewMode)?(I=e&&null!==e&&void 0!==e&&null!==(v=e.query)&&void 0!==v&&v.compId?e.query.compId:this.projectDoc.pages.getHomePageId(),this.updatePageSelection(I,"replace")):I=e&&null!==e&&void 0!==e&&null!==(j=e.query)&&void 0!==j&&j.compId?e.query.compId:this.projectUIState.selection.componentId||this.projectDoc.pages.getIds()[0];if(this.projectUIState.selection.componentId)if(this.projectUIState.layout.mainPanel===p.iW.DEV){const e=this.projectUIState.devMode.selectedFile||nt.e3;this.navbarFlow.selectOrCreateTabByEntityId(e,!0)}else this.navbarFlow.selectOrCreateTabByEntityId(I,!0);else this.updatePageSelection(I,"replace",!0);this.updateZoomLevel(),this.updateViewportSize(),this.updateComponentsStateRenderValues(),this.projectUIState.readonly||this.collaboratorManagementFlow.init(d),e.inPreviewMode||(this.pointerInteractionManagementFlow.bind(document.body),this.imageOptimisationFlow.computeSizePerComponentForAllAssetsIfNeeded({}),await this.yDocumentManagementFlow.init(),await this.projectFilesFlow.init(),this.rtcFlow.init(),await this.yDocumentManagementFlow.initProjectFiles(),this.githubFlow.cleanupUnexistingRepoData(),await this.initGithubData(),this.conflictManagementFlow.init()),this.cleanUpVolatileDevModeUserDataAfterInit(),this.fontsInProjectFlow.removeUnUsedFonts(),this.asyncWatcherService.listenForUpdates(),this.notificationsManagementFlow.initLimitedNotifications(),this.tutorialFlow.checkAndBeginTutorial(p._2.ONBOARDING),this.setMetaInfoOnAccount(d),this.localHistoryStackFlow.init({onUndo:(e,t)=>{this.projectDoc===e&&this.dbSync.mutateFromPatches(this.projectDoc,t)},onRedo:(e,t)=>{this.projectDoc===e&&this.dbSync.mutateFromPatches(this.projectDoc,t)}})}async leave(){this.userProjectDataPersistenceFlow.stopListeningForUpdates(),this.asyncWatcherService.stopListeningForUpdates(),this.pointerInteractionManagementFlow.unbind(document.body),setTimeout((()=>{(0,f.G)().destroy()})),this.rtcFlow.leave(),this.yDocumentManagementFlow.destroy();const e=(await Promise.all([o.e(22937),o.e(73746),o.e(35701)]).then(o.bind(o,73746))).QuillProviderFactory;(await e.getInstance()).destroy()}async checkUserAccessType(e){const{userData:t}=this.globalAppState.user;let o="read";const n=e.collaborators&&e.collaborators.find((e=>{var o;return(null===(o=e.account)||void 0===o?void 0:o.id)===(null===t||void 0===t?void 0:t.id)}));return n&&(o=n.accessType),o}cleanUpVolatileDevModeUserDataAfterInit(){(0,l.JG)(this.projectUIState,(e=>{const t=e.devMode.selectedBranch,o=[...Object.keys(e.userPreferences.devFileViewState||{})],n=Object.keys(this.projectDoc.projectFiles.local[t].byId),s=this.githubFlow.computeFilesWithDiffs(t).map((e=>e.path)),i=Object.keys(this.projectDoc.projectFiles.staged[t].byId);o.forEach((t=>{Object.keys(e.userPreferences.devFileViewState[t]).forEach((o=>{"local"!==t||n.includes(o)?"diffing"!==t||s.includes(o)?"staged"!==t||i.includes(o)||delete e.userPreferences.devFileViewState.staged[o]:delete e.userPreferences.devFileViewState.diffing[o]:delete e.userPreferences.devFileViewState.local[o]}))}))}))}cleanUpVolatileUserDataAfterInit(){(0,l.JG)(this.projectUIState,(e=>{const t=e.selection.componentId;return this.projectDoc.getProjectPageOrComponent(t||"")||(e.selection.componentId=this.projectDoc.pages.getHomePageId()||Object.keys(this.projectDoc.pages.byId)[0]),e.layout.sidebarPanel!==p.tI.COMPONENTS&&e.layout.sidebarPanel!==p.tI.PAGES&&e.layout.sidebarPanel!==p.tI.TREE_VIEW||(e.layout.sidebarPanel=p.tI.FILES),Object.keys(e.navbar.tabs||{}).forEach((t=>{const o=e.navbar.tabs[t];o&&this.projectDoc.getProjectPageOrComponent(o.entityId)||delete e.navbar.tabs[t]})),e}))}async handleCloneableProject(e,t){if(e.accessType!==ot.W.PRIVATE&&null!==t&&void 0!==t&&t.isAnonymous)try{const t=await this.workspacesRepository.getAll();if(!t.length)throw new Error("No workspace found");const o=await this.workspacesRepository.getWorkspaceBySlug(t[0].slug),n=o.projects;n&&n[0]||await this.cloneProject(o);const s=null===n||void 0===n?void 0:n[0],i=s.id;if(s&&e.id===i)return;const a=I.d.createCustomModal({Component:T,data:{forCloneableProject:!0,onOverride:async()=>{await this.projectRepository.delete(i),o.projects=[],await this.cloneProject(o),this.modalManagementFlow.hideModal()},onCancel:async()=>{await r.default.replace((0,ct.S1)(s.slug)),r.default.reload()},onClose:async()=>{await this.projectRepository.delete(i),o.projects=[],await this.cloneProject(o),this.modalManagementFlow.hideModal()}}});this.modalManagementFlow.showModal(a,{},!1)}catch(o){this.sentryService.captureException(o)}}},fe=(0,i.Z)(me.prototype,"authService",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),be=(0,i.Z)(me.prototype,"projectRepository",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ge=(0,i.Z)(me.prototype,"sentryService",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ie=(0,i.Z)(me.prototype,"dbSync",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ve=(0,i.Z)(me.prototype,"projectDoc",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),je=(0,i.Z)(me.prototype,"projectUIState",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ne=(0,i.Z)(me.prototype,"localHistoryStackFlow",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),xe=(0,i.Z)(me.prototype,"userProjectDataPersistenceFlow",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Se=(0,i.Z)(me.prototype,"collaboratorManagementFlow",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),we=(0,i.Z)(me.prototype,"pointerInteractionManagementFlow",[Z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Oe=(0,i.Z)(me.prototype,"globalAppState",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Te=(0,i.Z)(me.prototype,"userAccountRepository",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_e=(0,i.Z)(me.prototype,"fontsInProjectFlow",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ee=(0,i.Z)(me.prototype,"routerService",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),De=(0,i.Z)(me.prototype,"nodeSelectionFlow",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Fe=(0,i.Z)(me.prototype,"zoomControlFlow",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ce=(0,i.Z)(me.prototype,"pageManagementFlow",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ae=(0,i.Z)(me.prototype,"asyncWatcherService",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ke=(0,i.Z)(me.prototype,"webRTCState",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Pe=(0,i.Z)(me.prototype,"rtcFlow",[K],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ue=(0,i.Z)(me.prototype,"sessionStorageService",[J],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Le=(0,i.Z)(me.prototype,"notificationsManagementFlow",[X],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ze=(0,i.Z)(me.prototype,"tutorialFlow",[Y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Re=(0,i.Z)(me.prototype,"uidlToProjectMapper",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Me=(0,i.Z)(me.prototype,"uidlDownloadService",[Q],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),He=(0,i.Z)(me.prototype,"navbarFlow",[ee],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),$e=(0,i.Z)(me.prototype,"modalManagementFlow",[te],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Be=(0,i.Z)(me.prototype,"assetsRepository",[oe],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ge=(0,i.Z)(me.prototype,"localStorageService",[ne],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ze=(0,i.Z)(me.prototype,"workspacesRepository",[se],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),We=(0,i.Z)(me.prototype,"projectChangesFlow",[ie],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ve=(0,i.Z)(me.prototype,"projectCloneFlow",[re],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ke=(0,i.Z)(me.prototype,"yDocumentManagementFlow",[ae],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Je=(0,i.Z)(me.prototype,"projectFilesFlow",[le],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Xe=(0,i.Z)(me.prototype,"imageOptimisationFlow",[ce],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ye=(0,i.Z)(me.prototype,"githubFlow",[de],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),qe=(0,i.Z)(me.prototype,"conflictManagementFlow",[pe],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Qe=(0,i.Z)(me.prototype,"assetFoldersFlow",[ue],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),et=(0,i.Z)(me.prototype,"mediaQueryBreakpointManagementFlow",[he],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ye=me))},16853:function(e,t,o){var n,s,i,r,a,l,c,d,p,u,h,y,m,f,b,g,I,v,j,N,x,S,w,O,T,_,E,D,F,C,A,k=o(73202),P=o(92809),U=o(30773),L=o(49899),Z=o(65989),R=o(85591),M=o(74031),H=o(76883),$=o(93510);function B(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function G(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?B(Object(o),!0).forEach((function(t){(0,P.Z)(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):B(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}const z=Z.Pt.LIGHT_02;n=(0,H.JJ)("rtcFlow"),s=(0,H.f3)("authService"),i=(0,H.f3)("globalAppState"),r=(0,H.f3)("projectDoc"),a=(0,H.f3)("webRTCState"),l=(0,H.f3)("projectUIState"),c=(0,H.f3)("sentryService"),d=(0,H.f3)("projectChangesFlow"),p=(0,H.f3)("projectInitFlow"),u=(0,H.f3)("componentManagementFlow"),h=(0,H.f3)("nodeSelectionFlow"),y=(0,H.f3)("stageScrollFlow"),m=(0,H.f3)("collaboratorManagementFlow"),f=(0,H.f3)("bundlerService"),b=(0,H.f3)("githubFlow"),n((I=class{constructor(){(0,P.Z)(this,"rtcService",null),(0,k.Z)(this,"authService",v,this),(0,k.Z)(this,"globalAppState",j,this),(0,k.Z)(this,"projectDoc",N,this),(0,k.Z)(this,"webRTCState",x,this),(0,k.Z)(this,"projectUIState",S,this),(0,k.Z)(this,"sentryService",w,this),(0,k.Z)(this,"projectChangesFlow",O,this),(0,k.Z)(this,"projectInitFlow",T,this),(0,k.Z)(this,"componentManagementFlow",_,this),(0,k.Z)(this,"nodeSelectionFlow",E,this),(0,k.Z)(this,"stageScrollFlow",D,this),(0,k.Z)(this,"collaboratorManagementFlow",F,this),(0,k.Z)(this,"bundlerService",C,this),(0,k.Z)(this,"githubFlow",A,this),(0,P.Z)(this,"colors",M.T),(0,P.Z)(this,"shareDBConnectedAt",null)}async init(){const e=await this.authService.getAuthUserAsync();if(!e)return;const{RTCService:t}=await Promise.all([o.e(56658),o.e(38853),o.e(79520)]).then(o.bind(o,96967));this.rtcService=new t;const n=this.projectDoc.id,s=this.globalAppState.user.userData,i=this.collaboratorManagementFlow.getCurrentUserProjectRole();i&&this.rtcService.init({loggedInUser:e,currentUser:s,projectId:n,projectRole:i,dataHandler:this.handleRtcMessages.bind(this)})}saveConnectedAtInfo(e){this.shareDBConnectedAt=e}addNewPeer(e){const t=this.projectInitFlow.getProjectLimitations();if(Object.keys(this.webRTCState.connectedPeers).length===t.MAX_REAL_TIME_COLLABS-1&&this.shareDBConnectedAt){let t=!0;return Object.entries(this.webRTCState.connectedPeers).forEach((([,e])=>{this.shareDBConnectedAt&&e.connectedAt>this.shareDBConnectedAt&&(t=!1)})),e.connectedAt>this.shareDBConnectedAt&&(t=!1),void(t&&this.projectChangesFlow.handleTooManyUserConnections())}(0,L.JG)(this.webRTCState,(t=>{e.color=this.getFirstAvailableColor(),t.connectedPeers[e.connectionId]=e}))}removePeer(e){e.color&&(this.colors[e.color]=!1),(0,L.JG)(this.webRTCState,(t=>{delete t.connectedPeers[e.connectionId]}))}removeAllPeers(){(0,L.JG)(this.webRTCState,(e=>{Object.keys(e.connectedPeers).length&&(e.isLoadingPeers=!0),new R.g})),this.webRTCState.isLoadingPeers&&setTimeout((()=>{(0,L.JG)(this.webRTCState,(e=>{e.isLoadingPeers=!1}))}),2e3)}leave(){var e;null===(e=this.rtcService)||void 0===e||e.destroy()}broadcastMessage(e){this.rtcService?this.rtcService.broadcastMessage(e):this.sentryService.captureException(new Error("RTCFlow was not initialized"))}sendMessageToPeer(e,t){this.rtcService?this.rtcService.sendMessageToPeer(e,t):this.sentryService.captureException(new Error("RTCFlow was not initialized"))}lockEditedNodes(e){this.globalAppState.user.userData&&this.broadcastMessage({type:"edited-nodes",nodeIds:e,compId:this.projectUIState.selection.componentId})}unlockEditedNodes(){this.globalAppState.user.userData&&this.broadcastMessage({type:"edited-nodes",nodeIds:[],compId:this.projectUIState.selection.componentId})}notifyDevModeDataChange(e){const{selectedFile:t,selectedBranch:o,selection:n,changes:s,editorId:i}=e;this.globalAppState.user.userData&&this.broadcastMessage({type:"dev-data-change",selectedFile:t,selectedBranch:o,selection:n,changes:s,editorId:i})}notifySelectedComp(e){this.globalAppState.user.userData&&this.broadcastMessage({type:"selected-comp",compId:e})}notifySelectedNodes(e){this.globalAppState.user.userData&&this.broadcastMessage({type:"selected-nodes",nodeIds:e,compId:this.projectUIState.selection.componentId})}notifyBringAllPeer(){this.globalAppState.user.userData&&this.broadcastMessage({type:"bring-all-peers",compId:this.projectUIState.selection.componentId})}requestSelectedNodesFromPeer(e){this.sendMessageToPeer(e,{type:"get-selected-nodes"})}clearDevChanges(){(0,L.JG)(this.webRTCState,(e=>{Object.keys(e.devData).forEach((t=>{e.devData[t].changes=[]}))}))}deleteNodesForDisconnectedPeer(e){(0,L.JG)(this.webRTCState,(t=>{Object.keys(t.editedNodes).includes(e.connectionId)&&delete t.editedNodes[e.connectionId],Object.keys(t.selectedNodes).includes(e.connectionId)&&delete t.selectedNodes[e.connectionId]}))}deleteDevDataForDisconnectedPeer(e){(0,L.JG)(this.webRTCState,(t=>{delete t.devData[e.connectionId]}))}isNodeLocked(e){return!!Object.values(this.webRTCState.editedNodes).find((t=>t.nodeIds.includes(e)))}changeGithubBranch(e){const t=this.globalAppState.user.userData;t&&t.id&&this.broadcastMessage({type:"change-github-branch",branch:e,userId:t.id})}handleSelectionOnEditedNodesReceived(e){if(!e.length)return Object.keys(this.projectUIState.selection.nodes).length||(0,L.JG)(this.projectUIState,(e=>{Object.keys(this.webRTCState.prevSelectedLockedNodeIds).forEach((t=>{e.selection.nodes[t]=!0}))})),void(0,L.JG)(this.webRTCState,(e=>{e.prevSelectedLockedNodeIds={}}));const t={};(0,L.JG)(this.projectUIState,(o=>{e.forEach((e=>{o.selection.nodes[e]&&(t[e]=!0,delete o.selection.nodes[e])}))})),(0,L.JG)(this.webRTCState,(e=>{e.prevSelectedLockedNodeIds=t}))}handleRtcMessages(e,t){const o=JSON.parse(e),{connectionId:n,color:s}=t;if(o.type){if("dev-data-change"===o.type){const{from:e,selectedFile:t,selectedBranch:s,selection:i,changes:r=[],editorId:a}=o;(0,L.JG)(this.webRTCState,(({devData:o})=>{o[`${n}`]={editorId:a,selectedBranch:s,selectedFile:t,name:e.name,email:e.email,changes:[...r],selection:G({},i)}}))}if("edited-nodes"===o.type){const{from:e,nodeIds:t,compId:i}=o;(0,L.JG)(this.webRTCState,(({editedNodes:o})=>{t.length?o[`${n}`]={name:e.name,email:e.email,nodeIds:t,compId:i,color:s}:delete o[n]})),this.handleSelectionOnEditedNodesReceived(t)}if("selected-comp"===o.type){var i;if((null===(i=this.projectUIState.layout)||void 0===i?void 0:i.mainPanel)===$.iW.DEV)return;const{compId:e}=o;(0,L.JG)(this.webRTCState,(({selectedComp:t,selectedNodes:o})=>{e?(delete o[n],t[`${n}`]={compId:e}):delete t[n]})),this.webRTCState.followedUserId===n&&this.collaboratorManagementFlow.followUserSelectedPage(e)}if("change-github-branch"===o.type){const e=this.globalAppState.user.userData;if(!e||!e.id)return;const{userId:t,branch:s}=o;if((0,L.JG)(this.webRTCState,(({devData:e})=>{e[`${n}`]&&(e[`${n}`].selectedBranch=s)})),t!==e.id)return;(0,L.JG)(this.globalAppState,(({user:e})=>{e&&e.userData&&(e.userData.meta.githubBranches=G(G({},e.userData.meta.githubBranches),{},{[this.projectDoc.id]:s}))})),this.githubFlow.changeBranch(s,!1)}if("selected-nodes"===o.type){const{from:e,nodeIds:t,compId:i}=o;(0,L.JG)(this.webRTCState,(({selectedNodes:o})=>{t.length?o[`${n}`]={name:e.name,email:e.email,nodeIds:t,compId:i,color:s}:delete o[n]})),this.webRTCState.followedUserId===n&&this.collaboratorManagementFlow.followUserSelectedNodes(t)}if("get-selected-nodes"===o.type){var r;null!==(r=this.webRTCState.connectedPeers[n])&&void 0!==r&&r.name||(0,L.JG)(this.webRTCState,(({connectedPeers:e})=>{e[n].name=o.from.name,e[n].email=o.from.email,e[n].projectRole=o.from.projectRole}));const e=Object.keys(this.projectUIState.selection.nodes),t=this.projectUIState.selection.componentId;this.notifySelectedNodes(e),this.notifySelectedComp(t)}if("bring-all-peers"===o.type){const{compId:e}=o;(0,L.JG)(this.webRTCState,(({selectedComp:t})=>{e?t[`${n}`]={compId:e}:delete t[n]})),this.componentManagementFlow.select(e)}}}getFirstAvailableColor(){const e=Object.keys(this.colors).find((e=>!this.colors[e]));return e?(this.colors[e]=!0,e):z}},v=(0,U.Z)(I.prototype,"authService",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),j=(0,U.Z)(I.prototype,"globalAppState",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),N=(0,U.Z)(I.prototype,"projectDoc",[r],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),x=(0,U.Z)(I.prototype,"webRTCState",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),S=(0,U.Z)(I.prototype,"projectUIState",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),w=(0,U.Z)(I.prototype,"sentryService",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),O=(0,U.Z)(I.prototype,"projectChangesFlow",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),T=(0,U.Z)(I.prototype,"projectInitFlow",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_=(0,U.Z)(I.prototype,"componentManagementFlow",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),E=(0,U.Z)(I.prototype,"nodeSelectionFlow",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),D=(0,U.Z)(I.prototype,"stageScrollFlow",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),F=(0,U.Z)(I.prototype,"collaboratorManagementFlow",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),C=(0,U.Z)(I.prototype,"bundlerService",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),A=(0,U.Z)(I.prototype,"githubFlow",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),g=I))},96319:function(e,t,o){var n,s,i,r,a,l,c,d,p,u,h,y,m,f,b=o(73202),g=o(92809),I=o(33800),v=o(30773),j=o(49899),N=o(76883),x=o(93510),S=o(10440);function w(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function O(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?w(Object(o),!0).forEach((function(t){(0,g.Z)(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):w(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}n=(0,N.JJ)("userProjectDataPersistenceFlow"),s=(0,N.f3)("projectUIState"),i=(0,N.f3)("projectDoc"),r=(0,N.f3)("workspaceCollaboratorRepository"),a=(0,N.f3)("sentryService"),l=(0,N.f3)("globalAppState"),n((f=new WeakMap,d=class{constructor(){(0,b.Z)(this,"projectUIState",p,this),(0,b.Z)(this,"projectDoc",u,this),(0,b.Z)(this,"workspaceCollaboratorRepository",h,this),(0,b.Z)(this,"sentryService",y,this),(0,b.Z)(this,"globalAppState",m,this),f.set(this,{writable:!0,value:[]}),(0,g.Z)(this,"savePreferences",(async e=>{const t={};x.w9.forEach((o=>{if(o.includes("/")){const n=o.split("/"),s=n[0],i=n[1];t[s]=O(O({},t[s]),{},{[i]:e[s][i]})}else t[o]=e[o]}));try{const e=this.projectDoc.id;await this.workspaceCollaboratorRepository.update({projectId:e,meta:t})}catch(o){this.sentryService.captureException(o)}})),(0,g.Z)(this,"debounceSavePreferences",(0,S.Ds)(this.savePreferences,500,!1))}init(e){var t;if(this.projectUIState.readonly)return;const o=null===(t=e.collaborators)||void 0===t?void 0:t.find((e=>{var t,o;return(null===(t=e.account)||void 0===t?void 0:t.id)===(null===(o=this.globalAppState.user.userData)||void 0===o?void 0:o.id)})),n=null===o||void 0===o?void 0:o.meta;n&&x.w9.forEach((e=>{if(e.includes("/")){const t=e.split("/"),o=t[0],s=t[1];if(n[o]){const e=this.projectUIState[o]||{},t=n[o][s];if(void 0===t&&!!Object.keys(e[s]||{}).length)return;Object.assign(this.projectUIState,{[o]:O(O({},e),{},{[s]:t})})}}else n[e]&&Object.assign(this.projectUIState,{[e]:n[e]})})),this.subscribeToChanges()}subscribeToChanges(){const e=x.w9.map((e=>{if(e.includes("/")){const t=e.split("/");return`${t[0]}/${t[1]}`}return`${e}/**`})),t=(0,j.Ys)(this.projectUIState,e,this.debounceSavePreferences,"UserProjectDataPersistenceFlow");(0,I.Z)(this,f).push((()=>t.dispose()))}stopListeningForUpdates(){(0,I.Z)(this,f).forEach((e=>e()))}},p=(0,v.Z)(d.prototype,"projectUIState",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),u=(0,v.Z)(d.prototype,"projectDoc",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),h=(0,v.Z)(d.prototype,"workspaceCollaboratorRepository",[r],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),y=(0,v.Z)(d.prototype,"sentryService",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),m=(0,v.Z)(d.prototype,"globalAppState",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),c=d))},7717:function(e,t,o){o.d(t,{h:function(){return n}});const n=(e,t,o,n)=>{let s={};o&&n&&(s={width:o,height:n});return{name:"pastedImage",node:{type:"element",content:{elementType:"image",name:"pastedImage",style:s,attrs:{alt:{type:"static",content:"pastedImage"},src:{type:"static",content:e+t}}}}}}},13723:function(e,t,o){o.d(t,{q:function(){return i},$:function(){return r}});var n=o(68803),s=o(12394);const i=(e,t)=>Object.keys(e||{}).reduce(((o,i)=>{const r=e[i];if(!r)return o;const a=r.toUIDL();if(s.H.includes(i)&&"string"===typeof a.content){const e=a.content;let o=(0,n.B)(e);o=o.map((e=>{if(e.includes("gradient"))return e;const o=null===t||void 0===t?void 0:t.find((t=>e.includes(t.id)));return o?`url("${o.localPath}")`:e})),a.content=o.join(",")}return r.content?(o[i]=a,o):o}),{}),r=(e,t)=>({type:"style-map",content:{conditions:e.content.conditions,mapType:"inlined",styles:Object.keys(e.content.styles||{}).reduce(((o,n)=>{if("inlined"!==e.content.mapType)return o;const i=e.content.styles[n];if(!i)return o;const r=i.toUIDL();return s.H.includes(n)&&(null===t||void 0===t||t.forEach((e=>{const t=r.content;"string"===typeof t&&-1!==t.indexOf(e.id)&&(r.content=`url("${e.localPath}")`)}))),o[n]=r,o}),{})}})},12443:function(e,t,o){o.d(t,{a:function(){return d}});var n=o(92809),s=o(75222),i=o(78064),r=o(40652),a=o(246);function l(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function c(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?l(Object(o),!0).forEach((function(t){(0,n.Z)(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):l(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}const d=e=>{const{stencilKey:t,parentId:o,slotId:n,defaultValue:l}=e;if(t===i.sO.SLOT)return new r.H({primitiveType:s.sO.SLOT,name:"slot1",parentId:o});const d=i.CR[t]||{},{type:p,semantic:u}=d,h=c(c({},i.b[t]),(null===e||void 0===e?void 0:e.attrs)||{}),y=c(c({},i.AB[t]),(null===e||void 0===e?void 0:e.styles)||{}),m=c(c({},JSON.parse(JSON.stringify(i.Tz[t]))),(null===e||void 0===e?void 0:e.abilities)||{}),f=Object.keys(y).reduce(((e,t)=>(e[t]=new a.F({content:y[t]}),e)),{}),b=Object.keys(h).reduce(((e,t)=>(e[t]=new a.F({content:h[t]}),e)),{}),g=new r.H({semanticType:u,primitiveType:p,fakeSize:p===s.sO.CONTAINER,abilities:m,parentId:o,slotId:n,styles:f,attrs:b,pos:"0"}),I=l||(null===d||void 0===d?void 0:d.defaultValue);if(I){const e=new a.F({content:I});g.contentChildren[e.id]=e}return g}},89880:function(e,t,o){let n;o.d(t,{_:function(){return n}}),function(e){e.DISABLE_HISTORY="disableHistory",e.VIRTUAL_WORK="virtualWork"}(n||(n={}))},65170:function(e,t,o){var n,s,i,r,a,l,c,d,p,u=o(73202),h=o(30773),y=o(76883),m=o(35307);n=(0,y.JJ)("websocketMessageHandler"),s=(0,y.f3)("rtcFlow"),i=(0,y.f3)("projectChangesFlow"),r=(0,y.f3)("slugChangeFlow"),n((l=class{constructor(){(0,u.Z)(this,"rtcFlow",c,this),(0,u.Z)(this,"projectChangesFlow",d,this),(0,u.Z)(this,"slugChangeFlow",p,this)}handleMessage(e){if(!e.custom)return;const t=(0,m.G)();var o;if(e.ping)return t.heartbeat(),void(null===(o=t.socketConnection)||void 0===o||o.send(JSON.stringify({custom:!0,type:"pong"})));e.connectedAt?this.rtcFlow.saveConnectedAtInfo(e.connectedAt):12!==e.code?14!==e.code?15!==e.code?16!==e.code?17!==e.code?t.onMessageHandler&&t.onMessageHandler(e):this.projectChangesFlow.handleAccessTypeUpdate(null===e||void 0===e?void 0:e.accessType):this.projectChangesFlow.handleApplicationUpdate():this.slugChangeFlow.handleProjectSlugUpdated(null===e||void 0===e?void 0:e.slug):this.projectChangesFlow.handleProjectAccessDenied():this.projectChangesFlow.handleProjectDeleted()}},c=(0,h.Z)(l.prototype,"rtcFlow",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),d=(0,h.Z)(l.prototype,"projectChangesFlow",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),p=(0,h.Z)(l.prototype,"slugChangeFlow",[r],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),a=l))},71115:function(e,t,o){var n,s,i,r,a,l,c,d,p,u,h,y=o(73202),m=o(92809),f=o(30773),b=o(36565),g=o(49899),I=o(2855),v=o(35307),j=(o(20722),o(76883));n=(0,j.JJ)("sharedbProjectSyncService"),s=(0,j.f3)("websocketMessageHandler"),i=(0,j.f3)("notificationsManagementFlow"),r=(0,j.f3)("sentryService"),a=(0,j.f3)("projectChangesFlow"),n((c=class{constructor(){(0,y.Z)(this,"websocketMessageHandler",d,this),(0,y.Z)(this,"notificationsManagementFlow",p,this),(0,y.Z)(this,"sentryService",u,this),(0,y.Z)(this,"projectChangesFlow",h,this),(0,m.Z)(this,"uidlDocumentSyncDB",void 0),(0,m.Z)(this,"socketConnection",null),(0,m.Z)(this,"mutate",((e,t)=>{const o=(0,g.JG)(e,t);if(o&&o.length){if("connected"!==this.uidlDocumentSyncDB.connection.state)return this.projectChangesFlow.handleSocketConnectionLost(),[];this.uidlDocumentSyncDB.submitOp((0,I.j)(o)),b.Z.customEvents.dataLayer.op(o),b.Z.mixpanelEvent(b.Z.AnalyticsEvents.PROJECT_OPERATION)}return null!==o&&void 0!==o?o:[]})),(0,m.Z)(this,"mutateFromPatches",((e,t)=>{(0,g.z9)(e,t),t&&t.length&&this.uidlDocumentSyncDB.submitOp((0,I.j)(t))}))}async init(e){const t=await Promise.all([o.e(15608),o.e(46514)]).then(o.t.bind(o,46514,19)),n=(0,v.G)();if(this.socketConnection=n.connect(e.projectId,e.onConnectionLost),!this.socketConnection)return;switch(this.socketConnection.addEventListener("open",(()=>e.onSocketStatus("active"))),this.socketConnection.addEventListener("error",(()=>e.onSocketStatus("error"))),this.socketConnection.readyState){case 1:e.onSocketStatus("active");break;case 0:e.onSocketStatus("reconnect");break;default:e.onSocketStatus("error")}const s=new t.Connection(this.socketConnection);return this.uidlDocumentSyncDB=s.get("project",e.projectId),s.on("receive",(e=>{const t=e.data;if(t.custom&&t.error&&this.sentryService.captureException(new Error(t.error)),t.custom)return this.websocketMessageHandler.handleMessage(e.data),void(e.data=null)})),await new Promise(((e,t)=>{this.uidlDocumentSyncDB.fetch((o=>{if(o)return this.sentryService.captureException(new Error(o.message)),void t(o);e(!0)}))})),void 0===this.uidlDocumentSyncDB.data&&await new Promise(((t,o)=>{this.uidlDocumentSyncDB.create(e.generateDefault(),(e=>{e?o(e):t(!0)}))})),this.uidlDocumentSyncDB.subscribe((e=>{e&&this.sentryService.captureException(new Error(e.message))})),this.uidlDocumentSyncDB.on("op",((t,o)=>{if(o)return e.onClient(t);e.onServerOp(t)})),this.uidlDocumentSyncDB.on("error",(e=>{this.sentryService.captureException(new Error(e.message)),this.notificationsManagementFlow.handleError("Something went wrong")})),this.uidlDocumentSyncDB.data}},d=(0,f.Z)(c.prototype,"websocketMessageHandler",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),p=(0,f.Z)(c.prototype,"notificationsManagementFlow",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),u=(0,f.Z)(c.prototype,"sentryService",[r],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),h=(0,f.Z)(c.prototype,"projectChangesFlow",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),l=c))},2855:function(e,t,o){o.d(t,{j:function(){return n},J:function(){return s}});const n=e=>e.map((e=>"add"!==e.op||e.old?"remove"===e.op?{p:e.pathArray,od:e.old}:{p:e.pathArray,od:e.old,oi:e.value}:{p:e.pathArray,oi:e.value})),s=e=>e.map((e=>{const{p:t}=e,o=t.join(".");if(e.hasOwnProperty("oi")&&e.hasOwnProperty("od"))return{op:"replace",pathArray:t,path:o,value:e.oi,old:e.od};if(e.hasOwnProperty("od"))return{op:"remove",pathArray:t,path:o,value:void 0,old:e.od};if(e.hasOwnProperty("oi"))return{op:"add",pathArray:t,path:o,value:e.oi};throw new Error(`Unknow patch encountered,\n ${JSON.stringify(e,null,2)}`)}))},35307:function(e,t,o){o.d(t,{G:function(){return u}});var n,s,i,r=o(73202),a=o(92809),l=o(30773),c=o(22003);let d=(n=(0,o(76883).f3)("authService"),s=class{constructor(){(0,r.Z)(this,"authService",i,this),(0,a.Z)(this,"onMessageHandler",void 0),(0,a.Z)(this,"socketConnection",null),(0,a.Z)(this,"onConnectionLost",void 0),(0,a.Z)(this,"statusCheckInterval",null),(0,a.Z)(this,"heartbeatTimeout",null)}connect(e,t){return this.socketConnection=new c.Z((async()=>{const t=await this.authService.getAuthUserAsync();t||console.error("Could not get auth user");const o=t?await t.getIdToken():"";return`wss://playground-api-production-v5.services.teleporthq.io/ws/${e}?token=${o}`}),void 0,{maxRetries:20}),this.onConnectionLost=t,this.statusCheckInterval=setInterval((()=>{this.checkConnectionStatus()}),2e3),this.socketConnection}heartbeat(){this.heartbeatTimeout&&clearTimeout(this.heartbeatTimeout),this.heartbeatTimeout=setTimeout((()=>{var e,t,o;(null===(e=this.socketConnection)||void 0===e?void 0:e.readyState)===(null===(t=this.socketConnection)||void 0===t?void 0:t.OPEN)&&(null===(o=this.socketConnection)||void 0===o||o.reconnect())}),4e3)}attachMessageHandler(e){return e?(this.onMessageHandler=t=>{e(t)},this.socketConnection):null}destroy(){var e;this.statusCheckInterval&&clearInterval(this.statusCheckInterval),null===(e=this.socketConnection)||void 0===e||e.close()}checkConnectionStatus(){if(!this.socketConnection)return;const{readyState:e,retryCount:t}=this.socketConnection;return e===this.socketConnection.CLOSED&&20===t&&this.onConnectionLost&&this.onConnectionLost(),null}},i=(0,l.Z)(s.prototype,"authService",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),s),p=null;const u=()=>(p||(p=new d),p)},49403:function(e,t,o){o.d(t,{d3:function(){return c},Vu:function(){return y},lf:function(){return u},w0:function(){return m},ux:function(){return d},oD:function(){return p},Uc:function(){return h}});var n=o(92809),s=o(75222);var i={[s.sO.TEXTINPUT]:"input",[s.sO.CHECKBOX]:"input[type=checkbox]",[s.sO.RADIOBUTTON]:"input[type=radio]",[s.sO.LINK]:"a",[s.sO.IMAGE]:"img",[s.sO.ICON]:"svg"},r=o(94932);function a(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function l(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?a(Object(o),!0).forEach((function(t){(0,n.Z)(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):a(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}const c={primaryColor:"#0089be",backgroundColor:"#fff",borderRadius:"4px",borderWidth:"1px",fontSize:"16px",color:"#2b2b2b",lineHeight:"1.55",fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", "Roboto", "Oxygen","Ubuntu", "Cantarell", "Fira Sans","Droid Sans", "Helvetica Neue", sans-serif',fontStyle:"normal",letterSpacing:"normal"},d=()=>({[s.RY.PARAGRAPH]:{},[s.RY.SPAN]:{display:"inline"},[s.RY.HEADING1]:{fontWeight:"bold",fontSize:"2em"},[s.RY.HEADING2]:{fontWeight:"bold",fontSize:"1.5rem"},[s.RY.HEADING3]:{fontWeight:"bold",fontSize:"1.17em"},[s.RY.HEADING4]:{fontWeight:"bold",fontSize:"1em"},[s.RY.HEADING5]:{fontWeight:"bold",fontSize:"0.83em"},[s.RY.HEADING6]:{fontWeight:"bold",fontSize:"0.67em"}}),p=e=>{var t;return{[s.sO.FORM]:{margin:"0px"},[s.sO.TEXT]:{display:"block",color:null!==(t=null===e||void 0===e?void 0:e.color)&&void 0!==t?t:c.color}}},u=(e,t)=>{var o,n,s,i,r,a,l;return`\n  html {\n    font-family: ${null!==(o=null===e||void 0===e?void 0:e.fontFamily)&&void 0!==o?o:c.fontFamily};\n    font-size: ${null!==(n=null===e||void 0===e?void 0:e.fontSize)&&void 0!==n?n:c.fontSize};\n  }\n\n  body {\n    font-weight: ${null===e||void 0===e?void 0:e.fontWeight};\n    font-style:${null!==(s=null===e||void 0===e?void 0:e.fontStyle)&&void 0!==s?s:c.fontStyle};\n    text-decoration: ${null===e||void 0===e?void 0:e.textDecoration};\n    text-transform: ${null===e||void 0===e?void 0:e.textTransform};\n    letter-spacing: ${null!==(i=null===e||void 0===e?void 0:e.letterSpacing)&&void 0!==i?i:c.letterSpacing};\n    line-height: ${null!==(r=e.lineHeight)&&void 0!==r?r:c.lineHeight};\n    color: ${null!==(a=e.color)&&void 0!==a?a:c.color};\n    background-color: ${null!==(l=e.background)&&void 0!==l?l:c.backgroundColor};\n    ${t?"user-select: none;":""}\n  }\n\n  ${t?"*:focus { \n outline: none; \n }":""}\n\n  `},h=()=>`\n  .${r.w.SHOW} {\n    display: flex !important;\n    visibility: visible !important;\n    opacity: 1 !important;\n  }\n  .${r.w.TRANSLATE_TO_DEFAULT} {\n    transform: none !important;\n  }\n  `,y=(e,t)=>{const o=p(e);return Object.keys(o).reduce(((e,n)=>{const s=Object.keys(o[n]).reduce(((e,t)=>`${e} ${t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}: ${o[n][t]};`),"");let r=`${i[n]||n} { ${s} }`;return"link"===n&&t&&(r=`[data-ability="link"], ${r}`),`${e} ${r}`}),"")},m=e=>{var t,o;const n=null===(t=e.getTokenWithRole("background-color"))||void 0===t?void 0:t.id,s=null===(o=e.getTokenWithRole("foreground-color"))||void 0===o?void 0:o.id,i=e.getTokensAsCustomProperties(),r=e.getDefaultTextStyle(),{content:a}=r||{};return l(l(l({},s?{color:`var(${i[s].name})`}:null),n?{background:`var(${i[n].name})`}:null),Object.keys(a||{}).reduce(((e,t)=>{var o;return"static"===(null===(o=a[t])||void 0===o?void 0:o.type)&&(e[t]=a[t].content),e}),{}))}},94932:function(e,t,o){let n;o.d(t,{w:function(){return n}}),function(e){e.SHOW="thq-show",e.TRANSLATE_TO_DEFAULT="thq-translate-to-default"}(n||(n={}))},28079:function(e,t,o){o.d(t,{r:function(){return r},Y:function(){return a}});var n=o(41146),s=o(93510),i=o(78064);const r={[n.KEY_TOGGLES.VIEWPANEL_1]:s.tI.ELEMENTS,[n.KEY_TOGGLES.VIEWPANEL_2]:s.tI.FILES,[n.KEY_TOGGLES.VIEWPANEL_3]:s.tI.CLASSES,[n.KEY_TOGGLES.VIEWPANEL_4]:s.tI.ASSETS_MANAGER},a={[n.KEY_ELEMENTS.COLUMN]:i.sO.COLUMN,[n.KEY_ELEMENTS.ROW]:i.sO.ROW,[n.KEY_ELEMENTS.SLOT]:i.sO.SLOT,[n.KEY_ELEMENTS.BUTTON]:i.sO.BUTTON,[n.KEY_ELEMENTS.IMAGE]:i.sO.IMAGE,[n.KEY_ELEMENTS.VIDEO]:i.sO.VIDEO,[n.KEY_ELEMENTS.HEADING]:i.sO.HEADING,[n.KEY_ELEMENTS.TEXT]:i.sO.TEXT,[n.KEY_ELEMENTS.LINK1]:i.sO.LINK,[n.KEY_ELEMENTS.LINK2]:i.sO.LINK}},89450:function(e,t,o){o.d(t,{U:function(){return X}});var n,s,i,r,a,l,c,d,p,u,h,y,m,f,b,g,I,v,j,N,x,S,w,O=o(73202),T=o(92809),_=o(30773),E=o(41146),D=o(76883),F=o(18637),C=o(28079),A=o(12443),k=o(71919),P=o(75222),U=o(4781),L=o(71606),Z=o(19236),R=o(41487),M=o.n(R),H=o(41130),$=o(7717),B=o(3980),G=o(93096),z=o.n(G),W=o(61030),V=o(32307),K=o(36565);function J(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}let X=(n=(0,D.f3)("nodeManagementFlow"),s=(0,D.f3)("nodeStyleManagmentFlow"),i=(0,D.f3)("nodeSelectionFlow"),r=(0,D.f3)("projectDoc"),a=(0,D.f3)("nodeRichTextFlow"),l=(0,D.f3)("clipboardFlow"),c=(0,D.f3)("projectUIState"),d=(0,D.f3)("pointerInteractionManagementFlow"),p=(0,D.f3)("notificationsManagementFlow"),u=(0,D.f3)("htmlToDomainFlow"),h=(0,D.f3)("modalManagementFlow"),y=class{constructor(){(0,O.Z)(this,"nodeManagementFlow",m,this),(0,O.Z)(this,"nodeStyleManagementFlow",f,this),(0,O.Z)(this,"nodeSelectionFlow",b,this),(0,O.Z)(this,"projectDoc",g,this),(0,O.Z)(this,"nodeRichTextFlow",I,this),(0,O.Z)(this,"clipboardFlow",v,this),(0,O.Z)(this,"projectUIState",j,this),(0,O.Z)(this,"pointerInteractionManagementFlow",N,this),(0,O.Z)(this,"notificationsManagementFlow",x,this),(0,O.Z)(this,"htmlToDomainFlow",S,this),(0,O.Z)(this,"modalManagementFlow",w,this),(0,T.Z)(this,"unsubs",[])}selectedNodeIsSlotInstance(e){var t;return!(e.length>1)&&((null===(t=this.projectDoc.nodes.byId[e[0]])||void 0===t?void 0:t.primitiveType)===P.sO.SLOT&&this.projectUIState.selection.compInstanceId)}resetOSClipboard(){navigator.clipboard.writeText("")}handleNodePasting(e){const t=this.projectUIState.userInteractions.clipboard.copiedUIDL,o=this.projectUIState.userInteractions.clipboard.copiedNodes;null===t&&0!==(null===o||void 0===o?void 0:o.length)&&(K.Z.mixpanelEvent(K.Z.AnalyticsEvents.PROJECT_CANVAS_PASTE,{type:"node"}),e.length>1?this.clipboardFlow.pasteOnMultipleNodes(e):this.clipboardFlow.pasteCopiedNodes(e[0]))}attach(e){const t=Object.keys(C.Y).reduce(((e,t)=>(e[t]=()=>{const e=(0,A.a)({stencilKey:C.Y[t]});this.nodeManagementFlow.addPrimitivesToSelNodeSelectAndScroll({primitives:[e]})},e)),{}),o={[E.KEY_TREE_AND_STAGE_COMMANDS.SELECT_SIBLINGS]:()=>{this.nodeSelectionFlow.selectAllSiblings()},[E.KEY_TREE_AND_STAGE_COMMANDS.NEXT_SIBLING]:()=>{this.nodeSelectionFlow.selectNextSibling()},[E.KEY_TREE_AND_STAGE_COMMANDS.PREV_SIBLING]:()=>{this.nodeSelectionFlow.selectPreviousSibling()},[E.KEY_TREE_AND_STAGE_COMMANDS.ESCAPE]:()=>{this.projectUIState.drag.draggedEntity&&this.pointerInteractionManagementFlow.handleDragEnd(),this.nodeSelectionFlow.selectSelectedNodeParent()},[E.KEY_TREE_AND_STAGE_COMMANDS.ENTER]:()=>{this.nodeSelectionFlow.selectChildOrEditNode()},[E.KEY_TREE_AND_STAGE_COMMANDS.EDIT]:()=>{this.nodeSelectionFlow.editSelectedNode()},[E.KEY_TREE_AND_STAGE_COMMANDS.COPY]:()=>{this.resetOSClipboard();const e=Object.keys(this.projectUIState.selection.nodes);this.clipboardFlow.copyNodesById(e),navigator.clipboard.writeText(""),this.projectUIState.userInteractions.clipboard.copiedUIDL=null},[E.KEY_TREE_AND_STAGE_COMMANDS.CUT]:()=>{this.resetOSClipboard();const e=Object.keys(this.projectUIState.selection.nodes);this.clipboardFlow.copyNodesById(e,!0)}},n=function(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?J(Object(o),!0).forEach((function(t){(0,T.Z)(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):J(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}({[E.KEY_TREE_AND_STAGE_COMMANDS.PASTE_STYLE]:()=>{const e=Object.keys(this.projectUIState.selection.nodes);this.clipboardFlow.pasteCopiedStyleToTargets(e)},[E.KEY_TREE_AND_STAGE_COMMANDS.DUPLICATE]:()=>{const e=Object.keys(this.projectUIState.selection.nodes);this.selectedNodeIsSlotInstance(e)||this.nodeManagementFlow.duplicateNodesById({nodeIds:e})},[E.KEY_TREE_AND_STAGE_COMMANDS.GROUP]:()=>{const e=Object.keys(this.projectUIState.selection.nodes);this.selectedNodeIsSlotInstance(e)||this.nodeManagementFlow.groupNodes({nodeIds:e})},[E.KEY_TREE_AND_STAGE_COMMANDS.UNGROUP]:()=>{const e=Object.keys(this.projectUIState.selection.nodes);e.length>1||this.selectedNodeIsSlotInstance(e)||this.nodeManagementFlow.ungroupNodeChildren({nodeId:e[0]})},[E.KEY_TREE_AND_STAGE_COMMANDS.ADD_LINK]:()=>{var e;Object.keys(this.projectUIState.selection.nodes).length>1||null===(e=document.querySelector("[id='link-toggle-btn']"))||void 0===e||e.click()},[E.KEY_TREE_AND_STAGE_COMMANDS.DELETE]:()=>{const e=Object.keys(this.projectUIState.selection.nodes);this.selectedNodeIsSlotInstance(e)||this.nodeManagementFlow.deleteNodesById({nodeIds:e})},[E.KEY_TREE_AND_STAGE_COMMANDS.BACKSPACE]:()=>{const e=Object.keys(this.projectUIState.selection.nodes);this.selectedNodeIsSlotInstance(e)||this.nodeManagementFlow.deleteNodesById({nodeIds:e})},[E.KEY_TREE_AND_STAGE_COMMANDS.SWAP_WITH_NEXT_SIBLING_H]:()=>{const e=Object.keys(this.projectUIState.selection.nodes);1===e.length&&(this.selectedNodeIsSlotInstance(e)||"row"===this.nodeStyleManagementFlow.getNodeParentFlexDirection({nodeId:e[0]})&&this.nodeManagementFlow.swapWithNextNode({nodeId:e[0]}))},[E.KEY_TREE_AND_STAGE_COMMANDS.SWAP_WITH_PREV_SIBLING_H]:()=>{const e=Object.keys(this.projectUIState.selection.nodes);1===e.length&&(this.selectedNodeIsSlotInstance(e)||"row"===this.nodeStyleManagementFlow.getNodeParentFlexDirection({nodeId:e[0]})&&this.nodeManagementFlow.swapWithPrevNode({nodeId:e[0]}))},[E.KEY_TREE_AND_STAGE_COMMANDS.SWAP_WITH_NEXT_SIBLING_V]:()=>{const e=Object.keys(this.projectUIState.selection.nodes);1===e.length&&(this.selectedNodeIsSlotInstance(e)||"column"===this.nodeStyleManagementFlow.getNodeParentFlexDirection({nodeId:e[0]})&&this.nodeManagementFlow.swapWithNextNode({nodeId:e[0]}))},[E.KEY_TREE_AND_STAGE_COMMANDS.SWAP_WITH_PREV_SIBLING_V]:()=>{const e=Object.keys(this.projectUIState.selection.nodes);1===e.length&&(this.selectedNodeIsSlotInstance(e)||"column"===this.nodeStyleManagementFlow.getNodeParentFlexDirection({nodeId:e[0]})&&this.nodeManagementFlow.swapWithPrevNode({nodeId:e[0]}))}},t);this.handleWrapperClick(e);const s=e instanceof HTMLIFrameElement?e.contentDocument:e,i={[E.TEXT_COMMANDS.BOLD]:()=>{const e=Object.keys(this.projectUIState.selection.nodes);this.selectedNodesAreInEditMode(e)||this.nodeRichTextFlow.updateRootNodesFormat({options:{styles:{fontWeight:{value:"bold"}}},nodeIds:e})},[E.TEXT_COMMANDS.ITALIC]:()=>{const e=Object.keys(this.projectUIState.selection.nodes);this.selectedNodesAreInEditMode(e)||this.nodeRichTextFlow.updateRootNodesFormat({options:{styles:{fontStyle:{value:"italic"}}},nodeIds:e})},[E.TEXT_COMMANDS.UNDERLINE]:()=>{const e=Object.keys(this.projectUIState.selection.nodes);this.selectedNodesAreInEditMode(e)||this.nodeRichTextFlow.updateRootNodesFormat({options:{styles:{textDecoration:{value:"underline",mergeable:!0}}},nodeIds:e})}};s&&this.handleWrapperPaste(s),this.unsubs=[(0,F.N)(s,o,{preventDefault:!0,stopPropagation:!0}),(0,F.N)(s,i,{preventDefault:!0,stopPropagation:!0}),(0,F.N)(s,n,{preventDefault:!0,stopPropagation:!0,throttle:!0}),(0,F.N)(s,{},{preventDefault:!1,stopPropagation:!1,throttle:!0})]}detach(){this.unsubs.forEach((e=>e()))}selectedNodesAreInEditMode(e){const{editingNode:t}=this.projectUIState.staticNodeInterationsData;return 1===e.length&&t[e[0]]}handleWrapperClick(e){var t;if(!(e instanceof HTMLIFrameElement)||null===(t=e.contentDocument)||void 0===t||!t.body)return;const o=()=>{var t;return null===(t=e.contentWindow)||void 0===t?void 0:t.focus()};e.contentDocument.body.addEventListener("click",o),this.unsubs.push((()=>{var t;null!==(t=e.contentDocument)&&void 0!==t&&t.body&&e.contentDocument.body.removeEventListener("click",o)}))}handleWrapperPaste(e){const t=z()((e=>{var t;if(Object.keys(this.projectUIState.staticNodeInterationsData.editingNode).length)return;e.preventDefault(),e.stopPropagation();const o=Object.keys(this.projectUIState.selection.nodes),n=null===(t=e.clipboardData)||void 0===t?void 0:t.getData("Text"),s=(e.clipboardData||e.originalEvent.clipboardData).items;let i=!1;for(const l in s){const e=s[l];if("file"===e.kind){const t=e.getAsFile();if("image/bmp"===t.type||"image/png"===t.type||"image/gif"===t.type||"image/jpeg"===t.type||"image/svg+xml"===t.type){i=!0;break}}}if(!i){if(n)try{const e=new U.Z,t=JSON.parse(n,((e,t)=>{if(null!==t)return t})),s=e.validateComponentSchema(t),{componentUIDL:i,valid:a}=s,l=L.parseComponentJSON(i),c=(new Z.Z).resolveUIDL(l,{});if(a&&c)try{let e=0;if(null!==l&&void 0!==l&&l.stateDefinitions)throw new Error("UIDL with statedefinitions is not yet supported");H.rc(l.node,(t=>{const{type:o}=t;if("conditional"===o)throw new Error("Conditional nodes are not supported");"comp-style"!==t.type&&H.KO(t,(t=>{var o;const{elementType:n,style:s,attrs:i,referencedStyles:r}=t;if(Object.values(s||{}).forEach((e=>{if("dynamic"===e.type)throw new Error("dynamic style is not yet supported")})),Object.values(r||{}).forEach((e=>{"inlined"===e.content.mapType&&Object.values(e.content.styles||{}).forEach((e=>{if("dynamic"===e.type)throw new Error("dynamic style is not yet supported")}))})),"conditional"===n)throw new Error("conditional node in UIDL is not yet supported");if("repeat"===n)throw new Error("reapeat node in UIDL is not yet supported");if("slot"===n){if(e>1)throw new Error("we dont support more than 1 slot node per UIDL component");e+=1}if("component"===n)throw new Error("components in stand alone UIDL is not yet supported");if("import"===(null===i||void 0===i||null===(o=i.referenceType)||void 0===o?void 0:o.type))throw new Error("reference type import is not yet supported for attrs");var a;if("text"===n&&1!==(null===(a=t.children)||void 0===a?void 0:a.length))throw new Error("we only support UIDL text nodes having one exact child")}))})),this.clipboardFlow.pasteCopiedUIDL({nodeId:o[0],elementUIDLs:[],componentUIDLs:{resolvedUIDL:c},designTokens:{},textStyles:{},globals:{settings:{title:"uidlpaste",language:"none"},meta:[],assets:[]},rawUIDL:!0})}catch(r){this.notificationsManagementFlow.createNotification(k.k.INFO,"Couldn't import the content of your clipboard... "+r)}return}catch{if(M()(n)){K.Z.mixpanelEvent(K.Z.AnalyticsEvents.PROJECT_CANVAS_PASTE,{type:"svg"});const e=n.split("height")[1].split('"')[1],t=n.split("width")[1].split('"')[1],s=window.btoa(n);return void this.clipboardFlow.pasteCopiedUIDL({nodeId:o[0],elementUIDLs:[(0,$.h)("data:image/svg+xml;base64,",s,parseInt(t),parseInt(e))],componentUIDLs:{},designTokens:{},textStyles:{},globals:{settings:{title:"pastedImage",language:"none"},meta:[],assets:[]}})}if((0,B.F)(n))return K.Z.mixpanelEvent(K.Z.AnalyticsEvents.PROJECT_CANVAS_PASTE,{type:"HTML"}),void this.htmlToDomainFlow.openEditor(n);try{const e=JSON.parse(n);if(e.pastebinUID&&fetch("https://eagle-es3l2.ondigitalocean.app/copypaste/paste",{method:"POST",body:JSON.stringify({key:e.pastebinUID}),headers:{"content-type":"application/json"}}).then((e=>e.json())).then((e=>{const t=e.data.data.string,n=JSON.parse(t);Array.isArray(n.componentUIDLs)&&(this.projectUIState.userInteractions.clipboard.copiedUIDL=n.componentUIDLs,n.hasImages&&this.notificationsManagementFlow.createNotification(k.k.INFO,"Import in progress..."),this.clipboardFlow.pasteCopiedUIDL({nodeId:o[0],elementUIDLs:n.componentUIDLs,componentUIDLs:n.components,designTokens:n.usedDesignTokens,textStyles:n.usedTextStyles,globals:n.globals}))})).catch((()=>{throw Error("failed to fetch figma UIDL from api")})),Array.isArray(e.componentUIDLs)){Object.keys(e.components).length?K.Z.mixpanelEvent(K.Z.AnalyticsEvents.PROJECT_CANVAS_PASTE,{type:"component"}):K.Z.mixpanelEvent(K.Z.AnalyticsEvents.PROJECT_CANVAS_PASTE,{type:"figma"}),this.projectUIState.userInteractions.clipboard.copiedUIDL=e.componentUIDLs,e.hasImages&&this.notificationsManagementFlow.createNotification(k.k.INFO,"Import in progress...");const t=this.clipboardFlow.checkForDesignLanguageConflicts(e.usedClasses,e.usedDesignTokens,e.usedTextStyles);if(t&&(t.classes.length||t.textStyles.length||t.tokens.length)){const n=W.d.createCustomModal({Component:V.s,onSubmit:t=>{this.clipboardFlow.pasteCopiedUIDL({nodeId:o[0],elementUIDLs:e.componentUIDLs,componentUIDLs:e.components,designTokens:e.usedDesignTokens,textStyles:e.usedTextStyles,classes:e.usedClasses,designLanguageMergeOptions:t,isConditionalRenderingEnabled:e.isConditionalRenderingEnabled,isTailwindEnabled:e.isTailwindEnabled,globals:e.globals})},data:{conflicts:t}});this.modalManagementFlow.showModal(n)}else this.clipboardFlow.pasteCopiedUIDL({nodeId:o[0],elementUIDLs:e.componentUIDLs,componentUIDLs:e.components,designTokens:e.usedDesignTokens,textStyles:e.usedTextStyles,classes:e.usedClasses,isConditionalRenderingEnabled:e.isConditionalRenderingEnabled,isTailwindEnabled:e.isTailwindEnabled,globals:e.globals})}}catch(a){}}return this.handleNodePasting(o),!0}this.notificationsManagementFlow.createNotification(k.k.INFO,"Import in progress...");for(const l in s){const e=s[l];if("file"===e.kind){const t=e.getAsFile();if("image/bmp"===t.type||"image/png"===t.type||"image/gif"===t.type||"image/jpeg"===t.type||"image/svg+xml"===t.type){K.Z.mixpanelEvent(K.Z.AnalyticsEvents.PROJECT_CANVAS_PASTE,{type:"image/png"});const e=new FileReader;let n="";e.onload=e=>{var t;n=null===(t=e.target)||void 0===t?void 0:t.result,this.clipboardFlow.pasteCopiedUIDL({nodeId:o[0],elementUIDLs:[(0,$.h)("",n)],componentUIDLs:{},designTokens:{},textStyles:{},globals:{settings:{title:"pastedImage",language:"none"},meta:[],assets:[]}})},e.readAsDataURL(t)}}}}),500);e.addEventListener("paste",t),this.unsubs.push((()=>{e.removeEventListener("paste",t)}))}},m=(0,_.Z)(y.prototype,"nodeManagementFlow",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),f=(0,_.Z)(y.prototype,"nodeStyleManagementFlow",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),b=(0,_.Z)(y.prototype,"nodeSelectionFlow",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),g=(0,_.Z)(y.prototype,"projectDoc",[r],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),I=(0,_.Z)(y.prototype,"nodeRichTextFlow",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),v=(0,_.Z)(y.prototype,"clipboardFlow",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),j=(0,_.Z)(y.prototype,"projectUIState",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),N=(0,_.Z)(y.prototype,"pointerInteractionManagementFlow",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),x=(0,_.Z)(y.prototype,"notificationsManagementFlow",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),S=(0,_.Z)(y.prototype,"htmlToDomainFlow",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),w=(0,_.Z)(y.prototype,"modalManagementFlow",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),y)},62057:function(e,t,o){o.d(t,{_u:function(){return n},AS:function(){return s},Id:function(){return i}});const n="interactive-node",s="data-thq",i={dropdown:'[data-thq="thq-dropdown"]:hover > [data-thq="thq-dropdown-list"] {\n    display: flex; \n  }\n\n  [data-thq="thq-dropdown"]:hover > div [data-thq="thq-dropdown-arrow"] {\n    transform: rotate(90deg); \n  }'}},69517:function(e,t,o){o.d(t,{uj:function(){return n},iq:function(){return s},t7:function(){return i},uZ:function(){return r}});const n=(e,t)=>{const o=e/2,n=t/2;return[e<t?-o:-e+n,e<t?t-o:n]},s=(e,t,o)=>0===o-t?0:(e-t)/(o-t),i=(e,t,o)=>e*(o-t)+t,r=(e,t,o)=>Math.min(o,Math.max(e,t))},3054:function(e,t,o){o.d(t,{F:function(){return n}});const n=e=>e.reduce(((e,t)=>{const o=e[t.categoryId];if(o){const n=o.findIndex((e=>e.position>t.position));-1===n?o.push(t):e[t.categoryId]=[...o.slice(0,n),t,...o.slice(n,o.length)]}else e[t.categoryId]=[t];return e}),{})},74736:function(e,t,o){o.d(t,{D:function(){return Ie},J:function(){return ve}});var n=o(73202),s=o(92809),i=o(9626),r=o(33800),a=o(30773),l=o(65988),c=o(67294),d=o(73935),p=o(76883),u=o(49899),h=o(50847),y=o(92763),m=o(10440),f=o(65989);const b="thq-tree-element",g=e=>(0,m.x8)(b,e.isExpandable&&"expandable",e.isHovered&&"hover",e.isSelected&&"selected"),I=[`.${b}.jsx-260355265{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;height:28px;-webkit-transition:${f.OK.FADE};transition:${f.OK.FADE};border-radius:${f.n_.DEFAULT};position:relative;width:100%;border:1px solid transparent;padding-right:${f.N_.HALF_UNIT};}`,`.${b}.expandable.jsx-260355265 .expand-icon.jsx-260355265{position:absolute;top:5px;left:4px;-webkit-transform:rotate(-90deg);-ms-transform:rotate(-90deg);transform:rotate(-90deg);}`,`.${b}.jsx-260355265 .label.jsx-260355265{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;height:100%;position:relative;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}`,`.${b}.jsx-260355265 .label.jsx-260355265>*.jsx-260355265{margin-right:${f.N_.UNIT};}`,`.${b}.expandable.jsx-260355265 .expand-icon.jsx-260355265 svg{-webkit-transition:${f.OK.MOVE};transition:${f.OK.MOVE};-webkit-transform-origin:50% 50%;-ms-transform-origin:50% 50%;transform-origin:50% 50%;}`,`.${b}.expandable.jsx-260355265 .expand-icon.expanded.jsx-260355265 svg{-webkit-transform:rotate(90deg);-ms-transform:rotate(90deg);transform:rotate(90deg);}`,`.${b}.hover.jsx-260355265{color:${f.bo.HIGHLIGHT};border:1px solid ${f.Pt.LIGHT_02};}`,`.${b}.jsx-260355265>.name.jsx-260355265{z-index:${f.kg.TEN};pointer-events:none;text-overflow:ellipsis;overflow:hidden;white-space:nowrap;word-wrap:nowrap;word-break:break-all;max-width:120px;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;}`,`.${b}.selected.jsx-260355265{color:${f.bo.HIGHLIGHT};background-color:${f.X4.DARK_02};}`,`.${b}.selected.jsx-260355265 svg{fill:${f.bo.HIGHLIGHT};z-index:${f.kg.TEN};}`,`.${b}.dragged.jsx-260355265:before{background-color:${f.Pt.LIGHT_01};outline:1px dashed rgba(166,166,166,0.3);}`,`.${b}.dragged.jsx-260355265{color:${f.bo.INFO};font-weight:400;}`,`.${b}.dragged.jsx-260355265 svg{fill:${f.bo.INFO};}`,`.${b}.jsx-260355265 .entity-type-icon.jsx-260355265{padding-right:8px;pointer-events:none;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}`,`.${b}.jsx-260355265 .icon-container.jsx-260355265{margin-left:${f.N_.UNIT};display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;pointer-events:none;}`,`.${b}.jsx-260355265 .selector-section.jsx-260355265{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:2px 4px;color:${f.bo.DEFAULT};border-radius:2px;margin-left:${f.N_.HALF_UNIT};background-color:${f.Pt.LIGHT_01};z-index:${f.kg.TEN};position:relative;}`,`.${b}.jsx-260355265 .selector-section.classes.jsx-260355265{background-color:${f.Pt.DEFAULT};}`,`.${b}.selected.jsx-260355265 .selector-section.jsx-260355265{background-color:${f.X4.DARK_02};}`,`.${b}.jsx-260355265 .selector-section.jsx-260355265 span.jsx-260355265{font-size:${f.um.INFO};white-space:nowrap;text-overflow:ellipsis;max-width:60px;overflow:hidden;margin-left:2px;}`,`.${b}.jsx-260355265 .extra-info.jsx-260355265{position:absolute;top:-1px;right:4px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;height:28px;z-index:${f.kg.TEN};display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;gap:${f.N_.UNIT};}`,`.${b}.jsx-260355265 .conditional-more-info.jsx-260355265{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:0 ${f.N_.UNIT};color:${f.bo.HIGHLIGHT};font-weight:600;height:80%;background-color:${f.Pt.DARK_02};z-index:${f.kg.ONEHUNDRED};border-radius:${f.n_.DISCRETE};white-space:nowrap;}`,`.${b}.jsx-260355265 .conditional.jsx-260355265{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;width:100%;}`,`.${b}.jsx-260355265 .conditional-icon.jsx-260355265{font-weight:700;font-size:14px;line-height:1;}`,".no-pointer-events.jsx-260355265{pointer-events:none;}",`.${b}.jsx-260355265 .expand-collapse-all-icon-container.jsx-260355265{width:20px;height:20px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;}`];I.__hash="260355265";var v=o(75222),j=o(30499),N=o(30214),x=o(85893);function S(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function w(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?S(Object(o),!0).forEach((function(t){(0,s.Z)(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):S(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}const O=e=>{const{isExpanded:t,isComponent:o,isHovered:n,isHidden:s,hasLink:i,conditionalNodeDetails:r,idAttribute:a,classNames:d,name:p,iconPath:u,node:m,isSelected:b=!1,isEditing:S,isExpandable:O,onNodeEditing:T,toggleShowChildren:_,expandCollapseAllChildren:E,onNodeRename:D,depth:F,compInstanceId:C,dragInProgress:A,events:k}=e,P=(0,c.useRef)(null),{0:U,1:L}=(0,c.useState)(!1),{0:Z,1:R}=(0,c.useState)(!1);if(!m.id)return null;if(!m.semanticType&&!m.primitiveType)return null;if(S)return(0,x.jsx)(h.E,{id:m.id,initialValue:p||"",selectOnMount:!0,inputSize:"sm-wide",onConfirmChange:D,indent:43+24*F});const M=e=>{e.target&&e.target.closest(".expand-icon")||T()};if(o)return(0,x.jsxs)("div",{ref:P,"data-node-id":m.id,onDoubleClick:M,style:{paddingLeft:"4px"},className:`jsx-${I.__hash} `+(g({isExpandable:!1,isSelected:b||!1,isHovered:n||!1})||""),children:[(0,x.jsx)("div",{className:`jsx-${I.__hash} entity-type-icon`,children:(0,x.jsx)(y.J,{type:j.TV.layers,size:14,color:n||b?f.bo.HIGHLIGHT:f.bo.INACTIVE})}),(0,x.jsx)("span",{className:`jsx-${I.__hash} name`,children:p}),(0,x.jsx)(l.default,{id:I.__hash,children:I})]});const H=d.slice(1).join("-"),$=A?"no-pointer-events":"";return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)("div",{ref:P,"data-node-id":m.id,"data-comp-instance-id":C&&"root"!==C?C:void 0,"data-node-depth":F,"data-node-expandable":O,onDoubleClick:M,style:w({paddingLeft:20+24*F+"px"},b&&{backgroundColor:m.primitiveType===v.sO.COMPONENT?f.z8.PURPLE_DARK:f.X4.DARK_02}),className:`jsx-${I.__hash} `+(g({isExpandable:O,isSelected:b||!1,isHovered:n||!1})||""),children:[O&&(0,x.jsx)("span",{style:{left:6+24*F+"px"},onClick:_,className:`jsx-${I.__hash} ${t?"expand-icon expanded":"expand-icon"} ${$}`,children:(0,x.jsx)(y.J,{type:"expand",size:8})}),(0,x.jsx)("div",{className:`jsx-${I.__hash} entity-type-icon`,children:(0,x.jsx)(y.J,{type:u,size:14,color:n||b?f.bo.HIGHLIGHT:f.bo.INACTIVE})}),(0,x.jsx)("span",{className:`jsx-${I.__hash} name`,children:p}),a?(0,x.jsxs)("div",{"data-tooltip-name":`#${a}`,className:`jsx-${I.__hash} selector-section no-pointer-events `,children:["# ",(0,x.jsx)("span",{className:`jsx-${I.__hash}`,children:a})]}):null,d&&d.length?d.slice(0,1).map((e=>(0,x.jsxs)("div",{className:`jsx-${I.__hash} selector-section classes no-pointer-events`,children:[".",(0,x.jsx)("span",{className:`jsx-${I.__hash}`,children:e})]},e))):null,d&&d.length>1?(0,x.jsxs)("div",{"data-tooltip-name":H,className:`jsx-${I.__hash} selector-section classes  ${$}`,children:["+",d.length-1,(0,x.jsx)(N._,{name:H,children:(0,x.jsx)(x.Fragment,{children:d.slice(1).map((e=>(0,x.jsxs)("div",{style:{padding:"2px 8px"},className:`jsx-${I.__hash}`,children:[".",(0,x.jsx)("span",{className:`jsx-${I.__hash}`,children:e})]},e)))})})]},p):null,i&&(0,x.jsx)("div",{className:`jsx-${I.__hash} icon-container`,children:(0,x.jsx)(y.J,{type:"link",size:12})}),s&&(0,x.jsx)("div",{className:`jsx-${I.__hash} icon-container`,children:(0,x.jsx)(y.J,{type:"eye-closed",size:14})}),(0,x.jsxs)("div",{className:`jsx-${I.__hash} extra-info`,children:[O&&(0,x.jsx)("div",{style:{display:n||b?"flex":"none"},className:`jsx-${I.__hash}`,children:t?(0,x.jsx)("div",{onMouseEnter:()=>R(!0),onMouseLeave:()=>R(!1),onClick:()=>{E(!1)},style:{backgroundColor:Z?b?f.X4.DARK_01:f.Pt.DEFAULT:""},className:`jsx-${I.__hash} expand-collapse-all-icon-container`,children:(0,x.jsx)("span",{"data-tooltip-name":"Collapse all","data-tooltip-direction":"vertical",style:{height:12},className:`jsx-${I.__hash}`,children:(0,x.jsx)(y.J,{type:"collapse-all",size:12})})}):(0,x.jsx)("div",{onMouseEnter:()=>L(!0),onMouseLeave:()=>L(!1),onClick:()=>{E(!0)},style:{backgroundColor:U?b?f.X4.DARK_01:f.Pt.DEFAULT:""},className:`jsx-${I.__hash} expand-collapse-all-icon-container`,children:(0,x.jsx)("span",{"data-tooltip-name":"Expand all","data-tooltip-direction":"vertical",style:{height:12},className:`jsx-${I.__hash}`,children:(0,x.jsx)(y.J,{type:"expand-all",size:12})})})}),r&&r.showConditionalHighlight&&(0,x.jsxs)("div",{className:`jsx-${I.__hash} conditional-more-info no-pointer-events`,children:[r.boundToState.name," ="," ",r.boundToState.renderValue.toString()]}),k.length?(0,x.jsx)(y.J,{type:"bolt",size:14}):null,r&&(0,x.jsx)("div",{style:{color:r.renderedInStage?`${f.z8.SUCCESS_LIGHT}`:`${f.z8.DANGER_LIGHT}`},className:`jsx-${I.__hash} conditional no-pointer-events`,children:(0,x.jsx)("span",{className:`jsx-${I.__hash} conditional-icon`,children:"C"})})]})]}),(0,x.jsx)(l.default,{id:I.__hash,children:I})]})};var T,_,E,D,F,C,A,k,P,U,L,Z,R,M,H,$,B,G,z,W,V,K,J,X=o(40652);function Y(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function q(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?Y(Object(o),!0).forEach((function(t){(0,s.Z)(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):Y(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}let Q=(T=(0,p.f3)("projectDoc"),_=(0,p.f3)("projectUIState"),E=(0,p.f3)("nodeEditingFlow"),D=(0,p.f3)("nodeSelectionFlow"),F=(0,p.f3)("nodeManagementFlow"),C=(0,p.f3)("nodeStyleManagmentFlow"),A=(0,p.f3)("mainInspectorFlow"),k=(0,p.f3)("absolutePositionedLayerFlow"),P=(0,p.f3)("clipboardFlow"),U=(0,p.f3)("componentManagementFlow"),L=(0,p.f3)("pageManagementFlow"),Z=class extends c.PureComponent{constructor(e){var t,o,i;super(e),(0,n.Z)(this,"projectDoc",R,this),(0,n.Z)(this,"projectUIState",M,this),(0,n.Z)(this,"nodeEditingFlow",H,this),(0,n.Z)(this,"nodeSelectionFlow",$,this),(0,n.Z)(this,"nodeManagementFlow",B,this),(0,n.Z)(this,"nodeStyleManagmentFlow",G,this),(0,n.Z)(this,"mainInspectorFlow",z,this),(0,n.Z)(this,"absolutePositionedLayerFlow",W,this),(0,n.Z)(this,"clipboardFlow",V,this),(0,n.Z)(this,"componentManagementFlow",K,this),(0,n.Z)(this,"pageManagementFlow",J,this),(0,s.Z)(this,"unsubs",[]),(0,s.Z)(this,"classListUnsub",null),(0,s.Z)(this,"mouseOverTO",null),(0,s.Z)(this,"getClassList",(()=>this.projectUIState.userPreferences.classesInTreeView?this.projectDoc.getUsedProjectClassesForNodesByPos([this.props.nodeId]).map((({name:e})=>e)):[])),(0,s.Z)(this,"subscribeForTreeViewExpandedStatus",(()=>{const e=(0,u.Ys)(this.projectUIState,[`selection/expandedTreeNodes/${this.props.compInstanceId}/${this.props.nodeId}`],((e,t)=>{t.forEach((e=>{const{op:t,value:o}=e;"add"!==t?"remove"!==t?"replace"!==t||this.setState({expanded:o}):this.setState({expanded:!1}):this.setState({expanded:!0})}))}),"TreeNode");this.unsubs.push((()=>e.dispose()))})),(0,s.Z)(this,"subscribeForNameChanges",(()=>{const e=(0,u.Ys)(this.projectDoc,[`nodes/byId/${this.props.nodeId}/name`],(()=>{this.setState({displayName:this.nodeEditingFlow.getNodeDisplayName([this.props.nodeId])})}),"TreeNode1");this.unsubs.push((()=>e.dispose()))})),(0,s.Z)(this,"subscribeForNodeChanges",(()=>{const e=(0,u.Ys)(this.projectDoc,[`nodes/byId/${this.props.nodeId}/childrenIds/**`],((e,t)=>{t.forEach((t=>{const{pathArray:o,op:n}=t,{nodeId:s}=this.props,i=e.nodes.byId[s];if(i&&5===o.length&&"childrenIds"===o[3]&&!i.compIdOfRootNode){const e=(null===i||void 0===i?void 0:i.childrenIds)||{};if("add"===n&&Object.keys(e||{}).length>0)return void this.nodeSelectionFlow.setExpandedTreeNodeValue(s,!0);"remove"===n&&0===Object.keys(e||{}).length&&this.nodeSelectionFlow.setExpandedTreeNodeValue(s,!1)}}));const{nodeId:o}=this.props,n=e.nodes.byId[o];if(n&&(n.primitiveType===v.sO.TEXT||n.primitiveType===v.IV.NAVBAR)){const e=this.nodeEditingFlow.getElementIconPath([this.props.nodeId]);e&&this.setState({iconPath:e})}}),"TreeNode2");this.unsubs.push((()=>e.dispose()))})),(0,s.Z)(this,"subscribeForUIState",(()=>{const e=(0,u.Ys)(this.projectUIState,["selection/nodes/*","hoveredNodes/**","nodesList/renamedNodeId"],(e=>{this.setState({selected:!!e.selection.nodes[this.props.nodeId]&&(e.selection.compInstanceId||"root")===this.props.compInstanceId,editing:e.nodesList.renamedNodeId===this.props.nodeId,hovered:-1!==Object.keys(e.hoveredNodes.nodes).indexOf(this.props.nodeId)})}),"TreeNode3");this.unsubs.push((()=>e.dispose()))})),(0,s.Z)(this,"subscribeForLinkAbilityChanges",(()=>{const e=(0,u.Ys)(this.projectDoc,[`nodes/byId/${this.props.nodeId}/abilities/link`],(e=>{var t;const o=null===(t=e.nodes.byId[this.props.nodeId])||void 0===t?void 0:t.abilities.link;this.setState({hasLink:!!o})}),"TreeNode4"),t=(0,u.Ys)(this.projectDoc,[`nodes/byId/${this.props.nodeId}/attrs/id`],(e=>{var t;const o=null===(t=e.nodes.byId[this.props.nodeId])||void 0===t?void 0:t.attrs.id;this.setState({idAttr:o?o.content:null})}),"SectionIdWrapper");this.unsubs.push((()=>e.dispose()),(()=>t.dispose()))})),(0,s.Z)(this,"subscribeForDisplayStyleChanges",(()=>{const e=this.mainInspectorFlow.getSelectorsListForProperties(["display","flexDirection"],this.props.nodeId),t=(0,u.Ys)(this.projectDoc,[...e],((e,t)=>{if(this.mainInspectorFlow.haveStylePropertiesChangedInPatches(t,["display","flexDirection"])){const e=this.nodeStyleManagmentFlow.getCurrentStyleValueByKeyForNode(this.props.nodeId,["display"]),t=this.nodeEditingFlow.getElementIconPath([this.props.nodeId]);this.setState({hidden:"none"===e.display,iconPath:t})}}),"TreeNode5"),o=(0,u.Ys)(this.projectUIState,["stage/matchedBreakpoint"],(()=>{const e=this.nodeStyleManagmentFlow.getCurrentStyleValueByKeyForNode(this.props.nodeId,["display"]);this.setState({hidden:"none"===e.display})}),"TreeNode6");this.unsubs.push((()=>t.dispose()),(()=>o.dispose()))})),(0,s.Z)(this,"subscribeForCompNameChanges",(()=>{const{id:e,collection:t}=this.state.comp;if(!e||!t)return;const o=(0,u.Ys)(this.projectDoc,[`${t}/byId/${e}/title`],(o=>{var n;this.setState({comp:q(q({},this.state.comp),{},{name:null===(n=o[t].byId[e])||void 0===n?void 0:n.title}),displayName:this.nodeEditingFlow.getNodeDisplayName([this.props.nodeId])})}),"TreeNode7");this.unsubs.push((()=>o.dispose()))})),(0,s.Z)(this,"subscribeForClassPreferencesChanges",(()=>{this.projectUIState.userPreferences.classesInTreeView&&this.subscribeForClassListChanges();const e=(0,u.Ys)(this.projectUIState,["userPreferences/classesInTreeView"],(({userPreferences:e})=>{let t=[];var o;e.classesInTreeView?(t=this.getClassList(),this.classListUnsub||this.subscribeForClassListChanges()):(null===(o=this.classListUnsub)||void 0===o||o.call(this),this.classListUnsub=null);this.setState({classList:t})}),"TreeNode8"),t=(0,u.Ys)(this.projectUIState,["userPreferences/showElementTag"],(()=>{this.setState({displayName:this.nodeEditingFlow.getNodeDisplayName([this.props.nodeId])})}),"TreeNode9");this.unsubs.push((()=>e.dispose()),(()=>t.dispose()))})),(0,s.Z)(this,"subscribeForClassListChanges",(()=>{const e=(0,u.Ys)(this.projectDoc,["nodes/byId/*/referencedStyles/*","nodes/byId/*/referencedStyles","classes/byId/*/name"],(()=>{this.setState({classList:this.getClassList()})}),"TreeNode10");this.classListUnsub=()=>e.dispose()})),(0,s.Z)(this,"subscribeForDragInProgressChanges",(()=>{const e=(0,u.Ys)(this.projectUIState,["drag/draggedEntity","selection/componentId"],(e=>{this.setState({dragInProgress:!!e.drag.draggedEntity,hidden:this.getHiddenStatus()})}),"TreeNode11");this.classListUnsub=()=>e.dispose()})),(0,s.Z)(this,"subscribeForConditionalRendering",(()=>{const e=(0,u.Ys)(this.projectDoc,[`nodes/byId/${this.props.nodeId}/renderingConditions`,`nodes/byId/${this.props.nodeId}/renderingConditions/**`],(e=>{const t=e.nodes.byId[this.props.nodeId];if(!t)return;const o=this.getConditionalNodeDetails(t.id,this.projectUIState);this.setState({conditionalNodeDetails:o})}),"TreeNode12");this.unsubs.push((()=>e.dispose()))})),(0,s.Z)(this,"subscribeForEvents",(()=>{const e=(0,u.Ys)(this.projectDoc,[`nodes/byId/${this.props.nodeId}/events`,`nodes/byId/${this.props.nodeId}/events/**`],(e=>{const t=e.nodes.byId[this.props.nodeId];if(!t)return;const o=Object.keys(t.events);this.setState({events:o})}),"TreeNode13");this.unsubs.push((()=>e.dispose()))})),(0,s.Z)(this,"subscribeForCompStateValue",(()=>{if(!this.projectUIState.selection.componentId)return;const e=(0,u.Ys)(this.projectUIState,["componentList/stateValues","componentList/stateValues/**"],(e=>{const t=this.getConditionalNodeDetails(this.props.nodeId,e),o=this.getHiddenStatus();this.setState({hidden:o,conditionalNodeDetails:t})}),"TreeNode14");this.unsubs.push((()=>e.dispose()))})),(0,s.Z)(this,"handleEditing",(()=>{this.nodeManagementFlow.setRenamedNode(this.props.nodeId)})),(0,s.Z)(this,"toggleShowChildren",(()=>{this.nodeSelectionFlow.toggleExpandedTreeNode(this.props.nodeId,this.props.compInstanceId)})),(0,s.Z)(this,"expandCollapseAllChildren",(e=>{const t=this.projectDoc.nodes.byId[this.props.nodeId];t&&this.loopExpandCollapseChildren(t,e)})),(0,s.Z)(this,"loopExpandCollapseChildren",((e,t)=>{this.isExpandable(e)&&(t?this.nodeSelectionFlow.forceExpandTreeNode(e.id,e.compInstanceId):this.nodeSelectionFlow.forceCollapseTreeNode(e.id,e.compInstanceId),e.childrenIds&&Object.keys(e.childrenIds).forEach((e=>{const o=this.projectDoc.nodes.byId[e];o&&this.loopExpandCollapseChildren(o,t)})))})),(0,s.Z)(this,"handleNodeRename",((e,t)=>{this.nodeManagementFlow.setRenamedNode(null);const o=this.projectDoc.nodes.byId[e];null!==o&&void 0!==o&&o.compIdOfRootNode?"components"===this.state.comp.collection?this.componentManagementFlow.renameComponent({id:this.state.comp.id||"",newName:t}):this.pageManagementFlow.renamePage({id:this.state.comp.id||"",newName:t}):this.nodeEditingFlow.rename({id:e,value:t})})),(0,s.Z)(this,"isExpandable",(e=>{var t;let o=!!(Object.keys((null===e||void 0===e?void 0:e.childrenIds)||{}).length>0&&null!==(t=v.y7[e.primitiveType])&&void 0!==t&&t.length);var n;this.projectDoc.nodes.nodeIsCompInstance(e)&&(o=!!Object.keys((null===(n=this.projectDoc.components.byId[e.compIdOfCompInstance])||void 0===n?void 0:n.slots)||{}).length);if(e.primitiveType===v.sO.SLOT){const t=this.projectDoc.nodes.byId[this.props.compInstanceId];o=!!t&&!!Object.keys(t.slottedNodes[e.id]||{}).length}return o}));const r=this.projectUIState.selection.nodes[this.props.nodeId];let a=!1;null!==(t=this.projectUIState.selection.expandedTreeNodes[this.props.compInstanceId])&&void 0!==t&&t[this.props.nodeId]&&(a=!0);const l=this.projectDoc.nodes.byId[this.props.nodeId];let c=!1,d={};if(l&&l instanceof X.H){const{compIdOfRootNode:e,abilities:{link:t}}=l;if(t&&(c=!0),e){const t=this.projectDoc.pages.byId[e||""],o=this.projectDoc.components.byId[e||""];t?d={name:t.title,id:t.id,collection:"pages"}:o&&(d={name:o.title,id:o.id,collection:"components"})}if(this.projectDoc.nodes.nodeIsCompInstance(l)){const e=this.projectDoc.components.byId[l.compIdOfCompInstance];e&&(d={name:e.title,id:e.id,collection:"components"})}}this.state={selected:r,editing:!1,expanded:a,hovered:!1,name:null,comp:d,hasLink:c,classList:this.getClassList(),idAttr:null===l||void 0===l||null===(o=l.attrs)||void 0===o||null===(i=o.id)||void 0===i?void 0:i.content,hidden:this.getHiddenStatus(),displayName:this.nodeEditingFlow.getNodeDisplayName([this.props.nodeId]),dragInProgress:!!this.projectUIState.drag.draggedEntity,iconPath:this.nodeEditingFlow.getElementIconPath([this.props.nodeId]),conditionalNodeDetails:this.getConditionalNodeDetails(this.props.nodeId,this.projectUIState),events:Object.keys(this.projectDoc.nodes.byId[this.props.nodeId].events)}}componentDidMount(){this.subscribeForChanges()}subscribeForChanges(){this.subscribeForUIState(),this.subscribeForNodeChanges(),this.subscribeForTreeViewExpandedStatus(),this.subscribeForNameChanges(),this.subscribeForLinkAbilityChanges(),this.subscribeForDisplayStyleChanges(),this.subscribeForCompNameChanges(),this.subscribeForClassPreferencesChanges(),this.subscribeForDragInProgressChanges(),this.subscribeForConditionalRendering(),this.subscribeForEvents(),this.subscribeForCompStateValue()}getHiddenStatus(){if(!this.projectDoc.nodes.byId[this.props.nodeId])return!0;return"none"===this.nodeStyleManagmentFlow.getCurrentStyleValueByKeyForNode(this.props.nodeId,["display"]).display}getConditionalNodeDetails(e,t){var o,n,s;const i=this.projectDoc.nodes.byId[e],r=t.selection.componentId;if(!i||!i.renderingConditions||!r)return null;const a=this.projectDoc.components.byId[r];if(!a)return null;const{stateDefinitions:l}=a,c=i.renderingConditions.reference.id,d=Object.keys(l).find((e=>e===c));if(!d)return null;const p=this.projectDoc.getComponentIdForNode(i.id);return{renderedInStage:this.nodeStyleManagmentFlow.nodeSatisfiesStateRenderingCondition(i.id,p,"root"),showConditionalHighlight:!(null===(o=t.componentList.stateValues[r])||void 0===o||null===(n=o[d])||void 0===n||null===(s=n.meta)||void 0===s||!s.highlightInTreeView),boundToState:{name:l[c].name,renderValue:i.renderingConditions.value}}}unsubscribeFromChanges(){var e;this.unsubs.forEach((e=>e())),this.unsubs=[],null===(e=this.classListUnsub)||void 0===e||e.call(this),this.classListUnsub=null}componentWillUnmount(){this.unsubscribeFromChanges()}render(){var e,t;const o=this.projectDoc.nodes.byId[this.props.nodeId];if(!o||!o.primitiveType)return null;const n=null===(e=o.attrs)||void 0===e||null===(t=e.id)||void 0===t?void 0:t.content,s=this.isExpandable(o),{selected:i,expanded:r,hovered:a,editing:l,hidden:c,hasLink:d,classList:p,dragInProgress:u,displayName:h,iconPath:y,conditionalNodeDetails:m,events:f}=this.state;return(0,x.jsx)(O,{isSelected:i,isExpanded:r,isEditing:l,isHovered:a,isHidden:c,hasLink:d,conditionalNodeDetails:m,iconPath:y,classNames:p,node:o,name:h,onNodeRename:this.handleNodeRename,onNodeEditing:this.handleEditing,toggleShowChildren:this.toggleShowChildren,expandCollapseAllChildren:this.expandCollapseAllChildren,isComponent:this.props.isComponent||!1,depth:this.props.depth,isExpandable:s,idAttribute:n,compInstanceId:this.props.compInstanceId,dragInProgress:u,events:f})}},R=(0,a.Z)(Z.prototype,"projectDoc",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),M=(0,a.Z)(Z.prototype,"projectUIState",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),H=(0,a.Z)(Z.prototype,"nodeEditingFlow",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),$=(0,a.Z)(Z.prototype,"nodeSelectionFlow",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),B=(0,a.Z)(Z.prototype,"nodeManagementFlow",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),G=(0,a.Z)(Z.prototype,"nodeStyleManagmentFlow",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),z=(0,a.Z)(Z.prototype,"mainInspectorFlow",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),W=(0,a.Z)(Z.prototype,"absolutePositionedLayerFlow",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),V=(0,a.Z)(Z.prototype,"clipboardFlow",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),K=(0,a.Z)(Z.prototype,"componentManagementFlow",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),J=(0,a.Z)(Z.prototype,"pageManagementFlow",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Z);var ee,te,oe,ne,se,ie,re,ae,le,ce,de,pe,ue,he,ye,me,fe=o(89450),be=o(29389),ge=o(33381);const Ie="tree-list-item";let ve=(ee=(0,p.f3)("projectDoc"),te=(0,p.f3)("projectUIState"),oe=(0,p.f3)("nodeSelectionFlow"),ne=(0,p.f3)("notificationsManagementFlow"),se=(0,p.f3)("positioningService"),ie=(0,p.f3)("nodeManagementFlow"),re=(0,p.f3)("localHistoryStackFlow"),me=new WeakMap,ae=class extends c.PureComponent{constructor(...e){super(...e),(0,n.Z)(this,"projectDoc",le,this),(0,n.Z)(this,"projectUIState",ce,this),(0,n.Z)(this,"nodeSelectionFlow",de,this),(0,n.Z)(this,"notificationsManagementFlow",pe,this),(0,n.Z)(this,"positioningService",ue,this),(0,n.Z)(this,"nodeManagementFlow",he,this),(0,n.Z)(this,"localHistoryStackFlow",ye,this),(0,s.Z)(this,"nodeHierarchyKeyboardShorcutsSensor",new fe.U),(0,s.Z)(this,"rootRef",c.createRef()),(0,s.Z)(this,"rootNodeId",null),(0,s.Z)(this,"nodeIdNodeElement",{}),(0,s.Z)(this,"state",{targetComponentRootNode:null}),(0,s.Z)(this,"unsubs",[]),me.set(this,{writable:!0,value:null}),(0,s.Z)(this,"savedScroll",0),(0,s.Z)(this,"handleParentScroll",(()=>{var e,t;null!==(e=this.rootRef.current)&&void 0!==e&&null!==(t=e.parentElement)&&void 0!==t&&t.scrollTop&&(this.savedScroll=this.rootRef.current.parentElement.scrollTop)})),(0,s.Z)(this,"handleFocus",(()=>{var e,t;this.savedScroll&&(null===(e=this.rootRef.current)||void 0===e||null===(t=e.parentElement)||void 0===t||t.scrollTo({top:this.savedScroll}))})),(0,s.Z)(this,"handleBlur",(()=>{var e,t;null!==(e=this.rootRef.current)&&void 0!==e&&null!==(t=e.parentElement)&&void 0!==t&&t.scrollTop?this.savedScroll=this.rootRef.current.parentElement.scrollTop:this.savedScroll=0})),(0,s.Z)(this,"handleShortcutsOnTreeNode",(e=>{const t="KeyZ"===e.code&&(e.ctrlKey||e.metaKey),o="KeyV"===e.code&&(e.ctrlKey||e.metaKey);t||o||e.preventDefault(),t&&(e.shiftKey?this.localHistoryStackFlow.redo():this.localHistoryStackFlow.undo())})),(0,s.Z)(this,"createAndAddNewNode",(e=>{var t,o;const{nodeId:n,parentNodeId:s,isComponent:i=!1,depth:r,compInstanceId:a="root",slotParentCompInstanceId:l}=e;if(null!==(t=this.nodeIdNodeElement[a])&&void 0!==t&&t[n]&&this.removeNodeAndDescendantsFromDOM(n,a),s){var p;const e=this.projectDoc.nodes.byId[s];if(e&&(null===(p=v.y7[e.primitiveType])||void 0===p||!p.length)&&e.primitiveType!==v.sO.COMPONENT)return}const u=this.projectDoc.nodes.byId[n];if(!u)return;const h=document.createElement("div"),y=document.createElement("div");if(h.classList.add("tree-node-wrapper"),y.classList.add(Ie),h.append(y),(null===u||void 0===u?void 0:u.primitiveType)===v.sO.CONTAINER&&!u.compIdOfRootNode){const e=document.createElement("div");e.classList.add("fake-element"),Object.assign(e.dataset,{nodeId:n,fakeTreeviewElem:!0}),h.appendChild(e)}d.render(c.createElement(Q,{nodeId:n,isComponent:i,depth:r-1,compInstanceId:a}),y),this.nodeIdNodeElement[a]||(this.nodeIdNodeElement[a]={}),this.nodeIdNodeElement[a][n]={domNode:h,id:u.id,pos:u.pos};const f=null===(o=this.nodeIdNodeElement[l||a][s||""])||void 0===o?void 0:o.domNode;if(f){var b;const e=this.projectDoc.nodes.byId[s],t=this.nodeManagementFlow.getNodeChildren(null===e||void 0===e?void 0:e.id,a),o=Object.keys(this.nodeIdNodeElement[a]).filter((e=>-1!==t.indexOf(e))),i=null===(b=this.positioningService.getNextEntity({entitiyCollection:this.nodeIdNodeElement[a],entity:this.nodeIdNodeElement[a][n],entitiesOfInterest:o}))||void 0===b?void 0:b.domNode;i&&(0,m.l8)(f,i)?f.insertBefore(h,i):f.append(h)}Object.keys(this.projectUIState.selection.expandedTreeNodes[l||a]||{}).includes(s||"")||s===this.rootNodeId||i||(this.nodeIdNodeElement[a][n].domNode.style.display="none")})),(0,s.Z)(this,"subscribeForTreeViewExpand",(()=>{const e=(0,u.Ys)(this.projectUIState,["selection/expandedTreeNodes/**"],((e,t)=>{t.forEach((e=>{const{op:t,pathArray:o}=e;o.length>2&&"expandedTreeNodes"===o[1]&&("add"===t&&this.toggleAndUntoggleNodes(o[3],"",o[2]),"remove"===t&&this.toggleAndUntoggleNodes(o[3],"none",o[2]))}))}),"TreeViewWrapper1");this.unsubs.push((()=>e.dispose()))})),(0,s.Z)(this,"subscriebForNodeParentOrPositionUpdates",(()=>{const e=(0,u.Ys)(this.projectDoc,["nodes/byId/*/parentId","nodes/byId/*/pos","nodes/byId/*/slotId","nodes/byId/*/compInstanceId"],((e,t)=>{const o=[],n=["compInstanceId","parentId","slotId"];t.forEach((t=>{const{op:s,pathArray:i}=t;if("nodes"!==i[0]||"byId"!==i[1]||4!==i.length||"pos"!==i[3]&&!n.includes(i[3]))return;const r=i[2],{compInstanceId:a}=e.nodes.getSlotAndCompInstanceIdForNodeById(r);if("replace"!==s)"remove"===s&&n.includes(i[3])?this.removeNodeAndDescendantsFromDOM(r):"add"===s&&n.includes(i[3])&&this.renderSubtree(r,a);else{if(-1!==o.indexOf(r))return;o.push(r)}})),o.sort(((t,o)=>{const n=e.nodes.byId[t],s=e.nodes.byId[o],i=parseFloat(null===n||void 0===n?void 0:n.pos),r=parseFloat(null===s||void 0===s?void 0:s.pos);return(0,ge.F0)(r)-(0,ge.F0)(i)})).forEach((e=>{const{compInstanceId:t}=this.projectDoc.nodes.getSlotAndCompInstanceIdForNodeById(e);this.removeNodeAndDescendantsFromDOM(e),this.renderSubtree(e,t)}))}),"TreeViewWrapper3");this.unsubs.push((()=>e.dispose()))})),(0,s.Z)(this,"subscribeForSlotUpdates",(()=>{const e=(0,u.Ys)(this.projectDoc,["components/byId/*/slots/**"],((e,t)=>{t.forEach((e=>{const{pathArray:t}=e;if("components"!==t[0]||"byId"!==t[1]||"slots"!==t[3])return;const o=t[4];o&&(this.removeNodeAndDescendantsFromDOM(o),this.renderSubtree(o))}))}),"TreeViewWrapperSlots");this.unsubs.push((()=>e.dispose()))})),(0,s.Z)(this,"subscribeForNodeUpdates",(()=>{const e=(0,u.Ys)(this.projectDoc,["nodes/byId/*"],((e,t)=>{t.forEach((t=>{const{op:o,pathArray:n,old:s}=t;if(3===n.length&&"nodes"===n[0]&&"byId"===n[1]){if("add"===o&&!s){const t=n[2],o=e.nodes.byId[t];if(!o)return;if(e.getComponentIdForNode(t)!==this.projectUIState.selection.componentId)return;const{compInstanceId:s="root"}=e.nodes.getSlotAndCompInstanceIdForNodeById(t);if(o.primitiveType===v.sO.COMPONENT)return void this.renderSubtree(t,s);if(!o.compIdOfRootNode){var i;const n=o.parentOrSlotId;if(null!==(i=this.nodeIdNodeElement[s])&&void 0!==i&&i[n]){const i=e.nodes.getNodesDepthInTree(t);this.createAndAddNewNode({nodeId:o.id,parentNodeId:n,depth:i,compInstanceId:s})}return}}if("remove"===o&&"nodes"===n[0]&&s){const{id:e}=s;this.removeNodeAndDescendantsFromDOM(e)}else if("replace"===o){const t=n[2],o=e.nodes.byId[t];if(!o||o.slotId)return;const{compInstanceId:s}=e.nodes.getSlotAndCompInstanceIdForNodeById(t);this.removeNodeAndDescendantsFromDOM(t,s),this.renderSubtree(t,s)}}}))}),"TreeViewWrapper4");this.unsubs.push((()=>e.dispose()))})),(0,s.Z)(this,"subscribeForDragAnchorChanges",(()=>{const e=(0,u.Ys)(this.projectUIState,["dropFlowStates/treeView/dropAnchor"],(e=>{var t;const o=e.dropFlowStates.treeView.dropAnchor,n=Object.keys(e.hoveredNodes.nodes);if(1===n.length&&(null===(t=this.projectDoc.nodes.byId[n[0]])||void 0===t?void 0:t.primitiveType)===v.sO.COMPONENT||o&&-1!==(null===o||void 0===o?void 0:o.indexOf("inside"))){const t=e.hoveredNodes.compInstanceId;if(!n.length||n.length>1||!this.nodeManagementFlow.getNodeChildren(n[0],t).length||(0,r.Z)(this,me))return;(0,i.Z)(this,me,setTimeout((()=>{this.nodeSelectionFlow.setExpandedTreeNodeValue(n[0],!0,t)}),be.iS))}else(0,r.Z)(this,me)&&(clearTimeout((0,r.Z)(this,me)),(0,i.Z)(this,me,null))}),"TreeViewWrapper5");this.unsubs.push((()=>e.dispose()))})),(0,s.Z)(this,"semanticTypeUpdate",(()=>{const e=(0,u.Ys)(this.projectDoc,["nodes/byId/*/semanticType"],((e,t)=>{t.forEach((t=>{const{pathArray:o}=t;if(4===o.length&&"semanticType"===o[3]){const t=o[2],{compInstanceId:n}=e.nodes.getSlotAndCompInstanceIdForNodeById(t);this.removeNodeAndDescendantsFromDOM(t,n),this.renderSubtree(t,n)}}))}),"TreeViewWrapper6");this.unsubs.push((()=>e.dispose()))})),(0,s.Z)(this,"subscribeForSelectedPage",(()=>{const e=(0,u.Ys)(this.projectUIState,["selection/componentId"],(({selection:e})=>{if(e.componentId&&(this.rootNodeId=this.projectDoc.getRootNodeIdForPageOrComponent(e.componentId),this.rootNodeId))try{this.renderNodes(this.rootNodeId)}catch(t){this.notificationsManagementFlow.handleErrorAndLogToSentry(t)}}),"TreeViewWrapper7");this.unsubs.push((()=>e.dispose()))})),(0,s.Z)(this,"removeNodeAndDescendantsFromDOM",((e,t)=>{t?this.removeNodeDOM(e,t):Object.keys(this.nodeIdNodeElement).forEach((t=>{this.removeNodeDOM(e,t)}))}))}componentDidMount(){const e=this.projectUIState.selection.componentId;if(e&&(this.rootNodeId=this.projectDoc.getRootNodeIdForPageOrComponent(e),this.rootNodeId)){try{this.renderNodes(this.rootNodeId)}catch(o){this.notificationsManagementFlow.handleErrorAndLogToSentry(o)}var t;if(this.subscribeForNodeUpdates(),this.subscribeForTreeViewExpand(),this.subscriebForNodeParentOrPositionUpdates(),this.subscribeForDragAnchorChanges(),this.subscribeForSelectedPage(),this.semanticTypeUpdate(),this.subscribeForSlotUpdates(),this.rootRef.current)this.rootRef.current.addEventListener("keydown",this.handleShortcutsOnTreeNode),this.rootRef.current.addEventListener("focus",this.handleFocus),this.rootRef.current.addEventListener("blur",this.handleBlur),null===(t=this.rootRef.current.parentElement)||void 0===t||t.addEventListener("scroll",this.handleParentScroll),this.nodeHierarchyKeyboardShorcutsSensor.attach(this.rootRef.current)}}renderNodes(e){var t,o;const n=(null===(t=this.rootRef.current)||void 0===t?void 0:t.children)||[];Array.from(n).forEach((e=>e.remove())),this.projectDoc.nodes.bfs(e,((e,t)=>{this.createAndAddNewNode({nodeId:e.id,parentNodeId:e.parentId,isComponent:!!e.compIdOfRootNode,depth:t}),this.projectDoc.nodes.nodeIsCompInstance(e)&&this.renderSlotsForCompInstance(e,t,"root")}));const s=null===(o=this.nodeIdNodeElement.root[e])||void 0===o?void 0:o.domNode;var i;s&&(null===(i=this.rootRef.current)||void 0===i||i.append(s))}renderSlotsForCompInstance(e,t,o){const n=this.projectDoc.components.byId[e.compIdOfCompInstance];Object.keys((null===n||void 0===n?void 0:n.slots)||{}).forEach((n=>{var s;this.createAndAddNewNode({nodeId:n,parentNodeId:e.id,depth:t+1,compInstanceId:e.id,slotParentCompInstanceId:o}),this.projectDoc.nodes.orderChildrenIds(Object.keys((null===(s=e.slottedNodes)||void 0===s?void 0:s[n])||{})).forEach((t=>{this.renderSubtree(t,e.id)}))}))}renderSubtree(e,t){const o=this.projectDoc.nodes.getNodesDepthInTree(e);this.projectDoc.nodes.bfs(e,((e,n)=>{this.createAndAddNewNode({nodeId:e.id,parentNodeId:e.parentOrSlotId,isComponent:!!e.compIdOfRootNode,depth:o+n,compInstanceId:t}),this.projectDoc.nodes.nodeIsCompInstance(e)&&this.renderSlotsForCompInstance(e,n+o,t||"root")}))}toggleAndUntoggleNodes(e,t,o){const n=this.projectDoc.nodes.byId[e];if(n)if(this.projectDoc.nodes.nodeIsCompInstance(n)){const e=this.projectDoc.components.byId[n.compIdOfCompInstance];Object.keys((null===e||void 0===e?void 0:e.slots)||{}).forEach((e=>{var o,s;const i=null===(o=this.nodeIdNodeElement[n.id])||void 0===o||null===(s=o[e])||void 0===s?void 0:s.domNode;i&&(i.style.display=t)}))}else if(n.primitiveType!==v.sO.SLOT)Object.keys((null===n||void 0===n?void 0:n.childrenIds)||{}).forEach((e=>{var n;const s=null===(n=this.nodeIdNodeElement[o][e])||void 0===n?void 0:n.domNode;s&&(s.style.display=t)}));else{const e=this.projectDoc.nodes.byId[o];Object.keys((null===e||void 0===e?void 0:e.slottedNodes[n.id])||{}).forEach((e=>{var n;const s=null===(n=this.nodeIdNodeElement[o][e])||void 0===n?void 0:n.domNode;s&&(s.style.display=t)}))}}removeNodeDOM(e,t){var o,n,s;const i=null===(o=this.nodeIdNodeElement[t])||void 0===o||null===(n=o[e])||void 0===n?void 0:n.domNode;if(!i)return;this.nodeManagementFlow.getNodeChildren(e,t).forEach((e=>this.removeNodeAndDescendantsFromDOM(e))),d.unmountComponentAtNode(i.children[0]),null===(s=this.nodeIdNodeElement[t][e])||void 0===s||s.domNode.remove(),delete this.nodeIdNodeElement[t][e]}componentWillUnmount(){var e,t,o,n,s;this.rootNodeId&&this.removeNodeAndDescendantsFromDOM(this.rootNodeId),this.unsubs.forEach((e=>e())),this.unsubs=[],this.nodeHierarchyKeyboardShorcutsSensor.detach(),null===(e=this.rootRef.current)||void 0===e||e.removeEventListener("keydown",this.handleShortcutsOnTreeNode),null===(t=this.rootRef.current)||void 0===t||t.removeEventListener("focus",this.handleFocus),null===(o=this.rootRef.current)||void 0===o||o.removeEventListener("blur",this.handleBlur),null===(n=this.rootRef.current)||void 0===n||null===(s=n.parentElement)||void 0===s||s.removeEventListener("scroll",this.handleParentScroll)}render(){return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("div",{ref:this.rootRef,tabIndex:0,"data-component-id":this.projectUIState.selection.componentId,"data-tree-view":!0,contentEditable:!0,spellCheck:!1,className:"jsx-2750565031 "+l.default.dynamic([["3014481057",[f.bo.INFO,Ie]]])+" tree-view"}),(0,x.jsx)(l.default,{id:"3014481057",dynamic:[f.bo.INFO,Ie],children:[`.tree-node-wrapper{color:${f.bo.INFO};position:relative;width:100%;}`,".fake-element{content:'';position:absolute;top:0;left:-1px;height:100%;}",`.${Ie}{position:relative;z-index:10;width:100%;}`]}),(0,x.jsx)(l.default,{id:"2750565031",children:["[data-component-id].jsx-2750565031{-webkit-flex:1;-ms-flex:1;flex:1;position:relative;}",".tree-view.jsx-2750565031{outline:none;box-shadow:none;padding-top:2px;cursor:default;caret-color:transparent;}"]})]})}},le=(0,a.Z)(ae.prototype,"projectDoc",[ee],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ce=(0,a.Z)(ae.prototype,"projectUIState",[te],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),de=(0,a.Z)(ae.prototype,"nodeSelectionFlow",[oe],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),pe=(0,a.Z)(ae.prototype,"notificationsManagementFlow",[ne],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ue=(0,a.Z)(ae.prototype,"positioningService",[se],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),he=(0,a.Z)(ae.prototype,"nodeManagementFlow",[ie],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ye=(0,a.Z)(ae.prototype,"localHistoryStackFlow",[re],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ae)},90511:function(e,t,o){o.d(t,{k:function(){return i}});var n=o(67294),s=o(85893);const i=e=>{const{component:t}=e,o=(0,n.useRef)(null),{0:i,1:r}=(0,n.useState)(!1);return(0,n.useEffect)((()=>{if(!o.current)return;const e=window.exports.ReactDOM;if(!e){const e=document.createElement("div"),t=document.createElement("span");return t.innerHTML="ReactDOM was not exposed from the renderer",e.appendChild(t),void o.current.appendChild(e)}const s=n.createElement(t);e.render(s,o.current),r(!0)}),[t]),(0,n.useEffect)((()=>{if(!o.current||!i)return;const e=document.getElementsByClassName("sidebar-content")[0].offsetWidth||256,t=o.current.offsetWidth,n=o.current.offsetHeight,s=Math.min(e/t,200/n);s>1||(o.current.style.transform=`scale(${s})`)}),[i]),(0,s.jsx)("div",{ref:o})}},21753:function(e,t,o){o.d(t,{YZ:function(){return j},Hj:function(){return N},qr:function(){return S}});var n,s=o(92809),i=o(65988),r=o(67294),a=o(77739),l=o(81593),c=o(6945),d=o(89361),p=o(81665),u=o(55193),h=o(36565),y=o(52440),m=o(54521),f=o(6566),b=o(39457),g=o(85893);function I(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function v(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?I(Object(o),!0).forEach((function(t){(0,s.Z)(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):I(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}!function(e){e.HEAD="head",e.BODY="body"}(n||(n={}));const j="\x3c!--This is the head section--\x3e\n\x3c!-- <style> ... </style> --\x3e",N='\x3c!-- Your body code here --\x3e\n\x3c!-- <script type="text/javascript"> ... <\/script> --\x3e',x=r.lazy((()=>Promise.all([o.e(19604),o.e(1682),o.e(45397)]).then(o.bind(o,45397)))),S=e=>{const{0:t,1:o}=(0,r.useState)(e.code),{0:s,1:I}=(0,r.useState)(!0),{0:S,1:w}=(0,r.useState)(n.HEAD),{0:O,1:T}=(0,r.useState)(),{0:_,1:E}=(0,r.useState)(),{0:D,1:F}=(0,r.useState)(""),{0:C,1:A}=(0,r.useState)("");(0,m.R)({isPristine:s}),(0,r.useEffect)((()=>{const o=JSON.stringify(e.code)!==JSON.stringify(t)||e.code.tagManagerId!==_||e.code.googleAnalyticsId!==O;I(!o)}),[t,O,_]),(0,r.useEffect)((()=>{T(t.googleAnalyticsId),E(t.tagManagerId)}),[t.tagManagerId,t.googleAnalyticsId]),(0,r.useEffect)((()=>{!O||c.vL.test(O)?F(""):F(c.NG.UNSAFE_CHARACTERS_DETECTED)}),[O]),(0,r.useEffect)((()=>{!_||c.vL.test(_)?A(""):A(c.NG.UNSAFE_CHARACTERS_DETECTED)}),[_]);const k=(0,r.useCallback)((e=>{const t=e.currentTarget.value,o=e.currentTarget.getAttribute("data-property");o&&("tagManagerId"===o&&(A(""),E(t)),"googleAnalyticsId"===o&&(F(""),T(t)))}),[]),P=(0,r.useCallback)((()=>{e.saveSettings({settings:{code:v(v({},t),{},{googleAnalyticsId:O,tagManagerId:_})}}),I(!0),h.Z.mixpanelEvent(h.Z.AnalyticsEvents.SETTING_CUSTOM_CODE_SAVE),h.Z.customEvents.setting.customCodeSave()}),[t,O,_]),U=e.limitations.ANALYTICS_SCRIPTS||t.googleAnalyticsId||t.tagManagerId;return(0,g.jsxs)("div",{className:`jsx-${l.Z.__hash}`,children:[(0,g.jsx)("div",{className:`jsx-${l.Z.__hash} form-title`,children:"Google"}),U?(0,g.jsx)("div",{className:`jsx-${l.Z.__hash} form-section sub-section`,children:(0,g.jsxs)(f.K,{gap:"three",children:[(0,g.jsxs)("div",{className:`jsx-${l.Z.__hash}`,children:[(0,g.jsx)("label",{className:`jsx-${l.Z.__hash} section-label`,children:"Analytics"}),(0,g.jsxs)("p",{className:`jsx-${l.Z.__hash} info-text`,children:["You can find your Google Analytics ID"," ",(0,g.jsx)("a",{target:"_blank",href:"https://support.google.com/analytics/answer/1008080",rel:"noopener noreferrer",tabIndex:-1,className:`jsx-${l.Z.__hash}`,children:"here"})]}),(0,g.jsx)("div",{className:`jsx-${l.Z.__hash} slug-input-container`,children:(0,g.jsx)(a.II,{onChange:k,"data-property":"googleAnalyticsId",value:O,sizeType:"wide",placeholder:"Google Analytics ID",validationMessage:D})})]}),(0,g.jsxs)("div",{className:`jsx-${l.Z.__hash}`,children:[(0,g.jsx)("label",{className:`jsx-${l.Z.__hash} section-label`,children:"Tag Manager"}),(0,g.jsxs)("p",{className:`jsx-${l.Z.__hash} info-text`,children:["You can find your Google Tag Manager ID"," ",(0,g.jsx)("a",{target:"_blank",href:"https://support.google.com/tagmanager/answer/6103696",rel:"noopener noreferrer",tabIndex:-1,className:`jsx-${l.Z.__hash}`,children:"here"})]}),(0,g.jsx)("div",{className:`jsx-${l.Z.__hash} slug-input-container`,children:(0,g.jsx)(a.II,{onChange:k,"data-property":"tagManagerId",value:_,sizeType:"wide",placeholder:"Tag Manager ID",validationMessage:C})})]})]})}):(0,g.jsx)(y.B,{size:"sm",title:"Add Google Analytics",description:"To benefit from Google Analytics and Google Tag Manager, upgrade your workspace."}),(0,g.jsx)("div",{className:`jsx-${l.Z.__hash} form-title extra-margin`,children:"Custom code"}),(0,g.jsxs)("p",{className:`jsx-${l.Z.__hash} info-text`,children:["Use this section if you want to add a 3rd party tool. You will not be able to interact with the 3rd party code while editing your project in the playground, this will only work on your published websites.",(0,g.jsx)("br",{className:`jsx-${l.Z.__hash}`}),"For custom fonts, use the"," ",(0,g.jsx)("a",{style:{cursor:"pointer"},onClick:()=>e.goToFonts(),tabIndex:-1,className:`jsx-${l.Z.__hash}`,children:"dedicated section"}),".",(0,g.jsx)("br",{className:`jsx-${l.Z.__hash}`}),"You can add here:"," ",(0,g.jsx)("a",{href:"https://developer.mozilla.org/en-US/docs/Web/HTML/Element/link",target:"_blank",rel:"noopener noreferrer",tabIndex:-1,className:`jsx-${l.Z.__hash}`,children:"link"}),","," ",(0,g.jsx)("a",{href:"https://developer.mozilla.org/en-US/docs/Web/HTML/Element/meta",target:"_blank",rel:"noopener noreferrer",tabIndex:-1,className:`jsx-${l.Z.__hash}`,children:"meta"}),","," ",(0,g.jsx)("a",{href:"https://developer.mozilla.org/en-US/docs/Web/HTML/Element/style",target:"_blank",rel:"noopener noreferrer",tabIndex:-1,className:`jsx-${l.Z.__hash}`,children:"style"})," ","and"," ",(0,g.jsx)("a",{href:"https://developer.mozilla.org/en-US/docs/Web/HTML/Element/script",target:"_blank",rel:"noopener noreferrer",tabIndex:-1,className:`jsx-${l.Z.__hash}`,children:"script"}),". Read more about what kind of html code is valid in the"," ",(0,g.jsx)("a",{href:"https://developer.mozilla.org/en-US/docs/Web/HTML/Element/head",target:"_blank",rel:"noopener noreferrer",tabIndex:-1,className:`jsx-${l.Z.__hash}`,children:"head"})," ","and"," ",(0,g.jsx)("a",{href:"https://developer.mozilla.org/en-US/docs/Web/HTML/Element/body",target:"_blank",rel:"noopener noreferrer",tabIndex:-1,className:`jsx-${l.Z.__hash}`,children:"body"})," ","tags documentation. If the embeddable code has opening and/or closing tags, make sure to add them too.",(0,g.jsx)("br",{className:`jsx-${l.Z.__hash}`}),(0,g.jsx)("br",{className:`jsx-${l.Z.__hash}`}),(0,g.jsx)("em",{className:`jsx-${l.Z.__hash}`,children:"WARNING: Invalid code added here might break your website."})]}),(0,g.jsxs)("div",{className:`jsx-${l.Z.__hash}`,children:[(0,g.jsxs)(p.h,{behavior:"tabs",gap:"one",onSelectionChange:e=>w(e),selectedButton:S,children:[(0,g.jsx)(u.C,{actionName:n.HEAD,style:"transparent",colorScheme:"neutral",children:"Head"}),(0,g.jsx)(u.C,{actionName:n.BODY,style:"transparent",colorScheme:"neutral",children:"Body"})]}),(0,g.jsx)(r.Suspense,{fallback:(0,g.jsx)(b.Z,{}),children:(0,g.jsx)(x,{onChange:e=>{e&&o((t=>v(v(v({},t),S===n.HEAD&&{headTag:e}),S===n.BODY&&{bodyTag:e})))},code:(()=>{let e;var o,s;S===n.HEAD?e=null!==(o=null===t||void 0===t?void 0:t.headTag)&&void 0!==o?o:j:e=null!==(s=null===t||void 0===t?void 0:t.bodyTag)&&void 0!==s?s:N;return e})()})}),(0,g.jsx)("div",{className:`jsx-${l.Z.__hash} submit-btn extra-margin`,children:(0,g.jsx)(d.z,{onClick:P,isDisabled:s||!!D||!!C,children:"Save Changes"})})]}),(0,g.jsx)(i.default,{id:l.Z.__hash,children:l.Z})]})}},81593:function(e,t,o){var n=o(65989);const s=[".section-wrapper.jsx-3942877160{-webkit-flex:1;-ms-flex:1;flex:1;max-width:800px;}",".section.jsx-3942877160{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;width:100%;}",".form-title.jsx-3942877160{font-weight:bold;line-height:2;}",".form-section.jsx-3942877160{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;width:100%;}",".fonts-list.jsx-3942877160{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}",".disabled.jsx-3942877160{opacity:0.3;}",".form-section.jsx-3942877160 .subdomain-text.jsx-3942877160{margin:3px;color:#a6a6a6;}",".form-section.jsx-3942877160 .subdomain-input-icon.jsx-3942877160{position:absolute;right:100px;line-height:2.4;}",".form-section.jsx-3942877160 .tokens-after-icon.jsx-3942877160{top:10px;}",`.info-text.jsx-3942877160{color:${n.bo.FADED};line-height:1.4;margin-bottom:${n.N_.UNIT};}`,`.info-text.jsx-3942877160 a.jsx-3942877160{-webkit-text-decoration:underline;text-decoration:underline;color:${n.bo.FADED};}`,`.section-label.jsx-3942877160{line-height:2;color:${n.bo.HIGHLIGHT};}`,`.item-info.jsx-3942877160{display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;color:${n.bo.INFO};}`,`.item-info.jsx-3942877160:hover{color:${n.bo.HIGHLIGHT};}`,".textarea-field.jsx-3942877160{position:relative;}",".validation-message.jsx-3942877160{font-size:10px;position:absolute;bottom:-20px;left:0;}",".item-info:hover button{opacity:1 !important;}",".item-info.jsx-3942877160 .label.jsx-3942877160{font-weight:bold;}",".item-info.jsx-3942877160 .description.jsx-3942877160{word-break:break-all;}",".font-info.jsx-3942877160{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}",`.submit-btn.jsx-3942877160{margin:${n.N_.THREE_UNITS} 0;}`,`.extra-margin.jsx-3942877160{margin-top:${n.N_.THREE_UNITS};}`,".language-element.jsx-3942877160{margin-top:64px;}",".hidden-input.jsx-3942877160{display:none;}",".submit-btn.jsx-3942877160 button.jsx-3942877160{margin:0 !important;}",".assets-stats-section.jsx-3942877160 p.jsx-3942877160{margin-top:4px;}",`.textarea-section.jsx-3942877160{margin-top:${n.N_.FOUR_UNITS};position:relative;border-radius:4px;}`,".textarea-section .thq-textarea{padding:0 24px 0 0;}",".textarea-section.jsx-3942877160::before,.textarea-section.jsx-3942877160::after{position:absolute;left:16px;}",".textarea-section.jsx-3942877160::before{top:-20px;}",".textarea-section.jsx-3942877160::after{bottom:-16px;}",".head.textarea-section.jsx-3942877160::before{content:'<head>';}",".head.textarea-section.jsx-3942877160::after{content:'</head>';}",".body.textarea-section.jsx-3942877160::before{content:'<body>';}",".body.textarea-section.jsx-3942877160::after{content:'</body>';}",".checkbox-wrapper.jsx-3942877160{-webkit-align-self:center;-ms-flex-item-align:center;align-self:center;}",`.feature-container.jsx-3942877160{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;gap:${n.N_.UNIT};}`,`.feature-description.jsx-3942877160{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex:1;-ms-flex:1;flex:1;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;gap:${n.N_.FOUR_UNITS};-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;}`,`.disclaimer-banner.jsx-3942877160{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;font-size:14px;gap:${n.N_.UNIT};padding:${n.N_.ONE_AND_HALF};width:100%;border-radius:${n.n_.DEFAULT};color:${n.bo.FADED};border:1px solid ${n.GC.DARK};border-left:4px solid ${n.z8.WARNING_LIGHT};}`,"@media (max-width:900px){.form-section.jsx-3942877160{grid-gap:16px;}.validation-message.jsx-3942877160{margin-bottom:-7px;}.textarea-field.jsx-3942877160{margin-bottom:20px;}}","@media (max-width:650px){.form-section.jsx-3942877160{grid-template-columns:60px 1fr 1fr;}.fonts-list.jsx-3942877160{grid-template-columns:1fr 1fr;}}","@media (max-width:500px){.form-section.jsx-3942877160{grid-template-columns:1fr;grid-gap:24px;}.extra-margin.jsx-3942877160{margin-top:0;}.validation-message.jsx-3942877160{margin-top:4px;position:static;}.textarea-field.jsx-3942877160{margin-bottom:0;}}"];s.__hash="3942877160",t.Z=s},53590:function(e,t,o){var n,s,i,r,a,l,c,d,p,u,h,y,m,f,b,g=o(73202),I=o(92809),v=o(30773),j=o(76883),N=o(11163),x=o(49899),S=o(5395),w=o(23861),O=o(6945),T=o(20510);function _(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function E(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?_(Object(o),!0).forEach((function(t){(0,I.Z)(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):_(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}n=(0,j.JJ)("projectManagementFlow"),s=(0,j.f3)("sharedbProjectSyncService"),i=(0,j.f3)("projectDoc"),r=(0,j.f3)("projectUIState"),a=(0,j.f3)("assetsUploadFlow"),l=(0,j.f3)("assetsEditFlow"),c=(0,j.f3)("projectRepository"),n((p=class{constructor(){(0,g.Z)(this,"dbSync",u,this),(0,g.Z)(this,"projectDoc",h,this),(0,g.Z)(this,"projectUIState",y,this),(0,g.Z)(this,"assetsUploadFlow",m,this),(0,g.Z)(this,"assetsEditFlow",f,this),(0,g.Z)(this,"projectRepository",b,this)}updateSettings(e){this.dbSync.mutate(this.projectDoc,(t=>{t.settings=e}))}async updateIntegrationTokens(e){await this.projectRepository.update(this.projectDoc.id,e);const t=E(E({},null!==e&&void 0!==e&&e.githubToken?{githubToken:!0}:{githubToken:null}),null!==e&&void 0!==e&&e.vercelToken?{vercelToken:!0}:{vercelToken:null});return(0,x.JG)(this.projectUIState,(e=>{e.tokens=t})),t}async changeProjectTitle(e){try{await this.projectRepository.update(this.projectDoc.id,{name:e}),(0,x.JG)(this.projectUIState,(t=>{t.title=e}))}catch(t){throw new Error("There was a problem updating the project title")}}async redirectToProject(){const e=this.projectUIState.selection.componentId||this.projectDoc.pages.getHomePageId()||this.projectDoc.pages.getIds()[0];N.default.push((0,T.aZ)("[slug]","[compId]"),(0,T.aZ)(this.projectUIState.slug,e))}async uploadSettingsImage(e,t){const o=[];Object.values(this.projectDoc.assets.byId||{}).forEach((e=>{e.type===t&&o.push(e.id)})),this.assetsEditFlow.delete(o);const n=this.assetsUploadFlow.upload({files:e,assetType:t,parentFolderId:w.D.ASSETS});if(t===S.K.PROJECT_OG_IMAGE){const e=await n;if(null===e||void 0===e||!e.length)return n;this.projectRepository.update(this.projectDoc.id,{socialImage:e[0].path})}return n}async checkIfVercelAliasIsAvailable(e){return await this.projectRepository.checkIfVercelAliasIsAvailable(e)}async changeTeleportVercelAlias(e){try{await this.projectRepository.updateVercelAlias(this.projectDoc.id,e),(0,x.JG)(this.projectUIState,(t=>{t.teleportVercelAlias=e}))}catch(t){throw new Error(O.wn.COULD_NOT_UPDATE_ALIAS)}}},u=(0,v.Z)(p.prototype,"dbSync",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),h=(0,v.Z)(p.prototype,"projectDoc",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),y=(0,v.Z)(p.prototype,"projectUIState",[r],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),m=(0,v.Z)(p.prototype,"assetsUploadFlow",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),f=(0,v.Z)(p.prototype,"assetsEditFlow",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),b=(0,v.Z)(p.prototype,"projectRepository",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),d=p))},54521:function(e,t,o){o.d(t,{R:function(){return i}});var n=o(67294),s=o(11163);function i({isPristine:e,message:t="You have unsaved changes. Are you sure you want to leave?"}){const o=(0,s.useRouter)(),i=n.useCallback((()=>{if(!e){if(window.confirm(t))return!0;throw"Abort route change by user's confirmation."}}),[e]);n.useEffect((()=>(o.events.on("routeChangeStart",i),()=>{o.events.off("routeChangeStart",i)})),[i])}},88439:function(e,t,o){o.d(t,{gS:function(){return s},hN:function(){return i},$e:function(){return r},f7:function(){return a},lF:function(){return c},$W:function(){return d},Gz:function(){return p}});var n=o(65989);const s=e=>e.replace(/[A-Z]/g,(e=>`-${e.toLowerCase()}`)),i=e=>e.replace(/-+([a-z])/g,(e=>e[e.length-1].toUpperCase())),r=(e,t,o)=>Object.keys(e).reduce(((n,i)=>{const r="stage"===t&&e[i].includes("vh")?l(e[i]):e[i];return!o&&"stage"===t&&i.indexOf("transition")>-1?n:`${n} ${s(i)}: ${r};`}),""),a=e=>Object.keys(e||{}).reduce(((t,o)=>t=`${t} \n .${o} { ${e[o]} }`),""),l=e=>10*Number(e.trim().slice(0,-2))+"px",c=e=>{const t="#"===e.charAt(0)?e.substring(1,7):e;return.299*parseInt(t.substring(0,2),16)+.587*parseInt(t.substring(2,4),16)+.114*parseInt(t.substring(4,6),16)>186?n.Pt.DEFAULT:n.bo.DEFAULT},d=(e,t)=>{const o=parseInt(e.slice(1,3),16),n=parseInt(e.slice(3,5),16),s=parseInt(e.slice(5,7),16);return t?`rgba(${o}, ${n}, ${s}, ${t})`:`rgb(${o}, ${n}, ${s})`},p=e=>(e=>e[0].toUpperCase()+e.slice(1))(i(e))},20722:function(e,t,o){o.d(t,{Z:function(){return We}});var n=o(92809),s=o(97283),i=o(28295);const r=e=>(0,i.G0)(e,(0,i.a9)(null));class a extends Error{constructor(e){super(e)}}var l=o(77736),c=o(53482),d=o(16815);const p=(0,i.G0)((0,i.Vo)((()=>u)),(0,i.Vo)((()=>h)),(0,i.Vo)((()=>y)),(0,i.Vo)((()=>m)),(0,i.Vo)((()=>f))),u=(0,i.Ry)({type:(0,i.a9)("style-map"),id:(0,i.Z_)(),content:(0,i.Ry)({mapType:(0,i.a9)("design-language-referenced"),referenceId:(0,i.Z_)()})}),h=(0,i.Ry)({type:(0,i.a9)("style-map"),id:(0,i.Z_)(),content:(0,i.Ry)({mapType:(0,i.a9)("inlined"),conditions:(0,i.jt)((0,i.IX)((0,i.Vo)((()=>b)))),styles:(0,i.dz)((0,i.G0)((0,i.Vo)((()=>k)),(0,i.Vo)((()=>P))))})}),y=(0,i.Ry)({type:(0,i.a9)("style-map"),id:(0,i.Z_)(),content:(0,i.Ry)({mapType:(0,i.a9)("project-referenced"),conditions:(0,i.jt)((0,i.IX)((0,i.Vo)((()=>b)))),referenceId:(0,i.Z_)()})}),m=(0,i.Ry)({type:(0,i.a9)("style-map"),id:(0,i.Z_)(),content:(0,i.Ry)({mapType:(0,i.a9)("component-referenced"),content:(0,i.Ry)({type:(0,i.a9)("static"),content:(0,i.Z_)()})})}),f=(0,i.Ry)({type:(0,i.a9)("style-map"),id:(0,i.Z_)(),content:(0,i.Ry)({mapType:(0,i.a9)("component-referenced"),content:(0,i.Ry)({type:(0,i.a9)("dynamic"),content:(0,i.Ry)({referenceType:(0,i.G0)((0,i.a9)("comp"),(0,i.a9)("prop")),id:(0,i.Z_)()})})})}),b=(0,i.G0)((0,i.Vo)((()=>g)),(0,i.Vo)((()=>I))),g=(0,i.Ry)({conditionType:(0,i.a9)("screen-size"),maxHeight:(0,i.jt)((0,i.Rx)()),maxWidth:(0,i.jt)((0,i.Rx)()),minHeight:(0,i.jt)((0,i.Rx)()),minWidth:(0,i.jt)((0,i.Rx)())}),I=(0,i.Ry)({conditionType:(0,i.a9)("element-state"),content:(0,i.Vo)((()=>v))}),v=(0,i.G0)((0,i.a9)(d.F.hover),(0,i.a9)(d.F.focus),(0,i.a9)(d.F.active),(0,i.a9)(d.F.disabled),(0,i.a9)(d.F.checked),(0,i.a9)(d.F["focus-visible"]),(0,i.a9)(d.F["focus-within"]));var j=o(16883),N=o(77729);const x=(0,i.Ry)({type:(0,i.Vo)((()=>S)),content:(0,i.Vo)((()=>w))}),S=(0,i.Vo)((()=>F)),w=(0,i.G0)((0,i.Vo)((()=>O)),(0,i.Vo)((()=>_)),(0,i.Vo)((()=>T)),(0,i.Vo)((()=>E)),(0,i.Vo)((()=>D))),O=(0,i.Ry)({phone:(0,i.G0)((0,i.Z_)(),(0,i.Vo)((()=>P)))}),T=(0,i.Ry)({url:(0,i.G0)((0,i.Z_)(),(0,i.Vo)((()=>P))),newTab:(0,i.O7)()}),_=(0,i.Ry)({mail:(0,i.G0)((0,i.Z_)(),(0,i.Vo)((()=>P))),subject:(0,i.jt)((0,i.G0)((0,i.Z_)(),(0,i.Vo)((()=>P)))),body:(0,i.jt)((0,i.G0)((0,i.Z_)(),(0,i.Vo)((()=>P))))}),E=(0,i.Ry)({routeName:(0,i.Z_)()}),D=(0,i.Ry)({section:(0,i.Z_)()}),F=(0,i.G0)((0,i.a9)(N.RZ.URL),(0,i.a9)(N.RZ.MAIL),(0,i.a9)(N.RZ.PHONE),(0,i.a9)(N.RZ.SECTION),(0,i.a9)(N.RZ.NAVLINK));var C=o(75222);const A=(0,i.G0)((0,i.Vo)((()=>k)),(0,i.Vo)((()=>P))),k=(0,i.Ry)({id:(0,i.Z_)(),type:(0,i.a9)("static"),content:(0,i.G0)((0,i.Z_)(),(0,i.Rx)()),pos:(0,i.Z_)()}),P=(0,i.Ry)({id:(0,i.Z_)(),type:(0,i.a9)("dynamic"),content:(0,i.Vo)((()=>Z)),pos:(0,i.Z_)()}),U=(0,i.Ry)({type:(0,i.a9)("conditional"),reference:(0,i.Vo)((()=>P)),value:(0,i.kw)((0,i.Z_)())}),L=(0,i.Ry)({id:(0,i.Z_)(),name:(0,i.jt)(r((0,i.Z_)())),parentId:(0,i.jt)(r((0,i.Z_)())),styles:(0,i.dz)((0,i.G0)(k,P)),tempStyles:(0,i.jt)((0,i.dz)((0,i.G0)(k,P))),devComponentPath:(0,i.jt)(r((0,i.Z_)())),attrs:(0,i.dz)((0,i.G0)(A,(0,i.Ry)({id:(0,i.Z_)(),type:(0,i.a9)("comp-style"),content:(0,i.Z_)()}))),abilities:(0,i.jt)((0,i.dz)(x)),referencedStyles:(0,i.dz)(p),tempInlineStyles:(0,i.dz)(h),events:(0,i.dz)((0,i.dz)((0,i.Vo)((()=>z)))),childrenIds:(0,i.dz)((0,i.O7)()),contentChildren:(0,i.jt)((0,i.dz)(A)),semanticType:(0,i.jt)(r((0,i.Vo)((()=>B)))),primitiveType:r((0,i.Vo)((()=>R))),fakeSize:(0,i.jt)(r((0,i.O7)())),pos:(0,i.Z_)(),dependency:(0,i.jt)((0,i.jV)((0,i.Ry)({id:(0,i.Z_)()}),j.dependencyDecoder)),compIdOfCompInstance:(0,i.jt)(r((0,i.Z_)())),compIdOfRootNode:(0,i.jt)(r((0,i.Z_)())),renderingConditions:r((0,i.Vo)((()=>U)))}),Z=((0,i.jV)((0,i.Ry)({id:(0,i.Z_)()}),j.dependencyDecoder),(0,i.Ry)({referenceType:(0,i.G0)((0,i.a9)("prop"),(0,i.a9)("token"),(0,i.a9)("state")),id:(0,i.Z_)(),defaultValue:(0,i.jt)((0,i.Z_)())})),R=((0,i.kw)((0,i.a9)(c.SO.TEXT),(0,i.a9)(c.SO.TEXT_AREA),(0,i.a9)(c.SO.IMAGE),(0,i.a9)(c.SO.LINK),(0,i.a9)(c.SO.EMAIL),(0,i.a9)(c.SO.PHONE),(0,i.a9)(c.SO.BOOLEAN),(0,i.a9)(c.SO.NUMBER),(0,i.a9)(c.SO.SELECT)),(0,i.kw)((0,i.a9)(C.sO.CONTAINER),(0,i.a9)(C.sO.TEXT),(0,i.a9)(C.sO.IMAGE),(0,i.a9)(C.sO.ICON),(0,i.a9)(C.sO.VIDEO),(0,i.a9)(C.sO.FORM),(0,i.a9)(C.sO.BUTTON),(0,i.a9)(C.sO.TEXTINPUT),(0,i.a9)(C.sO.CHECKBOX),(0,i.a9)(C.sO.RADIOBUTTON),(0,i.a9)(C.sO.TEXTAREA),(0,i.a9)(C.sO.IFRAME),(0,i.a9)(C.sO.COMPONENT),(0,i.a9)(C.sO.LINK),(0,i.a9)(C.sO.MIXED),(0,i.a9)(C.sO.LINEBREAK),(0,i.a9)(C.sO.DEV_COMPONENT))),M=(0,i.kw)((0,i.a9)(C.iX.DIV),(0,i.a9)(C.iX.ARTICLE),(0,i.a9)(C.iX.SECTION),(0,i.a9)(C.iX.ASIDE),(0,i.a9)(C.iX.NAV),(0,i.a9)(C.iX.HEADER),(0,i.a9)(C.iX.MAIN),(0,i.a9)(C.iX.FOOTER),(0,i.a9)(C.iX.FIGURE)),H=(0,i.kw)((0,i.a9)(C.RY.SPAN),(0,i.a9)(C.RY.LABEL),(0,i.a9)(C.RY.STRONG),(0,i.a9)(C.RY.PARAGRAPH),(0,i.a9)(C.RY.HEADING1),(0,i.a9)(C.RY.HEADING2),(0,i.a9)(C.RY.HEADING3),(0,i.a9)(C.RY.HEADING4),(0,i.a9)(C.RY.HEADING5),(0,i.a9)(C.RY.HEADING6),(0,i.a9)(C.RY.BOLD),(0,i.a9)(C.RY.ITALIC),(0,i.a9)(C.RY.EMPHASIZE),(0,i.a9)(C.RY.UNDERLINE),(0,i.a9)(C.RY.STRIKE),(0,i.a9)(C.RY.DELETED),(0,i.a9)(C.RY.PRE),(0,i.a9)(C.RY.CODE),(0,i.a9)(C.RY.BLOCKQUOTE),(0,i.a9)(C.RY.FIGCAPTION),(0,i.a9)(C.RY.CITE)),$=(0,i.kw)((0,i.a9)(C.qo.PATH)),B=(0,i.G0)(M,H,$,(0,i.a9)(C.sO.DEV_COMPONENT)),G=(0,i.Ry)({id:(0,i.Z_)(),type:(0,i.a9)("propCall"),calls:(0,i.Z_)(),args:(0,i.jt)((0,i.IX)((0,i.G0)((0,i.Z_)(),(0,i.Rx)(),(0,i.O7)()))),pos:(0,i.Z_)()}),z=((0,i.Ry)({id:(0,i.Z_)(),type:(0,i.a9)("stateChange"),modifies:(0,i.Z_)(),newState:(0,i.G0)((0,i.Z_)(),(0,i.Rx)(),(0,i.O7)()),pos:(0,i.Z_)()}),G),W=(0,i.Ry)({title:(0,i.Z_)(),id:(0,i.Z_)(),pos:(0,i.Z_)(),rootNodeId:(0,i.jt)((0,i.Z_)()),instantiatedByNodes:(0,i.dz)((0,i.O7)()),usedComponents:(0,i.dz)((0,i.Rx)()),stateDefinitions:(0,i.dz)((0,i.Vo)((()=>J))),propDefinitions:(0,i.dz)((0,i.Vo)((()=>K))),sectionIds:(0,i.dz)((0,i.Z_)()),styleSetDefinitions:(0,i.dz)((0,i.Vo)((()=>V))),checkerRenderStyle:(0,i.jt)((0,i.Vo)((()=>q)))}),V=(0,i.Ry)({styles:(0,i.dz)((0,i.G0)(k,P)),referencedStyles:(0,i.dz)(p),usedByInstances:(0,i.dz)((0,i.O7)())}),K=(0,i.Ry)({id:(0,i.Z_)(),defaultValue:(0,i.Z_)(),type:(0,i.kw)((0,i.a9)("string"),(0,i.a9)("number"),(0,i.a9)("boolean"),(0,i.a9)("func")),name:(0,i.Z_)(),locations:(0,i.dz)((0,i.dz)((0,i.Vo)((()=>Q)))),inputType:(0,i.Vo)((()=>X))}),J=(0,i.Ry)({id:(0,i.Z_)(),name:(0,i.Z_)(),type:(0,i.kw)((0,i.a9)("string"),(0,i.a9)("number"),(0,i.a9)("boolean")),defaultValue:(0,i.Z_)(),inputType:(0,i.Vo)((()=>Y))}),X=(0,i.kw)((0,i.a9)(c.SO.TEXT),(0,i.a9)(c.SO.TEXT_AREA),(0,i.a9)(c.SO.IMAGE),(0,i.a9)(c.SO.LINK),(0,i.a9)(c.SO.EMAIL),(0,i.a9)(c.SO.PHONE),(0,i.a9)(c.SO.NUMBER),(0,i.a9)(c.SO.SELECT)),Y=(0,i.kw)((0,i.a9)(c.Pk.TEXT),(0,i.a9)(c.Pk.BOOLEAN)),q=(0,i.G0)((0,i.a9)(l.wY.WHITE_CHESS),(0,i.a9)(l.wY.BLACK_CHESS)),Q=(0,i.Ry)({base:(0,i.Vo)((()=>ee)),sufix:(0,i.jt)((0,i.Vo)((()=>te)))}),ee=(0,i.kw)((0,i.a9)(c.hD.CONTENT),(0,i.a9)(c.hD.STYLE),(0,i.a9)(c.hD.ATTR),(0,i.a9)(c.hD.ABILITY),(0,i.a9)(c.hD.EVENT)),te=(0,i.G0)((0,i.Vo)((()=>oe)),(0,i.Vo)((()=>ne))),oe=(0,i.G0)((0,i.a9)("src"),(0,i.a9)("alt"),(0,i.a9)("placeholder")),ne=(0,i.G0)((0,i.a9)("url"),(0,i.a9)("phone"),(0,i.a9)("mail"),(0,i.a9)("subject")),se=((0,i.kw)((0,i.a9)("click"),(0,i.a9)("mouseenter"),(0,i.a9)("mouseleave"),(0,i.a9)("mouseover"),(0,i.a9)("focus"),(0,i.a9)("blur"),(0,i.a9)("scroll"),(0,i.a9)("keydown"),(0,i.a9)("keyup"),(0,i.a9)("keypress"),(0,i.a9)("change"),(0,i.a9)("submit"),(0,i.a9)("select"),(0,i.a9)("touchstart"),(0,i.a9)("touchend"),(0,i.a9)("load")),(0,i.Ry)({general:(0,i.jt)((0,i.Vo)((()=>ae))),code:(0,i.jt)((0,i.Vo)((()=>re))),social:(0,i.jt)((0,i.Vo)((()=>ie)))})),ie=(0,i.Ry)({title:(0,i.jt)((0,i.Z_)()),description:(0,i.jt)((0,i.Z_)()),image:(0,i.jt)((0,i.Z_)())}),re=(0,i.Ry)({googleAnalyticsId:(0,i.jt)((0,i.Z_)()),tagManagerId:(0,i.jt)((0,i.Z_)()),headTag:(0,i.jt)((0,i.Z_)()),bodyTag:(0,i.jt)((0,i.Z_)())}),ae=(0,i.Ry)({title:(0,i.jt)((0,i.Z_)()),language:(0,i.jt)((0,i.Z_)()),description:(0,i.jt)((0,i.Z_)()),favicon:(0,i.jt)((0,i.Z_)())}),le=(0,i.Ry)({deployments:(0,i.jt)((0,i.Ry)({teleport:(0,i.jt)((0,i.Z_)()),vercel:(0,i.jt)((0,i.Z_)()),custom:(0,i.jt)((0,i.Z_)())}))}),ce=(0,i.G0)((0,i.a9)("google"),(0,i.a9)("custom"),(0,i.a9)("system")),de=(0,i.jV)((0,i.Vo)((()=>pe)),(0,i.Ry)({path:(0,i.Z_)()})),pe=(0,i.Ry)({id:(0,i.Z_)(),name:(0,i.Z_)(),type:ce,usedInNodes:(0,i.dz)((0,i.Rx)()),usedInTokens:(0,i.dz)((0,i.O7)())}),ue=(0,i.Ry)({id:(0,i.Z_)(),title:(0,i.Z_)(),pos:(0,i.Z_)(),isHomePage:(0,i.jt)((0,i.O7)()),settings:(0,i.Vo)((()=>he)),sectionIds:(0,i.dz)((0,i.Z_)()),usedComponents:(0,i.dz)((0,i.Rx)()),rootNodeId:(0,i.jt)((0,i.Z_)())}),he=(0,i.Ry)({url:(0,i.jt)(r((0,i.Z_)())),seoTitle:(0,i.jt)(r((0,i.Z_)())),seoDescription:(0,i.jt)(r((0,i.Z_)())),socialTitle:(0,i.jt)(r((0,i.Z_)())),socialDescription:(0,i.jt)(r((0,i.Z_)())),socialImage:(0,i.jt)(r((0,i.Z_)()))}),ye=(0,i.Ry)({id:(0,i.Z_)(),name:(0,i.Z_)(),parentId:r((0,i.Z_)()),post:(0,i.jt)((0,i.Z_)()),children:(0,i.Vo)((()=>me))}),me=((0,i.G0)((0,i.a9)("folder"),(0,i.a9)("page"),(0,i.a9)("component"),(0,i.a9)("asset")),(0,i.dz)((0,i.G0)((0,i.a9)("folder"),(0,i.a9)("page"),(0,i.a9)("component"),(0,i.a9)("asset"))));var fe=o(5395);const be=(0,i.kw)((0,i.a9)(fe.K.IMAGE),(0,i.a9)(fe.K.FAVICON),(0,i.a9)(fe.K.PROJECT_OG_IMAGE),(0,i.a9)(fe.K.PAGE_OG_IMAGE),(0,i.a9)(fe.K.VIDEO)),ge=(0,i.Ry)({id:(0,i.Z_)(),name:(0,i.Z_)(),mimetype:(0,i.Z_)(),path:(0,i.Z_)(),type:be,size:(0,i.Rx)(),usedInNodes:(0,i.dz)((0,i.O7)()),parentFolderId:(0,i.Z_)()});var Ie=o(7446),ve=o(62256);const je=(0,i.Ry)({id:(0,i.Z_)(),name:(0,i.Z_)(),content:(0,i.Vo)((()=>we)),identifier:(0,i.Z_)(),type:(0,i.a9)(Ie.i.TEXT_STYLE),categoryId:(0,i.Z_)(),position:(0,i.Rx)(),role:(0,i.jt)((0,i.a9)("default")),usedInNodes:(0,i.dz)((0,i.O7)())}),Ne=(0,i.Ry)({id:(0,i.Z_)(),name:(0,i.Z_)(),section:(0,i.Vo)((()=>Se)),position:(0,i.Rx)()}),xe=(0,i.Ry)({id:(0,i.Z_)(),name:(0,i.Z_)(),value:(0,i.Z_)(),type:(0,i.Vo)((()=>Oe)),categoryId:(0,i.Z_)(),position:(0,i.Rx)(),role:(0,i.jt)((0,i.Vo)((()=>Te))),usedInNodes:(0,i.dz)((0,i.Rx)())}),Se=(0,i.G0)((0,i.a9)("colors"),(0,i.a9)("layout"),(0,i.a9)("typography")),we=(0,i.Ry)({fontFamily:(0,i.jt)(A),fontSize:(0,i.jt)(A),lineHeight:(0,i.jt)(A),letterSpacing:(0,i.jt)(A),fontWeight:(0,i.jt)(k),fontStyle:(0,i.jt)(A),textDecoration:(0,i.jt)(k),textTransform:(0,i.jt)(A)}),Oe=(0,i.kw)((0,i.a9)(Ie.i.COLOR),(0,i.a9)(Ie.i.SIZE),(0,i.a9)(Ie.i.SPACE),(0,i.a9)(Ie.i.RADIUS),(0,i.a9)(Ie.i.TYPEFACE),(0,i.a9)(Ie.i.TEXT_SCALE),(0,i.a9)(Ie.i.TEXT_STYLE)),Te=(0,i.G0)((0,i.a9)("background-color"),(0,i.a9)("foreground-color")),_e=(0,i.dz)((0,i.Ry)({created:(0,i.Z_)(),framework:(0,i.jt)((0,i.G0)((0,i.a9)(ve.cd.REACT),(0,i.a9)(ve.cd.NEXT)))})),Ee=(0,i.Ry)({id:(0,i.Z_)(),name:(0,i.Z_)(),content:(0,i.Z_)(),path:(0,i.Z_)(),fileType:(0,i.Z_)()});var De=o(28132);const Fe=(0,i.Ry)({id:(0,i.Z_)(),email:(0,i.Z_)(),name:(0,i.Z_)(),picture:(0,i.Z_)()}),Ce=(0,i.Ry)({id:(0,i.Z_)(),accessType:(0,i.G0)((0,i.a9)(De.Z.READ),(0,i.a9)(De.Z.WRITE),(0,i.a9)(De.Z.OWNER)),account:r(Fe),invitedEmail:r((0,i.Z_)()),meta:(0,i.jt)((0,i.HG)())}),Ae=(0,i.Ry)({byId:(0,i.dz)((0,i.Vo)((()=>ke))),categoriesById:(0,i.dz)((0,i.Ry)({name:(0,i.Z_)(),id:(0,i.Z_)()}))}),ke=(0,i.Ry)({id:(0,i.Z_)(),name:(0,i.Z_)(),type:(0,i.a9)("reusable-project-style-map"),pos:(0,i.Z_)(),isDefault:(0,i.O7)(),identifier:(0,i.Z_)(),categoryId:(0,i.Z_)(),content:(0,i.dz)(A),conditions:(0,i.dz)((0,i.Vo)((()=>Pe))),usedInNodes:(0,i.dz)((0,i.O7)()),linkedTextStyles:(0,i.dz)((0,i.O7)())}),Pe=(0,i.G0)((0,i.Vo)((()=>Ue)),(0,i.Vo)((()=>Le))),Ue=(0,i.Ry)({id:(0,i.Z_)(),type:(0,i.a9)("screen-size"),content:(0,i.dz)(k),meta:(0,i.Ry)({maxWidth:(0,i.Rx)()})}),Le=(0,i.Ry)({id:(0,i.Z_)(),type:(0,i.a9)("element-state"),content:(0,i.dz)(A),meta:(0,i.Ry)({state:(0,i.Vo)((()=>v))})});var Ze=o(84003),Re=o(72579);const Me=(0,i.Ry)({local:(0,i.dz)((0,i.Ry)({byId:(0,i.dz)((0,i.Ry)({code:(0,i.Z_)(),is_protected:(0,i.O7)(),created_at:(0,i.jt)((0,i.Rx)()),synced_at:(0,i.jt)((0,i.Rx)()),status:(0,i.jt)((0,i.G0)((0,i.a9)(Re.E.ADDED),(0,i.a9)(Re.E.NEW),(0,i.a9)(Re.E.MODIFIED),(0,i.a9)(Re.E.REMOVED),(0,i.a9)(Re.E.STAGED),(0,i.a9)(Re.E.RENAMED)))}))})),remote:(0,i.dz)((0,i.Ry)({byId:(0,i.dz)((0,i.Ry)({code:(0,i.Z_)(),is_protected:(0,i.O7)(),created_at:(0,i.jt)((0,i.Rx)()),synced_at:(0,i.jt)((0,i.Rx)()),status:(0,i.jt)((0,i.G0)((0,i.a9)(Re.E.ADDED),(0,i.a9)(Re.E.NEW),(0,i.a9)(Re.E.MODIFIED),(0,i.a9)(Re.E.REMOVED),(0,i.a9)(Re.E.STAGED),(0,i.a9)(Re.E.RENAMED)))}))})),staged:(0,i.dz)((0,i.Ry)({byId:(0,i.dz)((0,i.Ry)({code:(0,i.Z_)(),is_protected:(0,i.O7)(),created_at:(0,i.jt)((0,i.Rx)()),synced_at:(0,i.jt)((0,i.Rx)()),status:(0,i.jt)((0,i.G0)((0,i.a9)(Re.E.ADDED),(0,i.a9)(Re.E.NEW),(0,i.a9)(Re.E.MODIFIED),(0,i.a9)(Re.E.REMOVED),(0,i.a9)(Re.E.STAGED),(0,i.a9)(Re.E.RENAMED)))}))})),conflicts:(0,i.dz)((0,i.Vo)((()=>He))),lastSync:r((0,i.Rx)()),lastSave:r((0,i.Rx)()),isAddingExternalDependency:r((0,i.G0)((0,i.a9)(Re.B.ADDING),(0,i.a9)(Re.B.FAILED),(0,i.a9)(Re.B.FAILED)))}),He=(0,i.Ry)({byId:(0,i.dz)((0,i.Vo)((()=>$e))),type:(0,i.G0)((0,i.a9)("pull"),(0,i.a9)("merge")),lastCommitSha:(0,i.Z_)(),headBranch:(0,i.Z_)(),actionInProgress:(0,i.O7)(),solveInProgress:(0,i.O7)()}),$e=(0,i.Ry)({content:(0,i.Z_)(),baseContent:(0,i.Z_)(),newContent:(0,i.Z_)(),resolved:(0,i.O7)(),blocks:(0,i.dz)((0,i.Ry)({startLine:(0,i.Rx)(),endLine:(0,i.Rx)()})),localUsedLines:(0,i.dz)((0,i.IX)((0,i.Ry)({line:(0,i.Rx)(),content:(0,i.Z_)(),editorLine:(0,i.jt)((0,i.Rx)()),source:(0,i.G0)((0,i.a9)("local"),(0,i.a9)("remote"))}))),remoteUsedLines:(0,i.dz)((0,i.IX)((0,i.Ry)({line:(0,i.Rx)(),content:(0,i.Z_)(),editorLine:(0,i.jt)((0,i.Rx)()),source:(0,i.G0)((0,i.a9)("local"),(0,i.a9)("remote"))}))),diffs:(0,i.Ry)({baseDiffs:(0,i.dz)((0,i.Ry)({startLine:(0,i.Rx)(),endLine:(0,i.Rx)(),middleLine:(0,i.Rx)(),negativeRange:(0,i.jt)((0,i.O7)())})),updatedDiffs:(0,i.dz)((0,i.Ry)({startLine:(0,i.Rx)(),endLine:(0,i.Rx)(),middleLine:(0,i.Rx)(),negativeRange:(0,i.jt)((0,i.O7)())}))}),diffsOrder:(0,i.IX)((0,i.Z_)())});var Be=o(30499);const Ge=(0,i.Ry)({settings:se,stats:le,fonts:(0,i.Ry)({byId:(0,i.dz)(de)}),nodes:(0,i.Ry)({byId:(0,i.dz)(L)}),pages:(0,i.Ry)({byId:(0,i.dz)(ue)}),components:(0,i.Ry)({byId:(0,i.dz)(W)}),assets:(0,i.Ry)({byId:(0,i.dz)(ge)}),folders:(0,i.Ry)({byId:(0,i.dz)(ye)}),designLanguage:(0,i.Ry)({tokensById:(0,i.dz)(xe),categoriesById:(0,i.dz)(Ne),textStyleSetsById:(0,i.dz)(je)}),cloudComponents:(0,i.Ry)({byId:(0,i.dz)(_e)}),customFiles:(0,i.Ry)({byId:(0,i.dz)(Ee)}),classes:Ae,projectFiles:Me,collaborators:(0,i.Ry)({byId:(0,i.dz)(Ce)}),accessType:(0,i.G0)((0,i.a9)(Ze.W.PUBLIC),(0,i.a9)(Ze.W.PRIVATE),(0,i.a9)(Ze.W.CLONEABLE)),mediaQueryBreakpoints:(0,i.Ry)({byId:(0,i.dz)((0,i.Vo)((()=>ze)))}),tailwindCSS:(0,i.Ry)({byId:(0,i.dz)((0,i.dz)((0,i.Z_)()))})}),ze=(0,i.Ry)({id:(0,i.Z_)(),icon:(0,i.G0)((0,i.a9)(Be.yy["viewport/desktop"]),(0,i.a9)(Be.yy["viewport/mobile"]),(0,i.a9)(Be.yy["viewport/ultrawide"]),(0,i.a9)(Be.yy["viewport/mobile-landscape"]),(0,i.a9)(Be.yy["viewport/laptop"]),(0,i.a9)(Be.yy["viewport/tablet"])),maxWidth:(0,i.Rx)(),isDefault:(0,i.jt)((0,i.O7)()),isDisabled:(0,i.jt)((0,i.O7)())});var We=Object.freeze(new class{constructor(){(0,n.Z)(this,"validate",(e=>{const t=Ge.runWithException(JSON.parse(JSON.stringify(e)));return(e=>{const t=Object.keys(e.pages.byId||{}),o=Object.keys(e.components.byId||{}),n=[...t,...o].filter((t=>{var o,n;return!(0,s.Z)(t)||!(0,s.Z)((null===(o=e.pages.byId[t])||void 0===o?void 0:o.id)||(null===(n=e.components.byId[t])||void 0===n?void 0:n.id))}));if(n.length>0)throw new a(`Invalid Page/Component ids ${JSON.stringify(n,null,2)}`);Object.values(e.pages.byId||{}).map((e=>{Object.keys(null===e||void 0===e?void 0:e.usedComponents).length>0&&Object.keys(e.usedComponents).forEach((t=>{if(!(0,s.Z)(t))throw new a(`ComponentId in ${e.id} is not a valid uuid`);if(!o.includes(t))throw new a(`Component ${t} in ${e.title} is missing from the snapshot`);if(e.usedComponents[t]<1||!e.usedComponents[t]||void 0===!e.usedComponents[t])throw new a(`Component ${t} is referred ${e.usedComponents[t]} times which is invalid`)}))}))})(t),t}))}})},31768:function(e,t,o){o.d(t,{P:function(){return O}});var n=o(92809),s=o(91164),i=o(65988),r=o(67294),a=o(77729),l=o(71023);const c=e=>"object"===typeof e&&("component"in e&&"searchKey"in e&&"id"in e),d=e=>"object"===typeof e&&("value"in e&&"label"in e),p=e=>"color"===e.type?(0,l.MU)(e):e.name;var u=o(27709),h=o(65989);const y=[`.autocomplete-wrapper.jsx-1754366954{position:absolute;min-width:100px;background:${h.Pt.DEFAULT};border:0.5px solid ${h.Pt.LIGHT_01};z-index:${h.kg.ONEHUNDRED};cursor:auto;}`,".autocomplete-list.jsx-1754366954{max-height:270px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;overflow-x:hidden;overflow-y:auto;}",`.autocomplete-option.jsx-1754366954{padding:${h.N_.HALF_UNIT} ${h.N_.UNIT};display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-align-items:flex-end;-webkit-box-align:flex-end;-ms-flex-align:flex-end;align-items:flex-end;white-space:nowrap;color:${h.bo.DEFAULT};-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;-webkit-flex-basis:auto;-ms-flex-preferred-size:auto;flex-basis:auto;}`,".autocomplete-option.jsx-1754366954 span.jsx-1754366954{overflow:hidden;}",`.autocomplete-option.jsx-1754366954:hover{background:${h.Pt.LIGHT_01};}`,`.autocomplete-selected-option.jsx-1754366954,.autocomplete-selected-option.jsx-1754366954:hover{background:${h.Pt.LIGHT_02};}`,`.autocomplete-option-match.jsx-1754366954{color:${h.bo.HIGHLIGHT};}`,`.option-text.jsx-1754366954{max-width:100px;text-overflow:ellipsis;margin-right:${h.N_.TWO_UNITS};}`,`.color-token-representation.jsx-1754366954{width:${h.N_.TWO_UNITS};height:${h.N_.TWO_UNITS};margin-left:auto;border-radius:50%;}`,`.layout-token-value.jsx-1754366954{margin-left:auto;color:${h.bo.INACTIVE};font-size:${h.um.INFO};}`,".divider-li.jsx-1754366954{height:9px;}",`.divider.jsx-1754366954{height:1px;background-color:${h.Pt.LIGHT_02};color:transparent;margin:${h.N_.HALF_UNIT} 0px;}`];y.__hash="1754366954";var m=o(85893);function f(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function b(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?f(Object(o),!0).forEach((function(t){(0,n.Z)(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):f(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}const g=["space","size","radius"],I=e=>{const{selectedOptionIndex:t,nodeRef:o,handleOptionSelected:n,fixedBottomOption:s,matchingOptions:a,value:l,showAllOptions:u,tokensListDividerIdx:f,fluidOptions:I}=e,v=(0,r.createRef)(),j=I?{width:"100%"}:{},{0:N,1:x}=(0,r.useState)({transform:"translateY(0)",visibility:"hidden"});(0,r.useEffect)((()=>{if(!v||!v.current)return;const e=((e,t)=>{if(!e||!e.current||!t||!t.current)return;const o=e.current.getBoundingClientRect(),n=t.current.getBoundingClientRect(),s={};o.height+n.y>document.body.clientHeight-20&&(s.bottom=20),o.width+n.x>document.body.clientWidth-20&&(s.right=0);const i=t.current.closest(".inspector"),r=t.current.closest(".edit-class-panel"),a=t.current.closest(".tokens-panel-container");if(i&&!r&&!a){const e=n.x+n.width,t=document.body.clientWidth-256;e-o.width<t&&(s.left=t-n.x,delete s.right)}return s})(v,o);return x(b(b({},e),{},{visibility:"visible"})),()=>{x({transform:"translateY(0)",visibility:"hidden"})}}),[a]);const S=(0,r.useCallback)((e=>(0,m.jsxs)("span",{className:`jsx-${y.__hash} layout-token-value`,children:[null===e||void 0===e?void 0:e.substring(0,8),(0,m.jsx)(i.default,{id:y.__hash,children:y})]})),[]),w=(0,r.useCallback)((e=>(0,m.jsx)("div",{style:{backgroundColor:`${e}`},className:`jsx-${y.__hash} color-token-representation`,children:(0,m.jsx)(i.default,{id:y.__hash,children:y})})),[]),O=(0,r.useCallback)(((e,t)=>{if(!t||u)return e;const o=e.toLowerCase().indexOf(String(t).toLowerCase()),n=e.toLowerCase().indexOf(String(t).toLowerCase())+String(t).length;return(0,m.jsxs)("span",{className:i.default.dynamic([["1086063752",[h.bo.HIGHLIGHT]]]),children:[e.slice(0,o),(0,m.jsx)("span",{className:i.default.dynamic([["1086063752",[h.bo.HIGHLIGHT]]])+" autocomplete-option-match",children:e.slice(o,n)}),e.slice(n),(0,m.jsx)(i.default,{id:"1086063752",dynamic:[h.bo.HIGHLIGHT],children:[`.autocomplete-option-match.__jsx-style-dynamic-selector{color:${h.bo.HIGHLIGHT};}`]})]})}),[]);return(0,m.jsxs)("div",{style:b(b({},N),j),ref:v,className:`jsx-${y.__hash} autocomplete-wrapper`,children:[(0,m.jsx)("ul",{className:`jsx-${y.__hash} autocomplete-list`,children:null===a||void 0===a?void 0:a.map(((o,s)=>{if("string"===typeof o)return(0,m.jsxs)(r.Fragment,{children:[s===f&&(0,m.jsx)("div",{className:`jsx-${y.__hash} divider`,children:"'"}),(0,m.jsx)("li",{onMouseDown:n,"data-option-value":o,className:`jsx-${y.__hash} autocomplete-option ${s===t?"autocomplete-selected-option":null}\n              `,children:O(o,l)})]},s);if(d(o)){const i=o,a=e.appendOptionString?`${e.appendOptionString}${i.label}`:i.label;return(0,m.jsx)(r.Fragment,{children:(0,m.jsxs)("li",{onMouseDown:e=>n(e,a),"data-option-value":a,className:`jsx-${y.__hash} autocomplete-option\n                    ${s===t?"autocomplete-selected-option":null}\n                  `,children:[(0,m.jsx)("span",{className:`jsx-${y.__hash} option-text`,children:a}),i.value?i.isValueColor?w(i.value):S(i.value):null]})},a)}if(c(o)){const e=o;return(0,m.jsxs)(r.Fragment,{children:[e.topDivider&&0!==s&&(0,m.jsx)("li",{className:`jsx-${y.__hash} divider-li`,children:(0,m.jsx)("div",{className:`jsx-${y.__hash} divider`})}),(0,m.jsx)("li",{"data-option-value":e.id,"data-tooltip-name":e.searchKey,onMouseDown:t=>n(t,e.id),className:`jsx-${y.__hash} autocomplete-option ${s===t?"autocomplete-selected-option":null}`,children:e.component}),e.bottomDivider&&s!==a.length-1&&(0,m.jsx)("li",{className:`jsx-${y.__hash} divider-li`,children:(0,m.jsx)("div",{className:`jsx-${y.__hash} divider`})})]},s)}const i=o;return(0,m.jsxs)(r.Fragment,{children:[s===f&&(0,m.jsx)("div",{className:`jsx-${y.__hash} divider`}),(0,m.jsxs)("li",{onMouseDown:e=>n(e,i.id),"data-option-value":p(i),"data-tooltip-name":i.value,className:`jsx-${y.__hash} autocomplete-option\n                  ${s===t?"autocomplete-selected-option":null}\n                `,children:[(0,m.jsx)("span",{className:`jsx-${y.__hash} option-text`,children:O(p(i),l)}),"color"===i.type&&w(i.value),-1!==g.indexOf(i.type)&&S(i.value)]})]},s)}))}),s&&(0,m.jsx)(m.Fragment,{children:s}),(0,m.jsx)(i.default,{id:y.__hash,children:y})]})};I.defaultProps={matchingOptions:[]};var v=o(26545),j=o(91296),N=o.n(j);const x=["value","placeholder","onChange","options","onBlur","onFocus","onKeyDown","selectOnFocus","onSelectValue","fluidOptions","disableDrag","fixedBottomOption","disableShowOptionsOnEmptyValue","appendOptionString"];function S(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function w(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?S(Object(o),!0).forEach((function(t){(0,n.Z)(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):S(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}const O=(0,r.forwardRef)(((e,t)=>{const{value:o,placeholder:n,onChange:l,options:h=[],onBlur:y,onFocus:f,onKeyDown:b,selectOnFocus:g,onSelectValue:j,fluidOptions:S,disableDrag:O,fixedBottomOption:T,disableShowOptionsOnEmptyValue:_,appendOptionString:E}=e,D=(0,s.Z)(e,x),F=t||(0,r.createRef)(),C=(0,r.createRef)(),{0:A,1:k}=(0,r.useState)(!1),{0:P,1:U}=(0,r.useState)(!1),{0:L,1:Z}=(0,r.useState)(-1),{0:R,1:M}=(0,r.useState)(!1),{0:H,1:$}=(0,r.useState)([]),{0:B,1:G}=(0,r.useState)(-1);(0,v.O)(C,V),(0,r.useEffect)((()=>{if(H.length>0){if(M(!0),"string"!==typeof H[0])return void Z(H.findIndex((e=>"string"===typeof e)));if("string"===typeof H[0])return void Z(H.findIndex((e=>"string"!==typeof e)))}0===H.length&&(Z(-1),M(!1))}),[H]);const z=(0,r.useCallback)(N()((async()=>{let t=[];if(e.workerService)t=await e.workerService.handleAutocompleteOptions(h,String(o),e.appendOptionString,e.excludeOptions);else{t=((e,t)=>e.sort(((e,o)=>{let n=0;n="string"===typeof e?t.length/e.length:c(e)?t.length/e.searchKey.length:d(e)?t.length/e.label.length:t.length/`${e.categoryName}-${e.name}`.length;let s=0;return s="string"===typeof o?t.length/o.length:c(o)?t.length/o.searchKey.length:d(e)?t.length/o.label.length:t.length/`${o.categoryName}-${o.name}`.length,s-n})).sort(((e,o)=>{if("string"===typeof e&&"string"===typeof o)return e.indexOf(t)-o.indexOf(t);if(c(e)&&c(o)){const n=o;return e.searchKey.indexOf(t)-n.searchKey.indexOf(t)}if(d(e)&&d(o)){const n=o;return e.label.indexOf(t)-n.label.indexOf(t)}{const n=e,s=o;return`${n.categoryName}-${n.name}`.indexOf(t)-`${s.categoryName}-${s.name}`.indexOf(t)}})))(null===h||void 0===h?void 0:h.filter((e=>"string"===typeof e?e.toLowerCase().includes(String(o).toLowerCase()):c(e)?e.searchKey.toLowerCase().includes(String(o).toLowerCase()):p(e).toLowerCase().includes(String(o).toLowerCase()))),String(o))}o!==t[0]||1!==t.length?(isNaN(o)&&G(o?0:-1),$(t)):$([])}),500),[o,h,E]);(0,r.useEffect)((()=>{if(!A||_&&!o)return $([]),void G(-1);P?$(h):z()}),[h,o,P,A,E,_]),(0,r.useEffect)((()=>()=>{z.cancel()}),[z]);const W=e=>{const t=H[e],o=X(t),n=document.querySelector(`[data-option-value='${o}']`);n&&n.scrollIntoView({block:"nearest",inline:"start"})};function V(){M(!1),$([])}const K=()=>{F&&F.current&&F.current.blur()},J=e=>c(e)||"object"===typeof e?e.id:void 0,X=(0,r.useCallback)((t=>{if("string"===typeof t)return t;if(d(t))return e.appendOptionString?`${e.appendOptionString}${t.label}`:t.label;if(c(t))return t.id;if("object"===typeof t){return t.name}return""}),[e.appendOptionString]),Y=(0,r.useCallback)((e=>{P&&U(!1),l(e)}),[P,l]);return(0,m.jsxs)("div",{ref:C,className:"jsx-108338622",children:[(0,m.jsx)(u.S,w(w({},D),{},{ref:F,value:o||"",disableDrag:O,placeholder:n,onChange:Y,onKeyDown:e=>{if(!e.shiftKey&&(e.keyCode!==a.sd.KEY_CODE.TAB||R))if(e.keyCode!==a.sd.KEY_CODE.ESC){if(e.keyCode===a.sd.KEY_CODE.ENTER||e.keyCode===a.sd.KEY_CODE.TAB){if(R){const t=H[B];if(!t){if(e.keyCode===a.sd.KEY_CODE.TAB)return;return void K()}const o=X(t);return j&&j(o,!0,J(t)),K(),e.preventDefault(),void e.stopPropagation()}!R&&o&&(j&&j(null===o||void 0===o?void 0:o.toString(),!0),K(),e.preventDefault(),e.stopPropagation())}if(e.keyCode===a.sd.KEY_CODE.ARROW_RIGHT&&R){const e=H[B];if(!e)return;const t=X(e);j&&j(t,!0,J(e))}else{if(e.keyCode===a.sd.KEY_CODE.ARROW_UP&&R){let e=B-1;e<0&&(e=(null===H||void 0===H?void 0:H.length)-1),G(e),W(e)}if(e.keyCode===a.sd.KEY_CODE.ARROW_DOWN&&R){let e=B+1;e===(null===H||void 0===H?void 0:H.length)&&(e=0),G(e),W(e)}b&&b(e)}}else R?V():K()},onBlur:e=>{var t,o;const n=null===e||void 0===e||null===(t=e.relatedTarget)||void 0===t?void 0:t.classList.contains("pt-btn"),s=null===(o=e.relatedTarget)||void 0===o?void 0:o.dataset.actionName;n&&!s||(k(!1),U(!1)),y&&y(e)},onFocus:e=>{g&&e.currentTarget.select(),k(!0),_||U(!0),f&&f(e)}})),R&&(0,m.jsx)(I,{fluidOptions:S,value:o,matchingOptions:H,showAllOptions:P,selectedOptionIndex:B,nodeRef:F,fixedBottomOption:T,tokensListDividerIdx:L,handleOptionSelected:(e,t)=>{const o=e.currentTarget.getAttribute("data-option-value");j&&j(o,!0,t),K(),e.preventDefault()},appendOptionString:e.appendOptionString}),(0,m.jsx)(i.default,{id:"108338622",children:["div.jsx-108338622{position:relative;max-width:100%;}"]})]})}));O.defaultProps={options:[],selectOnFocus:!0}},108:function(e,t,o){o.d(t,{W:function(){return d}});var n=o(65988);o(67294);const s=[".pt-form-field.jsx-64331365{width:100%;}",".label-group.jsx-64331365{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;width:100%;}",".info-tooltip-icon.jsx-64331365{display:none;cursor:pointer;height:16px;}",".pt-form-field.jsx-64331365:hover .info-tooltip-icon.jsx-64331365{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}"];s.__hash="64331365";var i=o(21908),r=o(27709),a=o(60408),l=o(6566),c=o(85893);const d=({type:e,size:t="flexible",value:o,label:d,style:p="line",placeholder:u,tooltipName:h,tooltipContent:y,onChange:m,onBlur:f,onKeyDown:b,refAttrs:g,validationMessage:I,isDisabled:v})=>(0,c.jsxs)("div",{className:`jsx-${s.__hash} pt-form-field`,children:[(0,c.jsxs)(l.K,{gap:"half",children:[(0,c.jsxs)("div",{className:`jsx-${s.__hash} label-group`,children:[d&&(0,c.jsx)("label",{className:`jsx-${s.__hash}`,children:d}),h&&(0,c.jsx)("span",{className:`jsx-${s.__hash} info-tooltip-icon`,children:(0,c.jsx)(a.s,{tooltipName:h,tooltipContent:y||h})})]}),"textinput"===e&&(0,c.jsx)(r.S,{isDisabled:v,size:t,style:p,value:o,onChange:m,onBlur:f,placeholder:u,onKeyDown:b,refAttrs:g,validationMessage:I}),I&&(0,c.jsx)(i.B,{title:I,message:I})]}),(0,c.jsx)(n.default,{id:s.__hash,children:s})]})},94433:function(e,t,o){o.d(t,{c:function(){return h}});var n=o(65988),s=o(67294),i=o(10440),r=o(65989);const a="thq-panel-section",l=(e,t)=>(0,i.x8)(a,e.isCollapsable&&"collapsable",t&&"collapsed",e.editableTitle&&"headingEditable",e.isHeaderClickable&&"headerClickable"),c=[`.section-header.jsx-377976256{background-color:transparent;font-weight:${r.Xw.MEDIUM_500};padding:0 ${r.N_.ONE_AND_HALF};height:${r.N_.SIX_UNITS};display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-transition:${r.OK.FADE};transition:${r.OK.FADE};outline:none;width:100%;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}`,`.${a}.jsx-377976256:not(.collapsable) .section-header.jsx-377976256{padding-right:${r.N_.UNIT};}`,`.${a}.collapsable.jsx-377976256 .section-header.jsx-377976256:hover{background-color:${r.Pt.DEFAULT};color:${r.bo.HIGHLIGHT};}`,`.${a}.headingEditable.jsx-377976256{border-bottom:1px solid #454545;}`,`.headerClickable.jsx-377976256 .section-header.jsx-377976256:hover{background-color:${r.Pt.DEFAULT};color:${r.bo.HIGHLIGHT};}`,`.headerClickable.jsx-377976256 .section-header.jsx-377976256 .pt-btn{color:${r.bo.INACTIVE};}`,`.headerClickable.jsx-377976256 .section-header.jsx-377976256:hover .pt-btn{color:${r.bo.DEFAULT};}`,`.expand-icon.jsx-377976256{height:12px;-webkit-transform:rotate(0deg);-ms-transform:rotate(0deg);transform:rotate(0deg);-webkit-transform-origin:50% 50%;-ms-transform-origin:50% 50%;transform-origin:50% 50%;-webkit-transition:${r.OK.MOVE};transition:${r.OK.MOVE};color:${r.bo.DEFAULT};margin-left:${r.N_.UNIT};}`,`.${a}.collapsable.jsx-377976256 .section-header.jsx-377976256:hover .expand-icon.jsx-377976256{color:${r.bo.HIGHLIGHT};}`,`.${a}.collapsed.jsx-377976256 .expand-icon.jsx-377976256{-webkit-transform:rotate(90deg);-ms-transform:rotate(90deg);transform:rotate(90deg);}`,".panel-title-container.jsx-377976256{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;width:95%;}",`.panel-title.jsx-377976256{max-width:80%;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;margin-right:${r.N_.UNIT};text-transform:capitalize;}`,".section-content.jsx-377976256{display:inherit;padding:0;}",`.section-content.regular.jsx-377976256{padding:${r.N_.UNIT} ${r.N_.ONE_AND_HALF};}`,`.${a}.collapsed.jsx-377976256 .section-content.jsx-377976256{display:none;}`,`.active.jsx-377976256{color:${r.X4.DEFAULT};}`];c.__hash="377976256";var d=o(92763),p=o(6566),u=o(85893);const h=e=>{const{title:t,titleOverrideColor:o,isCollapsable:i,addon:a,isClosedByDefault:h=!1,contentPadding:y="regular",contentGap:m="two",actionActive:f=!1,tooltip:b}=e,{0:g,1:I}=(0,s.useState)(h);(0,s.useEffect)((()=>{I(e.isClosedByDefault||!1)}),[e.isClosedByDefault]);let v=!1;s.Children.forEach(e.children,(e=>{e&&(v=!0)}));const j=t=>{var o;t.preventDefault(),null===(o=e.onTitleClick)||void 0===o||o.call(e)};return(0,u.jsxs)("div",{"data-section-title":"string"===typeof t?t:null,className:`jsx-${c.__hash} `+n.default.dynamic([["1238270888",[o||r.bo.DEFAULT,o||r.bo.INACTIVE,o||r.bo.HIGHLIGHT]]])+" "+(l(e,g)||""),children:[i?(0,u.jsxs)("div",{onClick:()=>I(!g),"data-tooltip-name":b,className:`jsx-${c.__hash} `+n.default.dynamic([["1238270888",[o||r.bo.DEFAULT,o||r.bo.INACTIVE,o||r.bo.HIGHLIGHT]]])+" section-header",children:[(0,u.jsxs)("div",{className:`jsx-${c.__hash} `+n.default.dynamic([["1238270888",[o||r.bo.DEFAULT,o||r.bo.INACTIVE,o||r.bo.HIGHLIGHT]]])+" panel-title-container",children:[(0,u.jsx)("span",{onClick:j,className:`jsx-${c.__hash} `+n.default.dynamic([["1238270888",[o||r.bo.DEFAULT,o||r.bo.INACTIVE,o||r.bo.HIGHLIGHT]]])+" panel-title "+(f?"active":""),children:t}),b&&(0,u.jsx)(d.J,{type:"info",size:12})]}),(0,u.jsx)("div",{className:`jsx-${c.__hash} `+n.default.dynamic([["1238270888",[o||r.bo.DEFAULT,o||r.bo.INACTIVE,o||r.bo.HIGHLIGHT]]])+" addon-container",children:a}),(0,u.jsx)("span",{className:`jsx-${c.__hash} `+n.default.dynamic([["1238270888",[o||r.bo.DEFAULT,o||r.bo.INACTIVE,o||r.bo.HIGHLIGHT]]])+" expand-icon",children:(0,u.jsx)(d.J,{size:12,type:"expand"})})]}):t?(0,u.jsxs)("div",{onClick:()=>{var t;e.isHeaderClickable&&(null===(t=e.onHeaderClick)||void 0===t||t.call(e))},"data-tooltip-name":b,className:`jsx-${c.__hash} `+n.default.dynamic([["1238270888",[o||r.bo.DEFAULT,o||r.bo.INACTIVE,o||r.bo.HIGHLIGHT]]])+" section-header",children:[(0,u.jsx)("span",{onClick:j,"data-tooltip-name":b,className:`jsx-${c.__hash} `+n.default.dynamic([["1238270888",[o||r.bo.DEFAULT,o||r.bo.INACTIVE,o||r.bo.HIGHLIGHT]]])+" panel-title "+(f?"active":""),children:t}),(0,u.jsx)("div",{className:`jsx-${c.__hash} `+n.default.dynamic([["1238270888",[o||r.bo.DEFAULT,o||r.bo.INACTIVE,o||r.bo.HIGHLIGHT]]])+" addon-container",children:a})]}):null,v&&(0,u.jsx)("div",{className:`jsx-${c.__hash} `+n.default.dynamic([["1238270888",[o||r.bo.DEFAULT,o||r.bo.INACTIVE,o||r.bo.HIGHLIGHT]]])+" "+`section-content ${y}`,children:(0,u.jsx)(p.K,{gap:m,children:e.children})}),(0,u.jsx)(n.default,{id:"1238270888",dynamic:[o||r.bo.DEFAULT,o||r.bo.INACTIVE,o||r.bo.HIGHLIGHT],children:[`.section-header.__jsx-style-dynamic-selector{color:${o||r.bo.DEFAULT};}`,`.headerClickable.__jsx-style-dynamic-selector .section-header.__jsx-style-dynamic-selector{color:${o||r.bo.INACTIVE};}`,`.headerClickable.__jsx-style-dynamic-selector .section-header.__jsx-style-dynamic-selector:hover{color:${o||r.bo.HIGHLIGHT};}`]}),(0,u.jsx)(n.default,{id:c.__hash,children:c})]})};h.defaultProps={isCollapsable:!1,editableTitle:!1,isClosedByDefault:!1,contentPadding:"regular",contentGap:"two"}},35155:function(e,t,o){o.d(t,{s:function(){return h}});var n=o(92809),s=o(65988),i=(o(67294),o(10440)),r=o(65989);const a="thq-panel",l=e=>(0,i.x8)(a,e.withSeparators&&"separators"),c=[`.thq-panel.jsx-3726316738{width:100%;height:100%;overflow-y:auto;overflow-x:hidden;background-color:${r.Pt.DARK_01};display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}`,`.thq-panel.jsx-3726316738 .panel-header.jsx-3726316738{padding:0 ${r.N_.UNIT} 0 ${r.N_.ONE_AND_HALF};height:${r.N_.SIX_UNITS};display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;font-size:${r.um.HEADING};text-transform:capitalize;color:${r.bo.DEFAULT};font-weight:${r.Xw.MEDIUM_500};}`,".thq-panel.jsx-3726316738 .panel-content.jsx-3726316738{-webkit-flex:1 1 0;-ms-flex:1 1 0;flex:1 1 0;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;overflow:auto;}",`.thq-panel.separators.jsx-3726316738 .panel-content.jsx-3726316738>* + * > .section-header{border-top:1px solid ${r.GC.LIGHT};}`,".panel-title.jsx-3726316738{max-width:85%;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;}"];c.__hash="3726316738";var d=o(85893);function p(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function u(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?p(Object(o),!0).forEach((function(t){(0,n.Z)(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):p(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}const h=e=>{const{title:t,addon:o,dataAttrs:n,underTitle:i}=e;return(0,d.jsxs)("div",u(u({},n),{},{className:`jsx-${c.__hash} `+(n&&null!=n.className&&n.className||l(e)||""),children:[t&&(0,d.jsxs)("div",{className:`jsx-${c.__hash} panel-header`,children:[(0,d.jsx)("span",{className:`jsx-${c.__hash} panel-title`,children:t})," ",o]}),i&&i,(0,d.jsx)("div",{className:`jsx-${c.__hash} panel-content`,children:e.children}),(0,d.jsx)(s.default,{id:c.__hash,children:c})]}))};h.defaultProps={withSeparators:!0}},37659:function(e,t,o){o.d(t,{p:function(){return m}});var n=o(92809),s=o(65988),i=o(65989),r=o(67294),a=o(92763),l=o(10440);const c="thq-select-list-item",d=e=>(0,l.x8)(c,e.selected&&"selected",e.buttonPadding),p=[`.${c}.jsx-3473087763{display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;position:relative;}`,`.${c}.jsx-3473087763 button.jsx-3473087763{-webkit-flex:1;-ms-flex:1;flex:1;display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;max-height:32px;border-width:1px;border-color:transparent;border-radius:${i.n_.DEFAULT};padding:${i.N_.UNIT};background:transparent;color:${i.bo.INFO};text-align:left;overflow:hidden;outline:none;-webkit-transition:all ${i.OK.FADE};transition:all ${i.OK.FADE};}`,`.${c}.sm.jsx-3473087763 button.jsx-3473087763{padding:${i.N_.UNIT} ${i.N_.HALF_UNIT};}`,`.${c}.md.jsx-3473087763 button.jsx-3473087763{padding:${i.N_.UNIT};}`,`.${c}.lg.jsx-3473087763 button.jsx-3473087763{padding:${i.N_.UNIT} ${i.N_.TWO_UNITS};}`,`.${c}.xl.jsx-3473087763 button.jsx-3473087763{padding:${i.N_.UNIT} ${i.N_.THREE_UNITS};}`,`.${c}.jsx-3473087763 button.jsx-3473087763:hover{border:1px solid ${i.Pt.LIGHT_02};color:${i.bo.HIGHLIGHT};}`,`.${c}.selected.jsx-3473087763 button.jsx-3473087763{color:${i.bo.HIGHLIGHT};background-color:${i.Pt.DEFAULT};}`,`.${c}.jsx-3473087763 .label.jsx-3473087763{overflow:hidden;white-space:nowrap;text-overflow:ellipsis;margin-left:${i.N_.UNIT};margin-right:${i.N_.UNIT};}`,`.icon-before-container.jsx-3473087763{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin-right:${i.N_.UNIT};min-width:${i.N_.ONE_AND_HALF};width:${i.N_.ONE_AND_HALF};height:${i.N_.ONE_AND_HALF};-webkit-align-self:end;-ms-flex-item-align:end;align-self:end;}`];p.__hash="3473087763";var u=o(85893);function h(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function y(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?h(Object(o),!0).forEach((function(t){(0,n.Z)(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):h(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}const m=r.forwardRef(((e,t)=>{const{refAttrs:o,dataAttrs:n,itemId:r,label:l,children:c,selected:h,displayChecked:m=!0,className:f,onMouseEnter:b,onMouseLeave:g}=e;return(0,u.jsxs)("li",y(y(y({"data-item-id":r},o),n),{},{ref:t,className:`jsx-${p.__hash} `+(d(e)||""),children:[(0,u.jsxs)("button",{tabIndex:0,onMouseEnter:b,onMouseLeave:g,className:`jsx-${p.__hash} `+(f||""),children:[m?(0,u.jsx)("div",{className:`jsx-${p.__hash} icon-before-container`,children:h&&m&&(0,u.jsx)(a.J,{type:"checkmark",size:12,color:`${i.bo.HIGHLIGHT}`})}):null,l?(0,u.jsx)("span",{className:`jsx-${p.__hash} label`,children:l}):null," ",c]}),(0,u.jsx)(s.default,{id:p.__hash,children:p})]}))}))},49616:function(e,t,o){o.d(t,{E:function(){return y}});var n=o(92809),s=o(65988),i=o(67294),r=o(10440),a=o(65989);const l="thq-select-list",c=e=>(0,r.x8)(l,e.noPadding&&"no-padding"),d=[`.${l}.jsx-281002501{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-flow:column;-ms-flex-flow:column;flex-flow:column;width:100%;padding:0 ${a.N_.UNIT};outline:none;}`,`.${l}.no-padding.jsx-281002501{padding:0;}`];d.__hash="281002501";var p=o(85893);function u(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function h(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?u(Object(o),!0).forEach((function(t){(0,n.Z)(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):u(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}const y=i.forwardRef(((e,t)=>{const{refAttrs:o,dataAttrs:n,children:r,onSelect:a,onDoubleClick:l,onContextMenu:u,onMouseOut:y,onMouseOver:m}=e,f=e=>{const t=e.target.closest("[data-item-id]");if(!t)return null;const o=t.dataset.itemId;return o||null},b=i.useCallback((e=>{const t=f(e);t&&(e.target.closest("[disabled]")||null===a||void 0===a||a(t,e))}),[a]),g=i.useCallback((e=>{const t=f(e);t&&(null===l||void 0===l||l(t))}),[l]),I=i.useCallback((e=>{const t=f(e);t&&u&&(e.preventDefault(),e.stopPropagation(),u(t,e))}),[u]),v=i.useCallback((e=>{const t=f(e);if(!t)return;const o=e.target.closest("[data-item-id]");if(!o)return;const n=o.children[0].classList.contains("letPropagate");m&&(e.preventDefault(),n||e.stopPropagation(),m(t))}),[m]),j=i.useCallback((e=>{const t=f(e);t&&y&&(e.preventDefault(),e.stopPropagation(),y(t))}),[y]);return(0,p.jsxs)("ul",h(h(h({ref:t},o),n),{},{tabIndex:0,onClick:b,onDoubleClick:g,onContextMenu:I,onMouseOver:v,onMouseOut:j,className:`jsx-${d.__hash} `+(c(e)||""),children:[r,(0,p.jsx)(s.default,{id:d.__hash,children:d})]}))}))},41666:function(e,t,o){o.d(t,{r:function(){return d}});var n=o(65988),s=o(67294),i=o(65989),r=o(10440);const a="pt-switch",l=[".pt-switch.jsx-1893063428{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}",".pt-switch.jsx-1893063428 .toggle.jsx-1893063428{position:relative;display:inline-block;width:30px;height:16px;}",`.pt-switch.jsx-1893063428 .label-text.jsx-1893063428{padding:0px ${i.N_.HALF_UNIT};color:${i.bo.DEFAULT};-webkit-transition:${i.OK.FADE};transition:${i.OK.FADE};}`,`.pt-switch.jsx-1893063428 .label-text.paddingRight.jsx-1893063428{padding:0px ${i.N_.UNIT} 0px 0px;}`,`.pt-switch.jsx-1893063428 .label-text.inactive.jsx-1893063428{color:${i.bo.INACTIVE};}`,`.pt-switch.jsx-1893063428:hover .label-text.jsx-1893063428{color:${i.bo.HIGHLIGHT};}`,".pt-switch.jsx-1893063428 .checkbox.jsx-1893063428{opacity:0;width:0;height:0;}",`.pt-switch.jsx-1893063428 .slider.jsx-1893063428{position:absolute;top:0;left:0;right:0;bottom:0;background-color:${i.Pt.LIGHT_02};-webkit-transition:${i.OK.FADE};transition:${i.OK.FADE};border-radius:16px;}`,`.pt-switch.jsx-1893063428:hover .slider.jsx-1893063428:before{background-color:${i.bo.HIGHLIGHT};}`,`.pt-switch.jsx-1893063428:hover .checkbox.jsx-1893063428:checked+.slider.jsx-1893063428{background-color:${i.X4.LIGHT_01};}`,`.pt-switch.jsx-1893063428:hover .checkbox.jsx-1893063428:disabled+.slider.jsx-1893063428{background-color:${i.Pt.LIGHT_02};}`,`[data-whatintent='keyboard'] .pt-switch.jsx-1893063428 .checkbox.jsx-1893063428:focus+.slider.jsx-1893063428{box-shadow:${i.E6.OUTLINE};}`,`.pt-switch.jsx-1893063428 .slider.jsx-1893063428:before{position:absolute;content:'';height:12px;width:12px;top:2px;left:2px;background-color:${i.bo.INFO};-webkit-transition:${i.OK.MOVE};transition:${i.OK.MOVE};border-radius:50%;}`,`.pt-switch.jsx-1893063428 .checkbox.jsx-1893063428:checked+.slider.jsx-1893063428{background-color:${i.X4.DEFAULT};}`,`.pt-switch.jsx-1893063428 .checkbox.jsx-1893063428:disabled+.slider.jsx-1893063428{background-color:${i.Pt.LIGHT_02};}`,`.pt-switch.jsx-1893063428 .checkbox.jsx-1893063428:checked+.slider.jsx-1893063428:before{background-color:${i.bo.HIGHLIGHT};}`,".pt-switch.jsx-1893063428 .checkbox.jsx-1893063428:checked+.slider.jsx-1893063428:before{-webkit-transform:translateX(15px);-ms-transform:translateX(15px);transform:translateX(15px);}",`.pt-switch.jsx-1893063428 .checkbox.jsx-1893063428:disabled+.slider.jsx-1893063428:before{background-color:${i.bo.HIGHLIGHT};}`,`body.light-theme .pt-switch.jsx-1893063428 .slider.jsx-1893063428{background:${i.Pt.DEFAULT};}`,`body.light-theme .pt-switch.jsx-1893063428 .slider.jsx-1893063428:before,body.light-theme .pt-switch.jsx-1893063428 .checkbox.jsx-1893063428:checked+.slider.jsx-1893063428:before{background:${i.Pt.DARK_01};}`,`.pt-switch.jsx-1893063428 .label-text-left.jsx-1893063428{margin-right:${i.N_.TWO_UNITS};}`,`.pt-switch.jsx-1893063428 .label-text-right.jsx-1893063428{margin-left:${i.N_.TWO_UNITS};}`];l.__hash="1893063428";var c=o(85893);const d=s.forwardRef(((e,t)=>{const{value:o,defaultValue:i,labelPosition:d,label:p,onChange:u,disabled:h}=e,{0:y,1:m}=(0,s.useState)(i),f=(0,s.useCallback)((e=>{m(e.target.checked),u&&u(e)}),[u]);return(0,c.jsxs)("label",{className:`jsx-${l.__hash} `+((0,r.x8)(a)||""),children:[p&&"object"!==typeof p&&"before"===d&&(0,c.jsx)("span",{className:`jsx-${l.__hash} label-text ${e.padding} ${e.textColor}`,children:p}),Array.isArray(p)&&(0,c.jsx)("span",{className:`jsx-${l.__hash} label-text-left`,children:p[0]}),(0,c.jsxs)("span",{className:`jsx-${l.__hash} toggle`,children:[(0,c.jsx)("input",{ref:t,type:"checkbox",disabled:h,onChange:f,checked:null!==o&&void 0!==o?o:y,className:`jsx-${l.__hash} checkbox`}),(0,c.jsx)("span",{className:`jsx-${l.__hash} slider`})]}),Array.isArray(p)&&(0,c.jsx)("span",{className:`jsx-${l.__hash} label-text-right`,children:p[1]}),p&&"object"!==typeof p&&"after"===d&&(0,c.jsx)("span",{className:`jsx-${l.__hash} label-text ${e.padding} ${e.textColor}`,children:p}),(0,c.jsx)(n.default,{id:l.__hash,children:l})]})}));d.defaultProps={defaultValue:!1,labelPosition:"before"}}}]);
